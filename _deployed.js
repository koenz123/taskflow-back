(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function l(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(u){if(u.ep)return;u.ep=!0;const f=l(u);fetch(u.href,f)}})();var Rd={exports:{}},yr={};var pg;function Qk(){if(pg)return yr;pg=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function l(o,u,f){var p=null;if(f!==void 0&&(p=""+f),u.key!==void 0&&(p=""+u.key),"key"in u){f={};for(var m in u)m!=="key"&&(f[m]=u[m])}else f=u;return u=f.ref,{$$typeof:s,type:o,key:p,ref:u!==void 0?u:null,props:f}}return yr.Fragment=a,yr.jsx=l,yr.jsxs=l,yr}var hg;function Zk(){return hg||(hg=1,Rd.exports=Qk()),Rd.exports}var n=Zk(),Md={exports:{}},Qe={};var vg;function Jk(){if(vg)return Qe;vg=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),N=Symbol.iterator;function j(w){return w===null||typeof w!="object"?null:(w=N&&w[N]||w["@@iterator"],typeof w=="function"?w:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,D={};function F(w,V,G){this.props=w,this.context=V,this.refs=D,this.updater=G||C}F.prototype.isReactComponent={},F.prototype.setState=function(w,V){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,V,"setState")},F.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function q(){}q.prototype=F.prototype;function B(w,V,G){this.props=w,this.context=V,this.refs=D,this.updater=G||C}var ae=B.prototype=new q;ae.constructor=B,k(ae,F.prototype),ae.isPureReactComponent=!0;var W=Array.isArray;function X(){}var E={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function O(w,V,G){var ie=G.ref;return{$$typeof:s,type:w,key:V,ref:ie!==void 0?ie:null,props:G}}function le(w,V){return O(w.type,V,w.props)}function se(w){return typeof w=="object"&&w!==null&&w.$$typeof===s}function be(w){var V={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(G){return V[G]})}var Se=/\/+/g;function Ce(w,V){return typeof w=="object"&&w!==null&&w.key!=null?be(""+w.key):V.toString(36)}function ge(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(X,X):(w.status="pending",w.then(function(V){w.status==="pending"&&(w.status="fulfilled",w.value=V)},function(V){w.status==="pending"&&(w.status="rejected",w.reason=V)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function L(w,V,G,ie,ee){var M=typeof w;(M==="undefined"||M==="boolean")&&(w=null);var S=!1;if(w===null)S=!0;else switch(M){case"bigint":case"string":case"number":S=!0;break;case"object":switch(w.$$typeof){case s:case a:S=!0;break;case y:return S=w._init,L(S(w._payload),V,G,ie,ee)}}if(S)return ee=ee(w),S=ie===""?"."+Ce(w,0):ie,W(ee)?(G="",S!=null&&(G=S.replace(Se,"$&/")+"/"),L(ee,V,G,"",function(Ne){return Ne})):ee!=null&&(se(ee)&&(ee=le(ee,G+(ee.key==null||w&&w.key===ee.key?"":(""+ee.key).replace(Se,"$&/")+"/")+S)),V.push(ee)),1;S=0;var ue=ie===""?".":ie+":";if(W(w))for(var ye=0;ye<w.length;ye++)ie=w[ye],M=ue+Ce(ie,ye),S+=L(ie,V,G,M,ee);else if(ye=j(w),typeof ye=="function")for(w=ye.call(w),ye=0;!(ie=w.next()).done;)ie=ie.value,M=ue+Ce(ie,ye++),S+=L(ie,V,G,M,ee);else if(M==="object"){if(typeof w.then=="function")return L(ge(w),V,G,ie,ee);throw V=String(w),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return S}function U(w,V,G){if(w==null)return w;var ie=[],ee=0;return L(w,ie,"","",function(M){return V.call(G,M,ee++)}),ie}function ce(w){if(w._status===-1){var V=w._result;V=V(),V.then(function(G){(w._status===0||w._status===-1)&&(w._status=1,w._result=G)},function(G){(w._status===0||w._status===-1)&&(w._status=2,w._result=G)}),w._status===-1&&(w._status=0,w._result=V)}if(w._status===1)return w._result.default;throw w._result}var Q=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},de={map:U,forEach:function(w,V,G){U(w,function(){V.apply(this,arguments)},G)},count:function(w){var V=0;return U(w,function(){V++}),V},toArray:function(w){return U(w,function(V){return V})||[]},only:function(w){if(!se(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return Qe.Activity=b,Qe.Children=de,Qe.Component=F,Qe.Fragment=l,Qe.Profiler=u,Qe.PureComponent=B,Qe.StrictMode=o,Qe.Suspense=v,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(w){return E.H.useMemoCache(w)}},Qe.cache=function(w){return function(){return w.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(w,V,G){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var ie=k({},w.props),ee=w.key;if(V!=null)for(M in V.key!==void 0&&(ee=""+V.key),V)!A.call(V,M)||M==="key"||M==="__self"||M==="__source"||M==="ref"&&V.ref===void 0||(ie[M]=V[M]);var M=arguments.length-2;if(M===1)ie.children=G;else if(1<M){for(var S=Array(M),ue=0;ue<M;ue++)S[ue]=arguments[ue+2];ie.children=S}return O(w.type,ee,ie)},Qe.createContext=function(w){return w={$$typeof:p,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:f,_context:w},w},Qe.createElement=function(w,V,G){var ie,ee={},M=null;if(V!=null)for(ie in V.key!==void 0&&(M=""+V.key),V)A.call(V,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ee[ie]=V[ie]);var S=arguments.length-2;if(S===1)ee.children=G;else if(1<S){for(var ue=Array(S),ye=0;ye<S;ye++)ue[ye]=arguments[ye+2];ee.children=ue}if(w&&w.defaultProps)for(ie in S=w.defaultProps,S)ee[ie]===void 0&&(ee[ie]=S[ie]);return O(w,M,ee)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(w){return{$$typeof:m,render:w}},Qe.isValidElement=se,Qe.lazy=function(w){return{$$typeof:y,_payload:{_status:-1,_result:w},_init:ce}},Qe.memo=function(w,V){return{$$typeof:x,type:w,compare:V===void 0?null:V}},Qe.startTransition=function(w){var V=E.T,G={};E.T=G;try{var ie=w(),ee=E.S;ee!==null&&ee(G,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(X,Q)}catch(M){Q(M)}finally{V!==null&&G.types!==null&&(V.types=G.types),E.T=V}},Qe.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Qe.use=function(w){return E.H.use(w)},Qe.useActionState=function(w,V,G){return E.H.useActionState(w,V,G)},Qe.useCallback=function(w,V){return E.H.useCallback(w,V)},Qe.useContext=function(w){return E.H.useContext(w)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(w,V){return E.H.useDeferredValue(w,V)},Qe.useEffect=function(w,V){return E.H.useEffect(w,V)},Qe.useEffectEvent=function(w){return E.H.useEffectEvent(w)},Qe.useId=function(){return E.H.useId()},Qe.useImperativeHandle=function(w,V,G){return E.H.useImperativeHandle(w,V,G)},Qe.useInsertionEffect=function(w,V){return E.H.useInsertionEffect(w,V)},Qe.useLayoutEffect=function(w,V){return E.H.useLayoutEffect(w,V)},Qe.useMemo=function(w,V){return E.H.useMemo(w,V)},Qe.useOptimistic=function(w,V){return E.H.useOptimistic(w,V)},Qe.useReducer=function(w,V,G){return E.H.useReducer(w,V,G)},Qe.useRef=function(w){return E.H.useRef(w)},Qe.useState=function(w){return E.H.useState(w)},Qe.useSyncExternalStore=function(w,V,G){return E.H.useSyncExternalStore(w,V,G)},Qe.useTransition=function(){return E.H.useTransition()},Qe.version="19.2.4",Qe}var gg;function im(){return gg||(gg=1,Md.exports=Jk()),Md.exports}var h=im(),Ud={exports:{}},br={},Bd={exports:{}},Ld={};var xg;function e_(){return xg||(xg=1,(function(s){function a(L,U){var ce=L.length;L.push(U);e:for(;0<ce;){var Q=ce-1>>>1,de=L[Q];if(0<u(de,U))L[Q]=U,L[ce]=de,ce=Q;else break e}}function l(L){return L.length===0?null:L[0]}function o(L){if(L.length===0)return null;var U=L[0],ce=L.pop();if(ce!==U){L[0]=ce;e:for(var Q=0,de=L.length,w=de>>>1;Q<w;){var V=2*(Q+1)-1,G=L[V],ie=V+1,ee=L[ie];if(0>u(G,ce))ie<de&&0>u(ee,G)?(L[Q]=ee,L[ie]=ce,Q=ie):(L[Q]=G,L[V]=ce,Q=V);else if(ie<de&&0>u(ee,ce))L[Q]=ee,L[ie]=ce,Q=ie;else break e}}return U}function u(L,U){var ce=L.sortIndex-U.sortIndex;return ce!==0?ce:L.id-U.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;s.unstable_now=function(){return f.now()}}else{var p=Date,m=p.now();s.unstable_now=function(){return p.now()-m}}var v=[],x=[],y=1,b=null,N=3,j=!1,C=!1,k=!1,D=!1,F=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function ae(L){for(var U=l(x);U!==null;){if(U.callback===null)o(x);else if(U.startTime<=L)o(x),U.sortIndex=U.expirationTime,a(v,U);else break;U=l(x)}}function W(L){if(k=!1,ae(L),!C)if(l(v)!==null)C=!0,X||(X=!0,be());else{var U=l(x);U!==null&&ge(W,U.startTime-L)}}var X=!1,E=-1,A=5,O=-1;function le(){return D?!0:!(s.unstable_now()-O<A)}function se(){if(D=!1,X){var L=s.unstable_now();O=L;var U=!0;try{e:{C=!1,k&&(k=!1,q(E),E=-1),j=!0;var ce=N;try{t:{for(ae(L),b=l(v);b!==null&&!(b.expirationTime>L&&le());){var Q=b.callback;if(typeof Q=="function"){b.callback=null,N=b.priorityLevel;var de=Q(b.expirationTime<=L);if(L=s.unstable_now(),typeof de=="function"){b.callback=de,ae(L),U=!0;break t}b===l(v)&&o(v),ae(L)}else o(v);b=l(v)}if(b!==null)U=!0;else{var w=l(x);w!==null&&ge(W,w.startTime-L),U=!1}}break e}finally{b=null,N=ce,j=!1}U=void 0}}finally{U?be():X=!1}}}var be;if(typeof B=="function")be=function(){B(se)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Ce=Se.port2;Se.port1.onmessage=se,be=function(){Ce.postMessage(null)}}else be=function(){F(se,0)};function ge(L,U){E=F(function(){L(s.unstable_now())},U)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(L){L.callback=null},s.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<L?Math.floor(1e3/L):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(L){switch(N){case 1:case 2:case 3:var U=3;break;default:U=N}var ce=N;N=U;try{return L()}finally{N=ce}},s.unstable_requestPaint=function(){D=!0},s.unstable_runWithPriority=function(L,U){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ce=N;N=L;try{return U()}finally{N=ce}},s.unstable_scheduleCallback=function(L,U,ce){var Q=s.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Q+ce:Q):ce=Q,L){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ce+de,L={id:y++,callback:U,priorityLevel:L,startTime:ce,expirationTime:de,sortIndex:-1},ce>Q?(L.sortIndex=ce,a(x,L),l(v)===null&&L===l(x)&&(k?(q(E),E=-1):k=!0,ge(W,ce-Q))):(L.sortIndex=de,a(v,L),C||j||(C=!0,X||(X=!0,be()))),L},s.unstable_shouldYield=le,s.unstable_wrapCallback=function(L){var U=N;return function(){var ce=N;N=U;try{return L.apply(this,arguments)}finally{N=ce}}}})(Ld)),Ld}var yg;function t_(){return yg||(yg=1,Bd.exports=e_()),Bd.exports}var Od={exports:{}},Is={};var bg;function s_(){if(bg)return Is;bg=1;var s=im();function a(v){var x="https://react.dev/errors/"+v;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+v+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var o={d:{f:l,r:function(){throw Error(a(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(v,x,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:v,containerInfo:x,implementation:y}}var p=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(v,x){if(v==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Is.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Is.createPortal=function(v,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(a(299));return f(v,x,null,y)},Is.flushSync=function(v){var x=p.T,y=o.p;try{if(p.T=null,o.p=2,v)return v()}finally{p.T=x,o.p=y,o.d.f()}},Is.preconnect=function(v,x){typeof v=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,o.d.C(v,x))},Is.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},Is.preinit=function(v,x){if(typeof v=="string"&&x&&typeof x.as=="string"){var y=x.as,b=m(y,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,j=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?o.d.S(v,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:b,integrity:N,fetchPriority:j}):y==="script"&&o.d.X(v,{crossOrigin:b,integrity:N,fetchPriority:j,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Is.preinitModule=function(v,x){if(typeof v=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=m(x.as,x.crossOrigin);o.d.M(v,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&o.d.M(v)},Is.preload=function(v,x){if(typeof v=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,b=m(y,x.crossOrigin);o.d.L(v,y,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Is.preloadModule=function(v,x){if(typeof v=="string")if(x){var y=m(x.as,x.crossOrigin);o.d.m(v,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else o.d.m(v)},Is.requestFormReset=function(v){o.d.r(v)},Is.unstable_batchedUpdates=function(v,x){return v(x)},Is.useFormState=function(v,x,y){return p.H.useFormState(v,x,y)},Is.useFormStatus=function(){return p.H.useHostTransitionStatus()},Is.version="19.2.4",Is}var kg;function Ox(){if(kg)return Od.exports;kg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),Od.exports=s_(),Od.exports}var _g;function a_(){if(_g)return br;_g=1;var s=t_(),a=im(),l=Ox();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(f(e)!==e)throw Error(o(188))}function x(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(o(188));return t!==e?null:e}for(var i=e,r=t;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(r=c.return,r!==null){i=r;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return v(c),e;if(d===r)return v(c),t;d=d.sibling}throw Error(o(188))}if(i.return!==r.return)i=c,r=d;else{for(var g=!1,_=c.child;_;){if(_===i){g=!0,i=c,r=d;break}if(_===r){g=!0,r=c,i=d;break}_=_.sibling}if(!g){for(_=d.child;_;){if(_===i){g=!0,i=d,r=c;break}if(_===r){g=!0,r=d,i=c;break}_=_.sibling}if(!g)throw Error(o(189))}}if(i.alternate!==r)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,N=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),B=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function be(e){return e===null||typeof e!="object"?null:(e=se&&e[se]||e["@@iterator"],typeof e=="function"?e:null)}var Se=Symbol.for("react.client.reference");function Ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case F:return"Profiler";case D:return"StrictMode";case W:return"Suspense";case X:return"SuspenseList";case O:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case B:return e.displayName||"Context";case q:return(e._context.displayName||"Context")+".Consumer";case ae:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case E:return t=e.displayName||null,t!==null?t:Ce(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return Ce(e(t))}catch{}}return null}var ge=Array.isArray,L=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Q=[],de=-1;function w(e){return{current:e}}function V(e){0>de||(e.current=Q[de],Q[de]=null,de--)}function G(e,t){de++,Q[de]=e.current,e.current=t}var ie=w(null),ee=w(null),M=w(null),S=w(null);function ue(e,t){switch(G(M,t),G(ee,e),G(ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Lv(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Lv(t),e=Ov(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(ie),G(ie,e)}function ye(){V(ie),V(ee),V(M)}function Ne(e){e.memoizedState!==null&&G(S,e);var t=ie.current,i=Ov(t,e.type);t!==i&&(G(ee,e),G(ie,i))}function Ee(e){ee.current===e&&(V(ie),V(ee)),S.current===e&&(V(S),hr._currentValue=ce)}var Be,T;function H(e){if(Be===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Be=t&&t[1]||"",T=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Be+e+T}var ke=!1;function we(e,t){if(!e||ke)return"";ke=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(re){var te=re}Reflect.construct(e,[],ve)}else{try{ve.call()}catch(re){te=re}e.call(ve.prototype)}}else{try{throw Error()}catch(re){te=re}(ve=e())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=r.DetermineComponentFrameRoot(),g=d[0],_=d[1];if(g&&_){var R=g.split(`
`),J=_.split(`
`);for(c=r=0;r<R.length&&!R[r].includes("DetermineComponentFrameRoot");)r++;for(;c<J.length&&!J[c].includes("DetermineComponentFrameRoot");)c++;if(r===R.length||c===J.length)for(r=R.length-1,c=J.length-1;1<=r&&0<=c&&R[r]!==J[c];)c--;for(;1<=r&&0<=c;r--,c--)if(R[r]!==J[c]){if(r!==1||c!==1)do if(r--,c--,0>c||R[r]!==J[c]){var pe=`
`+R[r].replace(" at new "," at ");return e.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",e.displayName)),pe}while(1<=r&&0<=c);break}}}finally{ke=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?H(i):""}function $(e,t){switch(e.tag){case 26:case 27:case 5:return H(e.type);case 16:return H("Lazy");case 13:return e.child!==t&&t!==null?H("Suspense Fallback"):H("Suspense");case 19:return H("SuspenseList");case 0:case 15:return we(e.type,!1);case 11:return we(e.type.render,!1);case 1:return we(e.type,!0);case 31:return H("Activity");default:return""}}function De(e){try{var t="",i=null;do t+=$(e,i),i=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Ye=Object.prototype.hasOwnProperty,Ge=s.unstable_scheduleCallback,fe=s.unstable_cancelCallback,Re=s.unstable_shouldYield,st=s.unstable_requestPaint,mt=s.unstable_now,Es=s.unstable_getCurrentPriorityLevel,$t=s.unstable_ImmediatePriority,ne=s.unstable_UserBlockingPriority,Ie=s.unstable_NormalPriority,$e=s.unstable_LowPriority,rt=s.unstable_IdlePriority,Ve=s.log,_t=s.unstable_setDisableYieldValue,Mt=null,gt=null;function os(e){if(typeof Ve=="function"&&_t(e),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(Mt,e)}catch{}}var qt=Math.clz32?Math.clz32:Da,ba=Math.log,Ca=Math.LN2;function Da(e){return e>>>=0,e===0?32:31-(ba(e)/Ca|0)|0}var ka=256,Za=262144,Cs=4194304;function Ss(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _a(e,t,i){var r=e.pendingLanes;if(r===0)return 0;var c=0,d=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var _=r&134217727;return _!==0?(r=_&~d,r!==0?c=Ss(r):(g&=_,g!==0?c=Ss(g):i||(i=_&~e,i!==0&&(c=Ss(i))))):(_=r&~d,_!==0?c=Ss(_):g!==0?c=Ss(g):i||(i=r&~e,i!==0&&(c=Ss(i)))),c===0?0:t!==0&&t!==c&&(t&d)===0&&(d=c&-c,i=t&-t,d>=i||d===32&&(i&4194048)!==0)?t:c}function pt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function wl(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ja(){var e=Cs;return Cs<<=1,(Cs&62914560)===0&&(Cs=4194304),e}function Ra(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function cs(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ni(e,t,i,r,c,d){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var _=e.entanglements,R=e.expirationTimes,J=e.hiddenUpdates;for(i=g&~i;0<i;){var pe=31-qt(i),ve=1<<pe;_[pe]=0,R[pe]=-1;var te=J[pe];if(te!==null)for(J[pe]=null,pe=0;pe<te.length;pe++){var re=te[pe];re!==null&&(re.lane&=-536870913)}i&=~ve}r!==0&&ot(e,r,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(g&~t))}function ot(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-qt(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|i&261930}function ia(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-qt(i),c=1<<r;c&t|e[r]&t&&(e[r]|=t),i&=~c}}function Ma(e,t){var i=t&-t;return i=(i&42)!==0?1:ct(i),(i&(e.suspendedLanes|t))!==0?0:i}function ct(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function et(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ua(){var e=U.p;return e!==0?e:(e=window.event,e===void 0?32:rg(e.type))}function la(e,t){var i=U.p;try{return U.p=e,t()}finally{U.p=i}}var ra=Math.random().toString(36).slice(2),Ft="__reactFiber$"+ra,Wt="__reactProps$"+ra,Ds="__reactContainer$"+ra,ii="__reactEvents$"+ra,Sl="__reactListeners$"+ra,Ba="__reactHandles$"+ra,Il="__reactResources$"+ra,I="__reactMarker$"+ra;function oe(e){delete e[Ft],delete e[Wt],delete e[ii],delete e[Sl],delete e[Ba]}function me(e){var t=e[Ft];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ds]||i[Ft]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Fv(e);e!==null;){if(i=e[Ft])return i;e=Fv(e)}return t}e=i,i=e.parentNode}return null}function Ae(e){if(e=e[Ft]||e[Ds]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function at(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Le(e){var t=e[Il];return t||(t=e[Il]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Te(e){e[I]=!0}var nt=new Set,it={};function Vt(e,t){Na(e,t),Na(e+"Capture",t)}function Na(e,t){for(it[e]=t,e=0;e<t.length;e++)nt.add(t[e])}var Ei=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Al={},li={};function Gs(e){return Ye.call(li,e)?!0:Ye.call(Al,e)?!1:Ei.test(e)?li[e]=!0:(Al[e]=!0,!1)}function In(e,t,i){if(Gs(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function La(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Rs(e,t,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+r)}}function Pt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ac(e,t,i){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){i=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function P(e){if(!e._valueTracker){var t=Tl(e)?"checked":"value";e._valueTracker=Ac(e,t,""+e[t])}}function je(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=Tl(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function _e(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Xe=/[\n"\\]/g;function Ze(e){return e.replace(Xe,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Zt(e,t,i,r,c,d,g,_){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Pt(t)):e.value!==""+Pt(t)&&(e.value=""+Pt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Yt(e,g,Pt(t)):i!=null?Yt(e,g,Pt(i)):r!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+Pt(_):e.removeAttribute("name")}function St(e,t,i,r,c,d,g,_){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||i!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){P(e);return}i=i!=null?""+Pt(i):"",t=t!=null?""+Pt(t):i,_||t===e.value||(e.value=t),e.defaultValue=t}r=r??c,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=_?e.checked:!!r,e.defaultChecked=!!r,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),P(e)}function Yt(e,t,i){t==="number"&&_e(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Ks(e,t,i,r){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&r&&(e[i].defaultSelected=!0)}else{for(i=""+Pt(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,r&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function ri(e,t,i){if(t!=null&&(t=""+Pt(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Pt(i):""}function en(e,t,i,r){if(t==null){if(r!=null){if(i!=null)throw Error(o(92));if(ge(r)){if(1<r.length)throw Error(o(93));r=r[0]}i=r}i==null&&(i=""),t=i}i=Pt(t),e.defaultValue=i,r=e.textContent,r===i&&r!==""&&r!==null&&(e.value=r),P(e)}function Oa(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var gs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tc(e,t,i){var r=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,i):typeof i!="number"||i===0||gs.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Lr(e,t,i){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,i!=null){for(var r in i)!i.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var c in t)r=t[c],t.hasOwnProperty(c)&&i[c]!==r&&Tc(e,c,r)}else for(var d in t)t.hasOwnProperty(d)&&Tc(e,d,t[d])}function Ci(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ec=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function We(e){return Cc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ss(){}var El=null;function Cl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tn=null,Di=null;function Bm(e){var t=Ae(e);if(t&&(e=t.stateNode)){var i=e[Wt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Zt(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ze(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var c=r[Wt]||null;if(!c)throw Error(o(90));Zt(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<i.length;t++)r=i[t],r.form===e.form&&je(r)}break e;case"textarea":ri(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Ks(e,!!i.multiple,t,!1)}}}var Dc=!1;function Lm(e,t,i){if(Dc)return e(t,i);Dc=!0;try{var r=e(t);return r}finally{if(Dc=!1,(tn!==null||Di!==null)&&(wo(),tn&&(t=tn,e=Di,Di=tn=null,Bm(t),e)))for(t=0;t<e.length;t++)Bm(e[t])}}function Dl(e,t){var i=e.stateNode;if(i===null)return null;var r=i[Wt]||null;if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,t,typeof i));return i}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rc=!1;if(sn)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){Rc=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{Rc=!1}var An=null,Mc=null,Or=null;function Om(){if(Or)return Or;var e,t=Mc,i=t.length,r,c="value"in An?An.value:An.textContent,d=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(r=1;r<=g&&t[i-r]===c[d-r];r++);return Or=c.slice(e,1<r?1-r:void 0)}function qr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zr(){return!0}function qm(){return!1}function zs(e){function t(i,r,c,d,g){this._reactName=i,this._targetInst=c,this.type=r,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(i=e[_],this[_]=i?i(d):d[_]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?zr:qm,this.isPropagationStopped=qm,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=zr)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=zr)},persist:function(){},isPersistent:zr}),t}var oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hr=zs(oi),Ml=b({},oi,{view:0,detail:0}),Ky=zs(Ml),Uc,Bc,Ul,Vr=b({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ul&&(Ul&&e.type==="mousemove"?(Uc=e.screenX-Ul.screenX,Bc=e.screenY-Ul.screenY):Bc=Uc=0,Ul=e),Uc)},movementY:function(e){return"movementY"in e?e.movementY:Bc}}),zm=zs(Vr),Xy=b({},Vr,{dataTransfer:0}),Qy=zs(Xy),Zy=b({},Ml,{relatedTarget:0}),Lc=zs(Zy),Jy=b({},oi,{animationName:0,elapsedTime:0,pseudoElement:0}),eb=zs(Jy),tb=b({},oi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sb=zs(tb),ab=b({},oi,{data:0}),Hm=zs(ab),nb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ib={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lb[e])?!!t[e]:!1}function Oc(){return rb}var ob=b({},Ml,{key:function(e){if(e.key){var t=nb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ib[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(e){return e.type==="keypress"?qr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cb=zs(ob),ub=b({},Vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vm=zs(ub),db=b({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),fb=zs(db),mb=b({},oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),pb=zs(mb),hb=b({},Vr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vb=zs(hb),gb=b({},oi,{newState:0,oldState:0}),xb=zs(gb),yb=[9,13,27,32],qc=sn&&"CompositionEvent"in window,Bl=null;sn&&"documentMode"in document&&(Bl=document.documentMode);var bb=sn&&"TextEvent"in window&&!Bl,Pm=sn&&(!qc||Bl&&8<Bl&&11>=Bl),$m=" ",Fm=!1;function Wm(e,t){switch(e){case"keyup":return yb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ym(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ri=!1;function kb(e,t){switch(e){case"compositionend":return Ym(t);case"keypress":return t.which!==32?null:(Fm=!0,$m);case"textInput":return e=t.data,e===$m&&Fm?null:e;default:return null}}function _b(e,t){if(Ri)return e==="compositionend"||!qc&&Wm(e,t)?(e=Om(),Or=Mc=An=null,Ri=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pm&&t.locale!=="ko"?null:t.data;default:return null}}var Nb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Nb[e.type]:t==="textarea"}function Km(e,t,i,r){tn?Di?Di.push(r):Di=[r]:tn=r,t=Do(t,"onChange"),0<t.length&&(i=new Hr("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var Ll=null,Ol=null;function jb(e){Cv(e,0)}function Pr(e){var t=at(e);if(je(t))return e}function Xm(e,t){if(e==="change")return t}var Qm=!1;if(sn){var zc;if(sn){var Hc="oninput"in document;if(!Hc){var Zm=document.createElement("div");Zm.setAttribute("oninput","return;"),Hc=typeof Zm.oninput=="function"}zc=Hc}else zc=!1;Qm=zc&&(!document.documentMode||9<document.documentMode)}function Jm(){Ll&&(Ll.detachEvent("onpropertychange",ep),Ol=Ll=null)}function ep(e){if(e.propertyName==="value"&&Pr(Ol)){var t=[];Km(t,Ol,e,Cl(e)),Lm(jb,t)}}function wb(e,t,i){e==="focusin"?(Jm(),Ll=t,Ol=i,Ll.attachEvent("onpropertychange",ep)):e==="focusout"&&Jm()}function Sb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pr(Ol)}function Ib(e,t){if(e==="click")return Pr(t)}function Ab(e,t){if(e==="input"||e==="change")return Pr(t)}function Tb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xs=typeof Object.is=="function"?Object.is:Tb;function ql(e,t){if(Xs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var c=i[r];if(!Ye.call(t,c)||!Xs(e[c],t[c]))return!1}return!0}function tp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sp(e,t){var i=tp(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=tp(i)}}function ap(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ap(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function np(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_e(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=_e(e.document)}return t}function Vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Eb=sn&&"documentMode"in document&&11>=document.documentMode,Mi=null,Pc=null,zl=null,$c=!1;function ip(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;$c||Mi==null||Mi!==_e(r)||(r=Mi,"selectionStart"in r&&Vc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zl&&ql(zl,r)||(zl=r,r=Do(Pc,"onSelect"),0<r.length&&(t=new Hr("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=Mi)))}function ci(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ui={animationend:ci("Animation","AnimationEnd"),animationiteration:ci("Animation","AnimationIteration"),animationstart:ci("Animation","AnimationStart"),transitionrun:ci("Transition","TransitionRun"),transitionstart:ci("Transition","TransitionStart"),transitioncancel:ci("Transition","TransitionCancel"),transitionend:ci("Transition","TransitionEnd")},Fc={},lp={};sn&&(lp=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function ui(e){if(Fc[e])return Fc[e];if(!Ui[e])return e;var t=Ui[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in lp)return Fc[e]=t[i];return e}var rp=ui("animationend"),op=ui("animationiteration"),cp=ui("animationstart"),Cb=ui("transitionrun"),Db=ui("transitionstart"),Rb=ui("transitioncancel"),up=ui("transitionend"),dp=new Map,Wc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wc.push("scrollEnd");function ja(e,t){dp.set(e,t),Vt(t,[e])}var $r=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},oa=[],Bi=0,Yc=0;function Fr(){for(var e=Bi,t=Yc=Bi=0;t<e;){var i=oa[t];oa[t++]=null;var r=oa[t];oa[t++]=null;var c=oa[t];oa[t++]=null;var d=oa[t];if(oa[t++]=null,r!==null&&c!==null){var g=r.pending;g===null?c.next=c:(c.next=g.next,g.next=c),r.pending=c}d!==0&&fp(i,c,d)}}function Wr(e,t,i,r){oa[Bi++]=e,oa[Bi++]=t,oa[Bi++]=i,oa[Bi++]=r,Yc|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Gc(e,t,i,r){return Wr(e,t,i,r),Yr(e)}function di(e,t){return Wr(e,null,null,t),Yr(e)}function fp(e,t,i){e.lanes|=i;var r=e.alternate;r!==null&&(r.lanes|=i);for(var c=!1,d=e.return;d!==null;)d.childLanes|=i,r=d.alternate,r!==null&&(r.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&t!==null&&(c=31-qt(i),e=d.hiddenUpdates,r=e[c],r===null?e[c]=[t]:r.push(t),t.lane=i|536870912),d):null}function Yr(e){if(50<or)throw or=0,ad=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Li={};function Mb(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(e,t,i,r){return new Mb(e,t,i,r)}function Kc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function an(e,t){var i=e.alternate;return i===null?(i=Qs(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function mp(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Gr(e,t,i,r,c,d){var g=0;if(r=e,typeof e=="function")Kc(e)&&(g=1);else if(typeof e=="string")g=qk(e,i,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case O:return e=Qs(31,i,t,c),e.elementType=O,e.lanes=d,e;case k:return fi(i.children,c,d,t);case D:g=8,c|=24;break;case F:return e=Qs(12,i,t,c|2),e.elementType=F,e.lanes=d,e;case W:return e=Qs(13,i,t,c),e.elementType=W,e.lanes=d,e;case X:return e=Qs(19,i,t,c),e.elementType=X,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:g=10;break e;case q:g=9;break e;case ae:g=11;break e;case E:g=14;break e;case A:g=16,r=null;break e}g=29,i=Error(o(130,e===null?"null":typeof e,"")),r=null}return t=Qs(g,i,t,c),t.elementType=e,t.type=r,t.lanes=d,t}function fi(e,t,i,r){return e=Qs(7,e,r,t),e.lanes=i,e}function Xc(e,t,i){return e=Qs(6,e,null,t),e.lanes=i,e}function pp(e){var t=Qs(18,null,null,0);return t.stateNode=e,t}function Qc(e,t,i){return t=Qs(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var hp=new WeakMap;function ca(e,t){if(typeof e=="object"&&e!==null){var i=hp.get(e);return i!==void 0?i:(t={value:e,source:t,stack:De(t)},hp.set(e,t),t)}return{value:e,source:t,stack:De(t)}}var Oi=[],qi=0,Kr=null,Hl=0,ua=[],da=0,Tn=null,qa=1,za="";function nn(e,t){Oi[qi++]=Hl,Oi[qi++]=Kr,Kr=e,Hl=t}function vp(e,t,i){ua[da++]=qa,ua[da++]=za,ua[da++]=Tn,Tn=e;var r=qa;e=za;var c=32-qt(r)-1;r&=~(1<<c),i+=1;var d=32-qt(t)+c;if(30<d){var g=c-c%5;d=(r&(1<<g)-1).toString(32),r>>=g,c-=g,qa=1<<32-qt(t)+c|i<<c|r,za=d+e}else qa=1<<d|i<<c|r,za=e}function Zc(e){e.return!==null&&(nn(e,1),vp(e,1,0))}function Jc(e){for(;e===Kr;)Kr=Oi[--qi],Oi[qi]=null,Hl=Oi[--qi],Oi[qi]=null;for(;e===Tn;)Tn=ua[--da],ua[da]=null,za=ua[--da],ua[da]=null,qa=ua[--da],ua[da]=null}function gp(e,t){ua[da++]=qa,ua[da++]=za,ua[da++]=Tn,qa=t.id,za=t.overflow,Tn=e}var xs=null,Bt=null,xt=!1,En=null,fa=!1,eu=Error(o(519));function Cn(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vl(ca(t,e)),eu}function xp(e){var t=e.stateNode,i=e.type,r=e.memoizedProps;switch(t[Ft]=e,t[Wt]=r,i){case"dialog":dt("cancel",t),dt("close",t);break;case"iframe":case"object":case"embed":dt("load",t);break;case"video":case"audio":for(i=0;i<ur.length;i++)dt(ur[i],t);break;case"source":dt("error",t);break;case"img":case"image":case"link":dt("error",t),dt("load",t);break;case"details":dt("toggle",t);break;case"input":dt("invalid",t),St(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":dt("invalid",t);break;case"textarea":dt("invalid",t),en(t,r.value,r.defaultValue,r.children)}i=r.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||r.suppressHydrationWarning===!0||Uv(t.textContent,i)?(r.popover!=null&&(dt("beforetoggle",t),dt("toggle",t)),r.onScroll!=null&&dt("scroll",t),r.onScrollEnd!=null&&dt("scrollend",t),r.onClick!=null&&(t.onclick=ss),t=!0):t=!1,t||Cn(e,!0)}function yp(e){for(xs=e.return;xs;)switch(xs.tag){case 5:case 31:case 13:fa=!1;return;case 27:case 3:fa=!0;return;default:xs=xs.return}}function zi(e){if(e!==xs)return!1;if(!xt)return yp(e),xt=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||xd(e.type,e.memoizedProps)),i=!i),i&&Bt&&Cn(e),yp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Bt=$v(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Bt=$v(e)}else t===27?(t=Bt,Fn(e.type)?(e=Nd,Nd=null,Bt=e):Bt=t):Bt=xs?pa(e.stateNode.nextSibling):null;return!0}function mi(){Bt=xs=null,xt=!1}function tu(){var e=En;return e!==null&&($s===null?$s=e:$s.push.apply($s,e),En=null),e}function Vl(e){En===null?En=[e]:En.push(e)}var su=w(null),pi=null,ln=null;function Dn(e,t,i){G(su,t._currentValue),t._currentValue=i}function rn(e){e._currentValue=su.current,V(su)}function au(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function nu(e,t,i,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var g=c.child;d=d.firstContext;e:for(;d!==null;){var _=d;d=c;for(var R=0;R<t.length;R++)if(_.context===t[R]){d.lanes|=i,_=d.alternate,_!==null&&(_.lanes|=i),au(d.return,i,e),r||(g=null);break e}d=_.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(o(341));g.lanes|=i,d=g.alternate,d!==null&&(d.lanes|=i),au(g,i,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function Hi(e,t,i,r){e=null;for(var c=t,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(o(387));if(g=g.memoizedProps,g!==null){var _=c.type;Xs(c.pendingProps.value,g.value)||(e!==null?e.push(_):e=[_])}}else if(c===S.current){if(g=c.alternate,g===null)throw Error(o(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(hr):e=[hr])}c=c.return}e!==null&&nu(t,e,i,r),t.flags|=262144}function Xr(e){for(e=e.firstContext;e!==null;){if(!Xs(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function hi(e){pi=e,ln=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ys(e){return bp(pi,e)}function Qr(e,t){return pi===null&&hi(e),bp(e,t)}function bp(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},ln===null){if(e===null)throw Error(o(308));ln=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ln=ln.next=t;return i}var Ub=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},Bb=s.unstable_scheduleCallback,Lb=s.unstable_NormalPriority,as={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function iu(){return{controller:new Ub,data:new Map,refCount:0}}function Pl(e){e.refCount--,e.refCount===0&&Bb(Lb,function(){e.controller.abort()})}var $l=null,lu=0,Vi=0,Pi=null;function Ob(e,t){if($l===null){var i=$l=[];lu=0,Vi=cd(),Pi={status:"pending",value:void 0,then:function(r){i.push(r)}}}return lu++,t.then(kp,kp),t}function kp(){if(--lu===0&&$l!==null){Pi!==null&&(Pi.status="fulfilled");var e=$l;$l=null,Vi=0,Pi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function qb(e,t){var i=[],r={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var c=0;c<i.length;c++)(0,i[c])(t)},function(c){for(r.status="rejected",r.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),r}var _p=L.S;L.S=function(e,t){iv=mt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Ob(e,t),_p!==null&&_p(e,t)};var vi=w(null);function ru(){var e=vi.current;return e!==null?e:Rt.pooledCache}function Zr(e,t){t===null?G(vi,vi.current):G(vi,t.pool)}function Np(){var e=ru();return e===null?null:{parent:as._currentValue,pool:e}}var $i=Error(o(460)),ou=Error(o(474)),Jr=Error(o(542)),eo={then:function(){}};function jp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wp(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(ss,ss),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ip(e),e;default:if(typeof t.status=="string")t.then(ss,ss);else{if(e=Rt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=r}},function(r){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ip(e),e}throw xi=t,$i}}function gi(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(xi=i,$i):i}}var xi=null;function Sp(){if(xi===null)throw Error(o(459));var e=xi;return xi=null,e}function Ip(e){if(e===$i||e===Jr)throw Error(o(483))}var Fi=null,Fl=0;function to(e){var t=Fl;return Fl+=1,Fi===null&&(Fi=[]),wp(Fi,e,t)}function Wl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function so(e,t){throw t.$$typeof===N?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ap(e){function t(Y,z){if(e){var Z=Y.deletions;Z===null?(Y.deletions=[z],Y.flags|=16):Z.push(z)}}function i(Y,z){if(!e)return null;for(;z!==null;)t(Y,z),z=z.sibling;return null}function r(Y){for(var z=new Map;Y!==null;)Y.key!==null?z.set(Y.key,Y):z.set(Y.index,Y),Y=Y.sibling;return z}function c(Y,z){return Y=an(Y,z),Y.index=0,Y.sibling=null,Y}function d(Y,z,Z){return Y.index=Z,e?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<z?(Y.flags|=67108866,z):Z):(Y.flags|=67108866,z)):(Y.flags|=1048576,z)}function g(Y){return e&&Y.alternate===null&&(Y.flags|=67108866),Y}function _(Y,z,Z,he){return z===null||z.tag!==6?(z=Xc(Z,Y.mode,he),z.return=Y,z):(z=c(z,Z),z.return=Y,z)}function R(Y,z,Z,he){var qe=Z.type;return qe===k?pe(Y,z,Z.props.children,he,Z.key):z!==null&&(z.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&gi(qe)===z.type)?(z=c(z,Z.props),Wl(z,Z),z.return=Y,z):(z=Gr(Z.type,Z.key,Z.props,null,Y.mode,he),Wl(z,Z),z.return=Y,z)}function J(Y,z,Z,he){return z===null||z.tag!==4||z.stateNode.containerInfo!==Z.containerInfo||z.stateNode.implementation!==Z.implementation?(z=Qc(Z,Y.mode,he),z.return=Y,z):(z=c(z,Z.children||[]),z.return=Y,z)}function pe(Y,z,Z,he,qe){return z===null||z.tag!==7?(z=fi(Z,Y.mode,he,qe),z.return=Y,z):(z=c(z,Z),z.return=Y,z)}function ve(Y,z,Z){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Xc(""+z,Y.mode,Z),z.return=Y,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case j:return Z=Gr(z.type,z.key,z.props,null,Y.mode,Z),Wl(Z,z),Z.return=Y,Z;case C:return z=Qc(z,Y.mode,Z),z.return=Y,z;case A:return z=gi(z),ve(Y,z,Z)}if(ge(z)||be(z))return z=fi(z,Y.mode,Z,null),z.return=Y,z;if(typeof z.then=="function")return ve(Y,to(z),Z);if(z.$$typeof===B)return ve(Y,Qr(Y,z),Z);so(Y,z)}return null}function te(Y,z,Z,he){var qe=z!==null?z.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return qe!==null?null:_(Y,z,""+Z,he);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case j:return Z.key===qe?R(Y,z,Z,he):null;case C:return Z.key===qe?J(Y,z,Z,he):null;case A:return Z=gi(Z),te(Y,z,Z,he)}if(ge(Z)||be(Z))return qe!==null?null:pe(Y,z,Z,he,null);if(typeof Z.then=="function")return te(Y,z,to(Z),he);if(Z.$$typeof===B)return te(Y,z,Qr(Y,Z),he);so(Y,Z)}return null}function re(Y,z,Z,he,qe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Y=Y.get(Z)||null,_(z,Y,""+he,qe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case j:return Y=Y.get(he.key===null?Z:he.key)||null,R(z,Y,he,qe);case C:return Y=Y.get(he.key===null?Z:he.key)||null,J(z,Y,he,qe);case A:return he=gi(he),re(Y,z,Z,he,qe)}if(ge(he)||be(he))return Y=Y.get(Z)||null,pe(z,Y,he,qe,null);if(typeof he.then=="function")return re(Y,z,Z,to(he),qe);if(he.$$typeof===B)return re(Y,z,Z,Qr(z,he),qe);so(z,he)}return null}function Me(Y,z,Z,he){for(var qe=null,bt=null,Ue=z,tt=z=0,vt=null;Ue!==null&&tt<Z.length;tt++){Ue.index>tt?(vt=Ue,Ue=null):vt=Ue.sibling;var kt=te(Y,Ue,Z[tt],he);if(kt===null){Ue===null&&(Ue=vt);break}e&&Ue&&kt.alternate===null&&t(Y,Ue),z=d(kt,z,tt),bt===null?qe=kt:bt.sibling=kt,bt=kt,Ue=vt}if(tt===Z.length)return i(Y,Ue),xt&&nn(Y,tt),qe;if(Ue===null){for(;tt<Z.length;tt++)Ue=ve(Y,Z[tt],he),Ue!==null&&(z=d(Ue,z,tt),bt===null?qe=Ue:bt.sibling=Ue,bt=Ue);return xt&&nn(Y,tt),qe}for(Ue=r(Ue);tt<Z.length;tt++)vt=re(Ue,Y,tt,Z[tt],he),vt!==null&&(e&&vt.alternate!==null&&Ue.delete(vt.key===null?tt:vt.key),z=d(vt,z,tt),bt===null?qe=vt:bt.sibling=vt,bt=vt);return e&&Ue.forEach(function(Xn){return t(Y,Xn)}),xt&&nn(Y,tt),qe}function Pe(Y,z,Z,he){if(Z==null)throw Error(o(151));for(var qe=null,bt=null,Ue=z,tt=z=0,vt=null,kt=Z.next();Ue!==null&&!kt.done;tt++,kt=Z.next()){Ue.index>tt?(vt=Ue,Ue=null):vt=Ue.sibling;var Xn=te(Y,Ue,kt.value,he);if(Xn===null){Ue===null&&(Ue=vt);break}e&&Ue&&Xn.alternate===null&&t(Y,Ue),z=d(Xn,z,tt),bt===null?qe=Xn:bt.sibling=Xn,bt=Xn,Ue=vt}if(kt.done)return i(Y,Ue),xt&&nn(Y,tt),qe;if(Ue===null){for(;!kt.done;tt++,kt=Z.next())kt=ve(Y,kt.value,he),kt!==null&&(z=d(kt,z,tt),bt===null?qe=kt:bt.sibling=kt,bt=kt);return xt&&nn(Y,tt),qe}for(Ue=r(Ue);!kt.done;tt++,kt=Z.next())kt=re(Ue,Y,tt,kt.value,he),kt!==null&&(e&&kt.alternate!==null&&Ue.delete(kt.key===null?tt:kt.key),z=d(kt,z,tt),bt===null?qe=kt:bt.sibling=kt,bt=kt);return e&&Ue.forEach(function(Xk){return t(Y,Xk)}),xt&&nn(Y,tt),qe}function Ct(Y,z,Z,he){if(typeof Z=="object"&&Z!==null&&Z.type===k&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case j:e:{for(var qe=Z.key;z!==null;){if(z.key===qe){if(qe=Z.type,qe===k){if(z.tag===7){i(Y,z.sibling),he=c(z,Z.props.children),he.return=Y,Y=he;break e}}else if(z.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&gi(qe)===z.type){i(Y,z.sibling),he=c(z,Z.props),Wl(he,Z),he.return=Y,Y=he;break e}i(Y,z);break}else t(Y,z);z=z.sibling}Z.type===k?(he=fi(Z.props.children,Y.mode,he,Z.key),he.return=Y,Y=he):(he=Gr(Z.type,Z.key,Z.props,null,Y.mode,he),Wl(he,Z),he.return=Y,Y=he)}return g(Y);case C:e:{for(qe=Z.key;z!==null;){if(z.key===qe)if(z.tag===4&&z.stateNode.containerInfo===Z.containerInfo&&z.stateNode.implementation===Z.implementation){i(Y,z.sibling),he=c(z,Z.children||[]),he.return=Y,Y=he;break e}else{i(Y,z);break}else t(Y,z);z=z.sibling}he=Qc(Z,Y.mode,he),he.return=Y,Y=he}return g(Y);case A:return Z=gi(Z),Ct(Y,z,Z,he)}if(ge(Z))return Me(Y,z,Z,he);if(be(Z)){if(qe=be(Z),typeof qe!="function")throw Error(o(150));return Z=qe.call(Z),Pe(Y,z,Z,he)}if(typeof Z.then=="function")return Ct(Y,z,to(Z),he);if(Z.$$typeof===B)return Ct(Y,z,Qr(Y,Z),he);so(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,z!==null&&z.tag===6?(i(Y,z.sibling),he=c(z,Z),he.return=Y,Y=he):(i(Y,z),he=Xc(Z,Y.mode,he),he.return=Y,Y=he),g(Y)):i(Y,z)}return function(Y,z,Z,he){try{Fl=0;var qe=Ct(Y,z,Z,he);return Fi=null,qe}catch(Ue){if(Ue===$i||Ue===Jr)throw Ue;var bt=Qs(29,Ue,null,Y.mode);return bt.lanes=he,bt.return=Y,bt}}}var yi=Ap(!0),Tp=Ap(!1),Rn=!1;function cu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Mn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Un(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Nt&2)!==0){var c=r.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),r.pending=t,t=Yr(e),fp(e,null,i),t}return Wr(e,r,t,i),Yr(e)}function Yl(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,ia(e,i)}}function du(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?c=d=g:d=d.next=g,i=i.next}while(i!==null);d===null?c=d=t:d=d.next=t}else c=d=t;i={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:r.shared,callbacks:r.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var fu=!1;function Gl(){if(fu){var e=Pi;if(e!==null)throw e}}function Kl(e,t,i,r){fu=!1;var c=e.updateQueue;Rn=!1;var d=c.firstBaseUpdate,g=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var R=_,J=R.next;R.next=null,g===null?d=J:g.next=J,g=R;var pe=e.alternate;pe!==null&&(pe=pe.updateQueue,_=pe.lastBaseUpdate,_!==g&&(_===null?pe.firstBaseUpdate=J:_.next=J,pe.lastBaseUpdate=R))}if(d!==null){var ve=c.baseState;g=0,pe=J=R=null,_=d;do{var te=_.lane&-536870913,re=te!==_.lane;if(re?(ht&te)===te:(r&te)===te){te!==0&&te===Vi&&(fu=!0),pe!==null&&(pe=pe.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Me=e,Pe=_;te=t;var Ct=i;switch(Pe.tag){case 1:if(Me=Pe.payload,typeof Me=="function"){ve=Me.call(Ct,ve,te);break e}ve=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Pe.payload,te=typeof Me=="function"?Me.call(Ct,ve,te):Me,te==null)break e;ve=b({},ve,te);break e;case 2:Rn=!0}}te=_.callback,te!==null&&(e.flags|=64,re&&(e.flags|=8192),re=c.callbacks,re===null?c.callbacks=[te]:re.push(te))}else re={lane:te,tag:_.tag,payload:_.payload,callback:_.callback,next:null},pe===null?(J=pe=re,R=ve):pe=pe.next=re,g|=te;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;re=_,_=re.next,re.next=null,c.lastBaseUpdate=re,c.shared.pending=null}}while(!0);pe===null&&(R=ve),c.baseState=R,c.firstBaseUpdate=J,c.lastBaseUpdate=pe,d===null&&(c.shared.lanes=0),zn|=g,e.lanes=g,e.memoizedState=ve}}function Ep(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Cp(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Ep(i[e],t)}var Wi=w(null),ao=w(0);function Dp(e,t){e=vn,G(ao,e),G(Wi,t),vn=e|t.baseLanes}function mu(){G(ao,vn),G(Wi,Wi.current)}function pu(){vn=ao.current,V(Wi),V(ao)}var Zs=w(null),ma=null;function Bn(e){var t=e.alternate;G(Jt,Jt.current&1),G(Zs,e),ma===null&&(t===null||Wi.current!==null||t.memoizedState!==null)&&(ma=e)}function hu(e){G(Jt,Jt.current),G(Zs,e),ma===null&&(ma=e)}function Rp(e){e.tag===22?(G(Jt,Jt.current),G(Zs,e),ma===null&&(ma=e)):Ln()}function Ln(){G(Jt,Jt.current),G(Zs,Zs.current)}function Js(e){V(Zs),ma===e&&(ma=null),V(Jt)}var Jt=w(0);function no(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||kd(i)||_d(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var on=0,Je=null,Tt=null,ns=null,io=!1,Yi=!1,bi=!1,lo=0,Xl=0,Gi=null,zb=0;function Gt(){throw Error(o(321))}function vu(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Xs(e[i],t[i]))return!1;return!0}function gu(e,t,i,r,c,d){return on=d,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=e===null||e.memoizedState===null?vh:Du,bi=!1,d=i(r,c),bi=!1,Yi&&(d=Up(t,i,r,c)),Mp(e),d}function Mp(e){L.H=Jl;var t=Tt!==null&&Tt.next!==null;if(on=0,ns=Tt=Je=null,io=!1,Xl=0,Gi=null,t)throw Error(o(300));e===null||is||(e=e.dependencies,e!==null&&Xr(e)&&(is=!0))}function Up(e,t,i,r){Je=e;var c=0;do{if(Yi&&(Gi=null),Xl=0,Yi=!1,25<=c)throw Error(o(301));if(c+=1,ns=Tt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}L.H=gh,d=t(i,r)}while(Yi);return d}function Hb(){var e=L.H,t=e.useState()[0];return t=typeof t.then=="function"?Ql(t):t,e=e.useState()[0],(Tt!==null?Tt.memoizedState:null)!==e&&(Je.flags|=1024),t}function xu(){var e=lo!==0;return lo=0,e}function yu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function bu(e){if(io){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}io=!1}on=0,ns=Tt=Je=null,Yi=!1,Xl=lo=0,Gi=null}function Ms(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ns===null?Je.memoizedState=ns=e:ns=ns.next=e,ns}function es(){if(Tt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=Tt.next;var t=ns===null?Je.memoizedState:ns.next;if(t!==null)ns=t,Tt=e;else{if(e===null)throw Je.alternate===null?Error(o(467)):Error(o(310));Tt=e,e={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},ns===null?Je.memoizedState=ns=e:ns=ns.next=e}return ns}function ro(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ql(e){var t=Xl;return Xl+=1,Gi===null&&(Gi=[]),e=wp(Gi,e,t),t=Je,(ns===null?t.memoizedState:ns.next)===null&&(t=t.alternate,L.H=t===null||t.memoizedState===null?vh:Du),e}function oo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ql(e);if(e.$$typeof===B)return ys(e)}throw Error(o(438,String(e)))}function ku(e){var t=null,i=Je.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var r=Je.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=ro(),Je.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),r=0;r<e;r++)i[r]=le;return t.index++,i}function cn(e,t){return typeof t=="function"?t(e):t}function co(e){var t=es();return _u(t,Tt,e)}function _u(e,t,i){var r=e.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=i;var c=e.baseQueue,d=r.pending;if(d!==null){if(c!==null){var g=c.next;c.next=d.next,d.next=g}t.baseQueue=c=d,r.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{t=c.next;var _=g=null,R=null,J=t,pe=!1;do{var ve=J.lane&-536870913;if(ve!==J.lane?(ht&ve)===ve:(on&ve)===ve){var te=J.revertLane;if(te===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ve===Vi&&(pe=!0);else if((on&te)===te){J=J.next,te===Vi&&(pe=!0);continue}else ve={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},R===null?(_=R=ve,g=d):R=R.next=ve,Je.lanes|=te,zn|=te;ve=J.action,bi&&i(d,ve),d=J.hasEagerState?J.eagerState:i(d,ve)}else te={lane:ve,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},R===null?(_=R=te,g=d):R=R.next=te,Je.lanes|=ve,zn|=ve;J=J.next}while(J!==null&&J!==t);if(R===null?g=d:R.next=_,!Xs(d,e.memoizedState)&&(is=!0,pe&&(i=Pi,i!==null)))throw i;e.memoizedState=d,e.baseState=g,e.baseQueue=R,r.lastRenderedState=d}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Nu(e){var t=es(),i=t.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var r=i.dispatch,c=i.pending,d=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do d=e(d,g.action),g=g.next;while(g!==c);Xs(d,t.memoizedState)||(is=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,r]}function Bp(e,t,i){var r=Je,c=es(),d=xt;if(d){if(i===void 0)throw Error(o(407));i=i()}else i=t();var g=!Xs((Tt||c).memoizedState,i);if(g&&(c.memoizedState=i,is=!0),c=c.queue,Su(qp.bind(null,r,c,e),[e]),c.getSnapshot!==t||g||ns!==null&&ns.memoizedState.tag&1){if(r.flags|=2048,Ki(9,{destroy:void 0},Op.bind(null,r,c,i,t),null),Rt===null)throw Error(o(349));d||(on&127)!==0||Lp(r,t,i)}return i}function Lp(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Je.updateQueue,t===null?(t=ro(),Je.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Op(e,t,i,r){t.value=i,t.getSnapshot=r,zp(t)&&Hp(e)}function qp(e,t,i){return i(function(){zp(t)&&Hp(e)})}function zp(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Xs(e,i)}catch{return!0}}function Hp(e){var t=di(e,2);t!==null&&Fs(t,e,2)}function ju(e){var t=Ms();if(typeof e=="function"){var i=e;if(e=i(),bi){os(!0);try{i()}finally{os(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:e},t}function Vp(e,t,i,r){return e.baseState=i,_u(e,Tt,typeof r=="function"?r:cn)}function Vb(e,t,i,r,c){if(mo(e))throw Error(o(485));if(e=t.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){d.listeners.push(g)}};L.T!==null?i(!0):d.isTransition=!1,r(d),i=t.pending,i===null?(d.next=t.pending=d,Pp(t,d)):(d.next=i.next,t.pending=i.next=d)}}function Pp(e,t){var i=t.action,r=t.payload,c=e.state;if(t.isTransition){var d=L.T,g={};L.T=g;try{var _=i(c,r),R=L.S;R!==null&&R(g,_),$p(e,t,_)}catch(J){wu(e,t,J)}finally{d!==null&&g.types!==null&&(d.types=g.types),L.T=d}}else try{d=i(c,r),$p(e,t,d)}catch(J){wu(e,t,J)}}function $p(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(r){Fp(e,t,r)},function(r){return wu(e,t,r)}):Fp(e,t,i)}function Fp(e,t,i){t.status="fulfilled",t.value=i,Wp(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Pp(e,i)))}function wu(e,t,i){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=i,Wp(t),t=t.next;while(t!==r)}e.action=null}function Wp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Yp(e,t){return t}function Gp(e,t){if(xt){var i=Rt.formState;if(i!==null){e:{var r=Je;if(xt){if(Bt){t:{for(var c=Bt,d=fa;c.nodeType!==8;){if(!d){c=null;break t}if(c=pa(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Bt=pa(c.nextSibling),r=c.data==="F!";break e}}Cn(r)}r=!1}r&&(t=i[0])}}return i=Ms(),i.memoizedState=i.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yp,lastRenderedState:t},i.queue=r,i=mh.bind(null,Je,r),r.dispatch=i,r=ju(!1),d=Cu.bind(null,Je,!1,r.queue),r=Ms(),c={state:t,dispatch:null,action:e,pending:null},r.queue=c,i=Vb.bind(null,Je,c,d,i),c.dispatch=i,r.memoizedState=e,[t,i,!1]}function Kp(e){var t=es();return Xp(t,Tt,e)}function Xp(e,t,i){if(t=_u(e,t,Yp)[0],e=co(cn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=Ql(t)}catch(g){throw g===$i?Jr:g}else r=t;t=es();var c=t.queue,d=c.dispatch;return i!==t.memoizedState&&(Je.flags|=2048,Ki(9,{destroy:void 0},Pb.bind(null,c,i),null)),[r,d,e]}function Pb(e,t){e.action=t}function Qp(e){var t=es(),i=Tt;if(i!==null)return Xp(t,i,e);es(),t=t.memoizedState,i=es();var r=i.queue.dispatch;return i.memoizedState=e,[t,r,!1]}function Ki(e,t,i,r){return e={tag:e,create:i,deps:r,inst:t,next:null},t=Je.updateQueue,t===null&&(t=ro(),Je.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e),e}function Zp(){return es().memoizedState}function uo(e,t,i,r){var c=Ms();Je.flags|=e,c.memoizedState=Ki(1|t,{destroy:void 0},i,r===void 0?null:r)}function fo(e,t,i,r){var c=es();r=r===void 0?null:r;var d=c.memoizedState.inst;Tt!==null&&r!==null&&vu(r,Tt.memoizedState.deps)?c.memoizedState=Ki(t,d,i,r):(Je.flags|=e,c.memoizedState=Ki(1|t,d,i,r))}function Jp(e,t){uo(8390656,8,e,t)}function Su(e,t){fo(2048,8,e,t)}function $b(e){Je.flags|=4;var t=Je.updateQueue;if(t===null)t=ro(),Je.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function eh(e){var t=es().memoizedState;return $b({ref:t,nextImpl:e}),function(){if((Nt&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function th(e,t){return fo(4,2,e,t)}function sh(e,t){return fo(4,4,e,t)}function ah(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nh(e,t,i){i=i!=null?i.concat([e]):null,fo(4,4,ah.bind(null,t,e),i)}function Iu(){}function ih(e,t){var i=es();t=t===void 0?null:t;var r=i.memoizedState;return t!==null&&vu(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function lh(e,t){var i=es();t=t===void 0?null:t;var r=i.memoizedState;if(t!==null&&vu(t,r[1]))return r[0];if(r=e(),bi){os(!0);try{e()}finally{os(!1)}}return i.memoizedState=[r,t],r}function Au(e,t,i){return i===void 0||(on&1073741824)!==0&&(ht&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=rv(),Je.lanes|=e,zn|=e,i)}function rh(e,t,i,r){return Xs(i,t)?i:Wi.current!==null?(e=Au(e,i,r),Xs(e,t)||(is=!0),e):(on&42)===0||(on&1073741824)!==0&&(ht&261930)===0?(is=!0,e.memoizedState=i):(e=rv(),Je.lanes|=e,zn|=e,t)}function oh(e,t,i,r,c){var d=U.p;U.p=d!==0&&8>d?d:8;var g=L.T,_={};L.T=_,Cu(e,!1,t,i);try{var R=c(),J=L.S;if(J!==null&&J(_,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var pe=qb(R,r);Zl(e,t,pe,sa(e))}else Zl(e,t,r,sa(e))}catch(ve){Zl(e,t,{then:function(){},status:"rejected",reason:ve},sa())}finally{U.p=d,g!==null&&_.types!==null&&(g.types=_.types),L.T=g}}function Fb(){}function Tu(e,t,i,r){if(e.tag!==5)throw Error(o(476));var c=ch(e).queue;oh(e,c,t,ce,i===null?Fb:function(){return uh(e),i(r)})}function ch(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:ce},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function uh(e){var t=ch(e);t.next===null&&(t=e.alternate.memoizedState),Zl(e,t.next.queue,{},sa())}function Eu(){return ys(hr)}function dh(){return es().memoizedState}function fh(){return es().memoizedState}function Wb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=sa();e=Mn(i);var r=Un(t,e,i);r!==null&&(Fs(r,t,i),Yl(r,t,i)),t={cache:iu()},e.payload=t;return}t=t.return}}function Yb(e,t,i){var r=sa();i={lane:r,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},mo(e)?ph(t,i):(i=Gc(e,t,i,r),i!==null&&(Fs(i,e,r),hh(i,t,r)))}function mh(e,t,i){var r=sa();Zl(e,t,i,r)}function Zl(e,t,i,r){var c={lane:r,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(mo(e))ph(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,_=d(g,i);if(c.hasEagerState=!0,c.eagerState=_,Xs(_,g))return Wr(e,t,c,0),Rt===null&&Fr(),!1}catch{}if(i=Gc(e,t,c,r),i!==null)return Fs(i,e,r),hh(i,t,r),!0}return!1}function Cu(e,t,i,r){if(r={lane:2,revertLane:cd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},mo(e)){if(t)throw Error(o(479))}else t=Gc(e,i,r,2),t!==null&&Fs(t,e,2)}function mo(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function ph(e,t){Yi=io=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function hh(e,t,i){if((i&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,ia(e,i)}}var Jl={readContext:ys,use:oo,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt};Jl.useEffectEvent=Gt;var vh={readContext:ys,use:oo,useCallback:function(e,t){return Ms().memoizedState=[e,t===void 0?null:t],e},useContext:ys,useEffect:Jp,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,uo(4194308,4,ah.bind(null,t,e),i)},useLayoutEffect:function(e,t){return uo(4194308,4,e,t)},useInsertionEffect:function(e,t){uo(4,2,e,t)},useMemo:function(e,t){var i=Ms();t=t===void 0?null:t;var r=e();if(bi){os(!0);try{e()}finally{os(!1)}}return i.memoizedState=[r,t],r},useReducer:function(e,t,i){var r=Ms();if(i!==void 0){var c=i(t);if(bi){os(!0);try{i(t)}finally{os(!1)}}}else c=t;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=Yb.bind(null,Je,e),[r.memoizedState,e]},useRef:function(e){var t=Ms();return e={current:e},t.memoizedState=e},useState:function(e){e=ju(e);var t=e.queue,i=mh.bind(null,Je,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Iu,useDeferredValue:function(e,t){var i=Ms();return Au(i,e,t)},useTransition:function(){var e=ju(!1);return e=oh.bind(null,Je,e.queue,!0,!1),Ms().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var r=Je,c=Ms();if(xt){if(i===void 0)throw Error(o(407));i=i()}else{if(i=t(),Rt===null)throw Error(o(349));(ht&127)!==0||Lp(r,t,i)}c.memoizedState=i;var d={value:i,getSnapshot:t};return c.queue=d,Jp(qp.bind(null,r,d,e),[e]),r.flags|=2048,Ki(9,{destroy:void 0},Op.bind(null,r,d,i,t),null),i},useId:function(){var e=Ms(),t=Rt.identifierPrefix;if(xt){var i=za,r=qa;i=(r&~(1<<32-qt(r)-1)).toString(32)+i,t="_"+t+"R_"+i,i=lo++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=zb++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Eu,useFormState:Gp,useActionState:Gp,useOptimistic:function(e){var t=Ms();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Cu.bind(null,Je,!0,i),i.dispatch=t,[e,t]},useMemoCache:ku,useCacheRefresh:function(){return Ms().memoizedState=Wb.bind(null,Je)},useEffectEvent:function(e){var t=Ms(),i={impl:e};return t.memoizedState=i,function(){if((Nt&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},Du={readContext:ys,use:oo,useCallback:ih,useContext:ys,useEffect:Su,useImperativeHandle:nh,useInsertionEffect:th,useLayoutEffect:sh,useMemo:lh,useReducer:co,useRef:Zp,useState:function(){return co(cn)},useDebugValue:Iu,useDeferredValue:function(e,t){var i=es();return rh(i,Tt.memoizedState,e,t)},useTransition:function(){var e=co(cn)[0],t=es().memoizedState;return[typeof e=="boolean"?e:Ql(e),t]},useSyncExternalStore:Bp,useId:dh,useHostTransitionStatus:Eu,useFormState:Kp,useActionState:Kp,useOptimistic:function(e,t){var i=es();return Vp(i,Tt,e,t)},useMemoCache:ku,useCacheRefresh:fh};Du.useEffectEvent=eh;var gh={readContext:ys,use:oo,useCallback:ih,useContext:ys,useEffect:Su,useImperativeHandle:nh,useInsertionEffect:th,useLayoutEffect:sh,useMemo:lh,useReducer:Nu,useRef:Zp,useState:function(){return Nu(cn)},useDebugValue:Iu,useDeferredValue:function(e,t){var i=es();return Tt===null?Au(i,e,t):rh(i,Tt.memoizedState,e,t)},useTransition:function(){var e=Nu(cn)[0],t=es().memoizedState;return[typeof e=="boolean"?e:Ql(e),t]},useSyncExternalStore:Bp,useId:dh,useHostTransitionStatus:Eu,useFormState:Qp,useActionState:Qp,useOptimistic:function(e,t){var i=es();return Tt!==null?Vp(i,Tt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:ku,useCacheRefresh:fh};gh.useEffectEvent=eh;function Ru(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:b({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Mu={enqueueSetState:function(e,t,i){e=e._reactInternals;var r=sa(),c=Mn(r);c.payload=t,i!=null&&(c.callback=i),t=Un(e,c,r),t!==null&&(Fs(t,e,r),Yl(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=sa(),c=Mn(r);c.tag=1,c.payload=t,i!=null&&(c.callback=i),t=Un(e,c,r),t!==null&&(Fs(t,e,r),Yl(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=sa(),r=Mn(i);r.tag=2,t!=null&&(r.callback=t),t=Un(e,r,i),t!==null&&(Fs(t,e,i),Yl(t,e,i))}};function xh(e,t,i,r,c,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,d,g):t.prototype&&t.prototype.isPureReactComponent?!ql(i,r)||!ql(c,d):!0}function yh(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&Mu.enqueueReplaceState(t,t.state,null)}function ki(e,t){var i=t;if("ref"in t){i={};for(var r in t)r!=="ref"&&(i[r]=t[r])}if(e=e.defaultProps){i===t&&(i=b({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}function bh(e){$r(e)}function kh(e){console.error(e)}function _h(e){$r(e)}function po(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Nh(e,t,i){try{var r=e.onCaughtError;r(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Uu(e,t,i){return i=Mn(i),i.tag=3,i.payload={element:null},i.callback=function(){po(e,t)},i}function jh(e){return e=Mn(e),e.tag=3,e}function wh(e,t,i,r){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;e.payload=function(){return c(d)},e.callback=function(){Nh(t,i,r)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Nh(t,i,r),typeof c!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})})}function Gb(e,t,i,r,c){if(i.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=i.alternate,t!==null&&Hi(t,i,c,!0),i=Zs.current,i!==null){switch(i.tag){case 31:case 13:return ma===null?So():i.alternate===null&&Kt===0&&(Kt=3),i.flags&=-257,i.flags|=65536,i.lanes=c,r===eo?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([r]):t.add(r),ld(e,r,c)),!1;case 22:return i.flags|=65536,r===eo?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([r]):i.add(r)),ld(e,r,c)),!1}throw Error(o(435,i.tag))}return ld(e,r,c),So(),!1}if(xt)return t=Zs.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,r!==eu&&(e=Error(o(422),{cause:r}),Vl(ca(e,i)))):(r!==eu&&(t=Error(o(423),{cause:r}),Vl(ca(t,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=ca(r,i),c=Uu(e.stateNode,r,c),du(e,c),Kt!==4&&(Kt=2)),!1;var d=Error(o(520),{cause:r});if(d=ca(d,i),rr===null?rr=[d]:rr.push(d),Kt!==4&&(Kt=2),t===null)return!0;r=ca(r,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=Uu(i.stateNode,r,e),du(i,e),!1;case 1:if(t=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Hn===null||!Hn.has(d))))return i.flags|=65536,c&=-c,i.lanes|=c,c=jh(c),wh(c,e,i,r),du(i,c),!1}i=i.return}while(i!==null);return!1}var Bu=Error(o(461)),is=!1;function bs(e,t,i,r){t.child=e===null?Tp(t,null,i,r):yi(t,e.child,i,r)}function Sh(e,t,i,r,c){i=i.render;var d=t.ref;if("ref"in r){var g={};for(var _ in r)_!=="ref"&&(g[_]=r[_])}else g=r;return hi(t),r=gu(e,t,i,g,d,c),_=xu(),e!==null&&!is?(yu(e,t,c),un(e,t,c)):(xt&&_&&Zc(t),t.flags|=1,bs(e,t,r,c),t.child)}function Ih(e,t,i,r,c){if(e===null){var d=i.type;return typeof d=="function"&&!Kc(d)&&d.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=d,Ah(e,t,d,r,c)):(e=Gr(i.type,null,r,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!$u(e,c)){var g=d.memoizedProps;if(i=i.compare,i=i!==null?i:ql,i(g,r)&&e.ref===t.ref)return un(e,t,c)}return t.flags|=1,e=an(d,r),e.ref=t.ref,e.return=t,t.child=e}function Ah(e,t,i,r,c){if(e!==null){var d=e.memoizedProps;if(ql(d,r)&&e.ref===t.ref)if(is=!1,t.pendingProps=r=d,$u(e,c))(e.flags&131072)!==0&&(is=!0);else return t.lanes=e.lanes,un(e,t,c)}return Lu(e,t,i,r,c)}function Th(e,t,i,r){var c=r.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|i:i,e!==null){for(r=t.child=e.child,c=0;r!==null;)c=c|r.lanes|r.childLanes,r=r.sibling;r=c&~d}else r=0,t.child=null;return Eh(e,t,d,i,r)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Zr(t,d!==null?d.cachePool:null),d!==null?Dp(t,d):mu(),Rp(t);else return r=t.lanes=536870912,Eh(e,t,d!==null?d.baseLanes|i:i,i,r)}else d!==null?(Zr(t,d.cachePool),Dp(t,d),Ln(),t.memoizedState=null):(e!==null&&Zr(t,null),mu(),Ln());return bs(e,t,c,i),t.child}function er(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Eh(e,t,i,r,c){var d=ru();return d=d===null?null:{parent:as._currentValue,pool:d},t.memoizedState={baseLanes:i,cachePool:d},e!==null&&Zr(t,null),mu(),Rp(t),e!==null&&Hi(e,t,r,!0),t.childLanes=c,null}function ho(e,t){return t=go({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ch(e,t,i){return yi(t,e.child,null,i),e=ho(t,t.pendingProps),e.flags|=2,Js(t),t.memoizedState=null,e}function Kb(e,t,i){var r=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(xt){if(r.mode==="hidden")return e=ho(t,r),t.lanes=536870912,er(null,e);if(hu(t),(e=Bt)?(e=Pv(e,fa),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Tn!==null?{id:qa,overflow:za}:null,retryLane:536870912,hydrationErrors:null},i=pp(e),i.return=t,t.child=i,xs=t,Bt=null)):e=null,e===null)throw Cn(t);return t.lanes=536870912,null}return ho(t,r)}var d=e.memoizedState;if(d!==null){var g=d.dehydrated;if(hu(t),c)if(t.flags&256)t.flags&=-257,t=Ch(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(is||Hi(e,t,i,!1),c=(i&e.childLanes)!==0,is||c){if(r=Rt,r!==null&&(g=Ma(r,i),g!==0&&g!==d.retryLane))throw d.retryLane=g,di(e,g),Fs(r,e,g),Bu;So(),t=Ch(e,t,i)}else e=d.treeContext,Bt=pa(g.nextSibling),xs=t,xt=!0,En=null,fa=!1,e!==null&&gp(t,e),t=ho(t,r),t.flags|=4096;return t}return e=an(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function vo(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Lu(e,t,i,r,c){return hi(t),i=gu(e,t,i,r,void 0,c),r=xu(),e!==null&&!is?(yu(e,t,c),un(e,t,c)):(xt&&r&&Zc(t),t.flags|=1,bs(e,t,i,c),t.child)}function Dh(e,t,i,r,c,d){return hi(t),t.updateQueue=null,i=Up(t,r,i,c),Mp(e),r=xu(),e!==null&&!is?(yu(e,t,d),un(e,t,d)):(xt&&r&&Zc(t),t.flags|=1,bs(e,t,i,d),t.child)}function Rh(e,t,i,r,c){if(hi(t),t.stateNode===null){var d=Li,g=i.contextType;typeof g=="object"&&g!==null&&(d=ys(g)),d=new i(r,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Mu,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=r,d.state=t.memoizedState,d.refs={},cu(t),g=i.contextType,d.context=typeof g=="object"&&g!==null?ys(g):Li,d.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Ru(t,i,g,r),d.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(g=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),g!==d.state&&Mu.enqueueReplaceState(d,d.state,null),Kl(t,r,d,c),Gl(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){d=t.stateNode;var _=t.memoizedProps,R=ki(i,_);d.props=R;var J=d.context,pe=i.contextType;g=Li,typeof pe=="object"&&pe!==null&&(g=ys(pe));var ve=i.getDerivedStateFromProps;pe=typeof ve=="function"||typeof d.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,pe||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_||J!==g)&&yh(t,d,r,g),Rn=!1;var te=t.memoizedState;d.state=te,Kl(t,r,d,c),Gl(),J=t.memoizedState,_||te!==J||Rn?(typeof ve=="function"&&(Ru(t,i,ve,r),J=t.memoizedState),(R=Rn||xh(t,i,R,r,te,J,g))?(pe||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=J),d.props=r,d.state=J,d.context=g,r=R):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{d=t.stateNode,uu(e,t),g=t.memoizedProps,pe=ki(i,g),d.props=pe,ve=t.pendingProps,te=d.context,J=i.contextType,R=Li,typeof J=="object"&&J!==null&&(R=ys(J)),_=i.getDerivedStateFromProps,(J=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==ve||te!==R)&&yh(t,d,r,R),Rn=!1,te=t.memoizedState,d.state=te,Kl(t,r,d,c),Gl();var re=t.memoizedState;g!==ve||te!==re||Rn||e!==null&&e.dependencies!==null&&Xr(e.dependencies)?(typeof _=="function"&&(Ru(t,i,_,r),re=t.memoizedState),(pe=Rn||xh(t,i,pe,r,te,re,R)||e!==null&&e.dependencies!==null&&Xr(e.dependencies))?(J||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,re,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,re,R)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=re),d.props=r,d.state=re,d.context=R,r=pe):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),r=!1)}return d=r,vo(e,t),r=(t.flags&128)!==0,d||r?(d=t.stateNode,i=r&&typeof i.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&r?(t.child=yi(t,e.child,null,c),t.child=yi(t,null,i,c)):bs(e,t,i,c),t.memoizedState=d.state,e=t.child):e=un(e,t,c),e}function Mh(e,t,i,r){return mi(),t.flags|=256,bs(e,t,i,r),t.child}var Ou={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qu(e){return{baseLanes:e,cachePool:Np()}}function zu(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=ta),e}function Uh(e,t,i){var r=t.pendingProps,c=!1,d=(t.flags&128)!==0,g;if((g=d)||(g=e!==null&&e.memoizedState===null?!1:(Jt.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(xt){if(c?Bn(t):Ln(),(e=Bt)?(e=Pv(e,fa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Tn!==null?{id:qa,overflow:za}:null,retryLane:536870912,hydrationErrors:null},i=pp(e),i.return=t,t.child=i,xs=t,Bt=null)):e=null,e===null)throw Cn(t);return _d(e)?t.lanes=32:t.lanes=536870912,null}var _=r.children;return r=r.fallback,c?(Ln(),c=t.mode,_=go({mode:"hidden",children:_},c),r=fi(r,c,i,null),_.return=t,r.return=t,_.sibling=r,t.child=_,r=t.child,r.memoizedState=qu(i),r.childLanes=zu(e,g,i),t.memoizedState=Ou,er(null,r)):(Bn(t),Hu(t,_))}var R=e.memoizedState;if(R!==null&&(_=R.dehydrated,_!==null)){if(d)t.flags&256?(Bn(t),t.flags&=-257,t=Vu(e,t,i)):t.memoizedState!==null?(Ln(),t.child=e.child,t.flags|=128,t=null):(Ln(),_=r.fallback,c=t.mode,r=go({mode:"visible",children:r.children},c),_=fi(_,c,i,null),_.flags|=2,r.return=t,_.return=t,r.sibling=_,t.child=r,yi(t,e.child,null,i),r=t.child,r.memoizedState=qu(i),r.childLanes=zu(e,g,i),t.memoizedState=Ou,t=er(null,r));else if(Bn(t),_d(_)){if(g=_.nextSibling&&_.nextSibling.dataset,g)var J=g.dgst;g=J,r=Error(o(419)),r.stack="",r.digest=g,Vl({value:r,source:null,stack:null}),t=Vu(e,t,i)}else if(is||Hi(e,t,i,!1),g=(i&e.childLanes)!==0,is||g){if(g=Rt,g!==null&&(r=Ma(g,i),r!==0&&r!==R.retryLane))throw R.retryLane=r,di(e,r),Fs(g,e,r),Bu;kd(_)||So(),t=Vu(e,t,i)}else kd(_)?(t.flags|=192,t.child=e.child,t=null):(e=R.treeContext,Bt=pa(_.nextSibling),xs=t,xt=!0,En=null,fa=!1,e!==null&&gp(t,e),t=Hu(t,r.children),t.flags|=4096);return t}return c?(Ln(),_=r.fallback,c=t.mode,R=e.child,J=R.sibling,r=an(R,{mode:"hidden",children:r.children}),r.subtreeFlags=R.subtreeFlags&65011712,J!==null?_=an(J,_):(_=fi(_,c,i,null),_.flags|=2),_.return=t,r.return=t,r.sibling=_,t.child=r,er(null,r),r=t.child,_=e.child.memoizedState,_===null?_=qu(i):(c=_.cachePool,c!==null?(R=as._currentValue,c=c.parent!==R?{parent:R,pool:R}:c):c=Np(),_={baseLanes:_.baseLanes|i,cachePool:c}),r.memoizedState=_,r.childLanes=zu(e,g,i),t.memoizedState=Ou,er(e.child,r)):(Bn(t),i=e.child,e=i.sibling,i=an(i,{mode:"visible",children:r.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function Hu(e,t){return t=go({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function go(e,t){return e=Qs(22,e,null,t),e.lanes=0,e}function Vu(e,t,i){return yi(t,e.child,null,i),e=Hu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bh(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),au(e.return,t,i)}function Pu(e,t,i,r,c,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:c,treeForkCount:d}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=r,g.tail=i,g.tailMode=c,g.treeForkCount=d)}function Lh(e,t,i){var r=t.pendingProps,c=r.revealOrder,d=r.tail;r=r.children;var g=Jt.current,_=(g&2)!==0;if(_?(g=g&1|2,t.flags|=128):g&=1,G(Jt,g),bs(e,t,r,i),r=xt?Hl:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bh(e,i,t);else if(e.tag===19)Bh(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&no(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Pu(t,!1,c,i,d,r);break;case"backwards":case"unstable_legacy-backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&no(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Pu(t,!0,i,null,d,r);break;case"together":Pu(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function un(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),zn|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Hi(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,i=an(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=an(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function $u(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Xr(e)))}function Xb(e,t,i){switch(t.tag){case 3:ue(t,t.stateNode.containerInfo),Dn(t,as,e.memoizedState.cache),mi();break;case 27:case 5:Ne(t);break;case 4:ue(t,t.stateNode.containerInfo);break;case 10:Dn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,hu(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Bn(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Uh(e,t,i):(Bn(t),e=un(e,t,i),e!==null?e.sibling:null);Bn(t);break;case 19:var c=(e.flags&128)!==0;if(r=(i&t.childLanes)!==0,r||(Hi(e,t,i,!1),r=(i&t.childLanes)!==0),c){if(r)return Lh(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),G(Jt,Jt.current),r)break;return null;case 22:return t.lanes=0,Th(e,t,i,t.pendingProps);case 24:Dn(t,as,e.memoizedState.cache)}return un(e,t,i)}function Oh(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)is=!0;else{if(!$u(e,i)&&(t.flags&128)===0)return is=!1,Xb(e,t,i);is=(e.flags&131072)!==0}else is=!1,xt&&(t.flags&1048576)!==0&&vp(t,Hl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=gi(t.elementType),t.type=e,typeof e=="function")Kc(e)?(r=ki(e,r),t.tag=1,t=Rh(null,t,e,r,i)):(t.tag=0,t=Lu(null,t,e,r,i));else{if(e!=null){var c=e.$$typeof;if(c===ae){t.tag=11,t=Sh(null,t,e,r,i);break e}else if(c===E){t.tag=14,t=Ih(null,t,e,r,i);break e}}throw t=Ce(e)||e,Error(o(306,t,""))}}return t;case 0:return Lu(e,t,t.type,t.pendingProps,i);case 1:return r=t.type,c=ki(r,t.pendingProps),Rh(e,t,r,c,i);case 3:e:{if(ue(t,t.stateNode.containerInfo),e===null)throw Error(o(387));r=t.pendingProps;var d=t.memoizedState;c=d.element,uu(e,t),Kl(t,r,null,i);var g=t.memoizedState;if(r=g.cache,Dn(t,as,r),r!==d.cache&&nu(t,[as],i,!0),Gl(),r=g.element,d.isDehydrated)if(d={element:r,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=Mh(e,t,r,i);break e}else if(r!==c){c=ca(Error(o(424)),t),Vl(c),t=Mh(e,t,r,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Bt=pa(e.firstChild),xs=t,xt=!0,En=null,fa=!0,i=Tp(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(mi(),r===c){t=un(e,t,i);break e}bs(e,t,r,i)}t=t.child}return t;case 26:return vo(e,t),e===null?(i=Kv(t.type,null,t.pendingProps,null))?t.memoizedState=i:xt||(i=t.type,e=t.pendingProps,r=Ro(M.current).createElement(i),r[Ft]=t,r[Wt]=e,ks(r,i,e),Te(r),t.stateNode=r):t.memoizedState=Kv(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ne(t),e===null&&xt&&(r=t.stateNode=Wv(t.type,t.pendingProps,M.current),xs=t,fa=!0,c=Bt,Fn(t.type)?(Nd=c,Bt=pa(r.firstChild)):Bt=c),bs(e,t,t.pendingProps.children,i),vo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&xt&&((c=r=Bt)&&(r=Sk(r,t.type,t.pendingProps,fa),r!==null?(t.stateNode=r,xs=t,Bt=pa(r.firstChild),fa=!1,c=!0):c=!1),c||Cn(t)),Ne(t),c=t.type,d=t.pendingProps,g=e!==null?e.memoizedProps:null,r=d.children,xd(c,d)?r=null:g!==null&&xd(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=gu(e,t,Hb,null,null,i),hr._currentValue=c),vo(e,t),bs(e,t,r,i),t.child;case 6:return e===null&&xt&&((e=i=Bt)&&(i=Ik(i,t.pendingProps,fa),i!==null?(t.stateNode=i,xs=t,Bt=null,e=!0):e=!1),e||Cn(t)),null;case 13:return Uh(e,t,i);case 4:return ue(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=yi(t,null,r,i):bs(e,t,r,i),t.child;case 11:return Sh(e,t,t.type,t.pendingProps,i);case 7:return bs(e,t,t.pendingProps,i),t.child;case 8:return bs(e,t,t.pendingProps.children,i),t.child;case 12:return bs(e,t,t.pendingProps.children,i),t.child;case 10:return r=t.pendingProps,Dn(t,t.type,r.value),bs(e,t,r.children,i),t.child;case 9:return c=t.type._context,r=t.pendingProps.children,hi(t),c=ys(c),r=r(c),t.flags|=1,bs(e,t,r,i),t.child;case 14:return Ih(e,t,t.type,t.pendingProps,i);case 15:return Ah(e,t,t.type,t.pendingProps,i);case 19:return Lh(e,t,i);case 31:return Kb(e,t,i);case 22:return Th(e,t,i,t.pendingProps);case 24:return hi(t),r=ys(as),e===null?(c=ru(),c===null&&(c=Rt,d=iu(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=i),c=d),t.memoizedState={parent:r,cache:c},cu(t),Dn(t,as,c)):((e.lanes&i)!==0&&(uu(e,t),Kl(t,null,null,i),Gl()),c=e.memoizedState,d=t.memoizedState,c.parent!==r?(c={parent:r,cache:r},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Dn(t,as,r)):(r=d.cache,Dn(t,as,r),r!==c.cache&&nu(t,[as],i,!0))),bs(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function dn(e){e.flags|=4}function Fu(e,t,i,r,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(dv())e.flags|=8192;else throw xi=eo,ou}else e.flags&=-16777217}function qh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!eg(t))if(dv())e.flags|=8192;else throw xi=eo,ou}function xo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ja():536870912,e.lanes|=t,Ji|=t)}function tr(e,t){if(!xt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function Qb(e,t,i){var r=t.pendingProps;switch(Jc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(t),null;case 1:return Lt(t),null;case 3:return i=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),rn(as),ye(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(zi(t)?dn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,tu())),Lt(t),null;case 26:var c=t.type,d=t.memoizedState;return e===null?(dn(t),d!==null?(Lt(t),qh(t,d)):(Lt(t),Fu(t,c,null,r,i))):d?d!==e.memoizedState?(dn(t),Lt(t),qh(t,d)):(Lt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&dn(t),Lt(t),Fu(t,c,e,r,i)),null;case 27:if(Ee(t),i=M.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&dn(t);else{if(!r){if(t.stateNode===null)throw Error(o(166));return Lt(t),null}e=ie.current,zi(t)?xp(t):(e=Wv(c,r,i),t.stateNode=e,dn(t))}return Lt(t),null;case 5:if(Ee(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&dn(t);else{if(!r){if(t.stateNode===null)throw Error(o(166));return Lt(t),null}if(d=ie.current,zi(t))xp(t);else{var g=Ro(M.current);switch(d){case 1:d=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=g.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof r.is=="string"?g.createElement("select",{is:r.is}):g.createElement("select"),r.multiple?d.multiple=!0:r.size&&(d.size=r.size);break;default:d=typeof r.is=="string"?g.createElement(c,{is:r.is}):g.createElement(c)}}d[Ft]=t,d[Wt]=r;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)d.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=d;e:switch(ks(d,c,r),c){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&dn(t)}}return Lt(t),Fu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&dn(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(o(166));if(e=M.current,zi(t)){if(e=t.stateNode,i=t.memoizedProps,r=null,c=xs,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}e[Ft]=t,e=!!(e.nodeValue===i||r!==null&&r.suppressHydrationWarning===!0||Uv(e.nodeValue,i)),e||Cn(t,!0)}else e=Ro(e).createTextNode(r),e[Ft]=t,t.stateNode=e}return Lt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(r=zi(t),i!==null){if(e===null){if(!r)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Ft]=t}else mi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Lt(t),e=!1}else i=tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Js(t),t):(Js(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Lt(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=zi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[Ft]=t}else mi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Lt(t),c=!1}else c=tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Js(t),t):(Js(t),null)}return Js(t),(t.flags&128)!==0?(t.lanes=i,t):(i=r!==null,e=e!==null&&e.memoizedState!==null,i&&(r=t.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),xo(t,t.updateQueue),Lt(t),null);case 4:return ye(),e===null&&md(t.stateNode.containerInfo),Lt(t),null;case 10:return rn(t.type),Lt(t),null;case 19:if(V(Jt),r=t.memoizedState,r===null)return Lt(t),null;if(c=(t.flags&128)!==0,d=r.rendering,d===null)if(c)tr(r,!1);else{if(Kt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=no(e),d!==null){for(t.flags|=128,tr(r,!1),e=d.updateQueue,t.updateQueue=e,xo(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)mp(i,e),i=i.sibling;return G(Jt,Jt.current&1|2),xt&&nn(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&mt()>No&&(t.flags|=128,c=!0,tr(r,!1),t.lanes=4194304)}else{if(!c)if(e=no(d),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,xo(t,e),tr(r,!0),r.tail===null&&r.tailMode==="hidden"&&!d.alternate&&!xt)return Lt(t),null}else 2*mt()-r.renderingStartTime>No&&i!==536870912&&(t.flags|=128,c=!0,tr(r,!1),t.lanes=4194304);r.isBackwards?(d.sibling=t.child,t.child=d):(e=r.last,e!==null?e.sibling=d:t.child=d,r.last=d)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=mt(),e.sibling=null,i=Jt.current,G(Jt,c?i&1|2:i&1),xt&&nn(t,r.treeForkCount),e):(Lt(t),null);case 22:case 23:return Js(t),pu(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(i&536870912)!==0&&(t.flags&128)===0&&(Lt(t),t.subtreeFlags&6&&(t.flags|=8192)):Lt(t),i=t.updateQueue,i!==null&&xo(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==i&&(t.flags|=2048),e!==null&&V(vi),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),rn(as),Lt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Zb(e,t){switch(Jc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rn(as),ye(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ee(t),null;case 31:if(t.memoizedState!==null){if(Js(t),t.alternate===null)throw Error(o(340));mi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Js(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));mi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V(Jt),null;case 4:return ye(),null;case 10:return rn(t.type),null;case 22:case 23:return Js(t),pu(),e!==null&&V(vi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return rn(as),null;case 25:return null;default:return null}}function zh(e,t){switch(Jc(t),t.tag){case 3:rn(as),ye();break;case 26:case 27:case 5:Ee(t);break;case 4:ye();break;case 31:t.memoizedState!==null&&Js(t);break;case 13:Js(t);break;case 19:V(Jt);break;case 10:rn(t.type);break;case 22:case 23:Js(t),pu(),e!==null&&V(vi);break;case 24:rn(as)}}function sr(e,t){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var c=r.next;i=c;do{if((i.tag&e)===e){r=void 0;var d=i.create,g=i.inst;r=d(),g.destroy=r}i=i.next}while(i!==c)}}catch(_){At(t,t.return,_)}}function On(e,t,i){try{var r=t.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var d=c.next;r=d;do{if((r.tag&e)===e){var g=r.inst,_=g.destroy;if(_!==void 0){g.destroy=void 0,c=t;var R=i,J=_;try{J()}catch(pe){At(c,R,pe)}}}r=r.next}while(r!==d)}}catch(pe){At(t,t.return,pe)}}function Hh(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Cp(t,i)}catch(r){At(e,e.return,r)}}}function Vh(e,t,i){i.props=ki(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){At(e,t,r)}}function ar(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof i=="function"?e.refCleanup=i(r):i.current=r}}catch(c){At(e,t,c)}}function Ha(e,t){var i=e.ref,r=e.refCleanup;if(i!==null)if(typeof r=="function")try{r()}catch(c){At(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){At(e,t,c)}else i.current=null}function Ph(e){var t=e.type,i=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break e;case"img":i.src?r.src=i.src:i.srcSet&&(r.srcset=i.srcSet)}}catch(c){At(e,e.return,c)}}function Wu(e,t,i){try{var r=e.stateNode;bk(r,e.type,i,t),r[Wt]=t}catch(c){At(e,e.return,c)}}function $h(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fn(e.type)||e.tag===4}function Yu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$h(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gu(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=ss));else if(r!==4&&(r===27&&Fn(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Gu(e,t,i),e=e.sibling;e!==null;)Gu(e,t,i),e=e.sibling}function yo(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(r===27&&Fn(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(yo(e,t,i),e=e.sibling;e!==null;)yo(e,t,i),e=e.sibling}function Fh(e){var t=e.stateNode,i=e.memoizedProps;try{for(var r=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);ks(t,r,i),t[Ft]=e,t[Wt]=i}catch(d){At(e,e.return,d)}}var fn=!1,ls=!1,Ku=!1,Wh=typeof WeakSet=="function"?WeakSet:Set,ms=null;function Jb(e,t){if(e=e.containerInfo,vd=zo,e=np(e),Vc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var c=r.anchorOffset,d=r.focusNode;r=r.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var g=0,_=-1,R=-1,J=0,pe=0,ve=e,te=null;t:for(;;){for(var re;ve!==i||c!==0&&ve.nodeType!==3||(_=g+c),ve!==d||r!==0&&ve.nodeType!==3||(R=g+r),ve.nodeType===3&&(g+=ve.nodeValue.length),(re=ve.firstChild)!==null;)te=ve,ve=re;for(;;){if(ve===e)break t;if(te===i&&++J===c&&(_=g),te===d&&++pe===r&&(R=g),(re=ve.nextSibling)!==null)break;ve=te,te=ve.parentNode}ve=re}i=_===-1||R===-1?null:{start:_,end:R}}else i=null}i=i||{start:0,end:0}}else i=null;for(gd={focusedElem:e,selectionRange:i},zo=!1,ms=t;ms!==null;)if(t=ms,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ms=e;else for(;ms!==null;){switch(t=ms,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)c=e[i],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,i=t,c=d.memoizedProps,d=d.memoizedState,r=i.stateNode;try{var Me=ki(i.type,c);e=r.getSnapshotBeforeUpdate(Me,d),r.__reactInternalSnapshotBeforeUpdate=e}catch(Pe){At(i,i.return,Pe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)bd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":bd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,ms=e;break}ms=t.return}}function Yh(e,t,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:pn(e,i),r&4&&sr(5,i);break;case 1:if(pn(e,i),r&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){At(i,i.return,g)}else{var c=ki(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){At(i,i.return,g)}}r&64&&Hh(i),r&512&&ar(i,i.return);break;case 3:if(pn(e,i),r&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Cp(e,t)}catch(g){At(i,i.return,g)}}break;case 27:t===null&&r&4&&Fh(i);case 26:case 5:pn(e,i),t===null&&r&4&&Ph(i),r&512&&ar(i,i.return);break;case 12:pn(e,i);break;case 31:pn(e,i),r&4&&Xh(e,i);break;case 13:pn(e,i),r&4&&Qh(e,i),r&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=ok.bind(null,i),Ak(e,i))));break;case 22:if(r=i.memoizedState!==null||fn,!r){t=t!==null&&t.memoizedState!==null||ls,c=fn;var d=ls;fn=r,(ls=t)&&!d?hn(e,i,(i.subtreeFlags&8772)!==0):pn(e,i),fn=c,ls=d}break;case 30:break;default:pn(e,i)}}function Gh(e){var t=e.alternate;t!==null&&(e.alternate=null,Gh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&oe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zt=null,Hs=!1;function mn(e,t,i){for(i=i.child;i!==null;)Kh(e,t,i),i=i.sibling}function Kh(e,t,i){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Mt,i)}catch{}switch(i.tag){case 26:ls||Ha(i,t),mn(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:ls||Ha(i,t);var r=zt,c=Hs;Fn(i.type)&&(zt=i.stateNode,Hs=!1),mn(e,t,i),fr(i.stateNode),zt=r,Hs=c;break;case 5:ls||Ha(i,t);case 6:if(r=zt,c=Hs,zt=null,mn(e,t,i),zt=r,Hs=c,zt!==null)if(Hs)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(i.stateNode)}catch(d){At(i,t,d)}else try{zt.removeChild(i.stateNode)}catch(d){At(i,t,d)}break;case 18:zt!==null&&(Hs?(e=zt,Hv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),rl(e)):Hv(zt,i.stateNode));break;case 4:r=zt,c=Hs,zt=i.stateNode.containerInfo,Hs=!0,mn(e,t,i),zt=r,Hs=c;break;case 0:case 11:case 14:case 15:On(2,i,t),ls||On(4,i,t),mn(e,t,i);break;case 1:ls||(Ha(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"&&Vh(i,t,r)),mn(e,t,i);break;case 21:mn(e,t,i);break;case 22:ls=(r=ls)||i.memoizedState!==null,mn(e,t,i),ls=r;break;default:mn(e,t,i)}}function Xh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{rl(e)}catch(i){At(t,t.return,i)}}}function Qh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{rl(e)}catch(i){At(t,t.return,i)}}function ek(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Wh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Wh),t;default:throw Error(o(435,e.tag))}}function bo(e,t){var i=ek(e);t.forEach(function(r){if(!i.has(r)){i.add(r);var c=ck.bind(null,e,r);r.then(c,c)}})}function Vs(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var c=i[r],d=e,g=t,_=g;e:for(;_!==null;){switch(_.tag){case 27:if(Fn(_.type)){zt=_.stateNode,Hs=!1;break e}break;case 5:zt=_.stateNode,Hs=!1;break e;case 3:case 4:zt=_.stateNode.containerInfo,Hs=!0;break e}_=_.return}if(zt===null)throw Error(o(160));Kh(d,g,c),zt=null,Hs=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Zh(t,e),t=t.sibling}var wa=null;function Zh(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vs(t,e),Ps(e),r&4&&(On(3,e,e.return),sr(3,e),On(5,e,e.return));break;case 1:Vs(t,e),Ps(e),r&512&&(ls||i===null||Ha(i,i.return)),r&64&&fn&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?r:i.concat(r))));break;case 26:var c=wa;if(Vs(t,e),Ps(e),r&512&&(ls||i===null||Ha(i,i.return)),r&4){var d=i!==null?i.memoizedState:null;if(r=e.memoizedState,i===null)if(r===null)if(e.stateNode===null){e:{r=e.type,i=e.memoizedProps,c=c.ownerDocument||c;t:switch(r){case"title":d=c.getElementsByTagName("title")[0],(!d||d[I]||d[Ft]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(r),c.head.insertBefore(d,c.querySelector("head > title"))),ks(d,r,i),d[Ft]=e,Te(d),r=d;break e;case"link":var g=Zv("link","href",c).get(r+(i.href||""));if(g){for(var _=0;_<g.length;_++)if(d=g[_],d.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&d.getAttribute("rel")===(i.rel==null?null:i.rel)&&d.getAttribute("title")===(i.title==null?null:i.title)&&d.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(_,1);break t}}d=c.createElement(r),ks(d,r,i),c.head.appendChild(d);break;case"meta":if(g=Zv("meta","content",c).get(r+(i.content||""))){for(_=0;_<g.length;_++)if(d=g[_],d.getAttribute("content")===(i.content==null?null:""+i.content)&&d.getAttribute("name")===(i.name==null?null:i.name)&&d.getAttribute("property")===(i.property==null?null:i.property)&&d.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&d.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(_,1);break t}}d=c.createElement(r),ks(d,r,i),c.head.appendChild(d);break;default:throw Error(o(468,r))}d[Ft]=e,Te(d),r=d}e.stateNode=r}else Jv(c,e.type,e.stateNode);else e.stateNode=Qv(c,r,e.memoizedProps);else d!==r?(d===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):d.count--,r===null?Jv(c,e.type,e.stateNode):Qv(c,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Wu(e,e.memoizedProps,i.memoizedProps)}break;case 27:Vs(t,e),Ps(e),r&512&&(ls||i===null||Ha(i,i.return)),i!==null&&r&4&&Wu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Vs(t,e),Ps(e),r&512&&(ls||i===null||Ha(i,i.return)),e.flags&32){c=e.stateNode;try{Oa(c,"")}catch(Me){At(e,e.return,Me)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,Wu(e,c,i!==null?i.memoizedProps:c)),r&1024&&(Ku=!0);break;case 6:if(Vs(t,e),Ps(e),r&4){if(e.stateNode===null)throw Error(o(162));r=e.memoizedProps,i=e.stateNode;try{i.nodeValue=r}catch(Me){At(e,e.return,Me)}}break;case 3:if(Bo=null,c=wa,wa=Mo(t.containerInfo),Vs(t,e),wa=c,Ps(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{rl(t.containerInfo)}catch(Me){At(e,e.return,Me)}Ku&&(Ku=!1,Jh(e));break;case 4:r=wa,wa=Mo(e.stateNode.containerInfo),Vs(t,e),Ps(e),wa=r;break;case 12:Vs(t,e),Ps(e);break;case 31:Vs(t,e),Ps(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,bo(e,r)));break;case 13:Vs(t,e),Ps(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(_o=mt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,bo(e,r)));break;case 22:c=e.memoizedState!==null;var R=i!==null&&i.memoizedState!==null,J=fn,pe=ls;if(fn=J||c,ls=pe||R,Vs(t,e),ls=pe,fn=J,Ps(e),r&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(i===null||R||fn||ls||_i(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){R=i=t;try{if(d=R.stateNode,c)g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{_=R.stateNode;var ve=R.memoizedProps.style,te=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;_.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Me){At(R,R.return,Me)}}}else if(t.tag===6){if(i===null){R=t;try{R.stateNode.nodeValue=c?"":R.memoizedProps}catch(Me){At(R,R.return,Me)}}}else if(t.tag===18){if(i===null){R=t;try{var re=R.stateNode;c?Vv(re,!0):Vv(R.stateNode,!1)}catch(Me){At(R,R.return,Me)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(i=r.retryQueue,i!==null&&(r.retryQueue=null,bo(e,i))));break;case 19:Vs(t,e),Ps(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,bo(e,r)));break;case 30:break;case 21:break;default:Vs(t,e),Ps(e)}}function Ps(e){var t=e.flags;if(t&2){try{for(var i,r=e.return;r!==null;){if($h(r)){i=r;break}r=r.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var c=i.stateNode,d=Yu(e);yo(e,d,c);break;case 5:var g=i.stateNode;i.flags&32&&(Oa(g,""),i.flags&=-33);var _=Yu(e);yo(e,_,g);break;case 3:case 4:var R=i.stateNode.containerInfo,J=Yu(e);Gu(e,J,R);break;default:throw Error(o(161))}}catch(pe){At(e,e.return,pe)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Jh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function pn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Yh(e,t.alternate,t),t=t.sibling}function _i(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:On(4,t,t.return),_i(t);break;case 1:Ha(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Vh(t,t.return,i),_i(t);break;case 27:fr(t.stateNode);case 26:case 5:Ha(t,t.return),_i(t);break;case 22:t.memoizedState===null&&_i(t);break;case 30:_i(t);break;default:_i(t)}e=e.sibling}}function hn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,c=e,d=t,g=d.flags;switch(d.tag){case 0:case 11:case 15:hn(c,d,i),sr(4,d);break;case 1:if(hn(c,d,i),r=d,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(J){At(r,r.return,J)}if(r=d,c=r.updateQueue,c!==null){var _=r.stateNode;try{var R=c.shared.hiddenCallbacks;if(R!==null)for(c.shared.hiddenCallbacks=null,c=0;c<R.length;c++)Ep(R[c],_)}catch(J){At(r,r.return,J)}}i&&g&64&&Hh(d),ar(d,d.return);break;case 27:Fh(d);case 26:case 5:hn(c,d,i),i&&r===null&&g&4&&Ph(d),ar(d,d.return);break;case 12:hn(c,d,i);break;case 31:hn(c,d,i),i&&g&4&&Xh(c,d);break;case 13:hn(c,d,i),i&&g&4&&Qh(c,d);break;case 22:d.memoizedState===null&&hn(c,d,i),ar(d,d.return);break;case 30:break;default:hn(c,d,i)}t=t.sibling}}function Xu(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Pl(i))}function Qu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Pl(e))}function Sa(e,t,i,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ev(e,t,i,r),t=t.sibling}function ev(e,t,i,r){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Sa(e,t,i,r),c&2048&&sr(9,t);break;case 1:Sa(e,t,i,r);break;case 3:Sa(e,t,i,r),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Pl(e)));break;case 12:if(c&2048){Sa(e,t,i,r),e=t.stateNode;try{var d=t.memoizedProps,g=d.id,_=d.onPostCommit;typeof _=="function"&&_(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){At(t,t.return,R)}}else Sa(e,t,i,r);break;case 31:Sa(e,t,i,r);break;case 13:Sa(e,t,i,r);break;case 23:break;case 22:d=t.stateNode,g=t.alternate,t.memoizedState!==null?d._visibility&2?Sa(e,t,i,r):nr(e,t):d._visibility&2?Sa(e,t,i,r):(d._visibility|=2,Xi(e,t,i,r,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Xu(g,t);break;case 24:Sa(e,t,i,r),c&2048&&Qu(t.alternate,t);break;default:Sa(e,t,i,r)}}function Xi(e,t,i,r,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,g=t,_=i,R=r,J=g.flags;switch(g.tag){case 0:case 11:case 15:Xi(d,g,_,R,c),sr(8,g);break;case 23:break;case 22:var pe=g.stateNode;g.memoizedState!==null?pe._visibility&2?Xi(d,g,_,R,c):nr(d,g):(pe._visibility|=2,Xi(d,g,_,R,c)),c&&J&2048&&Xu(g.alternate,g);break;case 24:Xi(d,g,_,R,c),c&&J&2048&&Qu(g.alternate,g);break;default:Xi(d,g,_,R,c)}t=t.sibling}}function nr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,r=t,c=r.flags;switch(r.tag){case 22:nr(i,r),c&2048&&Xu(r.alternate,r);break;case 24:nr(i,r),c&2048&&Qu(r.alternate,r);break;default:nr(i,r)}t=t.sibling}}var ir=8192;function Qi(e,t,i){if(e.subtreeFlags&ir)for(e=e.child;e!==null;)tv(e,t,i),e=e.sibling}function tv(e,t,i){switch(e.tag){case 26:Qi(e,t,i),e.flags&ir&&e.memoizedState!==null&&zk(i,wa,e.memoizedState,e.memoizedProps);break;case 5:Qi(e,t,i);break;case 3:case 4:var r=wa;wa=Mo(e.stateNode.containerInfo),Qi(e,t,i),wa=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=ir,ir=16777216,Qi(e,t,i),ir=r):Qi(e,t,i));break;default:Qi(e,t,i)}}function sv(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function lr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];ms=r,nv(r,e)}sv(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)av(e),e=e.sibling}function av(e){switch(e.tag){case 0:case 11:case 15:lr(e),e.flags&2048&&On(9,e,e.return);break;case 3:lr(e);break;case 12:lr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ko(e)):lr(e);break;default:lr(e)}}function ko(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];ms=r,nv(r,e)}sv(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:On(8,t,t.return),ko(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,ko(t));break;default:ko(t)}e=e.sibling}}function nv(e,t){for(;ms!==null;){var i=ms;switch(i.tag){case 0:case 11:case 15:On(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var r=i.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Pl(i.memoizedState.cache)}if(r=i.child,r!==null)r.return=i,ms=r;else e:for(i=e;ms!==null;){r=ms;var c=r.sibling,d=r.return;if(Gh(r),r===i){ms=null;break e}if(c!==null){c.return=d,ms=c;break e}ms=d}}}var tk={getCacheForType:function(e){var t=ys(as),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return ys(as).controller.signal}},sk=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Rt=null,ut=null,ht=0,It=0,ea=null,qn=!1,Zi=!1,Zu=!1,vn=0,Kt=0,zn=0,Ni=0,Ju=0,ta=0,Ji=0,rr=null,$s=null,ed=!1,_o=0,iv=0,No=1/0,jo=null,Hn=null,us=0,Vn=null,el=null,gn=0,td=0,sd=null,lv=null,or=0,ad=null;function sa(){return(Nt&2)!==0&&ht!==0?ht&-ht:L.T!==null?cd():Ua()}function rv(){if(ta===0)if((ht&536870912)===0||xt){var e=Za;Za<<=1,(Za&3932160)===0&&(Za=262144),ta=e}else ta=536870912;return e=Zs.current,e!==null&&(e.flags|=32),ta}function Fs(e,t,i){(e===Rt&&(It===2||It===9)||e.cancelPendingCommit!==null)&&(tl(e,0),Pn(e,ht,ta,!1)),cs(e,i),((Nt&2)===0||e!==Rt)&&(e===Rt&&((Nt&2)===0&&(Ni|=i),Kt===4&&Pn(e,ht,ta,!1)),Va(e))}function ov(e,t,i){if((Nt&6)!==0)throw Error(o(327));var r=!i&&(t&127)===0&&(t&e.expiredLanes)===0||pt(e,t),c=r?ik(e,t):id(e,t,!0),d=r;do{if(c===0){Zi&&!r&&Pn(e,t,0,!1);break}else{if(i=e.current.alternate,d&&!ak(i)){c=id(e,t,!1),d=!1;continue}if(c===2){if(d=t,e.errorRecoveryDisabledLanes&d)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var _=e;c=rr;var R=_.current.memoizedState.isDehydrated;if(R&&(tl(_,g).flags|=256),g=id(_,g,!1),g!==2){if(Zu&&!R){_.errorRecoveryDisabledLanes|=d,Ni|=d,c=4;break e}d=$s,$s=c,d!==null&&($s===null?$s=d:$s.push.apply($s,d))}c=g}if(d=!1,c!==2)continue}}if(c===1){tl(e,0),Pn(e,t,0,!0);break}e:{switch(r=e,d=c,d){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Pn(r,t,ta,!qn);break e;case 2:$s=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=_o+300-mt(),10<c)){if(Pn(r,t,ta,!qn),_a(r,0,!0)!==0)break e;gn=t,r.timeoutHandle=qv(cv.bind(null,r,i,$s,jo,ed,t,ta,Ni,Ji,qn,d,"Throttled",-0,0),c);break e}cv(r,i,$s,jo,ed,t,ta,Ni,Ji,qn,d,null,-0,0)}}break}while(!0);Va(e)}function cv(e,t,i,r,c,d,g,_,R,J,pe,ve,te,re){if(e.timeoutHandle=-1,ve=t.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ss},tv(t,d,ve);var Me=(d&62914560)===d?_o-mt():(d&4194048)===d?iv-mt():0;if(Me=Hk(ve,Me),Me!==null){gn=d,e.cancelPendingCommit=Me(gv.bind(null,e,t,d,i,r,c,g,_,R,pe,ve,null,te,re)),Pn(e,d,g,!J);return}}gv(e,t,d,i,r,c,g,_,R)}function ak(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var r=0;r<i.length;r++){var c=i[r],d=c.getSnapshot;c=c.value;try{if(!Xs(d(),c))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pn(e,t,i,r){t&=~Ju,t&=~Ni,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var c=t;0<c;){var d=31-qt(c),g=1<<d;r[d]=-1,c&=~g}i!==0&&ot(e,i,t)}function wo(){return(Nt&6)===0?(cr(0),!1):!0}function nd(){if(ut!==null){if(It===0)var e=ut.return;else e=ut,ln=pi=null,bu(e),Fi=null,Fl=0,e=ut;for(;e!==null;)zh(e.alternate,e),e=e.return;ut=null}}function tl(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Nk(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),gn=0,nd(),Rt=e,ut=i=an(e.current,null),ht=t,It=0,ea=null,qn=!1,Zi=pt(e,t),Zu=!1,Ji=ta=Ju=Ni=zn=Kt=0,$s=rr=null,ed=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var c=31-qt(r),d=1<<c;t|=e[c],r&=~d}return vn=t,Fr(),i}function uv(e,t){Je=null,L.H=Jl,t===$i||t===Jr?(t=Sp(),It=3):t===ou?(t=Sp(),It=4):It=t===Bu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ea=t,ut===null&&(Kt=1,po(e,ca(t,e.current)))}function dv(){var e=Zs.current;return e===null?!0:(ht&4194048)===ht?ma===null:(ht&62914560)===ht||(ht&536870912)!==0?e===ma:!1}function fv(){var e=L.H;return L.H=Jl,e===null?Jl:e}function mv(){var e=L.A;return L.A=tk,e}function So(){Kt=4,qn||(ht&4194048)!==ht&&Zs.current!==null||(Zi=!0),(zn&134217727)===0&&(Ni&134217727)===0||Rt===null||Pn(Rt,ht,ta,!1)}function id(e,t,i){var r=Nt;Nt|=2;var c=fv(),d=mv();(Rt!==e||ht!==t)&&(jo=null,tl(e,t)),t=!1;var g=Kt;e:do try{if(It!==0&&ut!==null){var _=ut,R=ea;switch(It){case 8:nd(),g=6;break e;case 3:case 2:case 9:case 6:Zs.current===null&&(t=!0);var J=It;if(It=0,ea=null,sl(e,_,R,J),i&&Zi){g=0;break e}break;default:J=It,It=0,ea=null,sl(e,_,R,J)}}nk(),g=Kt;break}catch(pe){uv(e,pe)}while(!0);return t&&e.shellSuspendCounter++,ln=pi=null,Nt=r,L.H=c,L.A=d,ut===null&&(Rt=null,ht=0,Fr()),g}function nk(){for(;ut!==null;)pv(ut)}function ik(e,t){var i=Nt;Nt|=2;var r=fv(),c=mv();Rt!==e||ht!==t?(jo=null,No=mt()+500,tl(e,t)):Zi=pt(e,t);e:do try{if(It!==0&&ut!==null){t=ut;var d=ea;t:switch(It){case 1:It=0,ea=null,sl(e,t,d,1);break;case 2:case 9:if(jp(d)){It=0,ea=null,hv(t);break}t=function(){It!==2&&It!==9||Rt!==e||(It=7),Va(e)},d.then(t,t);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:jp(d)?(It=0,ea=null,hv(t)):(It=0,ea=null,sl(e,t,d,7));break;case 5:var g=null;switch(ut.tag){case 26:g=ut.memoizedState;case 5:case 27:var _=ut;if(g?eg(g):_.stateNode.complete){It=0,ea=null;var R=_.sibling;if(R!==null)ut=R;else{var J=_.return;J!==null?(ut=J,Io(J)):ut=null}break t}}It=0,ea=null,sl(e,t,d,5);break;case 6:It=0,ea=null,sl(e,t,d,6);break;case 8:nd(),Kt=6;break e;default:throw Error(o(462))}}lk();break}catch(pe){uv(e,pe)}while(!0);return ln=pi=null,L.H=r,L.A=c,Nt=i,ut!==null?0:(Rt=null,ht=0,Fr(),Kt)}function lk(){for(;ut!==null&&!Re();)pv(ut)}function pv(e){var t=Oh(e.alternate,e,vn);e.memoizedProps=e.pendingProps,t===null?Io(e):ut=t}function hv(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Dh(i,t,t.pendingProps,t.type,void 0,ht);break;case 11:t=Dh(i,t,t.pendingProps,t.type.render,t.ref,ht);break;case 5:bu(t);default:zh(i,t),t=ut=mp(t,vn),t=Oh(i,t,vn)}e.memoizedProps=e.pendingProps,t===null?Io(e):ut=t}function sl(e,t,i,r){ln=pi=null,bu(t),Fi=null,Fl=0;var c=t.return;try{if(Gb(e,c,t,i,ht)){Kt=1,po(e,ca(i,e.current)),ut=null;return}}catch(d){if(c!==null)throw ut=c,d;Kt=1,po(e,ca(i,e.current)),ut=null;return}t.flags&32768?(xt||r===1?e=!0:Zi||(ht&536870912)!==0?e=!1:(qn=e=!0,(r===2||r===9||r===3||r===6)&&(r=Zs.current,r!==null&&r.tag===13&&(r.flags|=16384))),vv(t,e)):Io(t)}function Io(e){var t=e;do{if((t.flags&32768)!==0){vv(t,qn);return}e=t.return;var i=Qb(t.alternate,t,vn);if(i!==null){ut=i;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);Kt===0&&(Kt=5)}function vv(e,t){do{var i=Zb(e.alternate,e);if(i!==null){i.flags&=32767,ut=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){ut=e;return}ut=e=i}while(e!==null);Kt=6,ut=null}function gv(e,t,i,r,c,d,g,_,R){e.cancelPendingCommit=null;do Ao();while(us!==0);if((Nt&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(d=t.lanes|t.childLanes,d|=Yc,ni(e,i,d,g,_,R),e===Rt&&(ut=Rt=null,ht=0),el=t,Vn=e,gn=i,td=d,sd=c,lv=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,uk(Ie,function(){return _v(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=L.T,L.T=null,c=U.p,U.p=2,g=Nt,Nt|=4;try{Jb(e,t,i)}finally{Nt=g,U.p=c,L.T=r}}us=1,xv(),yv(),bv()}}function xv(){if(us===1){us=0;var e=Vn,t=el,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=L.T,L.T=null;var r=U.p;U.p=2;var c=Nt;Nt|=4;try{Zh(t,e);var d=gd,g=np(e.containerInfo),_=d.focusedElem,R=d.selectionRange;if(g!==_&&_&&_.ownerDocument&&ap(_.ownerDocument.documentElement,_)){if(R!==null&&Vc(_)){var J=R.start,pe=R.end;if(pe===void 0&&(pe=J),"selectionStart"in _)_.selectionStart=J,_.selectionEnd=Math.min(pe,_.value.length);else{var ve=_.ownerDocument||document,te=ve&&ve.defaultView||window;if(te.getSelection){var re=te.getSelection(),Me=_.textContent.length,Pe=Math.min(R.start,Me),Ct=R.end===void 0?Pe:Math.min(R.end,Me);!re.extend&&Pe>Ct&&(g=Ct,Ct=Pe,Pe=g);var Y=sp(_,Pe),z=sp(_,Ct);if(Y&&z&&(re.rangeCount!==1||re.anchorNode!==Y.node||re.anchorOffset!==Y.offset||re.focusNode!==z.node||re.focusOffset!==z.offset)){var Z=ve.createRange();Z.setStart(Y.node,Y.offset),re.removeAllRanges(),Pe>Ct?(re.addRange(Z),re.extend(z.node,z.offset)):(Z.setEnd(z.node,z.offset),re.addRange(Z))}}}}for(ve=[],re=_;re=re.parentNode;)re.nodeType===1&&ve.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ve.length;_++){var he=ve[_];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}zo=!!vd,gd=vd=null}finally{Nt=c,U.p=r,L.T=i}}e.current=t,us=2}}function yv(){if(us===2){us=0;var e=Vn,t=el,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=L.T,L.T=null;var r=U.p;U.p=2;var c=Nt;Nt|=4;try{Yh(e,t.alternate,t)}finally{Nt=c,U.p=r,L.T=i}}us=3}}function bv(){if(us===4||us===3){us=0,st();var e=Vn,t=el,i=gn,r=lv;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?us=5:(us=0,el=Vn=null,kv(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Hn=null),et(i),t=t.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Mt,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=L.T,c=U.p,U.p=2,L.T=null;try{for(var d=e.onRecoverableError,g=0;g<r.length;g++){var _=r[g];d(_.value,{componentStack:_.stack})}}finally{L.T=t,U.p=c}}(gn&3)!==0&&Ao(),Va(e),c=e.pendingLanes,(i&261930)!==0&&(c&42)!==0?e===ad?or++:(or=0,ad=e):or=0,cr(0)}}function kv(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Pl(t)))}function Ao(){return xv(),yv(),bv(),_v()}function _v(){if(us!==5)return!1;var e=Vn,t=td;td=0;var i=et(gn),r=L.T,c=U.p;try{U.p=32>i?32:i,L.T=null,i=sd,sd=null;var d=Vn,g=gn;if(us=0,el=Vn=null,gn=0,(Nt&6)!==0)throw Error(o(331));var _=Nt;if(Nt|=4,av(d.current),ev(d,d.current,g,i),Nt=_,cr(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Mt,d)}catch{}return!0}finally{U.p=c,L.T=r,kv(e,t)}}function Nv(e,t,i){t=ca(i,t),t=Uu(e.stateNode,t,2),e=Un(e,t,2),e!==null&&(cs(e,2),Va(e))}function At(e,t,i){if(e.tag===3)Nv(e,e,i);else for(;t!==null;){if(t.tag===3){Nv(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hn===null||!Hn.has(r))){e=ca(i,e),i=jh(2),r=Un(t,i,2),r!==null&&(wh(i,r,t,e),cs(r,2),Va(r));break}}t=t.return}}function ld(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new sk;var c=new Set;r.set(t,c)}else c=r.get(t),c===void 0&&(c=new Set,r.set(t,c));c.has(i)||(Zu=!0,c.add(i),e=rk.bind(null,e,t,i),t.then(e,e))}function rk(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Rt===e&&(ht&i)===i&&(Kt===4||Kt===3&&(ht&62914560)===ht&&300>mt()-_o?(Nt&2)===0&&tl(e,0):Ju|=i,Ji===ht&&(Ji=0)),Va(e)}function jv(e,t){t===0&&(t=Ja()),e=di(e,t),e!==null&&(cs(e,t),Va(e))}function ok(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),jv(e,i)}function ck(e,t){var i=0;switch(e.tag){case 31:case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}r!==null&&r.delete(t),jv(e,i)}function uk(e,t){return Ge(e,t)}var To=null,al=null,rd=!1,Eo=!1,od=!1,$n=0;function Va(e){e!==al&&e.next===null&&(al===null?To=al=e:al=al.next=e),Eo=!0,rd||(rd=!0,fk())}function cr(e,t){if(!od&&Eo){od=!0;do for(var i=!1,r=To;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var d=0;else{var g=r.suspendedLanes,_=r.pingedLanes;d=(1<<31-qt(42|e)+1)-1,d&=c&~(g&~_),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,Av(r,d))}else d=ht,d=_a(r,r===Rt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(d&3)===0||pt(r,d)||(i=!0,Av(r,d));r=r.next}while(i);od=!1}}function dk(){wv()}function wv(){Eo=rd=!1;var e=0;$n!==0&&_k()&&(e=$n);for(var t=mt(),i=null,r=To;r!==null;){var c=r.next,d=Sv(r,t);d===0?(r.next=null,i===null?To=c:i.next=c,c===null&&(al=i)):(i=r,(e!==0||(d&3)!==0)&&(Eo=!0)),r=c}us!==0&&us!==5||cr(e),$n!==0&&($n=0)}function Sv(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var g=31-qt(d),_=1<<g,R=c[g];R===-1?((_&i)===0||(_&r)!==0)&&(c[g]=wl(_,t)):R<=t&&(e.expiredLanes|=_),d&=~_}if(t=Rt,i=ht,i=_a(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,i===0||e===t&&(It===2||It===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&fe(r),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||pt(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(r!==null&&fe(r),et(i)){case 2:case 8:i=ne;break;case 32:i=Ie;break;case 268435456:i=rt;break;default:i=Ie}return r=Iv.bind(null,e),i=Ge(i,r),e.callbackPriority=t,e.callbackNode=i,t}return r!==null&&r!==null&&fe(r),e.callbackPriority=2,e.callbackNode=null,2}function Iv(e,t){if(us!==0&&us!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ao()&&e.callbackNode!==i)return null;var r=ht;return r=_a(e,e===Rt?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(ov(e,r,t),Sv(e,mt()),e.callbackNode!=null&&e.callbackNode===i?Iv.bind(null,e):null)}function Av(e,t){if(Ao())return null;ov(e,t,!0)}function fk(){jk(function(){(Nt&6)!==0?Ge($t,dk):wv()})}function cd(){if($n===0){var e=Vi;e===0&&(e=ka,ka<<=1,(ka&261888)===0&&(ka=256)),$n=e}return $n}function Tv(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:We(""+e)}function Ev(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function mk(e,t,i,r,c){if(t==="submit"&&i&&i.stateNode===c){var d=Tv((c[Wt]||null).action),g=r.submitter;g&&(t=(t=g[Wt]||null)?Tv(t.formAction):g.getAttribute("formAction"),t!==null&&(d=t,g=null));var _=new Hr("action","action",null,r,c);e.push({event:_,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if($n!==0){var R=g?Ev(c,g):new FormData(c);Tu(i,{pending:!0,data:R,method:c.method,action:d},null,R)}}else typeof d=="function"&&(_.preventDefault(),R=g?Ev(c,g):new FormData(c),Tu(i,{pending:!0,data:R,method:c.method,action:d},d,R))},currentTarget:c}]})}}for(var ud=0;ud<Wc.length;ud++){var dd=Wc[ud],pk=dd.toLowerCase(),hk=dd[0].toUpperCase()+dd.slice(1);ja(pk,"on"+hk)}ja(rp,"onAnimationEnd"),ja(op,"onAnimationIteration"),ja(cp,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja(Cb,"onTransitionRun"),ja(Db,"onTransitionStart"),ja(Rb,"onTransitionCancel"),ja(up,"onTransitionEnd"),Na("onMouseEnter",["mouseout","mouseover"]),Na("onMouseLeave",["mouseout","mouseover"]),Na("onPointerEnter",["pointerout","pointerover"]),Na("onPointerLeave",["pointerout","pointerover"]),Vt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ur));function Cv(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],c=r.event;r=r.listeners;e:{var d=void 0;if(t)for(var g=r.length-1;0<=g;g--){var _=r[g],R=_.instance,J=_.currentTarget;if(_=_.listener,R!==d&&c.isPropagationStopped())break e;d=_,c.currentTarget=J;try{d(c)}catch(pe){$r(pe)}c.currentTarget=null,d=R}else for(g=0;g<r.length;g++){if(_=r[g],R=_.instance,J=_.currentTarget,_=_.listener,R!==d&&c.isPropagationStopped())break e;d=_,c.currentTarget=J;try{d(c)}catch(pe){$r(pe)}c.currentTarget=null,d=R}}}}function dt(e,t){var i=t[ii];i===void 0&&(i=t[ii]=new Set);var r=e+"__bubble";i.has(r)||(Dv(t,e,2,!1),i.add(r))}function fd(e,t,i){var r=0;t&&(r|=4),Dv(i,e,r,t)}var Co="_reactListening"+Math.random().toString(36).slice(2);function md(e){if(!e[Co]){e[Co]=!0,nt.forEach(function(i){i!=="selectionchange"&&(vk.has(i)||fd(i,!1,e),fd(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Co]||(t[Co]=!0,fd("selectionchange",!1,t))}}function Dv(e,t,i,r){switch(rg(t)){case 2:var c=$k;break;case 8:c=Fk;break;default:c=Ad}i=c.bind(null,t,i,e),c=void 0,!Rc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),r?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function pd(e,t,i,r,c){var d=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var g=r.tag;if(g===3||g===4){var _=r.stateNode.containerInfo;if(_===c)break;if(g===4)for(g=r.return;g!==null;){var R=g.tag;if((R===3||R===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;_!==null;){if(g=me(_),g===null)return;if(R=g.tag,R===5||R===6||R===26||R===27){r=d=g;continue e}_=_.parentNode}}r=r.return}Lm(function(){var J=d,pe=Cl(i),ve=[];e:{var te=dp.get(e);if(te!==void 0){var re=Hr,Me=e;switch(e){case"keypress":if(qr(i)===0)break e;case"keydown":case"keyup":re=cb;break;case"focusin":Me="focus",re=Lc;break;case"focusout":Me="blur",re=Lc;break;case"beforeblur":case"afterblur":re=Lc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=zm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Qy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=fb;break;case rp:case op:case cp:re=eb;break;case up:re=pb;break;case"scroll":case"scrollend":re=Ky;break;case"wheel":re=vb;break;case"copy":case"cut":case"paste":re=sb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Vm;break;case"toggle":case"beforetoggle":re=xb}var Pe=(t&4)!==0,Ct=!Pe&&(e==="scroll"||e==="scrollend"),Y=Pe?te!==null?te+"Capture":null:te;Pe=[];for(var z=J,Z;z!==null;){var he=z;if(Z=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||Z===null||Y===null||(he=Dl(z,Y),he!=null&&Pe.push(dr(z,he,Z))),Ct)break;z=z.return}0<Pe.length&&(te=new re(te,Me,null,i,pe),ve.push({event:te,listeners:Pe}))}}if((t&7)===0){e:{if(te=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",te&&i!==El&&(Me=i.relatedTarget||i.fromElement)&&(me(Me)||Me[Ds]))break e;if((re||te)&&(te=pe.window===pe?pe:(te=pe.ownerDocument)?te.defaultView||te.parentWindow:window,re?(Me=i.relatedTarget||i.toElement,re=J,Me=Me?me(Me):null,Me!==null&&(Ct=f(Me),Pe=Me.tag,Me!==Ct||Pe!==5&&Pe!==27&&Pe!==6)&&(Me=null)):(re=null,Me=J),re!==Me)){if(Pe=zm,he="onMouseLeave",Y="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(Pe=Vm,he="onPointerLeave",Y="onPointerEnter",z="pointer"),Ct=re==null?te:at(re),Z=Me==null?te:at(Me),te=new Pe(he,z+"leave",re,i,pe),te.target=Ct,te.relatedTarget=Z,he=null,me(pe)===J&&(Pe=new Pe(Y,z+"enter",Me,i,pe),Pe.target=Z,Pe.relatedTarget=Ct,he=Pe),Ct=he,re&&Me)t:{for(Pe=gk,Y=re,z=Me,Z=0,he=Y;he;he=Pe(he))Z++;he=0;for(var qe=z;qe;qe=Pe(qe))he++;for(;0<Z-he;)Y=Pe(Y),Z--;for(;0<he-Z;)z=Pe(z),he--;for(;Z--;){if(Y===z||z!==null&&Y===z.alternate){Pe=Y;break t}Y=Pe(Y),z=Pe(z)}Pe=null}else Pe=null;re!==null&&Rv(ve,te,re,Pe,!1),Me!==null&&Ct!==null&&Rv(ve,Ct,Me,Pe,!0)}}e:{if(te=J?at(J):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var bt=Xm;else if(Gm(te))if(Qm)bt=Ab;else{bt=Sb;var Ue=wb}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&Ci(J.elementType)&&(bt=Xm):bt=Ib;if(bt&&(bt=bt(e,J))){Km(ve,bt,i,pe);break e}Ue&&Ue(e,te,J),e==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&Yt(te,"number",te.value)}switch(Ue=J?at(J):window,e){case"focusin":(Gm(Ue)||Ue.contentEditable==="true")&&(Mi=Ue,Pc=J,zl=null);break;case"focusout":zl=Pc=Mi=null;break;case"mousedown":$c=!0;break;case"contextmenu":case"mouseup":case"dragend":$c=!1,ip(ve,i,pe);break;case"selectionchange":if(Eb)break;case"keydown":case"keyup":ip(ve,i,pe)}var tt;if(qc)e:{switch(e){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else Ri?Wm(e,i)&&(vt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(vt="onCompositionStart");vt&&(Pm&&i.locale!=="ko"&&(Ri||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Ri&&(tt=Om()):(An=pe,Mc="value"in An?An.value:An.textContent,Ri=!0)),Ue=Do(J,vt),0<Ue.length&&(vt=new Hm(vt,e,null,i,pe),ve.push({event:vt,listeners:Ue}),tt?vt.data=tt:(tt=Ym(i),tt!==null&&(vt.data=tt)))),(tt=bb?kb(e,i):_b(e,i))&&(vt=Do(J,"onBeforeInput"),0<vt.length&&(Ue=new Hm("onBeforeInput","beforeinput",null,i,pe),ve.push({event:Ue,listeners:vt}),Ue.data=tt)),mk(ve,e,J,i,pe)}Cv(ve,t)})}function dr(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Do(e,t){for(var i=t+"Capture",r=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Dl(e,i),c!=null&&r.unshift(dr(e,c,d)),c=Dl(e,t),c!=null&&r.push(dr(e,c,d))),e.tag===3)return r;e=e.return}return[]}function gk(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Rv(e,t,i,r,c){for(var d=t._reactName,g=[];i!==null&&i!==r;){var _=i,R=_.alternate,J=_.stateNode;if(_=_.tag,R!==null&&R===r)break;_!==5&&_!==26&&_!==27||J===null||(R=J,c?(J=Dl(i,d),J!=null&&g.unshift(dr(i,J,R))):c||(J=Dl(i,d),J!=null&&g.push(dr(i,J,R)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var xk=/\r\n?/g,yk=/\u0000|\uFFFD/g;function Mv(e){return(typeof e=="string"?e:""+e).replace(xk,`
`).replace(yk,"")}function Uv(e,t){return t=Mv(t),Mv(e)===t}function Et(e,t,i,r,c,d){switch(i){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||Oa(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&Oa(e,""+r);break;case"className":La(e,"class",r);break;case"tabIndex":La(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":La(e,i,r);break;case"style":Lr(e,r,d);break;case"data":if(t!=="object"){La(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=We(""+r),e.setAttribute(i,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(i==="formAction"?(t!=="input"&&Et(e,t,"name",c.name,c,null),Et(e,t,"formEncType",c.formEncType,c,null),Et(e,t,"formMethod",c.formMethod,c,null),Et(e,t,"formTarget",c.formTarget,c,null)):(Et(e,t,"encType",c.encType,c,null),Et(e,t,"method",c.method,c,null),Et(e,t,"target",c.target,c,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=We(""+r),e.setAttribute(i,r);break;case"onClick":r!=null&&(e.onclick=ss);break;case"onScroll":r!=null&&dt("scroll",e);break;case"onScrollEnd":r!=null&&dt("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(i=r.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}i=We(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""+r):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":r===!0?e.setAttribute(i,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,r):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(i,r):e.removeAttribute(i);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(i):e.setAttribute(i,r);break;case"popover":dt("beforetoggle",e),dt("toggle",e),In(e,"popover",r);break;case"xlinkActuate":Rs(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Rs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Rs(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Rs(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Rs(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Rs(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Rs(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Rs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Rs(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":In(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Ec.get(i)||i,In(e,i,r))}}function hd(e,t,i,r,c,d){switch(i){case"style":Lr(e,r,d);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(i=r.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof r=="string"?Oa(e,r):(typeof r=="number"||typeof r=="bigint")&&Oa(e,""+r);break;case"onScroll":r!=null&&dt("scroll",e);break;case"onScrollEnd":r!=null&&dt("scrollend",e);break;case"onClick":r!=null&&(e.onclick=ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!it.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),t=i.slice(2,c?i.length-7:void 0),d=e[Wt]||null,d=d!=null?d[i]:null,typeof d=="function"&&e.removeEventListener(t,d,c),typeof r=="function")){typeof d!="function"&&d!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,r,c);break e}i in e?e[i]=r:r===!0?e.setAttribute(i,""):In(e,i,r)}}}function ks(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",e),dt("load",e);var r=!1,c=!1,d;for(d in i)if(i.hasOwnProperty(d)){var g=i[d];if(g!=null)switch(d){case"src":r=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Et(e,t,d,g,i,null)}}c&&Et(e,t,"srcSet",i.srcSet,i,null),r&&Et(e,t,"src",i.src,i,null);return;case"input":dt("invalid",e);var _=d=g=c=null,R=null,J=null;for(r in i)if(i.hasOwnProperty(r)){var pe=i[r];if(pe!=null)switch(r){case"name":c=pe;break;case"type":g=pe;break;case"checked":R=pe;break;case"defaultChecked":J=pe;break;case"value":d=pe;break;case"defaultValue":_=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(o(137,t));break;default:Et(e,t,r,pe,i,null)}}St(e,d,_,R,J,g,c,!1);return;case"select":dt("invalid",e),r=g=d=null;for(c in i)if(i.hasOwnProperty(c)&&(_=i[c],_!=null))switch(c){case"value":d=_;break;case"defaultValue":g=_;break;case"multiple":r=_;default:Et(e,t,c,_,i,null)}t=d,i=g,e.multiple=!!r,t!=null?Ks(e,!!r,t,!1):i!=null&&Ks(e,!!r,i,!0);return;case"textarea":dt("invalid",e),d=c=r=null;for(g in i)if(i.hasOwnProperty(g)&&(_=i[g],_!=null))switch(g){case"value":r=_;break;case"defaultValue":c=_;break;case"children":d=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(o(91));break;default:Et(e,t,g,_,i,null)}en(e,r,c,d);return;case"option":for(R in i)i.hasOwnProperty(R)&&(r=i[R],r!=null)&&(R==="selected"?e.selected=r&&typeof r!="function"&&typeof r!="symbol":Et(e,t,R,r,i,null));return;case"dialog":dt("beforetoggle",e),dt("toggle",e),dt("cancel",e),dt("close",e);break;case"iframe":case"object":dt("load",e);break;case"video":case"audio":for(r=0;r<ur.length;r++)dt(ur[r],e);break;case"image":dt("error",e),dt("load",e);break;case"details":dt("toggle",e);break;case"embed":case"source":case"link":dt("error",e),dt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in i)if(i.hasOwnProperty(J)&&(r=i[J],r!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Et(e,t,J,r,i,null)}return;default:if(Ci(t)){for(pe in i)i.hasOwnProperty(pe)&&(r=i[pe],r!==void 0&&hd(e,t,pe,r,i,void 0));return}}for(_ in i)i.hasOwnProperty(_)&&(r=i[_],r!=null&&Et(e,t,_,r,i,null))}function bk(e,t,i,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,g=null,_=null,R=null,J=null,pe=null;for(re in i){var ve=i[re];if(i.hasOwnProperty(re)&&ve!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":R=ve;default:r.hasOwnProperty(re)||Et(e,t,re,null,r,ve)}}for(var te in r){var re=r[te];if(ve=i[te],r.hasOwnProperty(te)&&(re!=null||ve!=null))switch(te){case"type":d=re;break;case"name":c=re;break;case"checked":J=re;break;case"defaultChecked":pe=re;break;case"value":g=re;break;case"defaultValue":_=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(o(137,t));break;default:re!==ve&&Et(e,t,te,re,r,ve)}}Zt(e,g,_,R,J,pe,d,c);return;case"select":re=g=_=te=null;for(d in i)if(R=i[d],i.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":re=R;default:r.hasOwnProperty(d)||Et(e,t,d,null,r,R)}for(c in r)if(d=r[c],R=i[c],r.hasOwnProperty(c)&&(d!=null||R!=null))switch(c){case"value":te=d;break;case"defaultValue":_=d;break;case"multiple":g=d;default:d!==R&&Et(e,t,c,d,r,R)}t=_,i=g,r=re,te!=null?Ks(e,!!i,te,!1):!!r!=!!i&&(t!=null?Ks(e,!!i,t,!0):Ks(e,!!i,i?[]:"",!1));return;case"textarea":re=te=null;for(_ in i)if(c=i[_],i.hasOwnProperty(_)&&c!=null&&!r.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Et(e,t,_,null,r,c)}for(g in r)if(c=r[g],d=i[g],r.hasOwnProperty(g)&&(c!=null||d!=null))switch(g){case"value":te=c;break;case"defaultValue":re=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==d&&Et(e,t,g,c,r,d)}ri(e,te,re);return;case"option":for(var Me in i)te=i[Me],i.hasOwnProperty(Me)&&te!=null&&!r.hasOwnProperty(Me)&&(Me==="selected"?e.selected=!1:Et(e,t,Me,null,r,te));for(R in r)te=r[R],re=i[R],r.hasOwnProperty(R)&&te!==re&&(te!=null||re!=null)&&(R==="selected"?e.selected=te&&typeof te!="function"&&typeof te!="symbol":Et(e,t,R,te,r,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in i)te=i[Pe],i.hasOwnProperty(Pe)&&te!=null&&!r.hasOwnProperty(Pe)&&Et(e,t,Pe,null,r,te);for(J in r)if(te=r[J],re=i[J],r.hasOwnProperty(J)&&te!==re&&(te!=null||re!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(o(137,t));break;default:Et(e,t,J,te,r,re)}return;default:if(Ci(t)){for(var Ct in i)te=i[Ct],i.hasOwnProperty(Ct)&&te!==void 0&&!r.hasOwnProperty(Ct)&&hd(e,t,Ct,void 0,r,te);for(pe in r)te=r[pe],re=i[pe],!r.hasOwnProperty(pe)||te===re||te===void 0&&re===void 0||hd(e,t,pe,te,r,re);return}}for(var Y in i)te=i[Y],i.hasOwnProperty(Y)&&te!=null&&!r.hasOwnProperty(Y)&&Et(e,t,Y,null,r,te);for(ve in r)te=r[ve],re=i[ve],!r.hasOwnProperty(ve)||te===re||te==null&&re==null||Et(e,t,ve,te,r,re)}function Bv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kk(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),r=0;r<i.length;r++){var c=i[r],d=c.transferSize,g=c.initiatorType,_=c.duration;if(d&&_&&Bv(g)){for(g=0,_=c.responseEnd,r+=1;r<i.length;r++){var R=i[r],J=R.startTime;if(J>_)break;var pe=R.transferSize,ve=R.initiatorType;pe&&Bv(ve)&&(R=R.responseEnd,g+=pe*(R<_?1:(_-J)/(R-J)))}if(--r,t+=8*(d+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var vd=null,gd=null;function Ro(e){return e.nodeType===9?e:e.ownerDocument}function Lv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ov(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function xd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yd=null;function _k(){var e=window.event;return e&&e.type==="popstate"?e===yd?!1:(yd=e,!0):(yd=null,!1)}var qv=typeof setTimeout=="function"?setTimeout:void 0,Nk=typeof clearTimeout=="function"?clearTimeout:void 0,zv=typeof Promise=="function"?Promise:void 0,jk=typeof queueMicrotask=="function"?queueMicrotask:typeof zv<"u"?function(e){return zv.resolve(null).then(e).catch(wk)}:qv;function wk(e){setTimeout(function(){throw e})}function Fn(e){return e==="head"}function Hv(e,t){var i=t,r=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"||i==="/&"){if(r===0){e.removeChild(c),rl(t);return}r--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")r++;else if(i==="html")fr(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,fr(i);for(var d=i.firstChild;d;){var g=d.nextSibling,_=d.nodeName;d[I]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&d.rel.toLowerCase()==="stylesheet"||i.removeChild(d),d=g}}else i==="body"&&fr(e.ownerDocument.body);i=c}while(i);rl(t)}function Vv(e,t){var i=e;e=0;do{var r=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=r}while(i)}function bd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":bd(i),oe(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Sk(e,t,i,r){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[I])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=pa(e.nextSibling),e===null)break}return null}function Ik(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=pa(e.nextSibling),e===null))return null;return e}function Pv(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=pa(e.nextSibling),e===null))return null;return e}function kd(e){return e.data==="$?"||e.data==="$~"}function _d(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ak(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var r=function(){t(),i.removeEventListener("DOMContentLoaded",r)};i.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function pa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Nd=null;function $v(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return pa(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Fv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Wv(e,t,i){switch(t=Ro(i),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function fr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);oe(e)}var ha=new Map,Yv=new Set;function Mo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xn=U.d;U.d={f:Tk,r:Ek,D:Ck,C:Dk,L:Rk,m:Mk,X:Bk,S:Uk,M:Lk};function Tk(){var e=xn.f(),t=wo();return e||t}function Ek(e){var t=Ae(e);t!==null&&t.tag===5&&t.type==="form"?uh(t):xn.r(e)}var nl=typeof document>"u"?null:document;function Gv(e,t,i){var r=nl;if(r&&typeof t=="string"&&t){var c=Ze(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),Yv.has(c)||(Yv.add(c),e={rel:e,crossOrigin:i,href:t},r.querySelector(c)===null&&(t=r.createElement("link"),ks(t,"link",e),Te(t),r.head.appendChild(t)))}}function Ck(e){xn.D(e),Gv("dns-prefetch",e,null)}function Dk(e,t){xn.C(e,t),Gv("preconnect",e,t)}function Rk(e,t,i){xn.L(e,t,i);var r=nl;if(r&&e&&t){var c='link[rel="preload"][as="'+Ze(t)+'"]';t==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+Ze(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+Ze(i.imageSizes)+'"]')):c+='[href="'+Ze(e)+'"]';var d=c;switch(t){case"style":d=il(e);break;case"script":d=ll(e)}ha.has(d)||(e=b({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),ha.set(d,e),r.querySelector(c)!==null||t==="style"&&r.querySelector(mr(d))||t==="script"&&r.querySelector(pr(d))||(t=r.createElement("link"),ks(t,"link",e),Te(t),r.head.appendChild(t)))}}function Mk(e,t){xn.m(e,t);var i=nl;if(i&&e){var r=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Ze(r)+'"][href="'+Ze(e)+'"]',d=c;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ll(e)}if(!ha.has(d)&&(e=b({rel:"modulepreload",href:e},t),ha.set(d,e),i.querySelector(c)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(pr(d)))return}r=i.createElement("link"),ks(r,"link",e),Te(r),i.head.appendChild(r)}}}function Uk(e,t,i){xn.S(e,t,i);var r=nl;if(r&&e){var c=Le(r).hoistableStyles,d=il(e);t=t||"default";var g=c.get(d);if(!g){var _={loading:0,preload:null};if(g=r.querySelector(mr(d)))_.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},i),(i=ha.get(d))&&jd(e,i);var R=g=r.createElement("link");Te(R),ks(R,"link",e),R._p=new Promise(function(J,pe){R.onload=J,R.onerror=pe}),R.addEventListener("load",function(){_.loading|=1}),R.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Uo(g,t,r)}g={type:"stylesheet",instance:g,count:1,state:_},c.set(d,g)}}}function Bk(e,t){xn.X(e,t);var i=nl;if(i&&e){var r=Le(i).hoistableScripts,c=ll(e),d=r.get(c);d||(d=i.querySelector(pr(c)),d||(e=b({src:e,async:!0},t),(t=ha.get(c))&&wd(e,t),d=i.createElement("script"),Te(d),ks(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},r.set(c,d))}}function Lk(e,t){xn.M(e,t);var i=nl;if(i&&e){var r=Le(i).hoistableScripts,c=ll(e),d=r.get(c);d||(d=i.querySelector(pr(c)),d||(e=b({src:e,async:!0,type:"module"},t),(t=ha.get(c))&&wd(e,t),d=i.createElement("script"),Te(d),ks(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},r.set(c,d))}}function Kv(e,t,i,r){var c=(c=M.current)?Mo(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=il(i.href),i=Le(c).hoistableStyles,r=i.get(t),r||(r={type:"style",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=il(i.href);var d=Le(c).hoistableStyles,g=d.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,g),(d=c.querySelector(mr(e)))&&!d._p&&(g.instance=d,g.state.loading=5),ha.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ha.set(e,i),d||Ok(c,e,i,g.state))),t&&r===null)throw Error(o(528,""));return g}if(t&&r!==null)throw Error(o(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ll(i),i=Le(c).hoistableScripts,r=i.get(t),r||(r={type:"script",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function il(e){return'href="'+Ze(e)+'"'}function mr(e){return'link[rel="stylesheet"]['+e+"]"}function Xv(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Ok(e,t,i,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),ks(t,"link",i),Te(t),e.head.appendChild(t))}function ll(e){return'[src="'+Ze(e)+'"]'}function pr(e){return"script[async]"+e}function Qv(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Ze(i.href)+'"]');if(r)return t.instance=r,Te(r),r;var c=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),Te(r),ks(r,"style",c),Uo(r,i.precedence,e),t.instance=r;case"stylesheet":c=il(i.href);var d=e.querySelector(mr(c));if(d)return t.state.loading|=4,t.instance=d,Te(d),d;r=Xv(i),(c=ha.get(c))&&jd(r,c),d=(e.ownerDocument||e).createElement("link"),Te(d);var g=d;return g._p=new Promise(function(_,R){g.onload=_,g.onerror=R}),ks(d,"link",r),t.state.loading|=4,Uo(d,i.precedence,e),t.instance=d;case"script":return d=ll(i.src),(c=e.querySelector(pr(d)))?(t.instance=c,Te(c),c):(r=i,(c=ha.get(d))&&(r=b({},i),wd(r,c)),e=e.ownerDocument||e,c=e.createElement("script"),Te(c),ks(c,"link",r),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,Uo(r,i.precedence,e));return t.instance}function Uo(e,t,i){for(var r=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=r.length?r[r.length-1]:null,d=c,g=0;g<r.length;g++){var _=r[g];if(_.dataset.precedence===t)d=_;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function jd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function wd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Bo=null;function Zv(e,t,i){if(Bo===null){var r=new Map,c=Bo=new Map;c.set(i,r)}else c=Bo,r=c.get(i),r||(r=new Map,c.set(i,r));if(r.has(e))return r;for(r.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var d=i[c];if(!(d[I]||d[Ft]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var g=d.getAttribute(t)||"";g=e+g;var _=r.get(g);_?_.push(d):r.set(g,[d])}}return r}function Jv(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function qk(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function eg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function zk(e,t,i,r){if(i.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var c=il(r.href),d=t.querySelector(mr(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Lo.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=d,Te(d);return}d=t.ownerDocument||t,r=Xv(r),(c=ha.get(c))&&jd(r,c),d=d.createElement("link"),Te(d);var g=d;g._p=new Promise(function(_,R){g.onload=_,g.onerror=R}),ks(d,"link",r),i.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Lo.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Sd=0;function Hk(e,t){return e.stylesheets&&e.count===0&&qo(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var r=setTimeout(function(){if(e.stylesheets&&qo(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&Sd===0&&(Sd=62500*kk());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&qo(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Sd?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(c)}}:null}function Lo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Oo=null;function qo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Oo=new Map,t.forEach(Vk,e),Oo=null,Lo.call(e))}function Vk(e,t){if(!(t.state.loading&4)){var i=Oo.get(e);if(i)var r=i.get(null);else{i=new Map,Oo.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var g=c[d];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),r=g)}r&&i.set(null,r)}c=t.instance,g=c.getAttribute("data-precedence"),d=i.get(g)||r,d===r&&i.set(null,c),i.set(g,c),this.count++,r=Lo.bind(this),c.addEventListener("load",r),c.addEventListener("error",r),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var hr={$$typeof:B,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Pk(e,t,i,r,c,d,g,_,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ra(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.hiddenUpdates=Ra(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function tg(e,t,i,r,c,d,g,_,R,J,pe,ve){return e=new Pk(e,t,i,g,R,J,pe,ve,_),t=1,d===!0&&(t|=24),d=Qs(3,null,null,t),e.current=d,d.stateNode=e,t=iu(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:r,isDehydrated:i,cache:t},cu(d),e}function sg(e){return e?(e=Li,e):Li}function ag(e,t,i,r,c,d){c=sg(c),r.context===null?r.context=c:r.pendingContext=c,r=Mn(t),r.payload={element:i},d=d===void 0?null:d,d!==null&&(r.callback=d),i=Un(e,r,t),i!==null&&(Fs(i,e,t),Yl(i,e,t))}function ng(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Id(e,t){ng(e,t),(e=e.alternate)&&ng(e,t)}function ig(e){if(e.tag===13||e.tag===31){var t=di(e,67108864);t!==null&&Fs(t,e,67108864),Id(e,67108864)}}function lg(e){if(e.tag===13||e.tag===31){var t=sa();t=ct(t);var i=di(e,t);i!==null&&Fs(i,e,t),Id(e,t)}}var zo=!0;function $k(e,t,i,r){var c=L.T;L.T=null;var d=U.p;try{U.p=2,Ad(e,t,i,r)}finally{U.p=d,L.T=c}}function Fk(e,t,i,r){var c=L.T;L.T=null;var d=U.p;try{U.p=8,Ad(e,t,i,r)}finally{U.p=d,L.T=c}}function Ad(e,t,i,r){if(zo){var c=Td(r);if(c===null)pd(e,t,r,Ho,i),og(e,r);else if(Yk(c,e,t,i,r))r.stopPropagation();else if(og(e,r),t&4&&-1<Wk.indexOf(e)){for(;c!==null;){var d=Ae(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var g=Ss(d.pendingLanes);if(g!==0){var _=d;for(_.pendingLanes|=2,_.entangledLanes|=2;g;){var R=1<<31-qt(g);_.entanglements[1]|=R,g&=~R}Va(d),(Nt&6)===0&&(No=mt()+500,cr(0))}}break;case 31:case 13:_=di(d,2),_!==null&&Fs(_,d,2),wo(),Id(d,2)}if(d=Td(r),d===null&&pd(e,t,r,Ho,i),d===c)break;c=d}c!==null&&r.stopPropagation()}else pd(e,t,r,null,i)}}function Td(e){return e=Cl(e),Ed(e)}var Ho=null;function Ed(e){if(Ho=null,e=me(e),e!==null){var t=f(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=p(t),e!==null)return e;e=null}else if(i===31){if(e=m(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ho=e,null}function rg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Es()){case $t:return 2;case ne:return 8;case Ie:case $e:return 32;case rt:return 268435456;default:return 32}default:return 32}}var Cd=!1,Wn=null,Yn=null,Gn=null,vr=new Map,gr=new Map,Kn=[],Wk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function og(e,t){switch(e){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":vr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gr.delete(t.pointerId)}}function xr(e,t,i,r,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Ae(t),t!==null&&ig(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Yk(e,t,i,r,c){switch(t){case"focusin":return Wn=xr(Wn,e,t,i,r,c),!0;case"dragenter":return Yn=xr(Yn,e,t,i,r,c),!0;case"mouseover":return Gn=xr(Gn,e,t,i,r,c),!0;case"pointerover":var d=c.pointerId;return vr.set(d,xr(vr.get(d)||null,e,t,i,r,c)),!0;case"gotpointercapture":return d=c.pointerId,gr.set(d,xr(gr.get(d)||null,e,t,i,r,c)),!0}return!1}function cg(e){var t=me(e.target);if(t!==null){var i=f(t);if(i!==null){if(t=i.tag,t===13){if(t=p(i),t!==null){e.blockedOn=t,la(e.priority,function(){lg(i)});return}}else if(t===31){if(t=m(i),t!==null){e.blockedOn=t,la(e.priority,function(){lg(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Td(e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);El=r,i.target.dispatchEvent(r),El=null}else return t=Ae(i),t!==null&&ig(t),e.blockedOn=i,!1;t.shift()}return!0}function ug(e,t,i){Vo(e)&&i.delete(t)}function Gk(){Cd=!1,Wn!==null&&Vo(Wn)&&(Wn=null),Yn!==null&&Vo(Yn)&&(Yn=null),Gn!==null&&Vo(Gn)&&(Gn=null),vr.forEach(ug),gr.forEach(ug)}function Po(e,t){e.blockedOn===t&&(e.blockedOn=null,Cd||(Cd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Gk)))}var $o=null;function dg(e){$o!==e&&($o=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){$o===e&&($o=null);for(var t=0;t<e.length;t+=3){var i=e[t],r=e[t+1],c=e[t+2];if(typeof r!="function"){if(Ed(r||i)===null)continue;break}var d=Ae(i);d!==null&&(e.splice(t,3),t-=3,Tu(d,{pending:!0,data:c,method:i.method,action:r},r,c))}}))}function rl(e){function t(R){return Po(R,e)}Wn!==null&&Po(Wn,e),Yn!==null&&Po(Yn,e),Gn!==null&&Po(Gn,e),vr.forEach(t),gr.forEach(t);for(var i=0;i<Kn.length;i++){var r=Kn[i];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Kn.length&&(i=Kn[0],i.blockedOn===null);)cg(i),i.blockedOn===null&&Kn.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(r=0;r<i.length;r+=3){var c=i[r],d=i[r+1],g=c[Wt]||null;if(typeof d=="function")g||dg(i);else if(g){var _=null;if(d&&d.hasAttribute("formAction")){if(c=d,g=d[Wt]||null)_=g.formAction;else if(Ed(c)!==null)continue}else _=g.action;typeof _=="function"?i[r+1]=_:(i.splice(r,3),r-=3),dg(i)}}}function fg(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),r||setTimeout(i,20)}function i(){if(!r&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Dd(e){this._internalRoot=e}Fo.prototype.render=Dd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var i=t.current,r=sa();ag(i,r,e,t,null,null)},Fo.prototype.unmount=Dd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ag(e.current,2,null,e,null,null),wo(),t[Ds]=null}};function Fo(e){this._internalRoot=e}Fo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ua();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Kn.length&&t!==0&&t<Kn[i].priority;i++);Kn.splice(i,0,e),i===0&&cg(e)}};var mg=a.version;if(mg!=="19.2.4")throw Error(o(527,mg,"19.2.4"));U.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=x(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Kk={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wo.isDisabled&&Wo.supportsFiber)try{Mt=Wo.inject(Kk),gt=Wo}catch{}}return br.createRoot=function(e,t){if(!u(e))throw Error(o(299));var i=!1,r="",c=bh,d=kh,g=_h;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=tg(e,1,!1,null,null,i,r,null,c,d,g,fg),e[Ds]=t.current,md(e),new Dd(t)},br.hydrateRoot=function(e,t,i){if(!u(e))throw Error(o(299));var r=!1,c="",d=bh,g=kh,_=_h,R=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.formState!==void 0&&(R=i.formState)),t=tg(e,1,!0,t,i??null,r,c,R,d,g,_,fg),t.context=sg(null),i=t.current,r=sa(),r=ct(r),c=Mn(r),c.callback=null,Un(i,c,r),i=r,t.current.lanes=i,cs(t,i),Va(t),e[Ds]=t.current,md(e),new Fo(t)},br.version="19.2.4",br}var Ng;function n_(){if(Ng)return Ud.exports;Ng=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),Ud.exports=a_(),Ud.exports}var i_=n_();var jg="popstate";function l_(s={}){function a(o,u){let{pathname:f,search:p,hash:m}=o.location;return pf("",{pathname:f,search:p,hash:m},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function l(o,u){return typeof u=="string"?u:Cr(u)}return o_(a,l,null,s)}function Ht(s,a){if(s===!1||s===null||typeof s>"u")throw new Error(a)}function ga(s,a){if(!s){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function r_(){return Math.random().toString(36).substring(2,10)}function wg(s,a){return{usr:s.state,key:s.key,idx:a}}function pf(s,a,l=null,o){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof a=="string"?bl(a):a,state:l,key:a&&a.key||o||r_()}}function Cr({pathname:s="/",search:a="",hash:l=""}){return a&&a!=="?"&&(s+=a.charAt(0)==="?"?a:"?"+a),l&&l!=="#"&&(s+=l.charAt(0)==="#"?l:"#"+l),s}function bl(s){let a={};if(s){let l=s.indexOf("#");l>=0&&(a.hash=s.substring(l),s=s.substring(0,l));let o=s.indexOf("?");o>=0&&(a.search=s.substring(o),s=s.substring(0,o)),s&&(a.pathname=s)}return a}function o_(s,a,l,o={}){let{window:u=document.defaultView,v5Compat:f=!1}=o,p=u.history,m="POP",v=null,x=y();x==null&&(x=0,p.replaceState({...p.state,idx:x},""));function y(){return(p.state||{idx:null}).idx}function b(){m="POP";let D=y(),F=D==null?null:D-x;x=D,v&&v({action:m,location:k.location,delta:F})}function N(D,F){m="PUSH";let q=pf(k.location,D,F);x=y()+1;let B=wg(q,x),ae=k.createHref(q);try{p.pushState(B,"",ae)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;u.location.assign(ae)}f&&v&&v({action:m,location:k.location,delta:1})}function j(D,F){m="REPLACE";let q=pf(k.location,D,F);x=y();let B=wg(q,x),ae=k.createHref(q);p.replaceState(B,"",ae),f&&v&&v({action:m,location:k.location,delta:0})}function C(D){return c_(D)}let k={get action(){return m},get location(){return s(u,p)},listen(D){if(v)throw new Error("A history only accepts one active listener");return u.addEventListener(jg,b),v=D,()=>{u.removeEventListener(jg,b),v=null}},createHref(D){return a(u,D)},createURL:C,encodeLocation(D){let F=C(D);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:N,replace:j,go(D){return p.go(D)}};return k}function c_(s,a=!1){let l="http://localhost";typeof window<"u"&&(l=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(l,"No window.location.(origin|href) available to create URL");let o=typeof s=="string"?s:Cr(s);return o=o.replace(/ $/,"%20"),!a&&o.startsWith("//")&&(o=l+o),new URL(o,l)}function qx(s,a,l="/"){return u_(s,a,l,!1)}function u_(s,a,l,o){let u=typeof a=="string"?bl(a):a,f=Sn(u.pathname||"/",l);if(f==null)return null;let p=zx(s);d_(p);let m=null;for(let v=0;m==null&&v<p.length;++v){let x=__(f);m=b_(p[v],x,o)}return m}function zx(s,a=[],l=[],o="",u=!1){let f=(p,m,v=u,x)=>{let y={relativePath:x===void 0?p.path||"":x,caseSensitive:p.caseSensitive===!0,childrenIndex:m,route:p};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&v)return;Ht(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let b=jn([o,y.relativePath]),N=l.concat(y);p.children&&p.children.length>0&&(Ht(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),zx(p.children,a,N,b,v)),!(p.path==null&&!p.index)&&a.push({path:b,score:x_(b,p.index),routesMeta:N})};return s.forEach((p,m)=>{if(p.path===""||!p.path?.includes("?"))f(p,m);else for(let v of Hx(p.path))f(p,m,!0,v)}),a}function Hx(s){let a=s.split("/");if(a.length===0)return[];let[l,...o]=a,u=l.endsWith("?"),f=l.replace(/\?$/,"");if(o.length===0)return u?[f,""]:[f];let p=Hx(o.join("/")),m=[];return m.push(...p.map(v=>v===""?f:[f,v].join("/"))),u&&m.push(...p),m.map(v=>s.startsWith("/")&&v===""?"/":v)}function d_(s){s.sort((a,l)=>a.score!==l.score?l.score-a.score:y_(a.routesMeta.map(o=>o.childrenIndex),l.routesMeta.map(o=>o.childrenIndex)))}var f_=/^:[\w-]+$/,m_=3,p_=2,h_=1,v_=10,g_=-2,Sg=s=>s==="*";function x_(s,a){let l=s.split("/"),o=l.length;return l.some(Sg)&&(o+=g_),a&&(o+=p_),l.filter(u=>!Sg(u)).reduce((u,f)=>u+(f_.test(f)?m_:f===""?h_:v_),o)}function y_(s,a){return s.length===a.length&&s.slice(0,-1).every((o,u)=>o===a[u])?s[s.length-1]-a[a.length-1]:0}function b_(s,a,l=!1){let{routesMeta:o}=s,u={},f="/",p=[];for(let m=0;m<o.length;++m){let v=o[m],x=m===o.length-1,y=f==="/"?a:a.slice(f.length)||"/",b=xc({path:v.relativePath,caseSensitive:v.caseSensitive,end:x},y),N=v.route;if(!b&&x&&l&&!o[o.length-1].route.index&&(b=xc({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},y)),!b)return null;Object.assign(u,b.params),p.push({params:u,pathname:jn([f,b.pathname]),pathnameBase:S_(jn([f,b.pathnameBase])),route:N}),b.pathnameBase!=="/"&&(f=jn([f,b.pathnameBase]))}return p}function xc(s,a){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[l,o]=k_(s.path,s.caseSensitive,s.end),u=a.match(l);if(!u)return null;let f=u[0],p=f.replace(/(.)\/+$/,"$1"),m=u.slice(1);return{params:o.reduce((x,{paramName:y,isOptional:b},N)=>{if(y==="*"){let C=m[N]||"";p=f.slice(0,f.length-C.length).replace(/(.)\/+$/,"$1")}const j=m[N];return b&&!j?x[y]=void 0:x[y]=(j||"").replace(/%2F/g,"/"),x},{}),pathname:f,pathnameBase:p,pattern:s}}function k_(s,a=!1,l=!0){ga(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let o=[],u="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,m,v)=>(o.push({paramName:m,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(o.push({paramName:"*"}),u+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?u+="\\/*$":s!==""&&s!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,a?void 0:"i"),o]}function __(s){try{return s.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return ga(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),s}}function Sn(s,a){if(a==="/")return s;if(!s.toLowerCase().startsWith(a.toLowerCase()))return null;let l=a.endsWith("/")?a.length-1:a.length,o=s.charAt(l);return o&&o!=="/"?null:s.slice(l)||"/"}var N_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function j_(s,a="/"){let{pathname:l,search:o="",hash:u=""}=typeof s=="string"?bl(s):s,f;return l?(l=l.replace(/\/\/+/g,"/"),l.startsWith("/")?f=Ig(l.substring(1),"/"):f=Ig(l,a)):f=a,{pathname:f,search:I_(o),hash:A_(u)}}function Ig(s,a){let l=a.replace(/\/+$/,"").split("/");return s.split("/").forEach(u=>{u===".."?l.length>1&&l.pop():u!=="."&&l.push(u)}),l.length>1?l.join("/"):"/"}function qd(s,a,l,o){return`Cannot include a '${s}' character in a manually specified \`to.${a}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function w_(s){return s.filter((a,l)=>l===0||a.route.path&&a.route.path.length>0)}function lm(s){let a=w_(s);return a.map((l,o)=>o===a.length-1?l.pathname:l.pathnameBase)}function rm(s,a,l,o=!1){let u;typeof s=="string"?u=bl(s):(u={...s},Ht(!u.pathname||!u.pathname.includes("?"),qd("?","pathname","search",u)),Ht(!u.pathname||!u.pathname.includes("#"),qd("#","pathname","hash",u)),Ht(!u.search||!u.search.includes("#"),qd("#","search","hash",u)));let f=s===""||u.pathname==="",p=f?"/":u.pathname,m;if(p==null)m=l;else{let b=a.length-1;if(!o&&p.startsWith("..")){let N=p.split("/");for(;N[0]==="..";)N.shift(),b-=1;u.pathname=N.join("/")}m=b>=0?a[b]:"/"}let v=j_(u,m),x=p&&p!=="/"&&p.endsWith("/"),y=(f||p===".")&&l.endsWith("/");return!v.pathname.endsWith("/")&&(x||y)&&(v.pathname+="/"),v}var jn=s=>s.join("/").replace(/\/\/+/g,"/"),S_=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),I_=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,A_=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,T_=class{constructor(s,a,l,o=!1){this.status=s,this.statusText=a||"",this.internal=o,l instanceof Error?(this.data=l.toString(),this.error=l):this.data=l}};function E_(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function C_(s){return s.map(a=>a.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Vx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Px(s,a){let l=s;if(typeof l!="string"||!N_.test(l))return{absoluteURL:void 0,isExternal:!1,to:l};let o=l,u=!1;if(Vx)try{let f=new URL(window.location.href),p=l.startsWith("//")?new URL(f.protocol+l):new URL(l),m=Sn(p.pathname,a);p.origin===f.origin&&m!=null?l=m+p.search+p.hash:u=!0}catch{ga(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $x=["POST","PUT","PATCH","DELETE"];new Set($x);var D_=["GET",...$x];new Set(D_);var kl=h.createContext(null);kl.displayName="DataRouter";var jc=h.createContext(null);jc.displayName="DataRouterState";var R_=h.createContext(!1),Fx=h.createContext({isTransitioning:!1});Fx.displayName="ViewTransition";var M_=h.createContext(new Map);M_.displayName="Fetchers";var U_=h.createContext(null);U_.displayName="Await";var na=h.createContext(null);na.displayName="Navigation";var Rr=h.createContext(null);Rr.displayName="Location";var xa=h.createContext({outlet:null,matches:[],isDataRoute:!1});xa.displayName="Route";var om=h.createContext(null);om.displayName="RouteError";var Wx="REACT_ROUTER_ERROR",B_="REDIRECT",L_="ROUTE_ERROR_RESPONSE";function O_(s){if(s.startsWith(`${Wx}:${B_}:{`))try{let a=JSON.parse(s.slice(28));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.location=="string"&&typeof a.reloadDocument=="boolean"&&typeof a.replace=="boolean")return a}catch{}}function q_(s){if(s.startsWith(`${Wx}:${L_}:{`))try{let a=JSON.parse(s.slice(40));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string")return new T_(a.status,a.statusText,a.data)}catch{}}function z_(s,{relative:a}={}){Ht(_l(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:o}=h.useContext(na),{hash:u,pathname:f,search:p}=Mr(s,{relative:a}),m=f;return l!=="/"&&(m=f==="/"?l:jn([l,f])),o.createHref({pathname:m,search:p,hash:u})}function _l(){return h.useContext(Rr)!=null}function ts(){return Ht(_l(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Rr).location}var Yx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gx(s){h.useContext(na).static||h.useLayoutEffect(s)}function Qt(){let{isDataRoute:s}=h.useContext(xa);return s?tN():H_()}function H_(){Ht(_l(),"useNavigate() may be used only in the context of a <Router> component.");let s=h.useContext(kl),{basename:a,navigator:l}=h.useContext(na),{matches:o}=h.useContext(xa),{pathname:u}=ts(),f=JSON.stringify(lm(o)),p=h.useRef(!1);return Gx(()=>{p.current=!0}),h.useCallback((v,x={})=>{if(ga(p.current,Yx),!p.current)return;if(typeof v=="number"){l.go(v);return}let y=rm(v,JSON.parse(f),u,x.relative==="path");s==null&&a!=="/"&&(y.pathname=y.pathname==="/"?a:jn([a,y.pathname])),(x.replace?l.replace:l.push)(y,x.state,x)},[a,l,f,u,s])}var V_=h.createContext(null);function P_(s){let a=h.useContext(xa).outlet;return h.useMemo(()=>a&&h.createElement(V_.Provider,{value:s},a),[a,s])}function si(){let{matches:s}=h.useContext(xa),a=s[s.length-1];return a?a.params:{}}function Mr(s,{relative:a}={}){let{matches:l}=h.useContext(xa),{pathname:o}=ts(),u=JSON.stringify(lm(l));return h.useMemo(()=>rm(s,JSON.parse(u),o,a==="path"),[s,u,o,a])}function $_(s,a){return Kx(s,a)}function Kx(s,a,l,o,u){Ht(_l(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=h.useContext(na),{matches:p}=h.useContext(xa),m=p[p.length-1],v=m?m.params:{},x=m?m.pathname:"/",y=m?m.pathnameBase:"/",b=m&&m.route;{let q=b&&b.path||"";Qx(x,!b||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let N=ts(),j;if(a){let q=typeof a=="string"?bl(a):a;Ht(y==="/"||q.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${q.pathname}" was given in the \`location\` prop.`),j=q}else j=N;let C=j.pathname||"/",k=C;if(y!=="/"){let q=y.replace(/^\//,"").split("/");k="/"+C.replace(/^\//,"").split("/").slice(q.length).join("/")}let D=qx(s,{pathname:k});ga(b||D!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),ga(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=K_(D&&D.map(q=>Object.assign({},q,{params:Object.assign({},v,q.params),pathname:jn([y,f.encodeLocation?f.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?y:jn([y,f.encodeLocation?f.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),p,l,o,u);return a&&F?h.createElement(Rr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},F):F}function F_(){let s=eN(),a=E_(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),l=s instanceof Error?s.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},f={padding:"2px 4px",backgroundColor:o},p=null;return console.error("Error handled by React Router default ErrorBoundary:",s),p=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:f},"ErrorBoundary")," or"," ",h.createElement("code",{style:f},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},a),l?h.createElement("pre",{style:u},l):null,p)}var W_=h.createElement(F_,null),Xx=class extends h.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,a){return a.location!==s.location||a.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:a.error,location:a.location,revalidation:s.revalidation||a.revalidation}}componentDidCatch(s,a){this.props.onError?this.props.onError(s,a):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const l=q_(s.digest);l&&(s=l)}let a=s!==void 0?h.createElement(xa.Provider,{value:this.props.routeContext},h.createElement(om.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?h.createElement(Y_,{error:s},a):a}};Xx.contextType=R_;var zd=new WeakMap;function Y_({children:s,error:a}){let{basename:l}=h.useContext(na);if(typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){let o=O_(a.digest);if(o){let u=zd.get(a);if(u)throw u;let f=Px(o.location,l);if(Vx&&!zd.get(a))if(f.isExternal||o.reloadDocument)window.location.href=f.absoluteURL||f.to;else{const p=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(f.to,{replace:o.replace}));throw zd.set(a,p),p}return h.createElement("meta",{httpEquiv:"refresh",content:`0;url=${f.absoluteURL||f.to}`})}}return s}function G_({routeContext:s,match:a,children:l}){let o=h.useContext(kl);return o&&o.static&&o.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=a.route.id),h.createElement(xa.Provider,{value:s},l)}function K_(s,a=[],l=null,o=null,u=null){if(s==null){if(!l)return null;if(l.errors)s=l.matches;else if(a.length===0&&!l.initialized&&l.matches.length>0)s=l.matches;else return null}let f=s,p=l?.errors;if(p!=null){let y=f.findIndex(b=>b.route.id&&p?.[b.route.id]!==void 0);Ht(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),f=f.slice(0,Math.min(f.length,y+1))}let m=!1,v=-1;if(l)for(let y=0;y<f.length;y++){let b=f[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(v=y),b.route.id){let{loaderData:N,errors:j}=l,C=b.route.loader&&!N.hasOwnProperty(b.route.id)&&(!j||j[b.route.id]===void 0);if(b.route.lazy||C){m=!0,v>=0?f=f.slice(0,v+1):f=[f[0]];break}}}let x=l&&o?(y,b)=>{o(y,{location:l.location,params:l.matches?.[0]?.params??{},unstable_pattern:C_(l.matches),errorInfo:b})}:void 0;return f.reduceRight((y,b,N)=>{let j,C=!1,k=null,D=null;l&&(j=p&&b.route.id?p[b.route.id]:void 0,k=b.route.errorElement||W_,m&&(v<0&&N===0?(Qx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,D=null):v===N&&(C=!0,D=b.route.hydrateFallbackElement||null)));let F=a.concat(f.slice(0,N+1)),q=()=>{let B;return j?B=k:C?B=D:b.route.Component?B=h.createElement(b.route.Component,null):b.route.element?B=b.route.element:B=y,h.createElement(G_,{match:b,routeContext:{outlet:y,matches:F,isDataRoute:l!=null},children:B})};return l&&(b.route.ErrorBoundary||b.route.errorElement||N===0)?h.createElement(Xx,{location:l.location,revalidation:l.revalidation,component:k,error:j,children:q(),routeContext:{outlet:null,matches:F,isDataRoute:!0},onError:x}):q()},null)}function cm(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X_(s){let a=h.useContext(kl);return Ht(a,cm(s)),a}function Q_(s){let a=h.useContext(jc);return Ht(a,cm(s)),a}function Z_(s){let a=h.useContext(xa);return Ht(a,cm(s)),a}function um(s){let a=Z_(s),l=a.matches[a.matches.length-1];return Ht(l.route.id,`${s} can only be used on routes that contain a unique "id"`),l.route.id}function J_(){return um("useRouteId")}function eN(){let s=h.useContext(om),a=Q_("useRouteError"),l=um("useRouteError");return s!==void 0?s:a.errors?.[l]}function tN(){let{router:s}=X_("useNavigate"),a=um("useNavigate"),l=h.useRef(!1);return Gx(()=>{l.current=!0}),h.useCallback(async(u,f={})=>{ga(l.current,Yx),l.current&&(typeof u=="number"?await s.navigate(u):await s.navigate(u,{fromRouteId:a,...f}))},[s,a])}var Ag={};function Qx(s,a,l){!a&&!Ag[s]&&(Ag[s]=!0,ga(!1,l))}h.memo(sN);function sN({routes:s,future:a,state:l,onError:o}){return Kx(s,void 0,l,o,a)}function fl({to:s,replace:a,state:l,relative:o}){Ht(_l(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=h.useContext(na);ga(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:f}=h.useContext(xa),{pathname:p}=ts(),m=Qt(),v=rm(s,lm(f),p,o==="path"),x=JSON.stringify(v);return h.useEffect(()=>{m(JSON.parse(x),{replace:a,state:l,relative:o})},[m,x,o,a,l]),null}function Zx(s){return P_(s.context)}function wt(s){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aN({basename:s="/",children:a=null,location:l,navigationType:o="POP",navigator:u,static:f=!1,unstable_useTransitions:p}){Ht(!_l(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=s.replace(/^\/*/,"/"),v=h.useMemo(()=>({basename:m,navigator:u,static:f,unstable_useTransitions:p,future:{}}),[m,u,f,p]);typeof l=="string"&&(l=bl(l));let{pathname:x="/",search:y="",hash:b="",state:N=null,key:j="default"}=l,C=h.useMemo(()=>{let k=Sn(x,m);return k==null?null:{location:{pathname:k,search:y,hash:b,state:N,key:j},navigationType:o}},[m,x,y,b,N,j,o]);return ga(C!=null,`<Router basename="${m}"> is not able to match the URL "${x}${y}${b}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:h.createElement(na.Provider,{value:v},h.createElement(Rr.Provider,{children:a,value:C}))}function nN({children:s,location:a}){return $_(hf(s),a)}function hf(s,a=[]){let l=[];return h.Children.forEach(s,(o,u)=>{if(!h.isValidElement(o))return;let f=[...a,u];if(o.type===h.Fragment){l.push.apply(l,hf(o.props.children,f));return}Ht(o.type===wt,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!o.props.index||!o.props.children,"An index route cannot have child routes.");let p={id:o.props.id||f.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(p.children=hf(o.props.children,f)),l.push(p)}),l}var dc="get",fc="application/x-www-form-urlencoded";function wc(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function iN(s){return wc(s)&&s.tagName.toLowerCase()==="button"}function lN(s){return wc(s)&&s.tagName.toLowerCase()==="form"}function rN(s){return wc(s)&&s.tagName.toLowerCase()==="input"}function oN(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function cN(s,a){return s.button===0&&(!a||a==="_self")&&!oN(s)}function vf(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((a,l)=>{let o=s[l];return a.concat(Array.isArray(o)?o.map(u=>[l,u]):[[l,o]])},[]))}function uN(s,a){let l=vf(s);return a&&a.forEach((o,u)=>{l.has(u)||a.getAll(u).forEach(f=>{l.append(u,f)})}),l}var Yo=null;function dN(){if(Yo===null)try{new FormData(document.createElement("form"),0),Yo=!1}catch{Yo=!0}return Yo}var fN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hd(s){return s!=null&&!fN.has(s)?(ga(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fc}"`),null):s}function mN(s,a){let l,o,u,f,p;if(lN(s)){let m=s.getAttribute("action");o=m?Sn(m,a):null,l=s.getAttribute("method")||dc,u=Hd(s.getAttribute("enctype"))||fc,f=new FormData(s)}else if(iN(s)||rN(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=s.getAttribute("formaction")||m.getAttribute("action");if(o=v?Sn(v,a):null,l=s.getAttribute("formmethod")||m.getAttribute("method")||dc,u=Hd(s.getAttribute("formenctype"))||Hd(m.getAttribute("enctype"))||fc,f=new FormData(m,s),!dN()){let{name:x,type:y,value:b}=s;if(y==="image"){let N=x?`${x}.`:"";f.append(`${N}x`,"0"),f.append(`${N}y`,"0")}else x&&f.append(x,b)}}else{if(wc(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=dc,o=null,u=fc,p=s}return f&&u==="text/plain"&&(p=f,f=void 0),{action:o,method:l.toLowerCase(),encType:u,formData:f,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dm(s,a){if(s===!1||s===null||typeof s>"u")throw new Error(a)}function pN(s,a,l,o){let u=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return l?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${o}`:u.pathname=`${u.pathname}.${o}`:u.pathname==="/"?u.pathname=`_root.${o}`:a&&Sn(u.pathname,a)==="/"?u.pathname=`${a.replace(/\/$/,"")}/_root.${o}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${o}`,u}async function hN(s,a){if(s.id in a)return a[s.id];try{let l=await import(s.module);return a[s.id]=l,l}catch(l){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vN(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function gN(s,a,l){let o=await Promise.all(s.map(async u=>{let f=a.routes[u.route.id];if(f){let p=await hN(f,l);return p.links?p.links():[]}return[]}));return kN(o.flat(1).filter(vN).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Tg(s,a,l,o,u,f){let p=(v,x)=>l[x]?v.route.id!==l[x].route.id:!0,m=(v,x)=>l[x].pathname!==v.pathname||l[x].route.path?.endsWith("*")&&l[x].params["*"]!==v.params["*"];return f==="assets"?a.filter((v,x)=>p(v,x)||m(v,x)):f==="data"?a.filter((v,x)=>{let y=o.routes[v.route.id];if(!y||!y.hasLoader)return!1;if(p(v,x)||m(v,x))return!0;if(v.route.shouldRevalidate){let b=v.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:l[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function xN(s,a,{includeHydrateFallback:l}={}){return yN(s.map(o=>{let u=a.routes[o.route.id];if(!u)return[];let f=[u.module];return u.clientActionModule&&(f=f.concat(u.clientActionModule)),u.clientLoaderModule&&(f=f.concat(u.clientLoaderModule)),l&&u.hydrateFallbackModule&&(f=f.concat(u.hydrateFallbackModule)),u.imports&&(f=f.concat(u.imports)),f}).flat(1))}function yN(s){return[...new Set(s)]}function bN(s){let a={},l=Object.keys(s).sort();for(let o of l)a[o]=s[o];return a}function kN(s,a){let l=new Set;return new Set(a),s.reduce((o,u)=>{let f=JSON.stringify(bN(u));return l.has(f)||(l.add(f),o.push({key:f,link:u})),o},[])}function Jx(){let s=h.useContext(kl);return dm(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function _N(){let s=h.useContext(jc);return dm(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var fm=h.createContext(void 0);fm.displayName="FrameworkContext";function ey(){let s=h.useContext(fm);return dm(s,"You must render this element inside a <HydratedRouter> element"),s}function NN(s,a){let l=h.useContext(fm),[o,u]=h.useState(!1),[f,p]=h.useState(!1),{onFocus:m,onBlur:v,onMouseEnter:x,onMouseLeave:y,onTouchStart:b}=a,N=h.useRef(null);h.useEffect(()=>{if(s==="render"&&p(!0),s==="viewport"){let k=F=>{F.forEach(q=>{p(q.isIntersecting)})},D=new IntersectionObserver(k,{threshold:.5});return N.current&&D.observe(N.current),()=>{D.disconnect()}}},[s]),h.useEffect(()=>{if(o){let k=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(k)}}},[o]);let j=()=>{u(!0)},C=()=>{u(!1),p(!1)};return l?s!=="intent"?[f,N,{}]:[f,N,{onFocus:kr(m,j),onBlur:kr(v,C),onMouseEnter:kr(x,j),onMouseLeave:kr(y,C),onTouchStart:kr(b,j)}]:[!1,N,{}]}function kr(s,a){return l=>{s&&s(l),l.defaultPrevented||a(l)}}function jN({page:s,...a}){let{router:l}=Jx(),o=h.useMemo(()=>qx(l.routes,s,l.basename),[l.routes,s,l.basename]);return o?h.createElement(SN,{page:s,matches:o,...a}):null}function wN(s){let{manifest:a,routeModules:l}=ey(),[o,u]=h.useState([]);return h.useEffect(()=>{let f=!1;return gN(s,a,l).then(p=>{f||u(p)}),()=>{f=!0}},[s,a,l]),o}function SN({page:s,matches:a,...l}){let o=ts(),{future:u,manifest:f,routeModules:p}=ey(),{basename:m}=Jx(),{loaderData:v,matches:x}=_N(),y=h.useMemo(()=>Tg(s,a,x,f,o,"data"),[s,a,x,f,o]),b=h.useMemo(()=>Tg(s,a,x,f,o,"assets"),[s,a,x,f,o]),N=h.useMemo(()=>{if(s===o.pathname+o.search+o.hash)return[];let k=new Set,D=!1;if(a.forEach(q=>{let B=f.routes[q.route.id];!B||!B.hasLoader||(!y.some(ae=>ae.route.id===q.route.id)&&q.route.id in v&&p[q.route.id]?.shouldRevalidate||B.hasClientLoader?D=!0:k.add(q.route.id))}),k.size===0)return[];let F=pN(s,m,u.unstable_trailingSlashAwareDataRequests,"data");return D&&k.size>0&&F.searchParams.set("_routes",a.filter(q=>k.has(q.route.id)).map(q=>q.route.id).join(",")),[F.pathname+F.search]},[m,u.unstable_trailingSlashAwareDataRequests,v,o,f,y,a,s,p]),j=h.useMemo(()=>xN(b,f),[b,f]),C=wN(b);return h.createElement(h.Fragment,null,N.map(k=>h.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...l})),j.map(k=>h.createElement("link",{key:k,rel:"modulepreload",href:k,...l})),C.map(({key:k,link:D})=>h.createElement("link",{key:k,nonce:l.nonce,...D,crossOrigin:D.crossOrigin??l.crossOrigin})))}function IN(...s){return a=>{s.forEach(l=>{typeof l=="function"?l(a):l!=null&&(l.current=a)})}}var AN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{AN&&(window.__reactRouterVersion="7.13.0")}catch{}function TN({basename:s,children:a,unstable_useTransitions:l,window:o}){let u=h.useRef();u.current==null&&(u.current=l_({window:o,v5Compat:!0}));let f=u.current,[p,m]=h.useState({action:f.action,location:f.location}),v=h.useCallback(x=>{l===!1?m(x):h.startTransition(()=>m(x))},[l]);return h.useLayoutEffect(()=>f.listen(v),[f,v]),h.createElement(aN,{basename:s,children:a,location:p.location,navigationType:p.action,navigator:f,unstable_useTransitions:l})}var ty=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=h.forwardRef(function({onClick:a,discover:l="render",prefetch:o="none",relative:u,reloadDocument:f,replace:p,state:m,target:v,to:x,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:N,...j},C){let{basename:k,unstable_useTransitions:D}=h.useContext(na),F=typeof x=="string"&&ty.test(x),q=Px(x,k);x=q.to;let B=z_(x,{relative:u}),[ae,W,X]=NN(o,j),E=RN(x,{replace:p,state:m,target:v,preventScrollReset:y,relative:u,viewTransition:b,unstable_defaultShouldRevalidate:N,unstable_useTransitions:D});function A(le){a&&a(le),le.defaultPrevented||E(le)}let O=h.createElement("a",{...j,...X,href:q.absoluteURL||B,onClick:q.isExternal||f?a:A,ref:IN(C,W),target:v,"data-discover":!F&&l==="render"?"true":void 0});return ae&&!F?h.createElement(h.Fragment,null,O,h.createElement(jN,{page:B})):O});xe.displayName="Link";var EN=h.forwardRef(function({"aria-current":a="page",caseSensitive:l=!1,className:o="",end:u=!1,style:f,to:p,viewTransition:m,children:v,...x},y){let b=Mr(p,{relative:x.relative}),N=ts(),j=h.useContext(jc),{navigator:C,basename:k}=h.useContext(na),D=j!=null&&qN(b)&&m===!0,F=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,q=N.pathname,B=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;l||(q=q.toLowerCase(),B=B?B.toLowerCase():null,F=F.toLowerCase()),B&&k&&(B=Sn(B,k)||B);const ae=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let W=q===F||!u&&q.startsWith(F)&&q.charAt(ae)==="/",X=B!=null&&(B===F||!u&&B.startsWith(F)&&B.charAt(F.length)==="/"),E={isActive:W,isPending:X,isTransitioning:D},A=W?a:void 0,O;typeof o=="function"?O=o(E):O=[o,W?"active":null,X?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let le=typeof f=="function"?f(E):f;return h.createElement(xe,{...x,"aria-current":A,className:O,ref:y,style:le,to:p,viewTransition:m},typeof v=="function"?v(E):v)});EN.displayName="NavLink";var CN=h.forwardRef(({discover:s="render",fetcherKey:a,navigate:l,reloadDocument:o,replace:u,state:f,method:p=dc,action:m,onSubmit:v,relative:x,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:N,...j},C)=>{let{unstable_useTransitions:k}=h.useContext(na),D=LN(),F=ON(m,{relative:x}),q=p.toLowerCase()==="get"?"get":"post",B=typeof m=="string"&&ty.test(m),ae=W=>{if(v&&v(W),W.defaultPrevented)return;W.preventDefault();let X=W.nativeEvent.submitter,E=X?.getAttribute("formmethod")||p,A=()=>D(X||W.currentTarget,{fetcherKey:a,method:E,navigate:l,replace:u,state:f,relative:x,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:N});k&&l!==!1?h.startTransition(()=>A()):A()};return h.createElement("form",{ref:C,method:q,action:F,onSubmit:o?v:ae,...j,"data-discover":!B&&s==="render"?"true":void 0})});CN.displayName="Form";function DN(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sy(s){let a=h.useContext(kl);return Ht(a,DN(s)),a}function RN(s,{target:a,replace:l,state:o,preventScrollReset:u,relative:f,viewTransition:p,unstable_defaultShouldRevalidate:m,unstable_useTransitions:v}={}){let x=Qt(),y=ts(),b=Mr(s,{relative:f});return h.useCallback(N=>{if(cN(N,a)){N.preventDefault();let j=l!==void 0?l:Cr(y)===Cr(b),C=()=>x(s,{replace:j,state:o,preventScrollReset:u,relative:f,viewTransition:p,unstable_defaultShouldRevalidate:m});v?h.startTransition(()=>C()):C()}},[y,x,b,l,o,a,s,u,f,p,m,v])}function MN(s){ga(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=h.useRef(vf(s)),l=h.useRef(!1),o=ts(),u=h.useMemo(()=>uN(o.search,l.current?null:a.current),[o.search]),f=Qt(),p=h.useCallback((m,v)=>{const x=vf(typeof m=="function"?m(new URLSearchParams(u)):m);l.current=!0,f("?"+x,v)},[f,u]);return[u,p]}var UN=0,BN=()=>`__${String(++UN)}__`;function LN(){let{router:s}=sy("useSubmit"),{basename:a}=h.useContext(na),l=J_(),o=s.fetch,u=s.navigate;return h.useCallback(async(f,p={})=>{let{action:m,method:v,encType:x,formData:y,body:b}=mN(f,a);if(p.navigate===!1){let N=p.fetcherKey||BN();await o(N,l,p.action||m,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:y,body:b,formMethod:p.method||v,formEncType:p.encType||x,flushSync:p.flushSync})}else await u(p.action||m,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:y,body:b,formMethod:p.method||v,formEncType:p.encType||x,replace:p.replace,state:p.state,fromRouteId:l,flushSync:p.flushSync,viewTransition:p.viewTransition})},[o,u,a,l])}function ON(s,{relative:a}={}){let{basename:l}=h.useContext(na),o=h.useContext(xa);Ht(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),f={...Mr(s||".",{relative:a})},p=ts();if(s==null){f.search=p.search;let m=new URLSearchParams(f.search),v=m.getAll("index");if(v.some(y=>y==="")){m.delete("index"),v.filter(b=>b).forEach(b=>m.append("index",b));let y=m.toString();f.search=y?`?${y}`:""}}return(!s||s===".")&&u.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(f.pathname=f.pathname==="/"?l:jn([l,f.pathname])),Cr(f)}function qN(s,{relative:a}={}){let l=h.useContext(Fx);Ht(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=sy("useViewTransitionState"),u=Mr(s,{relative:a});if(!l.isTransitioning)return!1;let f=Sn(l.currentLocation.pathname,o)||l.currentLocation.pathname,p=Sn(l.nextLocation.pathname,o)||l.nextLocation.pathname;return xc(u.pathname,p)!=null||xc(u.pathname,f)!=null}var zN=Ox();const K={home:"/",login:"/login",forgotPassword:"/forgot-password",chooseRole:"/choose-role",register:"/register",verifyEmail:"/verify-email",verifyEmailSent:"/verify-email-sent",profile:"/profile",profileEdit:"/profile/edit",reviews:"/reviews",notifications:"/notifications",violations:"/violations",disputes:"/disputes",disputeThread:"/disputes/:disputeId",userProfile:"/users/:userId",userReviews:"/users/:userId/reviews",reportProfile:"/report/:userId",portfolio:"/works/:userId",tasks:"/tasks",customerTasks:"/my-tasks",customerArchive:"/my-tasks/archive",customerReview:"/my-tasks/review",customerRequests:"/my-tasks/requests",taskCreate:"/tasks/new",taskDetails:"/tasks/:taskId",taskEdit:"/tasks/:taskId/edit",notFound:"*"};function Oe(s){return`/tasks/${s}`}function ay(s){return`/tasks/${s}/edit`}function ds(s){return`/users/${s}`}function gf(s){return`/users/${s}/reviews`}function HN(s){return`/report/${s}`}function yc(s){return`/works/${s}`}function aa(s){return`/disputes/${s}`}const ny=h.createContext(null);function lt(){const s=h.useContext(ny);if(!s)throw new Error("useI18n must be used within I18nProvider");return s}function VN({botName:s,onAuth:a}){const l=h.useRef(null);return h.useEffect(()=>{window.onTelegramAuth=u=>{try{const f=a(u);f&&typeof f.catch=="function"&&f.catch(()=>{})}catch{}};const o=document.createElement("script");return o.src="https://telegram.org/js/telegram-widget.js?22",o.async=!0,o.setAttribute("data-telegram-login",s),o.setAttribute("data-size","large"),o.setAttribute("data-userpic","true"),o.setAttribute("data-request-access","write"),o.setAttribute("data-onauth","onTelegramAuth(user)"),l.current?.appendChild(o),()=>{delete window.onTelegramAuth,l.current&&(l.current.innerHTML="")}},[s,a]),n.jsx("div",{ref:l})}function ze(s="id"){return`${s}_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,10)}`}async function xf(s){const l=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",l),u=new Uint8Array(o);let f="";for(const p of u)f+=String.fromCharCode(p);return btoa(f)}const iy="ui-create-works.users.v1",mc="user_dev_arbiter",Vd="arbiter@taskflow.dev",Eg="CwG12uZbzAiJe0vqBdZQXYCj2zFiQ5rmemveW3zuxUo=";function PN(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function hl(){return ze("personal")}function Pa(){const s=PN(localStorage.getItem(iy));let a=!1,l=s.map(f=>{const p=typeof f?.personalId=="string"&&f.personalId.trim()?f.personalId:hl();f.personalId!==p&&(a=!0);const m=typeof f?.emailVerified=="boolean"?f.emailVerified:!1;return f.emailVerified!==m&&(a=!0),{...f,personalId:p,emailVerified:m}});const o=l.findIndex(f=>Ta(String(f?.email??""))===Vd||f.id===mc),u=new Date().toISOString();if(o===-1)l=l.concat([{id:mc,role:"arbiter",fullName:"",phone:"",email:Vd,emailVerified:!0,personalId:hl(),passwordHash:Eg,createdAt:u,updatedAt:u}]),a=!0;else{const f=l[o],p={...f,id:mc,role:"arbiter",fullName:f.fullName?.trim()?f.fullName:"",phone:typeof f.phone=="string"?f.phone:"",email:Vd,emailVerified:!0,passwordHash:Eg,personalId:f.personalId||hl(),updatedAt:u,createdAt:f.createdAt||u};(p.id!==f.id||p.role!==f.role||Ta(p.email)!==Ta(f.email)||p.emailVerified!==f.emailVerified||p.passwordHash!==f.passwordHash)&&(l=l.slice(),l[o]=p,a=!0)}return a&&Qn(l),l}function Qn(s){localStorage.setItem(iy,JSON.stringify(s)),window.dispatchEvent(new Event("ui-create-works.users.change"))}function Ta(s){return s.trim().toLowerCase()}function $N(s){return s==="customer"||s==="executor"||s==="arbiter"||s==="pending"}const Bs={list(){return Pa().slice().sort((s,a)=>a.createdAt.localeCompare(s.createdAt))},getById(s){return Pa().find(a=>a.id===s)??null},findByEmail(s){const a=Ta(s);return Pa().find(l=>l.email.toLowerCase()===a)??null},async create(s){const a=new Date().toISOString(),l=Ta(s.email);if(this.findByEmail(l))throw new Error("email_taken");const o=await xf(s.password),u={id:ze("user"),role:s.role,fullName:s.fullName.trim(),phone:s.phone.trim(),email:l,emailVerified:!1,company:s.company?.trim()||void 0,personalId:hl(),passwordHash:o,createdAt:a,updatedAt:a},f=Pa();return f.push(u),Qn(f),u},async verifyPassword(s,a){const l=this.findByEmail(s);return l&&await xf(a)===l.passwordHash?l:null},createVerifiedFromPending(s){const a=new Date().toISOString(),l=Ta(s.email),o=this.findByEmail(l);if(o)return o.emailVerified?o:this.markEmailVerified(o.email)??o;const u={id:ze("user"),role:s.role,fullName:s.fullName.trim(),phone:s.phone.trim(),email:l,emailVerified:!0,company:s.company?.trim()||void 0,personalId:hl(),passwordHash:s.passwordHash,createdAt:s.createdAt??a,updatedAt:a},f=Pa();return f.push(u),Qn(f),u},updateProfile(s,a){const l=Pa(),o=l.findIndex(y=>y.id===s);if(o===-1)throw new Error("user_not_found");const u=Ta(a.email);if(l.find(y=>y.email.toLowerCase()===u&&y.id!==s))throw new Error("email_taken");const p=new Date().toISOString(),m=l[o].email,v=Ta(m)!==u,x={...l[o],fullName:a.fullName.trim(),phone:a.phone.trim(),email:u,emailVerified:v?!1:l[o].emailVerified??!1,company:a.company?.trim()||void 0,socials:a.socials,avatarDataUrl:a.avatarDataUrl??l[o].avatarDataUrl,personalId:l[o].personalId,updatedAt:p};return l[o]=x,Qn(l),x},pruneCustomersExceptEmail(s){const a=Ta(s),l=Pa(),o=l.find(p=>p.role==="customer"&&p.email.toLowerCase()===a)??null;if(!o)throw new Error("user_not_found");const u=l.filter(p=>p.role!=="customer"||p.email.toLowerCase()===a),f=l.length-u.length;return Qn(u),{removed:f,keptUserId:o.id}},markEmailVerified(s){const a=Ta(s),l=Pa(),o=l.findIndex(p=>p.email.toLowerCase()===a);if(o===-1)return null;if(l[o].emailVerified)return l[o];const u=new Date().toISOString(),f={...l[o],emailVerified:!0,updatedAt:u};return l[o]=f,Qn(l),f},upsertFromServer(s){const a=Pa(),l=a.findIndex(y=>y.id===s.id),o=new Date().toISOString(),u=l===-1?null:a[l],f=typeof s.email=="string"?Ta(s.email):u?.email??"",p=s.id===mc,m=$N(s.role)?s.role:null,v=m==="arbiter"&&!p?null:m,x={id:s.id,role:v??u?.role??"pending",fullName:(typeof s.fullName=="string"?s.fullName:u?.fullName??"").trim(),phone:(typeof s.phone=="string"?s.phone:u?.phone??"").trim(),email:f,emailVerified:typeof s.emailVerified=="boolean"?s.emailVerified:u?.emailVerified??!0,telegramUserId:typeof s.telegramUserId=="string"||typeof s.telegramUserId=="number"?String(s.telegramUserId):u?.telegramUserId??null,company:typeof s.company=="string"?s.company.trim()||void 0:u?.company,socials:typeof s.socials=="object"?s.socials:u?.socials,avatarDataUrl:typeof s.avatarDataUrl=="string"?s.avatarDataUrl:u?.avatarDataUrl,personalId:u?.personalId??hl(),passwordHash:typeof s.passwordHash=="string"?String(s.passwordHash):u?.passwordHash??"",createdAt:u?.createdAt??o,updatedAt:o};return l===-1?a.push(x):a[l]=x,Qn(a),x},setRole(s,a){if(a!=="customer"&&a!=="executor"&&a!=="pending")throw new Error("invalid_role");const l=Pa(),o=l.findIndex(m=>m.id===s);if(o===-1)throw new Error("user_not_found");const u=new Date().toISOString(),p={...l[o],role:a,updatedAt:u};return l[o]=p,Qn(l),p}},Go="ui-create-works.session.v1",Ko="ui-create-works.session.temp.v1",Xo="ui-create-works.session.token.v1",Qo="ui-create-works.session.token.temp.v1",Zo="ui-create-works.session.telegramUserId.v1",Jo="ui-create-works.session.telegramUserId.temp.v1";function Cg(s){if(!s)return null;try{const a=JSON.parse(s);if(!a||typeof a!="object")return null;const l=a;return typeof l.userId!="string"?null:{userId:l.userId}}catch{return null}}function ec(){window.dispatchEvent(new Event("ui-create-works.session.change"))}const Xt={getUserId(){return Cg(sessionStorage.getItem(Ko))?.userId??Cg(localStorage.getItem(Go))?.userId??null},setUserId(s,a){a?.remember??!0?(localStorage.setItem(Go,JSON.stringify({userId:s})),sessionStorage.removeItem(Ko)):(sessionStorage.setItem(Ko,JSON.stringify({userId:s})),localStorage.removeItem(Go)),ec()},getToken(){return sessionStorage.getItem(Qo)??localStorage.getItem(Xo)??null},setToken(s,a){const l=a?.remember??!0,o=s.trim();o&&(l?(localStorage.setItem(Xo,o),sessionStorage.removeItem(Qo)):(sessionStorage.setItem(Qo,o),localStorage.removeItem(Xo)),ec())},getTelegramUserId(){return sessionStorage.getItem(Jo)??localStorage.getItem(Zo)??null},setTelegramUserId(s,a){const l=a?.remember??!0,o=s.trim();o&&(l?(localStorage.setItem(Zo,o),sessionStorage.removeItem(Jo)):(sessionStorage.setItem(Jo,o),localStorage.removeItem(Zo)),ec())},clear(){localStorage.removeItem(Go),sessionStorage.removeItem(Ko),localStorage.removeItem(Xo),sessionStorage.removeItem(Qo),localStorage.removeItem(Zo),sessionStorage.removeItem(Jo),ec()}},FN=Object.freeze(Object.defineProperty({__proto__:null,sessionRepo:Xt},Symbol.toStringTag,{value:"Module"})),ly=h.createContext(null);function Ut(){const s=h.useContext(ly);if(!s)throw new Error("useAuth must be used within AuthProvider");return s}const Ur="/api";async function WN(s){const a=await fetch(`${Ur}/auth/send-verification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})});if(!a.ok)throw new Error(`send_verification_failed_${a.status}`);await a.json().catch(()=>null)}async function YN(s){const a=await fetch(`${Ur}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const l=await a.json().catch(()=>null);throw a.status===409&&l?.error?new Error(l.error):new Error(`register_failed_${a.status}`)}await a.json().catch(()=>null)}async function GN(s){const a=await fetch(`${Ur}/auth/verify-email?token=${encodeURIComponent(s)}`);if(!a.ok)throw new Error(`verify_failed_${a.status}`);const l=await a.json();if(!l?.email)throw new Error("verify_invalid_response");return l}async function KN(s){const a=await fetch(`${Ur}/auth/is-verified?email=${encodeURIComponent(s)}`);return a.ok?!!(await a.json().catch(()=>null))?.verified:!1}async function XN(s){const a=await fetch(`${Ur}/auth/consume-pending`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s})});if(!a.ok)throw new Error(`consume_failed_${a.status}`);await a.json().catch(()=>null)}const ry="ui-create-works.logs.v1",QN=200;let bc={};function oy(){return new Date().toISOString()}function ZN(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function JN(s){try{localStorage.setItem(ry,JSON.stringify(s.slice(-QN)))}catch{}}function cy(s){s.kind==="event"?console.info("[event]",s.name,{data:s.data,ctx:s.ctx}):console.error("[error]",s.code,{data:s.data,ctx:s.ctx});try{const a=ZN(localStorage.getItem(ry));a.push(s),JN(a)}catch{}}function uy(s){bc={...bc,...s}}function yf(s,a){cy({ts:oy(),kind:"event",name:s,data:a,ctx:bc})}function Dr(s,a){cy({ts:oy(),kind:"error",code:s,data:a,ctx:bc})}const ol=Object.freeze(Object.defineProperty({__proto__:null,logError:Dr,logEvent:yf,setLogContext:uy},Symbol.toStringTag,{value:"Module"})),ej="modulepreload",tj=function(s){return"/"+s},Dg={},wi=function(a,l,o){let u=Promise.resolve();if(l&&l.length>0){let x=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};var p=x;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),v=m?.nonce||m?.getAttribute("nonce");u=x(l.map(y=>{if(y=tj(y),y in Dg)return;Dg[y]=!0;const b=y.endsWith(".css"),N=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${N}`))return;const j=document.createElement("link");if(j.rel=b?"stylesheet":ej,b||(j.as="script"),j.crossOrigin="",j.href=y,v&&j.setAttribute("nonce",v),document.head.appendChild(j),b)return new Promise((C,k)=>{j.addEventListener("load",C),j.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${y}`)))})}))}function f(m){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=m,window.dispatchEvent(v),!v.defaultPrevented)throw m}return u.then(m=>{for(const v of m||[])v.status==="rejected"&&f(v.reason);return a().catch(f)})};class Si extends Error{status;requestId;url;payload;constructor(a,l){super(a),this.name="ApiError",this.status=l.status,this.requestId=l.requestId,this.url=l.url,this.payload=l.payload}}function sj(s){return s.startsWith("http://")||s.startsWith("https://")}function Pd(s,a){if(sj(a))return a;const l=s.endsWith("/")?s.slice(0,-1):s,o=a.startsWith("/")?a:`/${a}`;return`${l}${o}`}async function $d(s){return await s.json().catch(()=>null)}const Fd="/api";function Wd(s){return s.headers.get("x-request-id")||s.headers.get("x-requestid")||null}async function Yd(){const{sessionRepo:s}=await wi(async()=>{const{sessionRepo:l}=await Promise.resolve().then(()=>FN);return{sessionRepo:l}},[]),a=s.getToken();return a?{Authorization:`Bearer ${a}`}:null}const rs={async get(s,a){const l=Pd(Fd,s);let o;try{o=await fetch(l,{method:"GET",headers:{...await Yd(),...a?.headers??null}})}catch(f){const p=f instanceof Error?f:new Error("network_error"),{logError:m}=await wi(async()=>{const{logError:v}=await Promise.resolve().then(()=>ol);return{logError:v}},void 0);throw m("API_NETWORK_ERROR",{url:l,message:p.message}),new Si(p.message,{status:null,requestId:null,url:l,payload:null})}const u=await $d(o);if(!o.ok){const f=(u&&typeof u=="object"&&"error"in u&&typeof u.error=="string"?u.error:null)??`request_failed_${o.status}`,p=Wd(o),{logError:m}=await wi(async()=>{const{logError:v}=await Promise.resolve().then(()=>ol);return{logError:v}},void 0);throw m("API_REQUEST_FAILED",{url:l,status:o.status,requestId:p,message:f}),new Si(f,{status:o.status,requestId:p,url:l,payload:u})}return u},async post(s,a,l){const o=Pd(Fd,s);let u;try{u=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",...await Yd(),...l?.headers??null},body:JSON.stringify(a)})}catch(p){const m=p instanceof Error?p:new Error("network_error"),{logError:v}=await wi(async()=>{const{logError:x}=await Promise.resolve().then(()=>ol);return{logError:x}},void 0);throw v("API_NETWORK_ERROR",{url:o,message:m.message}),new Si(m.message,{status:null,requestId:null,url:o,payload:null})}const f=await $d(u);if(!u.ok){const p=(f&&typeof f=="object"&&"error"in f&&typeof f.error=="string"?f.error:null)??`request_failed_${u.status}`,m=Wd(u),{logError:v}=await wi(async()=>{const{logError:x}=await Promise.resolve().then(()=>ol);return{logError:x}},void 0);throw v("API_REQUEST_FAILED",{url:o,status:u.status,requestId:m,message:p}),new Si(p,{status:u.status,requestId:m,url:o,payload:f})}return f},async patch(s,a,l){const o=Pd(Fd,s);let u;try{u=await fetch(o,{method:"PATCH",headers:{"Content-Type":"application/json",...await Yd(),...l?.headers??null},body:JSON.stringify(a)})}catch(p){const m=p instanceof Error?p:new Error("network_error"),{logError:v}=await wi(async()=>{const{logError:x}=await Promise.resolve().then(()=>ol);return{logError:x}},void 0);throw v("API_NETWORK_ERROR",{url:o,message:m.message}),new Si(m.message,{status:null,requestId:null,url:o,payload:null})}const f=await $d(u);if(!u.ok){const p=(f&&typeof f=="object"&&"error"in f&&typeof f.error=="string"?f.error:null)??`request_failed_${u.status}`,m=Wd(u),{logError:v}=await wi(async()=>{const{logError:x}=await Promise.resolve().then(()=>ol);return{logError:x}},void 0);throw v("API_REQUEST_FAILED",{url:o,status:u.status,requestId:m,message:p}),new Si(p,{status:u.status,requestId:m,url:o,payload:f})}return f}};function aj(s){return s.startsWith("http://")||s.startsWith("https://")}function nj(s,a){if(aj(a))return a;const l=s.endsWith("/")?s.slice(0,-1):s,o=a.startsWith("/")?a:`/${a}`;return`${l}${o}`}function ij({children:s}){const[a,l]=h.useState(()=>{const N=Xt.getUserId();return N?Bs.getById(N):null});h.useEffect(()=>{if(!Xt.getToken())return;let j=!1;return(async()=>{try{const C=await rs.get("/me");if(j||!C?.id)return;const k=Bs.upsertFromServer({id:String(C.id),role:C.role,fullName:C.fullName??"",email:C.email??"",phone:C.phone??"",telegramUserId:C.telegramUserId??null,emailVerified:!0});Xt.setUserId(k.id,{remember:!0}),k.telegramUserId&&Xt.setTelegramUserId(String(k.telegramUserId),{remember:!0}),l(k)}catch{Xt.clear(),j||l(null)}})(),()=>{j=!0}},[]),h.useEffect(()=>{uy({userId:a?.id})},[a?.id]);const o=h.useCallback(()=>{const N=Xt.getUserId();if(!N){l(null);return}const j=Bs.getById(N);if(!j){Xt.clear(),l(null);return}l(j)},[]);h.useEffect(()=>{const N=()=>o(),j=()=>o();return window.addEventListener("ui-create-works.session.change",N),window.addEventListener("ui-create-works.users.change",j),window.addEventListener("storage",N),()=>{window.removeEventListener("ui-create-works.session.change",N),window.removeEventListener("ui-create-works.users.change",j),window.removeEventListener("storage",N)}},[o]);const u=h.useCallback(async N=>{if(Bs.findByEmail(N.email))throw new Error("email_taken");const j=await xf(N.password);await YN({role:N.role,fullName:N.fullName,phone:N.phone,email:N.email,company:N.company,passwordHash:j})},[o]),f=h.useCallback(async(N,j,C)=>{const k=await Bs.verifyPassword(N,j);if(!k)throw new Error("invalid_credentials");if(!k.emailVerified){if(!await KN(k.email))throw new Error("email_not_verified");Bs.markEmailVerified(k.email)}Xt.setUserId(k.id,{remember:C?.remember}),o()},[o]),p=h.useCallback(async N=>{const C=nj("/api","/auth/telegram/login"),k=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),D=await k.json().catch(()=>null);if(!k.ok){const A=typeof D?.error=="string"?D.error:`http_${k.status}`;throw new Error(`telegram_login_failed:${A}`)}const F=D;if(!F?.token||!F.user?.id)throw new Error("telegram_login_invalid_response");const q=String(F.user.id);if(q==="user_dev_arbiter")throw new Error("telegram_login_failed:invalid_user");const ae=Bs.getById(q)?.role??null,X=ae==="customer"||ae==="executor"?ae:"pending",E=Bs.upsertFromServer({...F.user,role:X,telegramUserId:F.user.telegramUserId??String(N.id),emailVerified:!0});Xt.setToken(String(F.token),{remember:!0}),Xt.setTelegramUserId(String(E.telegramUserId??N.id),{remember:!0}),Xt.setUserId(E.id,{remember:!0}),o()},[o]),m=h.useCallback(()=>{Xt.clear(),o()},[o]),v=h.useCallback(N=>{if(!a)throw new Error("not_authenticated");(async()=>{try{Xt.getToken()&&await rs.patch("/me/role",{role:N})}finally{Bs.setRole(a.id,N),o()}})()},[a,o]),x=h.useCallback(N=>{Xt.setUserId(N),o()},[o]),y=h.useCallback(N=>{if(!a)throw new Error("not_authenticated");Bs.updateProfile(a.id,N),o()},[a,o]),b=h.useMemo(()=>({user:a,isAuthenticated:!!a,signUp:u,signIn:f,signInWithTelegram:p,chooseRole:v,signOut:m,switchUser:x,updateProfile:y}),[a,u,f,p,v,m,x,y]);return n.jsx(ly.Provider,{value:b,children:s})}function Rg(s){return`${K.register}?role=${s}`}function lj(){const{t:s}=lt(),a=Ut(),l=Qt(),o=ts(),[u,f]=h.useState(""),[p,m]=h.useState(""),[v,x]=h.useState(!0),[y,b]=h.useState(!1),[N,j]=h.useState(null),C=h.useMemo(()=>u.trim()!==""&&p!=="",[u,p]);h.useEffect(()=>{const F=(new URLSearchParams(o.search).get("email")??"").trim();F&&f(F)},[o.search]),h.useEffect(()=>{a.isAuthenticated&&(a.user?.role==="pending"?l(K.chooseRole,{replace:!0}):l(K.tasks,{replace:!0}))},[a.isAuthenticated,a.user?.role,l]);async function k(D){if(D.preventDefault(),b(!0),j(null),!!C)try{await a.signIn(u,p,{remember:v})}catch(F){F instanceof Error&&F.message==="email_not_verified"?j(s("auth.emailNotVerified")):j(s("auth.invalidCredentials"))}}return n.jsxs("div",{className:"authCard",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"authTitle",children:s("login.title")}),n.jsx("p",{className:"authSubtitle",children:s("auth.login.subtitle")})]}),n.jsxs("form",{className:"authForm",onSubmit:k,children:[y&&!C?n.jsx("div",{className:"authErrorBanner",children:s("auth.fillRequired")}):null,N?n.jsx("div",{className:"authErrorBanner",children:N}):null,n.jsxs("label",{className:"authField",children:[n.jsx("span",{className:"authLabel",children:s("auth.email")}),n.jsx("input",{className:"authInput",value:u,onChange:D=>f(D.target.value),placeholder:"name@example.com",autoComplete:"email",inputMode:"email"})]}),n.jsxs("label",{className:"authField",children:[n.jsx("span",{className:"authLabel",children:s("auth.password")}),n.jsx("input",{className:"authInput",value:p,onChange:D=>m(D.target.value),type:"password",autoComplete:"current-password"})]}),n.jsxs("div",{className:"authRow",children:[n.jsxs("label",{className:"authCheckbox",children:[n.jsx("input",{type:"checkbox",checked:v,onChange:D=>x(D.target.checked)}),s("auth.rememberMe")]}),n.jsx(xe,{to:K.forgotPassword,className:"authLink",children:s("auth.forgotPassword")})]}),n.jsx("button",{type:"submit",className:"authBtn authBtn--primary",disabled:!C,children:s("auth.signIn")}),n.jsx("button",{type:"button",className:"authBtn authBtn--google",onClick:()=>window.open("https://accounts.google.com/signin","_blank"),children:s("auth.signInWithGoogle")}),!a.isAuthenticated&&"tassskflooow_bot"&&n.jsx("div",{style:{marginTop:16},children:n.jsx(VN,{botName:"tassskflooow_bot",onAuth:async D=>{j(null);try{await a.signInWithTelegram(D)}catch(F){const q=F instanceof Error&&F.message.startsWith("telegram_login_failed:")?(()=>{const B=F.message.split(":",2)[1]||"unknown";return B==="telegram_bot_token_missing"?"  TELEGRAM_BOT_TOKEN  .":B==="hash_mismatch"?"TELEGRAM_BOT_TOKEN      (hash mismatch).":B==="auth_date_too_old"?"   Telegram (   ).":B==="missing_fields"?"Telegram     (missing_fields).":B==="invalid_user"?"    (user_dev_arbiter). ,  /api/auth/telegram/login  id  tg_<id>.":`    Telegram: ${B}`})():s("auth.genericError");throw j(q),F}}})}),n.jsxs("p",{className:"authFooterText",children:[s("auth.noAccountJoin")," ",n.jsx(xe,{className:"authLink",to:Rg("customer"),children:s("auth.joinAsCustomer")})," ",s("auth.or")," ",n.jsx(xe,{className:"authLink",to:Rg("executor"),children:s("auth.joinAsExecutor")}),"."]})]})]})}function Mg(s){return`${K.register}?role=${s}`}function rj(){const{t:s}=lt(),[a,l]=h.useState(""),[o,u]=h.useState(!1),[f,p]=h.useState(!1),m=h.useMemo(()=>a.trim()!=="",[a]);function v(x){x.preventDefault(),u(!0),m&&(Bs.findByEmail(a.trim()),p(!0))}return n.jsxs("div",{className:"authCard",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"authTitle",children:s("auth.forgotPassword")}),n.jsx("p",{className:"authSubtitle",children:s("auth.forgot.subtitle")})]}),n.jsxs("form",{className:"authForm",onSubmit:v,children:[o&&!m?n.jsx("div",{className:"authErrorBanner",children:s("auth.fillRequired")}):null,f?n.jsx("div",{className:"authErrorBanner",style:{borderColor:"rgba(255,255,255,0.14)",background:"rgba(255,255,255,0.03)",color:"rgba(255,255,255,0.9)"},children:s("auth.forgotPasswordSent")}):null,n.jsxs("label",{className:"authField",children:[n.jsx("span",{className:"authLabel",children:s("auth.email")}),n.jsx("input",{className:"authInput",value:a,onChange:x=>l(x.target.value),placeholder:"name@example.com",autoComplete:"email",inputMode:"email"})]}),n.jsx("button",{type:"submit",className:"authBtn authBtn--primary",disabled:!m,children:s("auth.sendLink")}),n.jsxs("div",{className:"authFooterText",children:[n.jsxs("div",{children:[s("auth.noAccountJoin")," ",n.jsx(xe,{className:"authLink",to:Mg("customer"),children:s("auth.joinAsCustomer")})," ",s("auth.or")," ",n.jsx(xe,{className:"authLink",to:Mg("executor"),children:s("auth.joinAsExecutor")}),"."]}),n.jsx("div",{style:{marginTop:8},children:n.jsx(xe,{className:"authLink",to:K.login,children:s("auth.backToLogin")})})]})]})]})}function oj(){const{t:s}=lt();return n.jsxs("main",{style:{padding:24},children:[n.jsx("h1",{children:"404"}),n.jsx("p",{children:s("notFound.title")}),n.jsx("p",{children:n.jsx(xe,{to:K.tasks,children:s("common.backHome")})})]})}const cj=8;function uj(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.trim())}function dj(s){const a=s.replace(/\D/g,"");return a.length>=10&&a.length<=15}function fj(s,a){const l={};return s.fullName.trim()||(l.fullName=a("validation.fullNameRequired")),s.phone.trim()?dj(s.phone)||(l.phone=a("validation.phoneInvalid")):l.phone=a("validation.phoneRequired"),s.email.trim()?uj(s.email)||(l.email=a("validation.emailInvalid")):l.email=a("validation.emailRequired"),s.password?s.password.length<cj&&(l.password=a("validation.passwordMinLength")):l.password=a("validation.passwordRequired"),s.passwordConfirm||(l.passwordConfirm=a("validation.passwordConfirmRequired")),s.password&&s.passwordConfirm&&s.password!==s.passwordConfirm&&(l.passwordConfirm=a("validation.passwordsDoNotMatch")),l}function mj(){const{t:s}=lt(),a=Ut(),l=Qt(),o=ts(),u=(()=>{const X=new URLSearchParams(o.search).get("role");return X==="customer"||X==="executor"?X:null})(),[f,p]=h.useState({role:u??"customer",fullName:"",phone:"",email:"",password:"",passwordConfirm:"",company:""}),[m,v]=h.useState({}),[x,y]=h.useState(!1),[b,N]=h.useState(null),[j,C]=h.useState(null),k=h.useMemo(()=>fj(f,s),[f,s]),D=x?k:Object.fromEntries(Object.entries(k).filter(([W])=>m[W])),F=Object.keys(k).length===0,q=f.role==="customer";function B(W,X){p(E=>({...E,[W]:X}))}async function ae(W){if(W.preventDefault(),y(!0),N(null),C(null),!!F)try{await a.signUp({role:f.role,fullName:f.fullName,phone:f.phone,email:f.email,company:f.role==="customer"?f.company:void 0,password:f.password}),l(`${K.verifyEmailSent}?email=${encodeURIComponent(f.email.trim())}`)}catch(X){X instanceof Error&&X.message==="email_taken"?(C("taken"),N(s("auth.emailTaken"))):X instanceof Error&&X.message==="email_pending"?(C("pending"),N(s("auth.emailPending"))):N(s("auth.genericError"))}}return n.jsxs("div",{className:"authCard",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"authTitle",children:s("register.title")}),n.jsx("p",{className:"authSubtitle",children:s("auth.register.subtitle")})]}),n.jsxs("div",{className:"authRoleSwitch",role:"group","aria-label":s("register.roleLabel"),children:[n.jsx("button",{type:"button",className:f.role==="customer"?"authRoleBtn authRoleBtn--active":"authRoleBtn",onClick:()=>B("role","customer"),children:s("register.role.client")}),n.jsx("button",{type:"button",className:f.role==="executor"?"authRoleBtn authRoleBtn--active":"authRoleBtn",onClick:()=>p(W=>({...W,role:"executor",company:""})),children:s("register.role.contractor")})]}),n.jsxs("form",{className:"authForm",onSubmit:ae,children:[b?n.jsx("div",{className:"authErrorBanner",children:b}):null,j?n.jsxs("div",{className:"authRow",style:{marginTop:8},children:[n.jsx(xe,{className:"authLink",to:`${K.login}?email=${encodeURIComponent(f.email.trim())}`,children:s("register.signInLink")}),j==="pending"?n.jsx(xe,{className:"authLink",to:`${K.verifyEmailSent}?email=${encodeURIComponent(f.email.trim())}`,children:s("verifyEmail.sent.resend")}):null]}):null,n.jsxs("label",{className:"authField",children:[n.jsx("span",{className:"authLabel",children:s("register.fullName")}),n.jsx("input",{className:"authInput",value:f.fullName,onChange:W=>B("fullName",W.target.value),onBlur:()=>v(W=>({...W,fullName:!0})),placeholder:"John Smith",autoComplete:"name"}),D.fullName?n.jsx("span",{className:"authFieldError",children:D.fullName}):null]}),n.jsxs("label",{className:"authField",children:[n.jsx("span",{className:"authLabel",children:s("register.phone")}),n.jsx("input",{className:"authInput",value:f.phone,onChange:W=>B("phone",W.target.value),onBlur:()=>v(W=>({...W,phone:!0})),placeholder:"+1 555 123 4567",autoComplete:"tel",inputMode:"tel"}),D.phone?n.jsx("span",{className:"authFieldError",children:D.phone}):null]}),n.jsxs("label",{className:"authField",children:[n.jsx("span",{className:"authLabel",children:s("register.email")}),n.jsx("input",{className:"authInput",value:f.email,onChange:W=>B("email",W.target.value),onBlur:()=>v(W=>({...W,email:!0})),placeholder:"name@example.com",autoComplete:"email",inputMode:"email"}),D.email?n.jsx("span",{className:"authFieldError",children:D.email}):null]}),n.jsxs("label",{className:"authField",children:[n.jsx("span",{className:"authLabel",children:s("register.password")}),n.jsx("input",{className:"authInput",value:f.password,onChange:W=>B("password",W.target.value),onBlur:()=>v(W=>({...W,password:!0})),type:"password",autoComplete:"new-password",placeholder:"At least 8 characters"}),D.password?n.jsx("span",{className:"authFieldError",children:D.password}):null]}),n.jsxs("label",{className:"authField",children:[n.jsx("span",{className:"authLabel",children:s("register.passwordConfirm")}),n.jsx("input",{className:"authInput",value:f.passwordConfirm,onChange:W=>B("passwordConfirm",W.target.value),onBlur:()=>v(W=>({...W,passwordConfirm:!0})),type:"password",autoComplete:"new-password",placeholder:"Repeat password"}),D.passwordConfirm?n.jsx("span",{className:"authFieldError",children:D.passwordConfirm}):null]}),n.jsxs("label",{className:q?"authField authCompanyField":"authField authCompanyField authCompanyField--hidden","aria-hidden":!q,children:[n.jsxs("span",{className:"authLabel",children:[s("register.company")," ",n.jsx("span",{style:{opacity:.7,fontWeight:400},children:s("common.optional")})]}),n.jsx("input",{className:"authInput",value:f.company,onChange:W=>B("company",W.target.value),placeholder:"Acme Inc.",autoComplete:"organization",disabled:!q,tabIndex:q?0:-1})]}),n.jsx("button",{className:"authBtn authBtn--primary",type:"submit",disabled:!F,children:s("register.submit")}),n.jsxs("p",{className:"authFooterText",children:[s("register.haveAccount")," ",n.jsx(xe,{className:"authLink",to:K.login,children:s("register.signInLink")})]})]})]})}function pj(){const{t:s,locale:a}=lt(),l=ts(),u=(h.useMemo(()=>new URLSearchParams(l.search),[l.search]).get("token")??"").trim(),[f,p]=h.useState("idle"),[m,v]=h.useState(null);return h.useEffect(()=>{if(!u){p("error"),v(a==="ru"?"  .":"Missing verification token.");return}let x=!1;return p("loading"),v(null),(async()=>{try{const y=await GN(u);if(y.pending?(Bs.createVerifiedFromPending(y.pending),await XN(u).catch(()=>{})):Bs.markEmailVerified(y.email),x)return;p("success"),v(y.email)}catch{if(x)return;p("error"),v(a==="ru"?"   .   .":"Failed to verify email. The link may have expired.")}})(),()=>{x=!0}},[u,a]),n.jsxs("div",{className:"authCard",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"authTitle",children:s("verifyEmail.verify.title")}),n.jsx("p",{className:"authSubtitle",children:s("verifyEmail.verify.subtitle")})]}),f==="loading"?n.jsx("div",{className:"authErrorBanner",children:s("verifyEmail.verify.loading")}):null,f==="success"?n.jsxs("div",{className:"authErrorBanner",style:{background:"rgba(34,197,94,0.10)",borderColor:"rgba(34,197,94,0.25)"},children:[a==="ru"?" :":"Email verified:"," ",n.jsx("strong",{children:m})]}):null,f==="error"?n.jsx("div",{className:"authErrorBanner",children:m}):null,n.jsx("p",{className:"authFooterText",children:n.jsx(xe,{className:"authLink",to:K.login,children:a==="ru"?"  ":"Go to login"})})]})}function hj(){const{t:s,locale:a}=lt(),l=ts(),u=(h.useMemo(()=>new URLSearchParams(l.search),[l.search]).get("email")??"").trim(),[f,p]=h.useState(!1),[m,v]=h.useState(null);async function x(){if(u){p(!0),v(null);try{await WN(u),v(a==="ru"?"   .":"Verification email sent again.")}catch{v(a==="ru"?"   .  .":"Failed to send email. Try again later.")}finally{p(!1)}}}return n.jsxs("div",{className:"authCard",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"authTitle",children:s("verifyEmail.sent.title")}),n.jsx("p",{className:"authSubtitle",children:s("verifyEmail.sent.subtitle")})]}),u?n.jsxs("div",{className:"authErrorBanner",style:{background:"rgba(124,58,237,0.12)",borderColor:"rgba(124,58,237,0.22)"},children:[a==="ru"?":":"Email:"," ",n.jsx("strong",{children:u})]}):null,m?n.jsx("div",{className:"authErrorBanner",children:m}):null,n.jsx("button",{type:"button",className:"authBtn authBtn--primary",onClick:x,disabled:f||!u,children:f?a==="ru"?"":"Sending":s("verifyEmail.sent.resend")}),n.jsx("p",{className:"authFooterText",style:{marginTop:10},children:n.jsx(xe,{className:"authLink",to:K.login,children:s("verifyEmail.sent.toLogin")})})]})}const Ug="ui-create-works.users.change";let pc=null;function vj(s){const a=()=>{pc=Bs.list(),s()};window.addEventListener(Ug,a);const l=o=>{o.key==="ui-create-works.users.v1"&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(Ug,a),window.removeEventListener("storage",l)}}function Bg(){return pc||(pc=Bs.list()),pc}function qs(){return h.useSyncExternalStore(vj,Bg,Bg)}const mm="ui-create-works.devMode.v1",bf="ui-create-works.devMode.change";let Ar=null;function dy(){return localStorage.getItem(mm)==="1"}function gj(s){localStorage.setItem(mm,s?"1":"0"),Ar=s,window.dispatchEvent(new Event(bf))}function xj(s){const a=()=>{Ar=dy(),s()};window.addEventListener(bf,a);const l=o=>{o.key===mm&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(bf,a),window.removeEventListener("storage",l)}}function Lg(){return Ar===null&&(Ar=dy()),Ar}function ai(){return{enabled:h.useSyncExternalStore(xj,Lg,Lg),setEnabled:gj}}const fy="ui-create-works.theme.v1";function my(s){return s==="dark"||s==="light"}function yj(){try{const s=localStorage.getItem(fy);return my(s)?s:null}catch{return null}}function py(){const s=document.documentElement.getAttribute("data-theme");return my(s)?s:"dark"}function hy(s){document.documentElement.setAttribute("data-theme",s)}function vy(s){try{localStorage.setItem(fy,s)}catch{}hy(s)}function bj(s="dark"){const l=yj()??s;return hy(l),l}const gy="ui-create-works.notifications.v1",kj="ui-create-works.notifications.change";function _j(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function jt(){return _j(localStorage.getItem(gy))}function Dt(s){localStorage.setItem(gy,JSON.stringify(s)),window.dispatchEvent(new Event(kj))}const Fe={listForUser(s){return jt().filter(a=>a.recipientUserId===s).slice().sort((a,l)=>l.createdAt.localeCompare(a.createdAt))},unreadCountForUser(s){return jt().filter(a=>a.recipientUserId===s&&!a.readAt).length},addTaskTaken(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_taken",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,createdAt:a},o=jt();return o.push(l),Dt(o),l},addDisputeOpened(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"dispute_opened",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,disputeId:s.disputeId,createdAt:a},o=jt();return o.push(l),Dt(o),l},addDisputeMessage(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"dispute_message",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,disputeId:s.disputeId,message:s.message?.trim()?s.message.trim().slice(0,240):void 0,createdAt:a},o=jt();return o.push(l),Dt(o),l},addDisputeStatus(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"dispute_status",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,disputeId:s.disputeId,disputeStatus:s.status,message:s.note?.trim()?s.note.trim().slice(0,240):void 0,createdAt:a},o=jt();return o.push(l),Dt(o),l},addDisputeSlaThreshold(s){const a=new Date().toISOString(),l=jt(),o=Math.floor(s.hoursLeft),u=l.find(p=>p.type==="dispute_sla_threshold"&&p.recipientUserId===s.recipientUserId&&p.disputeId===s.disputeId&&p.slaHoursLeft===o);if(u)return u;const f={id:ze("notif"),type:"dispute_sla_threshold",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,disputeId:s.disputeId,slaHoursLeft:o,createdAt:a};return l.push(f),Dt(l),f},addRateCustomer(s){const a=new Date().toISOString(),l=jt(),o=l.find(f=>f.type==="rate_customer"&&f.recipientUserId===s.recipientUserId&&f.taskId===s.taskId&&!f.readAt);if(o)return o;const u={id:ze("notif"),type:"rate_customer",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,createdAt:a};return l.push(u),Dt(l),u},unreadDisputeCountForUser(s){return jt().filter(a=>a.recipientUserId===s&&!a.readAt&&(a.type==="dispute_opened"||a.type==="dispute_message"||a.type==="dispute_status"||a.type==="dispute_sla_threshold")).length},markReadForDispute(s,a){const l=jt(),o=new Date().toISOString();let u=!1;const f=l.map(p=>p.recipientUserId!==s||p.disputeId!==a||p.readAt?p:(u=!0,{...p,readAt:o}));u&&Dt(f)},addExecutorViolationWarning(s){const a=new Date().toISOString(),l=jt(),o=l.find(f=>f.type==="executor_violation_warning"&&f.recipientUserId===s.recipientUserId&&f.violationId===s.violationId);if(o)return o;const u={id:ze("notif"),type:"executor_violation_warning",recipientUserId:s.recipientUserId,actorUserId:"system",taskId:s.taskId,violationId:s.violationId,violationType:s.violationType,createdAt:a};return l.push(u),Dt(l),u},addExecutorViolationRatingPenalty(s){const a=new Date().toISOString(),l=jt(),o=l.find(f=>f.type==="executor_violation_rating_penalty"&&f.recipientUserId===s.recipientUserId&&f.violationId===s.violationId);if(o)return o;const u={id:ze("notif"),type:"executor_violation_rating_penalty",recipientUserId:s.recipientUserId,actorUserId:"system",taskId:s.taskId,violationId:s.violationId,violationType:s.violationType,sanctionDeltaPercent:s.deltaPercent,createdAt:a};return l.push(u),Dt(l),u},addExecutorViolationRespondBlock(s){const a=new Date().toISOString(),l=jt(),o=l.find(f=>f.type==="executor_violation_respond_block"&&f.recipientUserId===s.recipientUserId&&f.violationId===s.violationId);if(o)return o;const u={id:ze("notif"),type:"executor_violation_respond_block",recipientUserId:s.recipientUserId,actorUserId:"system",taskId:s.taskId,violationId:s.violationId,violationType:s.violationType,sanctionUntil:s.until,sanctionDurationHours:s.durationHours,createdAt:a};return l.push(u),Dt(l),u},addExecutorViolationBan(s){const a=new Date().toISOString(),l=jt(),o=l.find(f=>f.type==="executor_violation_ban"&&f.recipientUserId===s.recipientUserId&&f.violationId===s.violationId);if(o)return o;const u={id:ze("notif"),type:"executor_violation_ban",recipientUserId:s.recipientUserId,actorUserId:"system",taskId:s.taskId,violationId:s.violationId,violationType:s.violationType,createdAt:a};return l.push(u),Dt(l),u},addTaskExecutorNoStart(s){const a=new Date().toISOString(),l=jt(),o=l.find(f=>f.type==="task_executor_no_start"&&f.recipientUserId===s.recipientUserId&&f.violationId===s.violationId);if(o)return o;const u={id:ze("notif"),type:"task_executor_no_start",recipientUserId:s.recipientUserId,actorUserId:s.executorUserId,taskId:s.taskId,violationId:s.violationId,createdAt:a};return l.push(u),Dt(l),u},addTaskExecutorOverdue(s){const a=new Date().toISOString(),l=jt(),o=l.find(f=>f.type==="task_executor_overdue"&&f.recipientUserId===s.recipientUserId&&f.violationId===s.violationId);if(o)return o;const u={id:ze("notif"),type:"task_executor_overdue",recipientUserId:s.recipientUserId,actorUserId:s.executorUserId,taskId:s.taskId,violationId:s.violationId,createdAt:a};return l.push(u),Dt(l),u},addTaskApplication(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_application",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,createdAt:a},o=jt();return o.push(l),Dt(o),l},addTaskApplicationCancelled(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_application_cancelled",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,createdAt:a},o=jt();return o.push(l),Dt(o),l},addTaskCompleted(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_completed",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,completionVideoUrl:s.completionVideoUrl,createdAt:a},o=jt();return o.push(l),Dt(o),l},addTaskSubmitted(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_submitted",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,completionVideoUrl:s.completionVideoUrl,createdAt:a},o=jt();return o.push(l),Dt(o),l},addTaskApproved(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_approved",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,createdAt:a},o=jt();return o.push(l),Dt(o),l},addTaskRevision(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_revision",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,message:s.message?.trim()||void 0,createdAt:a},o=jt();return o.push(l),Dt(o),l},addTaskPauseRequested(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_pause_requested",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,message:s.message?.trim()||void 0,createdAt:a},o=jt();return o.push(l),Dt(o),l},addTaskPauseRejected(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_pause_rejected",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,message:s.message?.trim()||void 0,createdAt:a},o=jt();return o.push(l),Dt(o),l},addTaskPauseAccepted(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_pause_accepted",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,message:s.message?.trim()||void 0,createdAt:a},o=jt();return o.push(l),Dt(o),l},addTaskUnclaimed(s){const a=new Date().toISOString(),l=jt(),o=l.find(f=>f.type==="task_unclaimed"&&f.recipientUserId===s.recipientUserId&&f.taskId===s.taskId);if(o)return o;const u={id:ze("notif"),type:"task_unclaimed",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,createdAt:a};return l.push(u),Dt(l),u},addTaskAssigned(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_assigned",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,createdAt:a},o=jt();return o.push(l),Dt(o),l},addTaskAssignedElse(s){const a=new Date().toISOString(),l={id:ze("notif"),type:"task_assigned_else",recipientUserId:s.recipientUserId,actorUserId:s.actorUserId,taskId:s.taskId,createdAt:a},o=jt();return o.push(l),Dt(o),l},markAllRead(s){const a=jt(),l=new Date().toISOString();let o=!1;const u=a.map(f=>f.recipientUserId!==s||f.readAt?f:(o=!0,{...f,readAt:l}));o&&Dt(u)},clearAll(s){const a=jt(),l=a.filter(o=>o.recipientUserId!==s);l.length!==a.length&&Dt(l)},markRead(s){const a=jt(),l=a.findIndex(u=>u.id===s);if(l===-1||a[l].readAt)return;const o=new Date().toISOString();a[l]={...a[l],readAt:o},Dt(a)}};let kf=[],Fa={timer:null,subs:new Set};async function Og(){if(!Xt.getToken()){kf=[];for(const s of Fa.subs)s();return}try{kf=await rs.get("/notifications")}catch{}for(const s of Fa.subs)s()}function Br(s){return h.useSyncExternalStore(a=>(Fa.subs.add(a),Fa.timer||(Og(),Fa.timer=window.setInterval(()=>{Og()},5e3)),()=>{Fa.subs.delete(a),Fa.subs.size===0&&Fa.timer&&(window.clearInterval(Fa.timer),Fa.timer=null)}),()=>kf,()=>[])}const pm="ui-create-works.taskApplications.v1",_f="ui-create-works.taskApplications.change";function Nj(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function cl(){return Nj(localStorage.getItem(pm))}function _r(s){localStorage.setItem(pm,JSON.stringify(s)),window.dispatchEvent(new Event(_f))}const js={listAll(){return cl().slice().sort((s,a)=>a.createdAt.localeCompare(s.createdAt))},listForTask(s){return this.listAll().filter(a=>a.taskId===s)},listForExecutor(s){return this.listAll().filter(a=>a.executorUserId===s)},listForCustomer(s){return this.listAll().filter(a=>s.includes(a.taskId))},create(s){const a=new Date().toISOString(),l={id:ze("app"),taskId:s.taskId,executorUserId:s.executorUserId,message:s.message?.trim()||void 0,status:"pending",createdAt:a,updatedAt:a},o=cl();return o.push(l),_r(o),l},updateStatus(s,a){const l=new Date().toISOString(),o=cl(),u=o.findIndex(p=>p.id===s);if(u===-1)return null;const f={...o[u],status:a,updatedAt:l};return o[u]=f,_r(o),f},select(s,a){const l=cl(),o=l.findIndex(m=>m.id===s),u=new Date().toISOString();if(o===-1)return{selected:null,rejected:[]};const f=l.slice(),p={...f[o],status:"selected",contractId:a?.contractId??f[o].contractId,updatedAt:u};return f[o]=p,_r(f),{selected:p,rejected:[]}},linkContract(s,a){const l=new Date().toISOString(),o=cl(),u=o.findIndex(p=>p.id===s);if(u===-1)return null;const f={...o[u],contractId:a,updatedAt:l};return o[u]=f,_r(o),f},reject(s){return this.updateStatus(s,"rejected")},deleteForTask(s){const a=cl(),l=a.filter(o=>o.taskId!==s);return l.length===a.length?!1:(_r(l),!0)},subscribe(s){const a=()=>s();window.addEventListener(_f,a);const l=o=>{o.key===pm&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(_f,a),window.removeEventListener("storage",l)}}},xy="ui-create-works.tasks.v2",jj="ui-create-works.tasks.v1",hm=1440*60*1e3;function yy(s){const a=Date.parse(s),l=Number.isFinite(a)?a:Date.now();return new Date(l+hm).toISOString()}function qg(s){if(!s)return null;try{const a=JSON.parse(s);return Array.isArray(a)?a:null}catch{return null}}function tc(s){if(!s||typeof s!="object")return!1;const a=s;return typeof a.en=="string"&&typeof a.ru=="string"}function wj(s){return s==="draft"||s==="open"||s==="in_progress"||s==="review"||s==="dispute"||s==="closed"||s==="archived"?s:"open"}function zg(s){if(!s||typeof s!="object")return null;const a=s,l=typeof a.id=="string"?a.id:ze("task"),o=typeof a.createdAt=="string"?a.createdAt:new Date().toISOString(),u=wj(a.status),f=typeof a.expiresAt=="string"&&a.expiresAt.trim()?a.expiresAt:yy(o),p=tc(a.title)?a.title:{en:String(a.title??""),ru:String(a.title??"")},m=tc(a.shortDescription)?a.shortDescription:{en:String(a.shortDescription??""),ru:String(a.shortDescription??"")},v=tc(a.description)?a.description:{en:String(a.description??""),ru:String(a.description??"")},x=(()=>{if(a.requirements===void 0||a.requirements===null)return;if(tc(a.requirements))return a.requirements;const ae=String(a.requirements??"").trim();if(ae)return{en:ae,ru:ae}})();let y=(()=>{const ae=a.descriptionFile;if(!ae||typeof ae!="object")return;const W=ae,X=typeof W.name=="string"?W.name.trim():"",E=typeof W.text=="string"?W.text:"";if(!(!X||!E))return{name:X,text:E}})(),b=(()=>{const ae=a.descriptionFiles;if(!Array.isArray(ae))return;const W=ae.map(X=>{if(!X||typeof X!="object")return null;const E=X,A=typeof E.name=="string"?E.name.trim():"",O=typeof E.text=="string"?E.text:"";return!A||!O?null:{name:A,text:O}}).filter(Boolean);return W.length?W.slice(0,3):void 0})();!b&&y&&(b=[y]),!y&&b?.length&&(y=b[0]);const N=(()=>{const ae=a.executorMode;return ae==="blogger_ad"||ae==="customer_post"||ae==="ai"?ae:"customer_post"})(),j=(()=>{const ae=a.deliverables;if(!Array.isArray(ae))return;const W=ae.map(X=>{if(!X||typeof X!="object")return null;const E=X,A=typeof E.platform=="string"?E.platform.trim():"",O=typeof E.quantity=="number"&&Number.isFinite(E.quantity)?Math.floor(E.quantity):NaN,le=Number.isFinite(O)?Math.max(1,O):1;return A?{platform:A,quantity:le}:null}).filter(Boolean);return W.length?W:void 0})(),C=(()=>{const ae=a.reference;if(!ae||typeof ae!="object")return;const W=ae,X=W.kind;if(X==="url"){const E=typeof W.url=="string"?W.url.trim():"";return E?{kind:"url",url:E}:void 0}if(X==="video"){const E=typeof W.blobId=="string"?W.blobId.trim():"",A=typeof W.name=="string"?W.name.trim():"",O=typeof W.mimeType=="string"&&W.mimeType.trim()?W.mimeType.trim():void 0;return!E||!A?void 0:{kind:"video",blobId:E,name:A,mimeType:O}}if(X==="videos"){const E=W.videos;if(!Array.isArray(E))return;const A=E.map(O=>{if(!O||typeof O!="object")return null;const le=O,se=typeof le.blobId=="string"?le.blobId.trim():"",be=typeof le.name=="string"?le.name.trim():"",Se=typeof le.mimeType=="string"&&le.mimeType.trim()?le.mimeType.trim():void 0;return!se||!be?null:{blobId:se,name:be,mimeType:Se}}).filter(Boolean);return A.length?{kind:"videos",videos:A.slice(0,3)}:void 0}})();if(!p.en&&!p.ru)return null;const k=Array.isArray(a.assignedExecutorIds)?a.assignedExecutorIds.filter(ae=>typeof ae=="string"&&ae.trim().length>0):typeof a.assignedToUserId=="string"&&a.assignedToUserId.trim().length>0?[a.assignedToUserId]:[],D=typeof a.maxExecutors=="number"&&Number.isFinite(a.maxExecutors)&&a.maxExecutors>0?Math.max(1,Math.floor(a.maxExecutors)):1,F=typeof a.completionVideoUrl=="string"&&a.completionVideoUrl.trim()?a.completionVideoUrl.trim():void 0,q=(()=>{const ae=a.completionLinks;if(!Array.isArray(ae))return;const W=ae.map(X=>{if(!X||typeof X!="object")return null;const E=X,A=typeof E.platform=="string"?E.platform.trim():"",O=typeof E.url=="string"?E.url.trim():"";return!A||!O?null:{platform:A,url:O}}).filter(Boolean);return W.length?W:void 0})(),B={id:l,title:p,shortDescription:m,requirements:x,description:v,descriptionFiles:b,descriptionFile:y,reference:C,executorMode:N,deliverables:j,status:u,createdAt:o,expiresAt:f,assignedExecutorIds:k,maxExecutors:D,completionVideoUrl:F,completionLinks:q};return typeof a.createdByUserId=="string"&&a.createdByUserId.trim()&&(B.createdByUserId=a.createdByUserId),typeof a.assignedToUserId=="string"&&a.assignedToUserId.trim()&&(B.assignedExecutorIds.includes(a.assignedToUserId)||B.assignedExecutorIds.push(a.assignedToUserId)),typeof a.takenAt=="string"&&a.takenAt.trim()&&(B.takenAt=a.takenAt),typeof a.completedAt=="string"&&a.completedAt.trim()&&(B.completedAt=a.completedAt),typeof a.reviewSubmittedAt=="string"&&a.reviewSubmittedAt.trim()&&(B.reviewSubmittedAt=a.reviewSubmittedAt),typeof a.category=="string"&&a.category.trim()&&(B.category=a.category),typeof a.location=="string"&&a.location.trim()&&(B.location=a.location),typeof a.budgetAmount=="number"&&(B.budgetAmount=a.budgetAmount),typeof a.budgetCurrency=="string"&&a.budgetCurrency.trim()&&(B.budgetCurrency=a.budgetCurrency),typeof a.dueDate=="string"&&a.dueDate.trim()&&(B.dueDate=a.dueDate),B.status==="closed"&&B.assignedExecutorIds.length<B.maxExecutors&&(B.status="in_progress",B.completedAt=void 0),B}function Ii(){const s=qg(localStorage.getItem(xy));if(s&&s.length>0){const l=s.map(zg).filter(Boolean);if(l.length>0)return l}const a=qg(localStorage.getItem(jj));if(a&&a.length>0){const l=a.map(zg).filter(Boolean);if(l.length>0)return vl(l),l}return[]}function vl(s){localStorage.setItem(xy,JSON.stringify(s)),window.dispatchEvent(new Event("ui-create-works.tasks.change"))}const yt={list(){return Ii().slice().sort((s,a)=>a.createdAt.localeCompare(s.createdAt))},getById(s){return Ii().find(a=>a.id===s)??null},create(s){const a=new Date().toISOString(),l=typeof s.expiresAt=="string"&&s.expiresAt.trim()?s.expiresAt:yy(a),{expiresAt:o,...u}=s,f=typeof s.maxExecutors=="number"?Math.floor(s.maxExecutors):1,p=Number.isFinite(f)&&f>0?f:1,m={id:ze("task"),createdAt:a,expiresAt:l,status:"open",...u,maxExecutors:p,assignedExecutorIds:[],completionVideoUrl:s.completionVideoUrl?.trim()||void 0,completionLinks:Array.isArray(s.completionLinks)&&s.completionLinks.length?s.completionLinks:void 0},v=Ii();return v.push(m),vl(v),m},update(s,a){const l=Ii(),o=l.findIndex(f=>f.id===s);if(o===-1)return null;const u=a(l[o]);return l[o]=u,vl(l),u},addExecutor(s,a){return this.update(s,l=>{if(!a||l.assignedExecutorIds.length>=l.maxExecutors||l.assignedExecutorIds.includes(a))return l;const o=[...l.assignedExecutorIds,a];return{...l,status:"in_progress",takenAt:l.takenAt||new Date().toISOString(),assignedExecutorIds:o}})},removeExecutor(s,a){return this.update(s,l=>{const o=l.assignedExecutorIds.filter(u=>u!==a);return{...l,status:o.length?"in_progress":"open",assignedExecutorIds:o,takenAt:o.length?l.takenAt:void 0,completedAt:o.length?l.completedAt:void 0}})},delete(s){const a=Ii(),l=a.filter(o=>o.id!==s);return l.length===a.length?!1:(vl(l),!0)},archive(s){return this.update(s,a=>({...a,status:"archived"}))},repost(s){const a=new Date().toISOString(),l=this.update(s,o=>({...o,status:"open",createdAt:a,expiresAt:(()=>{const u=Date.parse(o.expiresAt)-Date.parse(o.createdAt),p=Number.isFinite(u)&&u>=1e3?u:hm;return new Date(Date.now()+p).toISOString()})(),assignedExecutorIds:[],takenAt:void 0,completedAt:void 0,reviewSubmittedAt:void 0,completionVideoUrl:void 0,completionLinks:void 0}));return l&&js.deleteForTask(s),l}};function by(s=[]){const a=Ii(),l=Date.now(),o=[];let u=!1;const f=a.map(p=>{if(p.status!=="open"||p.assignedExecutorIds.length||s.some(v=>v.taskId===p.id))return p;const m=Date.parse(p.expiresAt);if(Number.isFinite(m)){if(m>l)return p}else{const v=Date.parse(p.createdAt);if(!Number.isFinite(v)||l-v<hm)return p}return u=!0,o.push(p.id),{...p,status:"archived"}});return u&&vl(f),o}function Sj(s=Date.now()){const a=Ii(),l=[];let o=!1;const u=a.map(f=>{if(f.status!=="open"||f.assignedExecutorIds.length)return f;const p=Date.parse(f.expiresAt);return!Number.isFinite(p)||p>s?f:(o=!0,l.push(f.id),{...f,status:"archived"})});return o&&vl(u),l}let Nf=[],Wa={timer:null,subs:new Set};async function Hg(){if(!Xt.getToken()){Nf=[];for(const s of Wa.subs)s();return}try{Nf=await rs.get("/tasks")}catch{}for(const s of Wa.subs)s()}function Ij(s){return Wa.subs.add(s),Wa.timer||(Hg(),Wa.timer=window.setInterval(()=>{Hg()},5e3)),()=>{Wa.subs.delete(s),Wa.subs.size===0&&Wa.timer&&(window.clearInterval(Wa.timer),Wa.timer=null)}}function Vg(){return Nf}function vs(){return h.useSyncExternalStore(Ij,Vg,Vg)}function ft(s,a){return s[a]||s.en||s.ru}function Qa(s,a,l=Date.now()){const o=Date.parse(s);if(!Number.isFinite(o))return s;const u=Math.max(0,Math.floor((l-o)/1e3));if(u<5)return a==="ru"?" ":"just now";if(u<60)return a==="ru"?`${u} `:`${u}s ago`;const f=Math.floor(u/60);if(f<60)return a==="ru"?`${f} `:`${f}m ago`;const p=Math.floor(f/60);if(p<24)return a==="ru"?`${p} `:`${p}h ago`;const m=Math.floor(p/24);return m===1?a==="ru"?"":"yesterday":m<7?a==="ru"?`${m} `:`${m}d ago`:new Date(o).toLocaleDateString(a==="ru"?"ru-RU":"en-US")}function Gd(s){switch(s){case"task_application":return"";case"task_application_cancelled":return"";case"task_taken":return"";case"task_assigned":return"";case"task_assigned_else":return"";case"task_submitted":return"";case"task_approved":return"";case"task_revision":return"";case"task_pause_requested":return"";case"task_pause_accepted":return"";case"task_pause_rejected":return"";case"task_completed":return"";case"task_unclaimed":return"";case"task_executor_no_start":return"";case"task_executor_overdue":return"";case"executor_violation_warning":return"";case"executor_violation_rating_penalty":return"";case"executor_violation_respond_block":return"";case"executor_violation_ban":return"";case"dispute_opened":return"";case"dispute_message":return"";case"dispute_status":return"";case"dispute_sla_threshold":return"";case"rate_customer":return"";default:return""}}function Aj(s){switch(s){case"task_completed":return"notifications.taskCompletedPrefix";case"task_application":return"notifications.taskApplicationPrefix";case"task_application_cancelled":return"notifications.taskApplicationCancelledPrefix";case"task_assigned":return"notifications.taskAssignedPrefix";case"task_assigned_else":return"notifications.taskAssignedElsePrefix";case"task_submitted":return"notifications.taskSubmittedPrefix";case"task_approved":return"notifications.taskApprovedPrefix";case"task_revision":return"notifications.taskRevisionPrefix";case"task_pause_requested":return"notifications.taskPauseRequestedPrefix";case"task_pause_accepted":return"notifications.taskPauseAcceptedPrefix";case"task_pause_rejected":return"notifications.taskPauseRejectedPrefix";case"task_unclaimed":return"notifications.taskUnclaimedPrefix";case"task_executor_no_start":return"notifications.taskExecutorNoStartPrefix";case"task_executor_overdue":return"notifications.taskExecutorOverduePrefix";case"executor_violation_warning":return"notifications.executorViolationWarningPrefix";case"executor_violation_rating_penalty":return"notifications.executorViolationRatingPenaltyPrefix";case"executor_violation_respond_block":return"notifications.executorViolationRespondBlockPrefix";case"executor_violation_ban":return"notifications.executorViolationBanPrefix";default:return"notifications.taskTakenPrefix"}}function Tj(s){return s==="task_application"||s==="task_assigned"||s==="task_taken"||s==="task_completed"||s==="task_submitted"||s==="task_pause_requested"||s==="task_executor_no_start"||s==="task_executor_overdue"?"":s==="executor_violation_warning"||s==="executor_violation_rating_penalty"||s==="executor_violation_respond_block"||s==="executor_violation_ban"?null:s==="task_application_cancelled"||s==="task_assigned_else"||s==="task_approved"||s==="task_revision"||s==="task_pause_accepted"||s==="task_pause_rejected"?"":null}function Ej(s){const a=s.trim();return a&&a[0].toUpperCase()+a.slice(1)}function Cj(s){const a=s.trim();return a&&a[0].toLowerCase()+a.slice(1)}function ky(s){const{n:a,actorId:l,task:o,locale:u,t:f}=s,p=s.nowMs??Date.now(),m=o?ft(o.title,u):a.taskId;if(a.type==="dispute_opened"||a.type==="dispute_message"||a.type==="dispute_status"||a.type==="dispute_sla_threshold"){const y=u==="ru"?a.type==="dispute_opened"?"   ":a.type==="dispute_message"?a.message?.trim()?`  : ${a.message.trim()}`:"   ":a.type==="dispute_status"?a.disputeStatus?` : ${a.disputeStatus}${a.message?.trim()?`  ${a.message.trim()}`:""}`:"  ":(()=>{const b=typeof a.slaHoursLeft=="number"?a.slaHoursLeft:0;return`SLA  :  ${b>0?`${b}`:""}`})():a.type==="dispute_opened"?"A dispute has been opened for this task":a.type==="dispute_message"?a.message?.trim()?`New dispute message: ${a.message.trim()}`:"New dispute message":a.type==="dispute_status"?a.disputeStatus?`Dispute status: ${a.disputeStatus}${a.message?.trim()?`  ${a.message.trim()}`:""}`:"Dispute status changed":(()=>{const b=typeof a.slaHoursLeft=="number"?a.slaHoursLeft:0;return`Dispute SLA: ${b>0?`${b}h`:"soon"} left`})();return{id:a.id,unread:!a.readAt,icon:Gd(a.type),title:m,subtitle:y,timeLabel:Qa(a.createdAt,u,p),href:a.disputeId?aa(a.disputeId):a.taskId?Oe(a.taskId):null,actorHref:l?ds(l):null,completionHref:null}}if(a.type==="rate_customer")return{id:a.id,unread:!a.readAt,icon:Gd(a.type),title:m,subtitle:u==="ru"?" ":"Rate the customer",timeLabel:Qa(a.createdAt,u,p),href:`${K.profile}?tab=executor_completed`,actorHref:l?ds(l):null,completionHref:null};const v=(()=>{if(a.type==="executor_violation_warning"||a.type==="executor_violation_rating_penalty"||a.type==="executor_violation_respond_block"||a.type==="executor_violation_ban"){const y=a.violationType==="no_submit_24h"?"notifications.violation.noSubmit24h":"notifications.violation.noStart12h",b=f(y),N=(()=>{if(a.type==="executor_violation_warning")return f("notifications.sanction.warning");if(a.type==="executor_violation_ban")return f("notifications.sanction.ban");if(a.type==="executor_violation_rating_penalty"){const F=typeof a.sanctionDeltaPercent=="number"?a.sanctionDeltaPercent:-5;return f("notifications.sanction.ratingPenalty",{delta:F})}const j=typeof a.sanctionDurationHours=="number"?a.sanctionDurationHours:24,C=typeof a.sanctionUntil=="string"?a.sanctionUntil:"",k=Date.parse(C),D=C&&Number.isFinite(k)?new Date(k).toLocaleString(u==="ru"?"ru-RU":"en-US"):C;return f("notifications.sanction.respondBlock",{hours:j,until:D})})();return`${f("notifications.violationPrefix")}: ${b}. ${f("notifications.sanctionPrefix")}: ${N}`}return f(Aj(a.type))})(),x=(()=>{if(a.type==="task_unclaimed")return v;if(u==="ru"){const y=Tj(a.type);return y?`${Ej(y)} ${Cj(v)}`.trim():v}return v})();return{id:a.id,unread:!a.readAt,icon:Gd(a.type),title:m,subtitle:x,timeLabel:Qa(a.createdAt,u,p),href:a.taskId?Oe(a.taskId):null,actorHref:l?ds(l):null,completionHref:a.completionVideoUrl?.trim()?a.completionVideoUrl.trim():null}}const Pg="user_dev_arbiter";function Dj(){const{locale:s,setLocale:a,t:l}=lt(),o=Ut(),u=ai(),f=qs(),p=vs(),m=Br(o.user?.id),v=ts(),x=Qt(),[y,b]=h.useState(()=>py()),[N,j]=h.useState(!1),C=h.useRef(null),[k,D]=h.useState(!1),F=h.useRef(null),q=h.useMemo(()=>s==="ru"?"":"",[s]),B=h.useMemo(()=>{const ge=new Map;for(const L of f)ge.set(L.id,L);return ge},[f]),ae=h.useMemo(()=>{const ge=new Map;for(const L of p)ge.set(L.id,L);return ge},[p]),W=!!(o.user?.role==="arbiter"&&u.enabled),X=!!(o.user&&u.enabled&&o.user.role!=="arbiter"),E=!!B.get(Pg),A=o.user?.avatarDataUrl??null,O=o.user?.fullName?.trim()||o.user?.email||"",le=h.useMemo(()=>{const ge=(o.user?.fullName??"").trim();if(!ge)return"U";const L=ge.split(/\s+/).filter(Boolean),U=L[0]?.[0]??"U",ce=L.length>1?L[1]?.[0]:L[0]?.[1];return(U+(ce??"")).toUpperCase().slice(0,2)},[o.user?.fullName]),se=ge=>{if(s==="ru"){if(ge==="customer")return"";if(ge==="executor")return"";if(ge==="arbiter")return""}return ge==="customer"?"Customer":ge==="executor"?"Executor":ge==="arbiter"?"Arbiter":ge},be=h.useMemo(()=>{if(!o.user)return[];const ge=f.slice(),L=U=>U==="arbiter"?0:U==="customer"?1:U==="executor"?2:9;return ge.sort((U,ce)=>{const Q=L(U.role),de=L(ce.role);if(Q!==de)return Q-de;const w=(U.fullName||U.email||U.id).toLowerCase(),V=(ce.fullName||ce.email||ce.id).toLowerCase();return w.localeCompare(V)})},[o.user,f]);h.useEffect(()=>{if(!N)return;const ge=U=>{const ce=C.current;ce&&U.target instanceof Node&&!ce.contains(U.target)&&j(!1)},L=U=>{U.key==="Escape"&&j(!1)};return window.addEventListener("pointerdown",ge),window.addEventListener("keydown",L),()=>{window.removeEventListener("pointerdown",ge),window.removeEventListener("keydown",L)}},[N]),h.useEffect(()=>{if(!k)return;const ge=U=>{const ce=F.current;ce&&U.target instanceof Node&&!ce.contains(U.target)&&D(!1)},L=U=>{U.key==="Escape"&&D(!1)};return window.addEventListener("pointerdown",ge),window.addEventListener("keydown",L),()=>{window.removeEventListener("pointerdown",ge),window.removeEventListener("keydown",L)}},[k]);const Se=n.jsxs("div",{className:"lang",ref:C,children:[n.jsx("button",{type:"button",className:"lang__btn","aria-label":"Language","aria-haspopup":"menu","aria-expanded":N,onClick:()=>j(ge=>!ge),children:q}),N?n.jsxs("div",{className:"lang__menu",role:"menu",children:[n.jsxs("button",{type:"button",className:"lang__item",role:"menuitem",onClick:()=>{a("en"),j(!1)},children:[n.jsx("span",{className:"lang__flag","aria-hidden":"true",children:""}),n.jsx("span",{className:"lang__label",children:"English"}),s==="en"?n.jsx("span",{className:"lang__current",children:""}):null]}),n.jsxs("button",{type:"button",className:"lang__item",role:"menuitem",onClick:()=>{a("ru"),j(!1)},children:[n.jsx("span",{className:"lang__flag","aria-hidden":"true",children:""}),n.jsx("span",{className:"lang__label",children:""}),s==="ru"?n.jsx("span",{className:"lang__current",children:""}):null]})]}):null]}),Ce=(()=>{const ge=o.user;if(!ge||ge.role!=="arbiter")return null;const L=m.filter(de=>de.type==="dispute_opened"||de.type==="dispute_message"||de.type==="dispute_status"||de.type==="dispute_sla_threshold"),U=L.filter(de=>!de.readAt).length,ce=U>99?"99+":U?String(U):null,Q=L.slice(0,6);return n.jsxs("div",{className:"notif",ref:F,children:[n.jsxs("button",{type:"button",className:"notif__btn","aria-label":s==="ru"?" ":"Arbiter notifications","aria-haspopup":"menu","aria-expanded":k,onClick:()=>D(de=>!de),children:[n.jsx("span",{"aria-hidden":"true",children:""}),ce?n.jsx("span",{className:"notif__badge",children:ce}):null]}),k?n.jsxs("div",{className:"notif__menu",role:"menu","aria-label":s==="ru"?"":"Notifications",children:[n.jsxs("div",{className:"notif__header",children:[n.jsxs("div",{className:"notif__titleRow",children:[n.jsx("div",{className:"notif__title",children:l("notifications.title")}),U?n.jsx("div",{className:"notif__count",children:U}):null]}),n.jsx("div",{className:"notif__actions",children:n.jsx("button",{type:"button",className:"notif__smallBtn",disabled:!U,onClick:()=>Fe.markAllRead(ge.id),children:s==="ru"?" ":"Mark all read"})})]}),Q.length===0?n.jsx("div",{className:"notif__empty",children:s==="ru"?"  .":"No notifications yet."}):n.jsx("div",{className:"notif__items",children:Q.map(de=>{const w=B.get(de.actorUserId)??null,V=ae.get(de.taskId)??null,G=ky({n:de,actorId:w?.id??null,task:V,locale:s,t:l}),ie=G.href??K.notifications;return n.jsxs(xe,{className:`notif__item${G.unread?" notif__item--unread":""}`,to:ie,role:"menuitem",onClick:()=>{Fe.markRead(de.id),D(!1)},children:[n.jsx("span",{className:"notifItem__icon","aria-hidden":"true",children:G.icon}),n.jsxs("span",{className:"notifItem__body",children:[n.jsx("span",{className:"notifItem__title",children:G.title}),n.jsx("span",{className:"notifItem__subtitle",children:G.subtitle})]}),n.jsx("span",{className:"notifItem__time",children:G.timeLabel})]},de.id)})}),n.jsx("div",{className:"notif__footer",children:n.jsx(xe,{className:"notif__viewAll",to:K.notifications,onClick:()=>D(!1),children:s==="ru"?" ":"View all"})})]}):null]})})();return n.jsx("header",{className:"header",children:n.jsx("div",{className:"header__inner",children:n.jsxs("div",{className:"header__right",children:[n.jsxs("button",{type:"button",className:`devToggle${u.enabled?" devToggle--on":""}`,onClick:()=>u.setEnabled(!u.enabled),"aria-pressed":u.enabled,title:l("dev.mode"),children:[n.jsx("span",{className:"devToggle__label",children:l("dev.mode")}),n.jsx("span",{className:"devToggle__state",children:u.enabled?l("dev.on"):l("dev.off")})]}),X?n.jsx("button",{type:"button",className:"arbiterJumpBtn",disabled:!E,"aria-label":s==="ru"?"   ":"Switch to arbiter",title:s==="ru"?"    (dev)":"Switch to arbiter (dev)",onClick:()=>{E&&(o.switchUser(Pg),x(K.disputes))},children:n.jsx("span",{"aria-hidden":"true",children:""})}):null,W&&o.user?n.jsxs("div",{className:"profileSwitch","aria-label":s==="ru"?" ":"Switch profile",children:[n.jsx("span",{className:"profileSwitch__label",children:s==="ru"?"":"Profile"}),n.jsx("select",{className:"profileSwitch__select",value:o.user.id,onChange:ge=>{const L=ge.target.value,U=B.get(L)??null;if(o.switchUser(L),!U){x(K.profile);return}U.role==="customer"?x(K.customerTasks):U.role==="executor"?x(K.tasks):U.role==="arbiter"?x(K.disputes):x(K.profile)},title:s==="ru"?"   (dev)":"Switch active account (dev)",children:be.map(ge=>n.jsxs("option",{value:ge.id,children:[ge.fullName||ge.email||ge.id,"  ",se(ge.role)]},ge.id))})]}):null,n.jsx("button",{type:"button",className:"theme__btn","aria-label":s==="ru"?"":"Theme","aria-pressed":y==="dark",title:y==="dark"?s==="ru"?" ":"Dark theme":s==="ru"?" ":"Light theme",onClick:()=>{const ge=y==="dark"?"light":"dark";vy(ge),b(ge)},children:n.jsx("span",{"aria-hidden":"true",children:y==="dark"?"":""})}),o.user?n.jsxs(n.Fragment,{children:[Ce,Se,o.user.role!=="arbiter"?n.jsx(xe,{className:"headerAvatar",to:K.profile,"aria-label":O,title:O,children:A?n.jsx("img",{className:"headerAvatar__img",src:A,alt:""}):n.jsx("span",{className:"headerAvatar__txt",children:le})}):n.jsx("div",{className:"headerAvatar","aria-label":O,title:O,children:A?n.jsx("img",{className:"headerAvatar__img",src:A,alt:""}):n.jsx("span",{className:"headerAvatar__txt",children:le})})]}):v.pathname!==K.register?n.jsxs(n.Fragment,{children:[Se,n.jsx(xe,{className:"header__button",to:K.login,children:l("auth.authorization")})]}):n.jsxs(n.Fragment,{children:[Se,n.jsx(xe,{className:"header__button",to:K.login,children:l("auth.authorization")})]})]})})})}let jf=[],Ya={timer:null,subs:new Set};async function $g(){if(!Xt.getToken()){jf=[];for(const s of Ya.subs)s();return}try{jf=await rs.get("/applications")}catch{}for(const s of Ya.subs)s()}function Fg(){return jf}function Nl(){return h.useSyncExternalStore(s=>(Ya.subs.add(s),Ya.timer||($g(),Ya.timer=window.setInterval(()=>{$g()},5e3)),()=>{Ya.subs.delete(s),Ya.subs.size===0&&Ya.timer&&(window.clearInterval(Ya.timer),Ya.timer=null)}),Fg,Fg)}const vm="ui-create-works.contracts.v1",wf="ui-create-works.contracts.change";function Rj(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function Kd(){return Rj(localStorage.getItem(vm))}function Wg(s){localStorage.setItem(vm,JSON.stringify(s)),window.dispatchEvent(new Event(wf))}function Sf(){return new Date().toISOString()}function Mj(s){return s==="active"||s==="submitted"||s==="revision_requested"||s==="approved"||s==="disputed"||s==="resolved"||s==="cancelled"?s:"active"}function Xd(s){if(!s||typeof s!="object")return null;const a=s,l=typeof a.id=="string"?a.id:ze("contract"),o=typeof a.taskId=="string"?a.taskId:"",u=typeof a.clientId=="string"?a.clientId:"",f=typeof a.executorId=="string"?a.executorId:"";if(!o||!u||!f)return null;const p=typeof a.createdAt=="string"?a.createdAt:Sf(),m=typeof a.updatedAt=="string"?a.updatedAt:p,v=typeof a.escrowAmount=="number"&&Number.isFinite(a.escrowAmount)&&a.escrowAmount>=0?a.escrowAmount:0,x={id:l,taskId:o,clientId:u,executorId:f,escrowAmount:v,status:Mj(a.status),createdAt:p,updatedAt:m},y=typeof a.revisionIncluded=="number"&&Number.isFinite(a.revisionIncluded)?Math.max(0,Math.floor(a.revisionIncluded)):2;return x.revisionIncluded=Math.max(2,y),typeof a.revisionUsed=="number"&&Number.isFinite(a.revisionUsed)&&(x.revisionUsed=Math.max(0,Math.floor(a.revisionUsed))),typeof a.lastSubmissionId=="string"&&a.lastSubmissionId.trim()&&(x.lastSubmissionId=a.lastSubmissionId),typeof a.lastRevisionMessage=="string"&&a.lastRevisionMessage.trim()&&(x.lastRevisionMessage=a.lastRevisionMessage.trim()),typeof a.lastRevisionRequestedAt=="string"&&a.lastRevisionRequestedAt.trim()&&(x.lastRevisionRequestedAt=a.lastRevisionRequestedAt),x}const He={listAll(){return Kd().map(Xd).filter(Boolean)},listForTask(s){return this.listAll().filter(a=>a.taskId===s)},listForClient(s){return this.listAll().filter(a=>a.clientId===s)},listForExecutor(s){return this.listAll().filter(a=>a.executorId===s)},getById(s){return this.listAll().find(a=>a.id===s)??null},getForTaskExecutor(s,a){return this.listAll().find(l=>l.taskId===s&&l.executorId===a)??null},createActive(s){const a=this.getForTaskExecutor(s.taskId,s.executorId);if(a)return a;const l=Sf(),o={id:ze("contract"),taskId:s.taskId,clientId:s.clientId,executorId:s.executorId,escrowAmount:typeof s.escrowAmount=="number"&&Number.isFinite(s.escrowAmount)&&s.escrowAmount>=0?s.escrowAmount:0,status:"active",revisionIncluded:typeof s.revisionIncluded=="number"&&Number.isFinite(s.revisionIncluded)?Math.max(2,Math.floor(s.revisionIncluded)):2,revisionUsed:0,createdAt:l,updatedAt:l},u=Kd();return u.push(o),Wg(u),o},update(s,a){const l=Kd(),o=l.findIndex(p=>p.id===s);if(o===-1)return null;const u=Xd(l[o]);if(!u)return null;const f=a(u);return l[o]={...f,updatedAt:Sf()},Wg(l),Xd(l[o])},setStatus(s,a){return this.update(s,l=>({...l,status:a}))},setLastSubmission(s,a){return this.update(s,l=>({...l,lastSubmissionId:a}))},incrementRevisionUsed(s){return this.update(s,a=>({...a,revisionUsed:(a.revisionUsed??0)+1}))},subscribe(s){const a=()=>s();window.addEventListener(wf,a);const l=o=>{o.key===vm&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(wf,a),window.removeEventListener("storage",l)}}};let If=[],Ga={timer:null,subs:new Set};async function Yg(){if(!Xt.getToken()){If=[];for(const s of Ga.subs)s();return}try{If=await rs.get("/contracts")}catch{}for(const s of Ga.subs)s()}function Gg(){return If}function ya(){return h.useSyncExternalStore(s=>(Ga.subs.add(s),Ga.timer||(Yg(),Ga.timer=window.setInterval(()=>{Yg()},5e3)),()=>{Ga.subs.delete(s),Ga.subs.size===0&&Ga.timer&&(window.clearInterval(Ga.timer),Ga.timer=null)}),Gg,Gg)}const gm="ui-create-works.taskAssignments.v1",Af="ui-create-works.taskAssignments.change",Tf=720*60*1e3,hc=1440*60*1e3,Ef=1440*60*1e3,Cf=720*60*1e3,Qd=1440*60*1e3;function Uj(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function As(){return Uj(localStorage.getItem(gm))}function Ts(s){localStorage.setItem(gm,JSON.stringify(s)),window.dispatchEvent(new Event(Af))}function Aa(){return new Date().toISOString()}function _s(s,a){const l=Date.parse(s),o=Number.isFinite(l)?l:Date.now();return new Date(o+a).toISOString()}function Bj(s){return s==="pending_start"||s==="in_progress"||s==="pause_requested"||s==="paused"||s==="overdue"||s==="submitted"||s==="accepted"||s==="removed_auto"||s==="cancelled_by_customer"||s==="dispute_opened"?s:"pending_start"}function Lj(s){if(s==="illness"||s==="family"||s==="force_majeure")return s}function Us(s){if(!s||typeof s!="object")return null;const a=s,l=typeof a.id=="string"?a.id:ze("assign"),o=typeof a.taskId=="string"?a.taskId:"",u=typeof a.executorId=="string"?a.executorId:"";if(!o||!u)return null;const f=typeof a.assignedAt=="string"?a.assignedAt:Aa(),p=typeof a.startDeadlineAt=="string"&&a.startDeadlineAt.trim()?a.startDeadlineAt:_s(f,Tf),m=Bj(a.status),v={id:l,taskId:o,executorId:u,assignedAt:f,startDeadlineAt:p,status:m},x=typeof a.startedAt=="string"&&a.startedAt.trim()?a.startedAt:void 0,y=typeof a.executionBaseDeadlineAt=="string"&&a.executionBaseDeadlineAt.trim()?a.executionBaseDeadlineAt:x?_s(x,hc):void 0,b=typeof a.executionExtensionMs=="number"&&Number.isFinite(a.executionExtensionMs)&&a.executionExtensionMs>=0?Math.floor(a.executionExtensionMs):0,N=typeof a.executionDeadlineAt=="string"&&a.executionDeadlineAt.trim()?a.executionDeadlineAt:x?_s(y??x,b):void 0,j=typeof a.submittedAt=="string"&&a.submittedAt.trim()?a.submittedAt:void 0,C=typeof a.acceptedAt=="string"&&a.acceptedAt.trim()?a.acceptedAt:void 0,k=!!a.pauseUsed,D=typeof a.pauseRequestedAt=="string"&&a.pauseRequestedAt.trim()?a.pauseRequestedAt:void 0,F=typeof a.pauseAutoAcceptAt=="string"&&a.pauseAutoAcceptAt.trim()?a.pauseAutoAcceptAt:D?_s(D,Cf):void 0,q=Lj(a.pauseReasonId),B=typeof a.pauseComment=="string"&&a.pauseComment.trim()?a.pauseComment.trim():void 0,ae=typeof a.pauseRequestedDurationMs=="number"&&Number.isFinite(a.pauseRequestedDurationMs)&&a.pauseRequestedDurationMs>0?Math.floor(a.pauseRequestedDurationMs):void 0,W=a.pauseDecision==="accepted"||a.pauseDecision==="rejected"?a.pauseDecision:void 0,X=typeof a.pauseDecidedAt=="string"&&a.pauseDecidedAt.trim()?a.pauseDecidedAt:void 0,E=typeof a.pausedAt=="string"&&a.pausedAt.trim()?a.pausedAt:void 0,A=typeof a.pausedUntil=="string"&&a.pausedUntil.trim()?a.pausedUntil:void 0,O=Array.isArray(a.forceMajeureAppliedEventIds)?a.forceMajeureAppliedEventIds.filter(be=>typeof be=="string"&&be.trim().length>0):void 0,le=typeof a.overdueAt=="string"&&a.overdueAt.trim()?a.overdueAt:void 0,se=typeof a.autoDisputeAt=="string"&&a.autoDisputeAt.trim()?a.autoDisputeAt:le?_s(le,Ef):void 0;return x&&(v.startedAt=x),y&&(v.executionBaseDeadlineAt=y),b&&(v.executionExtensionMs=b),N&&(v.executionDeadlineAt=N),j&&(v.submittedAt=j),C&&(v.acceptedAt=C),k&&(v.pauseUsed=!0),D&&(v.pauseRequestedAt=D),F&&(v.pauseAutoAcceptAt=F),q&&(v.pauseReasonId=q),B&&(v.pauseComment=B),ae&&(v.pauseRequestedDurationMs=ae),W&&(v.pauseDecision=W),X&&(v.pauseDecidedAt=X),E&&(v.pausedAt=E),A&&(v.pausedUntil=A),O&&O.length>0&&(v.forceMajeureAppliedEventIds=O),le&&(v.overdueAt=le),se&&(v.autoDisputeAt=se),v}const Ke={constants:{START_WINDOW_MS:Tf,EXECUTION_WINDOW_MS:hc,AUTO_DISPUTE_AFTER_OVERDUE_MS:Ef,PAUSE_AUTO_ACCEPT_MS:Cf,PAUSE_MAX_MS:Qd},listAll(){return As().map(Us).filter(Boolean)},listForTask(s){return this.listAll().filter(a=>a.taskId===s).slice().sort((a,l)=>l.assignedAt.localeCompare(a.assignedAt))},listForExecutor(s){return this.listAll().filter(a=>a.executorId===s).slice().sort((a,l)=>l.assignedAt.localeCompare(a.assignedAt))},getForTaskExecutor(s,a){return this.listAll().find(l=>l.taskId===s&&l.executorId===a)??null},createPendingStart(s){const a=this.getForTaskExecutor(s.taskId,s.executorId);if(a)return a;const l=s.assignedAt&&s.assignedAt.trim()?s.assignedAt:Aa(),o={id:ze("assign"),taskId:s.taskId,executorId:s.executorId,assignedAt:l,startDeadlineAt:_s(l,Tf),status:"pending_start"},u=As();return u.push(o),Ts(u),o},startWork(s,a){const l=As(),o=l.findIndex(v=>v?.taskId===s&&v?.executorId===a);if(o===-1)return null;const u=Us(l[o]);if(!u)return null;if(u.status!=="pending_start")return u;const f=Aa(),p=_s(f,hc),m={...u,status:"in_progress",startedAt:f,executionBaseDeadlineAt:p,executionExtensionMs:0,executionDeadlineAt:p};return l[o]=m,Ts(l),m},requestPause(s){const a=As(),l=a.findIndex(m=>m?.taskId===s.taskId&&m?.executorId===s.executorId);if(l===-1)return null;const o=Us(a[l]);if(!o)return null;if(o.status!=="in_progress"||!o.startedAt||!o.executionDeadlineAt||!o.executionBaseDeadlineAt||o.pauseUsed)return o;const u=Aa(),f=Math.max(300*1e3,Math.min(Qd,Math.floor(s.durationMs))),p={...o,status:"pause_requested",pauseUsed:!0,pauseRequestedAt:u,pauseAutoAcceptAt:_s(u,Cf),pauseReasonId:s.reasonId,pauseComment:s.comment?.trim()||void 0,pauseRequestedDurationMs:f,pauseDecision:void 0,pauseDecidedAt:void 0,pausedAt:void 0,pausedUntil:void 0};return a[l]=p,Ts(a),p},acceptPause(s,a,l){const o=As(),u=o.findIndex(B=>B?.taskId===s&&B?.executorId===a);if(u===-1)return null;const f=Us(o[u]);if(!f)return null;if(f.status!=="pause_requested"||!f.pauseRequestedAt||!f.pauseRequestedDurationMs||!f.executionBaseDeadlineAt)return f;const p=l&&l.trim()?l:Aa(),m=Date.parse(f.pauseRequestedAt),v=Date.parse(p),x=Number.isFinite(m)&&Number.isFinite(v)?Math.max(0,v-m):0,y=Math.min(Qd,Math.floor(hc*.5)),b=typeof f.executionExtensionMs=="number"&&Number.isFinite(f.executionExtensionMs)?f.executionExtensionMs:0,N=Math.max(0,y-b),j=Math.min(N,x+f.pauseRequestedDurationMs),C=b+j,k=_s(f.executionBaseDeadlineAt,C),D=p,F=_s(D,f.pauseRequestedDurationMs),q={...f,status:"paused",pauseDecision:"accepted",pauseDecidedAt:p,executionExtensionMs:C,executionDeadlineAt:k,pausedAt:D,pausedUntil:F};return o[u]=q,Ts(o),q},rejectPause(s,a,l){const o=As(),u=o.findIndex(v=>v?.taskId===s&&v?.executorId===a);if(u===-1)return null;const f=Us(o[u]);if(!f)return null;if(f.status!=="pause_requested")return f;const p=l&&l.trim()?l:Aa(),m={...f,status:"in_progress",pauseDecision:"rejected",pauseDecidedAt:p};return o[u]=m,Ts(o),m},resumeIfPauseEnded(s,a,l=Date.now()){const o=As(),u=o.findIndex(v=>v?.taskId===s&&v?.executorId===a);if(u===-1)return null;const f=Us(o[u]);if(!f)return null;if(f.status!=="paused"||!f.pausedUntil)return f;const p=Date.parse(f.pausedUntil);if(!Number.isFinite(p)||l<p)return f;const m={...f,status:"in_progress"};return o[u]=m,Ts(o),m},endPauseEarly(s,a,l){const o=As(),u=o.findIndex(v=>v?.taskId===s&&v?.executorId===a);if(u===-1)return null;const f=Us(o[u]);if(!f)return null;if(f.status!=="paused")return f;const p=l&&l.trim()?l:Aa(),m={...f,status:"in_progress",pausedUntil:p};return o[u]=m,Ts(o),m},applyForceMajeureShift(s){const a=As(),l=a.findIndex(m=>m?.taskId===s.taskId&&m?.executorId===s.executorId);if(l===-1)return null;const o=Us(a[l]);if(!o)return null;const u=new Set(o.forceMajeureAppliedEventIds??[]);if(u.has(s.eventId))return o;const f=Math.max(0,Math.floor(s.durationMs));if(!f){u.add(s.eventId);const m={...o,forceMajeureAppliedEventIds:Array.from(u)};return a[l]=m,Ts(a),m}const p={...o,forceMajeureAppliedEventIds:Array.from(u).concat(s.eventId)};if(p.status==="pending_start"&&(p.startDeadlineAt=_s(p.startDeadlineAt,f)),p.executionBaseDeadlineAt){const m=typeof p.executionExtensionMs=="number"&&Number.isFinite(p.executionExtensionMs)?p.executionExtensionMs:0;p.executionExtensionMs=m+f,p.executionDeadlineAt=_s(p.executionBaseDeadlineAt,p.executionExtensionMs)}else p.executionDeadlineAt&&(p.executionDeadlineAt=_s(p.executionDeadlineAt,f));return p.autoDisputeAt&&(p.autoDisputeAt=_s(p.autoDisputeAt,f)),p.pauseAutoAcceptAt&&(p.pauseAutoAcceptAt=_s(p.pauseAutoAcceptAt,f)),p.pausedUntil&&(p.pausedUntil=_s(p.pausedUntil,f)),a[l]=p,Ts(a),p},markOverdue(s,a,l){const o=As(),u=o.findIndex(v=>v?.taskId===s&&v?.executorId===a);if(u===-1)return null;const f=Us(o[u]);if(!f)return null;if(f.status!=="in_progress")return f;const p=l&&l.trim()?l:Aa(),m={...f,status:"overdue",overdueAt:p,autoDisputeAt:_s(p,Ef)};return o[u]=m,Ts(o),m},markSubmitted(s,a,l){const o=As(),u=o.findIndex(v=>v?.taskId===s&&v?.executorId===a);if(u===-1)return null;const f=Us(o[u]);if(!f)return null;if(f.status!=="in_progress"&&f.status!=="overdue")return f;const p=l&&l.trim()?l:Aa(),m={...f,status:"submitted",submittedAt:p};return o[u]=m,Ts(o),m},resumeAfterRevisionRequest(s,a,l){const o=As(),u=o.findIndex(m=>m?.taskId===s&&m?.executorId===a);if(u===-1)return null;const f=Us(o[u]);if(!f)return null;if(f.status!=="submitted")return f;l&&l.trim()||Aa();const p={...f,status:"in_progress"};return o[u]=p,Ts(o),p},markAccepted(s,a,l){const o=As(),u=o.findIndex(v=>v?.taskId===s&&v?.executorId===a);if(u===-1)return null;const f=Us(o[u]);if(!f)return null;if(f.status!=="submitted"&&f.status!=="dispute_opened")return f;const p=l&&l.trim()?l:Aa(),m={...f,status:"accepted",acceptedAt:p};return o[u]=m,Ts(o),m},removedAuto(s,a){const l=As(),o=l.findIndex(p=>p?.taskId===s&&p?.executorId===a);if(o===-1)return null;const u=Us(l[o]);if(!u)return null;if(u.status!=="pending_start")return u;const f={...u,status:"removed_auto"};return l[o]=f,Ts(l),f},cancelByCustomer(s,a){const l=As(),o=l.findIndex(p=>p?.taskId===s&&p?.executorId===a);if(o===-1)return null;const u=Us(l[o]);if(!u)return null;if(u.status==="accepted"||u.status==="cancelled_by_customer")return u;const f={...u,status:"cancelled_by_customer"};return l[o]=f,Ts(l),f},openDispute(s,a){const l=As(),o=l.findIndex(p=>p?.taskId===s&&p?.executorId===a);if(o===-1)return null;const u=Us(l[o]);if(!u)return null;if(u.status==="dispute_opened"||u.status==="accepted")return u;const f={...u,status:"dispute_opened"};return l[o]=f,Ts(l),f},subscribe(s){const a=()=>s();window.addEventListener(Af,a);const l=o=>{o.key===gm&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(Af,a),window.removeEventListener("storage",l)}}};let Df=[],Ka={timer:null,subs:new Set};async function Kg(){if(!Xt.getToken()){Df=[];for(const s of Ka.subs)s();return}try{Df=await rs.get("/assignments")}catch{}for(const s of Ka.subs)s()}function Xg(){return Df}function Ti(){return h.useSyncExternalStore(s=>(Ka.subs.add(s),Ka.timer||(Kg(),Ka.timer=window.setInterval(()=>{Kg()},5e3)),()=>{Ka.subs.delete(s),Ka.subs.size===0&&Ka.timer&&(window.clearInterval(Ka.timer),Ka.timer=null)}),Xg,Xg)}function Oj(){const{t:s,locale:a}=lt(),l=Ut(),o=ai(),u=ts(),f=vs(),p=Nl(),m=ya(),v=Ti();Br(l.user?.id??null);const[x,y]=h.useState(!1),[b,N]=h.useState(!1),j=x||b;h.useEffect(()=>{y(!1)},[u.pathname,u.search]),h.useEffect(()=>{if(!x)return;const X=E=>{const A=document.querySelector(".sidebar"),O=document.querySelector(".sidebar__hamburger");A&&O&&!A.contains(E.target)&&!O.contains(E.target)&&y(!1)};return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[x]);const C=h.useMemo(()=>{if(!l.user||l.user.role!=="customer")return 0;const X=new Set(f.filter(E=>E.createdByUserId===l.user.id).map(E=>E.id));return X.size===0?0:p.filter(E=>E.status==="pending"&&X.has(E.taskId)).length},[p,l.user,f]),k=h.useMemo(()=>!l.user||l.user.role!=="customer"?0:m.filter(X=>X.clientId===l.user.id&&X.status==="submitted").length,[l.user,m]),D=h.useMemo(()=>{if(!l.user||l.user.role!=="customer")return 0;const X=new Set(f.filter(E=>E.createdByUserId===l.user.id).map(E=>E.id));return X.size===0?0:v.filter(E=>E.status==="pause_requested"&&X.has(E.taskId)).length},[v,l.user,f]),F=C+k+D,q=F>99?"99+":String(F),ae=[{path:K.disputes,icon:"",label:a==="ru"?"":"Disputes",show:l.user?.role==="arbiter"},{path:K.tasks,icon:"",label:s("nav.tasks"),show:l.user?.role!=="customer"&&l.user?.role!=="arbiter"},{path:K.taskCreate,icon:"",label:s("nav.postTask"),show:l.user?.role==="customer"},{path:K.customerTasks,icon:"",label:s("nav.myTasks"),show:l.user?.role==="customer",badgeCount:F},{path:K.customerArchive,icon:"",label:s("nav.archive"),show:l.user?.role==="customer"&&o.enabled},{path:K.profile,icon:"",label:s("nav.profile"),show:!!l.user&&l.user.role!=="arbiter"},{path:l.user?`/works/${l.user.id}`:K.home,icon:"",label:s("nav.portfolio"),show:!!l.user&&l.user.role!=="arbiter"}].filter(X=>X.show),W=l.user?.role==="customer"?K.customerTasks:l.user?.role==="executor"?K.tasks:l.user?.role==="arbiter"?K.disputes:K.home;return n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",className:"sidebar__hamburger",onClick:()=>y(!x),"aria-label":"Toggle menu",children:[n.jsx("span",{className:"sidebar__hamburger__line"}),n.jsx("span",{className:"sidebar__hamburger__line"}),n.jsx("span",{className:"sidebar__hamburger__line"})]}),x&&n.jsx("div",{className:"sidebar__overlay",onClick:()=>y(!1)}),n.jsx("aside",{className:`sidebar ${j?"sidebar--expanded":"sidebar--collapsed"} ${x?"sidebar--mobile-open":""}`,onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),children:n.jsxs("div",{className:"sidebar__inner",children:[n.jsxs(xe,{to:W,className:"sidebar__logo",children:[n.jsx("span",{className:"sidebar__logo__icon","aria-hidden":"true",children:"TF"}),n.jsx("span",{className:`sidebar__logo__text ${j?"sidebar__logo__text--visible":""}`,children:"TaskFlow"})]}),n.jsx("nav",{className:"sidebar__nav",children:ae.map(X=>{const[E,A=""]=X.path.split("?"),O=A?u.search.includes(A):!0,le=u.pathname===E&&O||E!==K.tasks&&E!==K.home&&u.pathname.startsWith(E);return n.jsxs(xe,{to:X.path,className:`sidebar__nav__item ${le?"sidebar__nav__item--active":""}`,title:j?void 0:X.label,children:[n.jsx("span",{className:"sidebar__nav__icon","aria-hidden":"true",children:X.icon}),n.jsx("span",{className:`sidebar__nav__label ${j?"sidebar__nav__label--visible":""}`,children:X.label}),X.badgeCount?n.jsx("span",{className:"sidebar__nav__badge",title:j?`${X.badgeCount}`:`${X.label}: ${X.badgeCount}`,"aria-label":`${X.label}: ${X.badgeCount}`,children:X.path===K.customerTasks?q:X.badgeCount}):null]},X.path)})})]})})]})}function qj(){const{t:s,locale:a}=lt(),l=Ut(),o=ts(),u=Br(l.user?.id??null),f=h.useMemo(()=>u.filter(C=>!C.readAt).length,[u]),p=vs(),m=Nl(),v=ya(),x=Ti(),y=h.useMemo(()=>{if(!l.user||l.user.role!=="customer")return 0;const C=new Set(p.filter(q=>q.createdByUserId===l.user.id).map(q=>q.id));if(C.size===0)return 0;const k=m.filter(q=>q.status==="pending"&&C.has(q.taskId)).length,D=v.filter(q=>q.clientId===l.user.id&&q.status==="submitted").length,F=x.filter(q=>q.status==="pause_requested"&&C.has(q.taskId)).length;return k+D+F},[m,x,l.user,v,p]),N=[{key:"disputes",path:K.disputes,icon:"",label:a==="ru"?"":"Disputes",show:l.user?.role==="arbiter"},{key:"tasks-exec",path:K.tasks,icon:"",label:s("nav.tasks"),show:l.user?.role==="executor"},{key:"my-tasks",path:K.customerTasks,icon:"",label:s("nav.myTasks"),show:l.user?.role==="customer",badgeCount:y},{key:"post-task",path:K.taskCreate,icon:"",label:s("nav.postTask"),show:l.user?.role==="customer"},{key:"notifications",path:K.notifications,icon:"",label:s("notifications.title"),show:!!l.user,badgeCount:f},{key:"profile",path:K.profile,icon:"",label:s("nav.profile"),show:!!l.user&&l.user?.role!=="arbiter"}].filter(C=>C.show).slice(0,5),j=C=>C===K.profile?o.pathname===K.profile:o.pathname===C||o.pathname.startsWith(C+"/");return l.user?n.jsx("nav",{className:"bottomNav","aria-label":a==="ru"?"":"Navigation",children:n.jsx("div",{className:"bottomNav__inner",children:N.map(C=>{const k=j(C.path),D=C.badgeCount&&C.badgeCount>99?"99+":C.badgeCount?String(C.badgeCount):null;return n.jsxs(xe,{to:C.path,className:`bottomNav__item${k?" bottomNav__item--active":""}`,children:[n.jsx("span",{className:"bottomNav__icon","aria-hidden":"true",children:C.icon}),n.jsx("span",{className:"bottomNav__label",children:C.label}),D?n.jsx("span",{className:"bottomNav__badge","aria-label":`${C.label}: ${D}`,children:D}):null]},C.key)})})}):null}const xm="ui-create-works.disputes.v1",Rf="ui-create-works.disputes.change",_y=1440*60*1e3;function zj(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function Mf(){return zj(localStorage.getItem(xm))}function Ny(s){localStorage.setItem(xm,JSON.stringify(s)),window.dispatchEvent(new Event(Rf))}function Tr(){return new Date().toISOString()}function jy(s,a){const l=Date.parse(s);return Number.isFinite(l)?new Date(l+a).toISOString():new Date(Date.now()+a).toISOString()}function Hj(s){return s==="open"||s==="in_review"||s==="need_more_info"||s==="decided"||s==="closed"?s:"open"}function Vj(s){if(!s||typeof s!="object")return{categoryId:"universal",reasonId:"other"};const a=s,l=typeof a.categoryId=="string"&&a.categoryId.trim()?a.categoryId:"universal",o=typeof a.reasonId=="string"&&a.reasonId.trim()?a.reasonId:"other",u=typeof a.detail=="string"&&a.detail.trim()?a.detail.trim():void 0;return{categoryId:l,reasonId:o,detail:u}}function Pj(s){if(!s||typeof s!="object")return;const a=s,l=a.payout;if(l==="executor")return{payout:"executor"};if(l==="customer")return{payout:"customer"};if(l==="split"||l==="partial"){const o=typeof a.executorAmount=="number"?a.executorAmount:NaN,u=typeof a.customerAmount=="number"?a.customerAmount:NaN;if(!Number.isFinite(o)||!Number.isFinite(u))return;const f=typeof a.note=="string"&&a.note.trim()?a.note.trim():void 0;return l==="split"?{payout:"split",executorAmount:o,customerAmount:u}:{payout:"partial",executorAmount:o,customerAmount:u,note:f}}}function Uf(s){if(!s||typeof s!="object")return null;const a=s,l=typeof a.id=="string"?a.id:ze("disp"),o=typeof a.contractId=="string"?a.contractId:"",u=typeof a.openedByUserId=="string"?a.openedByUserId:"";if(!o||!u)return null;const f=typeof a.createdAt=="string"?a.createdAt:Tr(),p=typeof a.updatedAt=="string"?a.updatedAt:f,m=typeof a.slaDueAt=="string"&&a.slaDueAt.trim()?a.slaDueAt:jy(f,_y),v=typeof a.assignedArbiterId=="string"&&a.assignedArbiterId.trim()?a.assignedArbiterId.trim():void 0,x=typeof a.lockedDecisionAt=="string"&&a.lockedDecisionAt.trim()?a.lockedDecisionAt:void 0,y=typeof a.version=="number"?a.version:NaN,b=Number.isFinite(y)&&y>=1?Math.floor(y):1;return{id:l,contractId:o,openedByUserId:u,reason:Vj(a.reason),status:Hj(a.status),decision:Pj(a.decision),assignedArbiterId:v,slaDueAt:m,lockedDecisionAt:x,version:b,createdAt:f,updatedAt:p}}function Nr(s,a){const l=Mf(),o=l.findIndex(p=>p?.id===s);if(o===-1)return null;const u=Uf(l[o]);if(!u)return null;const f=a(u);return l[o]={...f,updatedAt:Tr()},Ny(l),Uf(l[o])}const Ot={listAll(){return Mf().map(Uf).filter(Boolean)},getById(s){return this.listAll().find(a=>a.id===s)??null},getForContract(s){return this.listAll().find(a=>a.contractId===s)??null},open(s){const a=this.getForContract(s.contractId);if(a)return a;const l=Tr(),o={id:ze("disp"),contractId:s.contractId,openedByUserId:s.openedByUserId,reason:{categoryId:s.reason.categoryId,reasonId:s.reason.reasonId,detail:s.reason.detail?.trim()||void 0},status:"open",slaDueAt:jy(l,_y),version:1,createdAt:l,updatedAt:l},u=Mf();return u.push(o),Ny(u),o},decide(s,a){const l=this.getForContract(s);return l?Nr(l.id,o=>o.lockedDecisionAt?o:{...o,status:"decided",decision:a,lockedDecisionAt:o.lockedDecisionAt??Tr(),version:(o.version??1)+1}):null},close(s){const a=this.getForContract(s);return a?Nr(a.id,l=>({...l,status:"closed",version:(l.version??1)+1})):null},takeInWork(s){return Nr(s.disputeId,a=>{if(a.lockedDecisionAt||a.status==="closed")return a;const l=s.expectedVersion;return typeof l=="number"&&Number.isFinite(l)&&l!==(a.version??1)||a.assignedArbiterId&&a.assignedArbiterId!==s.arbiterId?a:{...a,assignedArbiterId:s.arbiterId,status:"in_review",version:(a.version??1)+1}})},requestMoreInfo(s){return Nr(s.disputeId,a=>{if(a.lockedDecisionAt||a.status==="closed")return a;const l=s.expectedVersion;return typeof l=="number"&&Number.isFinite(l)&&l!==(a.version??1)||a.assignedArbiterId&&a.assignedArbiterId!==s.arbiterId?a:{...a,assignedArbiterId:a.assignedArbiterId??s.arbiterId,status:"need_more_info",version:(a.version??1)+1}})},decideLocked(s){return Nr(s.disputeId,a=>a.lockedDecisionAt||a.status==="closed"||(a.version??1)!==s.expectedVersion||a.assignedArbiterId&&a.assignedArbiterId!==s.arbiterId||a.status!=="in_review"?a:{...a,status:"decided",decision:s.decision,lockedDecisionAt:Tr(),version:(a.version??1)+1})},subscribe(s){const a=()=>s();window.addEventListener(Rf,a);const l=o=>{o.key===xm&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(Rf,a),window.removeEventListener("storage",l)}}},ym="ui-create-works.balanceFreezes.v1";function $j(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function yn(){return $j(localStorage.getItem(ym))}function sc(s){localStorage.setItem(ym,JSON.stringify(s)),window.dispatchEvent(new Event("ui-create-works.balanceFreezes.change"))}const Ys={list(){return yn()},listForTask(s){return yn().filter(a=>a.taskId===s)},listForCustomer(s){return s?yn().filter(a=>a.customerId===s):[]},listForExecutor(s){return s?yn().filter(a=>a.executorId===s):[]},totalFrozen(s){return s?yn().reduce((a,l)=>l.customerId===s?a+l.amount:a,0):0},freeze(s,a,l,o){if(!s||!a||!l||!(o>0))return!1;const u=yn();return u.some(f=>f.taskId===a&&f.executorId===l)||(u.push({taskId:a,customerId:s,executorId:l,amount:o,createdAt:new Date().toISOString()}),sc(u)),!0},release(s,a){const l=yn(),o=l.findIndex(f=>f.taskId===s&&f.executorId===a);if(o===-1)return 0;const[u]=l.splice(o,1);return sc(l),u.amount},releaseEntry(s,a){const l=yn(),o=l.findIndex(f=>f.taskId===s&&f.executorId===a);if(o===-1)return null;const[u]=l.splice(o,1);return sc(l),u},claimFor(s,a){return this.releaseEntry(s,a)},claim(s){const a=yn(),l=a.filter(u=>u.taskId===s);if(!l.length)return[];const o=a.filter(u=>u.taskId!==s);return sc(o),l},subscribe(s){const a=()=>s();window.addEventListener("ui-create-works.balanceFreezes.change",a);const l=o=>{o.key===ym&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener("ui-create-works.balanceFreezes.change",a),window.removeEventListener("storage",l)}}},bm="ui-create-works.customerBalances.v1",Bf="ui-create-works.customerBalances.change";function Fj(s){if(!s)return{};try{const a=JSON.parse(s);return typeof a!="object"||a===null?{}:Object.entries(a).reduce((l,[o,u])=>(typeof u=="number"&&Number.isFinite(u)&&(l[o]=u),l),{})}catch{return{}}}function Lf(){return Fj(localStorage.getItem(bm))}function wy(s){localStorage.setItem(bm,JSON.stringify(s)),window.dispatchEvent(new Event(Bf))}function Qg(s,a){const l=Lf(),o=l[s]??0,u=Math.max(0,o+a),f={...l,[s]:u};return wy(f),u}const fs={get(s){return s?Lf()[s]??0:0},deposit(s,a){return!s||!Number.isFinite(a)||a<=0?0:Qg(s,a)},withdraw(s,a){return!s||!Number.isFinite(a)||a<=0||this.get(s)<a?!1:(Qg(s,-a),!0)},reset(s){if(!s)return 0;const l={...Lf(),[s]:0};return wy(l),0},subscribe(s){const a=()=>s();window.addEventListener(Bf,a);const l=o=>{o.key===bm&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(Bf,a),window.removeEventListener("storage",l)}}},km="ui-create-works.disputeMessages.v1",Of="ui-create-works.disputeMessages.change";function Wj(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function Zg(){return Wj(localStorage.getItem(km))}function Yj(s){localStorage.setItem(km,JSON.stringify(s)),window.dispatchEvent(new Event(Of))}function Sy(){return new Date().toISOString()}function Gj(s){if(!s||typeof s!="object")return null;const a=s,l=typeof a.id=="string"?a.id:ze("dmsg"),o=typeof a.disputeId=="string"?a.disputeId:"",u=typeof a.authorUserId=="string"?a.authorUserId:"",f=typeof a.kind=="string"?a.kind:"public",p=f==="system"||f==="internal"||f==="public"?f:"public",m=typeof a.text=="string"?a.text:"";if(!o||!u)return null;const v=typeof a.createdAt=="string"?a.createdAt:Sy(),x=Array.isArray(a.attachments)?a.attachments:null;return{id:l,disputeId:o,authorUserId:u,kind:p,text:m,attachments:x??void 0,createdAt:v}}const hs={listForDispute(s){return Zg().map(Gj).filter(Boolean).filter(a=>a.disputeId===s)},add(s){const a=Sy(),l={id:ze("dmsg"),disputeId:s.disputeId,authorUserId:s.authorUserId,kind:s.kind??"public",text:s.text,createdAt:a},o=Zg();return o.push(l),Yj(o),l},addSystem(s){return this.add({disputeId:s.disputeId,authorUserId:"system",kind:"system",text:s.text})},subscribe(s){const a=()=>s();window.addEventListener(Of,a);const l=o=>{o.key===km&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(Of,a),window.removeEventListener("storage",l)}}},_m="ui-create-works.auditLog.v1",qf="ui-create-works.auditLog.change";function Kj(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function Jg(){return Kj(localStorage.getItem(_m))}function Xj(s){localStorage.setItem(_m,JSON.stringify(s)),window.dispatchEvent(new Event(qf))}function Iy(){return new Date().toISOString()}function Qj(s){if(!s||typeof s!="object")return null;const a=s,l=typeof a.id=="string"?a.id:ze("audit"),o=typeof a.disputeId=="string"?a.disputeId:"",u=typeof a.actorUserId=="string"?a.actorUserId:"",f=typeof a.actionType=="string"?a.actionType:"system_message",p=typeof a.summary=="string"?a.summary:"";if(!o||!u||!p)return null;const m=typeof a.createdAt=="string"?a.createdAt:Iy(),v=(a.payload&&typeof a.payload=="object"?a.payload:void 0)??void 0,x=typeof a.versionBefore=="number"&&Number.isFinite(a.versionBefore)?a.versionBefore:void 0,y=typeof a.versionAfter=="number"&&Number.isFinite(a.versionAfter)?a.versionAfter:void 0;return{id:l,disputeId:o,actionType:f,actorUserId:u,summary:p,payload:v,createdAt:m,versionBefore:x,versionAfter:y}}const Ns={listForDispute(s){return Jg().map(Qj).filter(Boolean).filter(a=>a.disputeId===s)},add(s){const a={id:ze("audit"),disputeId:s.disputeId,actionType:s.actionType,actorUserId:s.actorUserId,summary:s.summary,payload:s.payload,versionBefore:s.versionBefore,versionAfter:s.versionAfter,createdAt:Iy()},l=Jg();return l.push(a),Xj(l),a},subscribe(s){const a=()=>s();window.addEventListener(qf,a);const l=o=>{o.key===_m&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(qf,a),window.removeEventListener("storage",l)}}};function ps(s,a){if(!s)throw new Error(a)}function Zd(s){const a=yt.getById(s);if(!a)return;const l=He.listForTask(s),o=l.some(N=>N.status==="disputed"),u=l.some(N=>N.status==="submitted"),f=l.some(N=>N.status==="active"||N.status==="revision_requested"),p=l.length>0&&l.every(N=>N.status==="approved"||N.status==="resolved"||N.status==="cancelled"),m=a.assignedExecutorIds.length,v=a.maxExecutors??1,y=!(m<v)&&p,b=y?"closed":o?"dispute":u?"review":f||m>0?"in_progress":"open";yt.update(s,N=>({...N,status:b,completedAt:y?new Date().toISOString():N.completedAt}))}function ac(s){return Math.round(s*100)/100}const kc={decideAndExecute(s){ps(s.disputeId,"disputeId is required"),ps(s.actorUserId,"actorUserId is required"),ps(Number.isFinite(s.expectedVersion)&&s.expectedVersion>=1,"expectedVersion is required"),ps(s.comment.trim().length>0,"Comment is required"),ps(s.checklist.requirementsChecked&&s.checklist.videoReviewed&&s.checklist.chatReviewed,"Checklist is incomplete");const a=Ot.getById(s.disputeId);ps(a,"Dispute not found"),ps(!a.lockedDecisionAt,"Decision is already locked"),ps(a.status==="in_review","Dispute must be in_review to decide"),ps((a.version??1)===s.expectedVersion,"Stale data (version mismatch)"),ps(!a.assignedArbiterId||a.assignedArbiterId===s.actorUserId,"Dispute is assigned to another arbiter");const l=He.getById(a.contractId);ps(l,"Contract not found");let o,u=null;if(s.decisionKind==="release_to_executor"){o={payout:"executor"};const m=Ys.claimFor(l.taskId,l.executorId);ps(m,"Escrow is not frozen (cannot release)"),fs.deposit(m.executorId,m.amount),u={executorAmount:m.amount,customerAmount:0},He.setStatus(l.id,"resolved"),Ke.markAccepted(l.taskId,l.executorId),Zd(l.taskId)}else if(s.decisionKind==="refund_to_customer"){o={payout:"customer"};const m=Ys.claimFor(l.taskId,l.executorId);ps(m,"Escrow is not frozen (cannot refund)"),fs.deposit(m.customerId,m.amount),u={executorAmount:0,customerAmount:m.amount},He.setStatus(l.id,"resolved"),Ke.markAccepted(l.taskId,l.executorId),Zd(l.taskId)}else if(s.decisionKind==="partial_refund"){const m=s.partial?.executorAmount??NaN,v=s.partial?.customerAmount??NaN;ps(Number.isFinite(m)&&m>=0,"executorAmount is invalid"),ps(Number.isFinite(v)&&v>=0,"customerAmount is invalid"),o={payout:"partial",executorAmount:ac(m),customerAmount:ac(v),note:s.comment.trim()};const x=Ys.claimFor(l.taskId,l.executorId);ps(x,"Escrow is not frozen (cannot split)");const y=ac(m+v);ps(ac(x.amount)===y,"Partial amounts must sum to escrow amount"),m>0&&fs.deposit(x.executorId,m),v>0&&fs.deposit(x.customerId,v),u={executorAmount:m,customerAmount:v},He.setStatus(l.id,"resolved"),Ke.markAccepted(l.taskId,l.executorId),Zd(l.taskId)}else s.decisionKind==="redo_required"?(o={payout:"partial",executorAmount:0,customerAmount:0,note:`redo_required: ${s.comment.trim()}`},u=null):(o={payout:"partial",executorAmount:0,customerAmount:0,note:`no_action: ${s.comment.trim()}`},u=null);const f=Ot.decideLocked({disputeId:a.id,decision:o,expectedVersion:s.expectedVersion,arbiterId:s.actorUserId});ps(f&&f.lockedDecisionAt,"Failed to lock decision (possibly stale)"),hs.addSystem({disputeId:a.id,text:s.decisionKind==="redo_required"?" :  .":s.decisionKind==="no_action"?" :  .":s.decisionKind==="release_to_executor"?" :  .":s.decisionKind==="refund_to_customer"?" :  .":" :  ."}),Ns.add({disputeId:a.id,actionType:"decision_confirmed",actorUserId:s.actorUserId,summary:` : ${s.decisionKind}`,payload:{decisionKind:s.decisionKind,comment:s.comment.trim(),payouts:u,checklist:s.checklist},versionBefore:s.expectedVersion,versionAfter:f.version}),s.closeAfter&&(Ot.close(l.id),hs.addSystem({disputeId:a.id,text:" ."}),Ns.add({disputeId:a.id,actionType:"dispute_closed",actorUserId:s.actorUserId,summary:" "}));const p=[l.clientId,l.executorId].filter(Boolean);for(const m of p)m!==s.actorUserId&&Fe.addDisputeStatus({recipientUserId:m,actorUserId:s.actorUserId,taskId:l.taskId,disputeId:a.id,status:s.closeAfter?"closed":"decided",note:s.decisionKind});return Fe.addRateCustomer({recipientUserId:l.executorId,actorUserId:s.actorUserId,taskId:l.taskId}),{dispute:f,payouts:u}}},Nm="ui-create-works.executorRestrictions.v1",zf="ui-create-works.executorRestrictions.change";function Zj(s){if(!s)return{};try{const a=JSON.parse(s);return!a||typeof a!="object"?{}:a}catch{return{}}}function Jd(){return Zj(localStorage.getItem(Nm))}function ex(s){localStorage.setItem(Nm,JSON.stringify(s)),window.dispatchEvent(new Event(zf))}function nc(){return new Date().toISOString()}const wn={get(s){const l=Jd()[s];if(!l)return{executorId:s,accountStatus:"active",updatedAt:nc()};const o=typeof l.respondBlockedUntil=="string"&&l.respondBlockedUntil.trim()?l.respondBlockedUntil:void 0,u=l.accountStatus==="banned"?"banned":"active",f=typeof l.updatedAt=="string"?l.updatedAt:nc();return{executorId:s,respondBlockedUntil:o,accountStatus:u,updatedAt:f}},setRespondBlockedUntil(s,a){const l=Jd(),o=this.get(s),u=o.respondBlockedUntil?Date.parse(o.respondBlockedUntil):NaN,f=Date.parse(a),p=Number.isFinite(u)&&Number.isFinite(f)?new Date(Math.max(u,f)).toISOString():a;return l[s]={...o,respondBlockedUntil:p,updatedAt:nc()},ex(l),l[s]},ban(s){const a=Jd(),l=this.get(s);return a[s]={...l,accountStatus:"banned",updatedAt:nc()},ex(a),a[s]},canRespond(s,a=Date.now()){const l=this.get(s);if(l.accountStatus==="banned")return{ok:!1,reason:"banned",until:null};if(l.respondBlockedUntil){const o=Date.parse(l.respondBlockedUntil);if(Number.isFinite(o)&&a<o)return{ok:!1,reason:"blocked",until:l.respondBlockedUntil}}return{ok:!0,reason:null,until:null}},subscribe(s){const a=()=>s();window.addEventListener(zf,a);const l=o=>{o.key===Nm&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(zf,a),window.removeEventListener("storage",l)}}},jm="ui-create-works.executorViolations.v1",Hf="ui-create-works.executorViolations.change",Jj=90,ew=Jj*24*60*60*1e3;function tw(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function ef(){return tw(localStorage.getItem(jm))}function tx(s){localStorage.setItem(jm,JSON.stringify(s)),window.dispatchEvent(new Event(Hf))}function Vf(){return new Date().toISOString()}function sx(s,a){if(!Number.isFinite(a)||a<=0)return s;const l=Math.floor(a/ew);return!Number.isFinite(l)||l<=0?s:Math.max(0,s-l)}function sw(s){if(!s||typeof s!="object")return null;const a=s,l=typeof a.id=="string"?a.id:ze("viol"),o=typeof a.executorId=="string"?a.executorId:"",u=typeof a.taskId=="string"?a.taskId:"",f=typeof a.assignmentId=="string"?a.assignmentId:"",p=typeof a.createdAt=="string"?a.createdAt:Vf(),m=a.type==="no_submit_24h"?"no_submit_24h":(a.type==="no_start_12h","no_start_12h");return!o||!u||!f?null:{id:l,executorId:o,type:m,taskId:u,assignmentId:f,createdAt:p}}const Ai={listAll(){return ef().map(sw).filter(Boolean)},listForExecutor(s){return this.listAll().filter(a=>a.executorId===s).slice().sort((a,l)=>l.createdAt.localeCompare(a.createdAt))},listForExecutorSince(s,a,l){return this.listForExecutor(s).filter(u=>{if(l&&u.type!==l)return!1;const f=Date.parse(u.createdAt);return Number.isFinite(f)&&f>=a})},countForExecutorSince(s,a,l){return this.listForExecutorSince(s,a,l).length},levelForExecutor(s,a,l=Date.now()){const o=this.listForExecutor(s).filter(p=>p.type===a).slice().sort((p,m)=>p.createdAt.localeCompare(m.createdAt));let u=0,f=null;for(const p of o){const m=Date.parse(p.createdAt);if(Number.isFinite(m)){if(Number.isFinite(l)&&m>l)break;f!=null&&(u=sx(u,m-f)),u+=1,f=m}}return f!=null&&(u=sx(u,l-f)),u},getForAssignment(s,a){return this.listAll().find(l=>l.assignmentId===s&&l.type===a)??null},addNoStart12h(s){const a=this.getForAssignment(s.assignmentId,"no_start_12h");if(a)return a;const l=s.createdAt&&s.createdAt.trim()?s.createdAt:Vf(),o={id:ze("viol"),executorId:s.executorId,type:"no_start_12h",taskId:s.taskId,assignmentId:s.assignmentId,createdAt:l},u=ef();return u.push(o),tx(u),o},addNoSubmit24h(s){const a=this.getForAssignment(s.assignmentId,"no_submit_24h");if(a)return a;const l=s.createdAt&&s.createdAt.trim()?s.createdAt:Vf(),o={id:ze("viol"),executorId:s.executorId,type:"no_submit_24h",taskId:s.taskId,assignmentId:s.assignmentId,createdAt:l},u=ef();return u.push(o),tx(u),o},subscribe(s){const a=()=>s();window.addEventListener(Hf,a);const l=o=>{o.key===jm&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(Hf,a),window.removeEventListener("storage",l)}}},wm="ui-create-works.ratingAdjustments.v1",Pf="ui-create-works.ratingAdjustments.change";function aw(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function tf(){return aw(localStorage.getItem(wm))}function ax(s){localStorage.setItem(wm,JSON.stringify(s)),window.dispatchEvent(new Event(Pf))}function $f(){return new Date().toISOString()}function nw(s){if(!s||typeof s!="object")return null;const a=s,l=typeof a.id=="string"?a.id:ze("radj"),o=typeof a.executorId=="string"?a.executorId:"",u=typeof a.violationId=="string"?a.violationId:"",f=typeof a.createdAt=="string"?a.createdAt:$f(),p=typeof a.deltaPercent=="number"&&Number.isFinite(a.deltaPercent)?a.deltaPercent:0,m=a.reason==="no_submit_24h"?"no_submit_24h":a.reason==="no_start_12h"?"no_start_12h":null;return!o||!u||!Number.isFinite(p)||p===0||!m?null:{id:l,executorId:o,violationId:u,createdAt:f,deltaPercent:p,reason:m}}const Sc={listAll(){return tf().map(nw).filter(Boolean)},listForExecutor(s){return this.listAll().filter(a=>a.executorId===s).slice().sort((a,l)=>l.createdAt.localeCompare(a.createdAt))},getForViolation(s){return this.listAll().find(a=>a.violationId===s)??null},addNoStartPenalty5(s,a){const l=this.getForViolation(s);if(l)return l;const o={id:ze("radj"),executorId:a,deltaPercent:-5,reason:"no_start_12h",violationId:s,createdAt:$f()},u=tf();return u.push(o),ax(u),o},addNoSubmitPenalty5(s,a){const l=this.getForViolation(s);if(l)return l;const o={id:ze("radj"),executorId:a,deltaPercent:-5,reason:"no_submit_24h",violationId:s,createdAt:$f()},u=tf();return u.push(o),ax(u),o},totalDeltaPercentForExecutor(s){return this.listForExecutor(s).reduce((a,l)=>a+l.deltaPercent,0)},subscribe(s){const a=()=>s();window.addEventListener(Pf,a);const l=o=>{o.key===wm&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(Pf,a),window.removeEventListener("storage",l)}}};function nx(s,a){const l=Date.parse(s),o=Number.isFinite(l)?l:Date.now();return new Date(o+a).toISOString()}function iw(s){const a=Ai.addNoStart12h({executorId:s.executorId,taskId:s.taskId,assignmentId:s.assignmentId,createdAt:s.occurredAt}),l=Date.parse(a.createdAt),o=Ai.levelForExecutor(s.executorId,"no_start_12h",Number.isFinite(l)?l:Date.now());if(o<=1)return{violationId:a.id,sanction:{kind:"warning",n:1}};if(o===2)return Sc.addNoStartPenalty5(a.id,s.executorId),{violationId:a.id,sanction:{kind:"rating_penalty",n:2,deltaPercent:-5}};if(o===3){const u=nx(new Date().toISOString(),864e5);return wn.setRespondBlockedUntil(s.executorId,u),{violationId:a.id,sanction:{kind:"respond_block",n:3,until:u,durationHours:24}}}if(o===4){const u=nx(new Date().toISOString(),2592e5);return wn.setRespondBlockedUntil(s.executorId,u),{violationId:a.id,sanction:{kind:"respond_block",n:4,until:u,durationHours:72}}}return wn.ban(s.executorId),{violationId:a.id,sanction:{kind:"ban",n:o}}}function Ay(s,a=Date.now()){return Ai.levelForExecutor(s,"no_start_12h",a)}function ix(s,a){const l=Date.parse(s),o=Number.isFinite(l)?l:Date.now();return new Date(o+a).toISOString()}function lw(s){const a=Ai.addNoSubmit24h({executorId:s.executorId,taskId:s.taskId,assignmentId:s.assignmentId,createdAt:s.occurredAt}),l=Date.parse(a.createdAt),o=Ai.levelForExecutor(s.executorId,"no_submit_24h",Number.isFinite(l)?l:Date.now());if(o<=1)return{violationId:a.id,sanction:{kind:"warning",n:1}};if(o===2)return Sc.addNoSubmitPenalty5(a.id,s.executorId),{violationId:a.id,sanction:{kind:"rating_penalty",n:2,deltaPercent:-5}};if(o===3){const u=ix(new Date().toISOString(),864e5);return wn.setRespondBlockedUntil(s.executorId,u),{violationId:a.id,sanction:{kind:"respond_block",n:3,until:u,durationHours:24}}}if(o===4){const u=ix(new Date().toISOString(),2592e5);return wn.setRespondBlockedUntil(s.executorId,u),{violationId:a.id,sanction:{kind:"respond_block",n:4,until:u,durationHours:72}}}return wn.ban(s.executorId),{violationId:a.id,sanction:{kind:"ban",n:o}}}const Sm="ui-create-works.systemEvents.v1",Ff="ui-create-works.systemEvents.change";function rw(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function sf(){return rw(localStorage.getItem(Sm))}function lx(s){localStorage.setItem(Sm,JSON.stringify(s)),window.dispatchEvent(new Event(Ff))}function vc(){return new Date().toISOString()}function ow(s){return s==="force_majeure"?s:"force_majeure"}function rx(s){if(!s||typeof s!="object")return null;const a=s,l=typeof a.id=="string"?a.id:ze("se"),o=ow(a.type),u=typeof a.startAt=="string"?a.startAt:"";if(!u)return null;const f=typeof a.endAt=="string"&&a.endAt.trim()?a.endAt:void 0,p=Array.isArray(a.affectedTaskIds)?a.affectedTaskIds.filter(v=>typeof v=="string"&&v.trim().length>0):void 0,m=typeof a.createdAt=="string"?a.createdAt:vc();return{id:l,type:o,startAt:u,endAt:f,affectedTaskIds:p,createdAt:m}}const ml={listAll(){return sf().map(rx).filter(Boolean)},listActive(s=Date.now()){return this.listAll().filter(a=>{const l=Date.parse(a.startAt);if(!Number.isFinite(l)||s<l)return!1;if(!a.endAt)return!0;const o=Date.parse(a.endAt);return Number.isFinite(o)?s<o:!0})},activeForceMajeureForTask(s,a=Date.now()){const l=this.listActive(a).filter(o=>o.type==="force_majeure");for(const o of l){const u=o.affectedTaskIds;if(!u||u.length===0||u.includes(s))return o}return null},createForceMajeure(s){const a=s.startAt&&s.startAt.trim()?s.startAt:vc(),l={id:ze("se"),type:"force_majeure",startAt:a,affectedTaskIds:s.affectedTaskIds?.filter(u=>u&&u.trim())??void 0,createdAt:vc()},o=sf();return o.push(l),lx(o),l},end(s,a){const l=sf(),o=l.findIndex(p=>p?.id===s);if(o===-1)return null;const u=rx(l[o]);if(!u)return null;const f={...u,endAt:a&&a.trim()?a:vc()};return l[o]=f,lx(l),f},subscribe(s){const a=()=>s();window.addEventListener(Ff,a);const l=o=>{o.key===Sm&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(Ff,a),window.removeEventListener("storage",l)}}},Im="ui-create-works.submissions.v1",Wf="ui-create-works.submissions.change";function cw(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function uw(){return cw(localStorage.getItem(Im))}function dw(s){localStorage.setItem(Im,JSON.stringify(s)),window.dispatchEvent(new Event(Wf))}function Ty(){return new Date().toISOString()}function fw(s){return Array.isArray(s)?s.map(a=>{if(!a||typeof a!="object")return null;const l=a,o=l.kind,u=typeof l.url=="string"?l.url.trim():"";if(!u)return null;const f=typeof l.title=="string"&&l.title.trim()?l.title.trim():void 0,p=l.mediaType==="video"||l.mediaType==="image"||l.mediaType==="file"?l.mediaType:void 0;if(o==="external_url")return{kind:"external_url",url:u,title:f,mediaType:p};if(o==="upload"){const m=typeof l.workId=="string"&&l.workId.trim()?l.workId:void 0;return{kind:"upload",url:u,title:f,mediaType:p,workId:m}}return null}).filter(Boolean):[]}function mw(s){if(!s||typeof s!="object")return null;const a=s,l=typeof a.id=="string"?a.id:ze("sub"),o=typeof a.contractId=="string"?a.contractId:"";if(!o)return null;const u=typeof a.createdAt=="string"?a.createdAt:Ty(),f=typeof a.message=="string"&&a.message.trim()?a.message.trim():void 0,p=fw(a.files),m=a.status==="superseded"?"superseded":"submitted";return{id:l,contractId:o,createdAt:u,message:f,files:p,status:m}}const _c={listAll(){return uw().map(mw).filter(Boolean)},listForContract(s){return this.listAll().filter(a=>a.contractId===s).slice().sort((a,l)=>l.createdAt.localeCompare(a.createdAt))},latestForContract(s){return this.listForContract(s)[0]??null},create(s){const a=Ty(),o=this.listAll().map(f=>f.contractId===s.contractId?{...f,status:"superseded"}:f),u={id:ze("sub"),contractId:s.contractId,message:s.message?.trim()||void 0,files:Array.isArray(s.files)?s.files:[],status:"submitted",createdAt:a};return o.push(u),dw(o),u},subscribe(s){const a=()=>s();window.addEventListener(Wf,a);const l=o=>{o.key===Im&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(Wf,a),window.removeEventListener("storage",l)}}};function Ia(s){const a=Date.parse(s);return Number.isFinite(a)?a:NaN}const pw=1440*60*1e3,hw=1440*60*1e3,vw=3600*1e3,gw=[12,6,3,2,1],xw="user_dev_arbiter";function yw(s){const a=yt.getById(s);if(!a)return;const l=He.listForTask(s),o=l.some(N=>N.status==="disputed"),u=l.some(N=>N.status==="submitted"),f=l.some(N=>N.status==="active"||N.status==="revision_requested"),p=l.length>0&&l.every(N=>N.status==="approved"||N.status==="resolved"||N.status==="cancelled"),m=a.assignedExecutorIds.length,v=a.maxExecutors??1,y=!(m<v)&&p,b=y?"closed":o?"dispute":u?"review":f||m>0?"in_progress":"open";yt.update(s,N=>({...N,status:b,completedAt:y?new Date().toISOString():N.completedAt}))}function ox(s){return _c.listForContract(s).some(l=>l.status!=="submitted"?!1:!!(l.files&&l.files.length>0||l.message&&l.message.trim()))}function bw(s=Date.now()){const a=ml.listAll().filter(m=>m.type==="force_majeure"&&typeof m.endAt=="string"&&m.endAt.trim());if(a.length){const m=Ke.listAll();for(const v of a){const x=Ia(v.startAt),y=v.endAt?Ia(v.endAt):NaN;if(!Number.isFinite(x)||!Number.isFinite(y)||y<=x)continue;const b=y-x;for(const N of m)v.affectedTaskIds&&v.affectedTaskIds.length>0&&!v.affectedTaskIds.includes(N.taskId)||Ke.applyForceMajeureShift({taskId:N.taskId,executorId:N.executorId,eventId:v.id,durationMs:b})}}const l=yt.list(),o=He.listAll();for(const m of l)for(const v of m.assignedExecutorIds??[]){if(Ke.getForTaskExecutor(m.id,v))continue;const y=o.find(b=>b.taskId===m.id&&b.executorId===v)??null;Ke.createPendingStart({taskId:m.id,executorId:v,assignedAt:m.takenAt??y?.createdAt??m.createdAt})}for(const m of o)m.status==="submitted"?Ke.markSubmitted(m.taskId,m.executorId,m.updatedAt):m.status==="revision_requested"?Ke.resumeAfterRevisionRequest(m.taskId,m.executorId,m.updatedAt):m.status==="approved"||m.status==="resolved"?Ke.markAccepted(m.taskId,m.executorId,m.updatedAt):m.status==="disputed"&&Ke.openDispute(m.taskId,m.executorId);const u=Ke.listAll();for(const m of o){if(m.status!=="submitted"||ml.activeForceMajeureForTask(m.taskId,s))continue;const v=_c.latestForContract(m.id),x=Ia(v?v.createdAt:m.updatedAt??m.createdAt);if(!Number.isFinite(x)||s-x<pw)continue;const y=Ot.getForContract(m.id);if(y&&y.status!=="closed")continue;He.setStatus(m.id,"approved"),Ke.markAccepted(m.taskId,m.executorId);const b=Ys.claimFor(m.taskId,m.executorId);b&&fs.deposit(b.executorId,b.amount),Fe.addTaskApproved({recipientUserId:m.executorId,actorUserId:m.clientId,taskId:m.taskId}),yw(m.taskId)}for(const m of u){if(m.status==="pause_requested"&&m.pauseAutoAcceptAt){const v=Ia(m.pauseAutoAcceptAt);Number.isFinite(v)&&s>=v&&Ke.acceptPause(m.taskId,m.executorId,new Date(s).toISOString())}if(m.status==="paused"&&m.pausedUntil){const v=Ia(m.pausedUntil);Number.isFinite(v)&&s>=v&&Ke.resumeIfPauseEnded(m.taskId,m.executorId,s)}}for(const m of u){if(m.status!=="pending_start"||ml.activeForceMajeureForTask(m.taskId,s))continue;const v=Ia(m.startDeadlineAt);if(!Number.isFinite(v)||s<v)continue;const x=Ke.removedAuto(m.taskId,m.executorId);if(!x||x.status!=="removed_auto")continue;const{violationId:y,sanction:b}=iw({executorId:m.executorId,taskId:m.taskId,assignmentId:m.id,occurredAt:new Date(s).toISOString()});b.kind==="warning"?Fe.addExecutorViolationWarning({recipientUserId:m.executorId,taskId:m.taskId,violationId:y,violationType:"no_start_12h"}):b.kind==="rating_penalty"?Fe.addExecutorViolationRatingPenalty({recipientUserId:m.executorId,taskId:m.taskId,violationId:y,violationType:"no_start_12h",deltaPercent:b.deltaPercent}):b.kind==="respond_block"?Fe.addExecutorViolationRespondBlock({recipientUserId:m.executorId,taskId:m.taskId,violationId:y,violationType:"no_start_12h",until:b.until,durationHours:b.durationHours}):b.kind==="ban"&&Fe.addExecutorViolationBan({recipientUserId:m.executorId,taskId:m.taskId,violationId:y,violationType:"no_start_12h"});const j=yt.getById(m.taskId)?.createdByUserId??null;j&&Fe.addTaskExecutorNoStart({recipientUserId:j,executorUserId:m.executorId,taskId:m.taskId,violationId:y}),yt.removeExecutor(m.taskId,m.executorId);const C=He.getForTaskExecutor(m.taskId,m.executorId);C&&He.setStatus(C.id,"cancelled");const k=Ys.release(m.taskId,m.executorId);k>0&&j&&fs.deposit(j,k);const F=js.listForTask(m.taskId).find(q=>q.executorUserId===m.executorId)??null;F&&F.status!=="rejected"&&js.reject(F.id)}for(const m of Ke.listAll()){if(m.status!=="in_progress"||ml.activeForceMajeureForTask(m.taskId,s)||!m.executionDeadlineAt)continue;const v=Ia(m.executionDeadlineAt);if(!Number.isFinite(v)||s<v)continue;const x=Ke.markOverdue(m.taskId,m.executorId,new Date(s).toISOString());if(!x||x.status!=="overdue")continue;const{violationId:y,sanction:b}=lw({executorId:m.executorId,taskId:m.taskId,assignmentId:x.id,occurredAt:new Date(s).toISOString()});b.kind==="warning"?Fe.addExecutorViolationWarning({recipientUserId:m.executorId,taskId:m.taskId,violationId:y,violationType:"no_submit_24h"}):b.kind==="rating_penalty"?Fe.addExecutorViolationRatingPenalty({recipientUserId:m.executorId,taskId:m.taskId,violationId:y,violationType:"no_submit_24h",deltaPercent:b.deltaPercent}):b.kind==="respond_block"?Fe.addExecutorViolationRespondBlock({recipientUserId:m.executorId,taskId:m.taskId,violationId:y,violationType:"no_submit_24h",until:b.until,durationHours:b.durationHours}):b.kind==="ban"&&Fe.addExecutorViolationBan({recipientUserId:m.executorId,taskId:m.taskId,violationId:y,violationType:"no_submit_24h"});const j=yt.getById(m.taskId)?.createdByUserId??null;j&&Fe.addTaskExecutorOverdue({recipientUserId:j,executorUserId:m.executorId,taskId:m.taskId,violationId:y})}const f=Ke.listAll();for(const m of f){if(m.status!=="overdue"||ml.activeForceMajeureForTask(m.taskId,s)||!m.autoDisputeAt)continue;const v=Ia(m.autoDisputeAt);if(!Number.isFinite(v)||s<v)continue;const y=yt.getById(m.taskId)?.createdByUserId??null,b=He.getForTaskExecutor(m.taskId,m.executorId);if(!b||!y||!ox(b.id))continue;const N=Ot.open({contractId:b.id,openedByUserId:y,reason:{categoryId:"quality",reasonId:"miss_deadline"}});Fe.addDisputeOpened({recipientUserId:m.executorId,actorUserId:y,taskId:m.taskId,disputeId:N.id}),He.setStatus(b.id,"disputed"),Ke.openDispute(m.taskId,m.executorId)}const p=Ot.listAll().filter(m=>m.status==="open");for(const m of p){const v=Ia(m.createdAt);if(!Number.isFinite(v)||s-v<hw)continue;const x=He.getById(m.contractId);if(!x)continue;const y=ox(x.id),b=m.version??1,N=Ot.takeInWork({disputeId:m.id,arbiterId:"system",expectedVersion:b});if(N)try{if(!y)kc.decideAndExecute({disputeId:m.id,actorUserId:"system",expectedVersion:N.version??b+1,decisionKind:"refund_to_customer",comment:"auto: no activity after 24h",checklist:{requirementsChecked:!0,videoReviewed:!0,chatReviewed:!0},closeAfter:!0});else{const j=Ys.listForTask(x.taskId).find(k=>k.executorId===x.executorId)?.amount??0,C=Math.round(j/2*100)/100;kc.decideAndExecute({disputeId:m.id,actorUserId:"system",expectedVersion:N.version??b+1,decisionKind:"partial_refund",partial:{executorAmount:C,customerAmount:j-C},comment:"auto: activity exists, split 50/50 after 24h",checklist:{requirementsChecked:!0,videoReviewed:!0,chatReviewed:!0},closeAfter:!0})}}catch{continue}}for(const m of Ot.listAll()){if(m.status==="closed"||!m.slaDueAt)continue;const v=Ia(m.slaDueAt);if(!Number.isFinite(v))continue;const x=v-s;if(x<=0)continue;const y=He.getById(m.contractId);if(!y)continue;const b=m.assignedArbiterId??xw;for(const N of gw){const j=N*vw;x<=j&&Fe.addDisputeSlaThreshold({recipientUserId:b,actorUserId:"system",taskId:y.taskId,disputeId:m.id,hoursLeft:N})}}}function kw(){const s=Ut(),a=Qt();return h.useEffect(()=>{if(s.isAuthenticated&&s.user?.role==="pending"){a(K.chooseRole,{replace:!0});return}const l=()=>bw(Date.now());l();const o=window.setInterval(l,6e4);return()=>window.clearInterval(o)},[s.isAuthenticated,s.user?.role,a]),n.jsxs("div",{className:"appShell",children:[n.jsx(Oj,{}),n.jsxs("div",{className:"appShell__main",children:[n.jsx(Dj,{}),n.jsx("div",{className:"appShell__content",children:n.jsx(Zx,{})})]}),n.jsx(qj,{})]})}function _w(){const{locale:s,setLocale:a,t:l}=lt(),o=ts(),[u,f]=h.useState(()=>py()),p=o.pathname===K.login||o.pathname===K.register||o.pathname===K.forgotPassword||o.pathname===K.verifyEmail||o.pathname===K.verifyEmailSent;return n.jsxs("main",{className:"authShell",children:[n.jsxs("header",{className:"authShell__topbar",children:[n.jsx(xe,{className:"authShell__brand",to:K.home,children:"TaskFlow"}),n.jsxs("div",{className:"authShell__actions",children:[n.jsxs("div",{className:"authShell__lang",role:"group","aria-label":"Language",children:[n.jsx("button",{type:"button",className:s==="ru"?"authShell__langBtn authShell__langBtn--active":"authShell__langBtn",onClick:()=>a("ru"),children:"RU"}),n.jsx("button",{type:"button",className:s==="en"?"authShell__langBtn authShell__langBtn--active":"authShell__langBtn",onClick:()=>a("en"),children:"EN"})]}),n.jsx("button",{type:"button",className:"authShell__themeBtn","aria-label":s==="ru"?"":"Theme",title:u==="dark"?s==="ru"?" ":"Dark theme":s==="ru"?" ":"Light theme",onClick:()=>{const m=u==="dark"?"light":"dark";vy(m),f(m)},children:n.jsx("span",{"aria-hidden":"true",children:u==="dark"?"":""})}),n.jsx(xe,{className:"authShell__home",to:K.home,children:l("common.backHome")})]})]}),n.jsx("div",{className:"authShell__body",children:n.jsx("div",{className:"authShell__container","data-auth-route":p?"1":"0",children:n.jsx(Zx,{})})})]})}function Nw(s){return/[\u0400-\u04FF]/.test(s)}function jw(s){return Nw(s)?"ru":"en"}const ww="/api";async function Sw(s,a,l,o){const u=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({q:a,source:l,target:o,format:"text"})});if(!u.ok)throw new Error(`translate_failed_${u.status}`);const f=await u.json(),p=typeof f.translatedText=="string"?f.translatedText:null;if(!p)throw new Error("translate_empty");return p}const Iw=[`${ww}/translate`];async function Aw(s,a,l){const o=s.trim();if(!o)return"";if(a===l)return o;let u=null;for(const f of Iw)try{return await Sw(f,o,a,l)}catch(p){u=p}throw u??new Error("translate_failed")}async function Tw(s,a){const l=s.trim();if(!l)throw new Error("goal_title_empty");yf("goal_create_requested",{titleLen:l.length});try{const o=await rs.post("/goals",{title:l},{headers:{"x-user-id":a}});return yf("goal_created",{goalId:o.id}),o}catch(o){const u=o instanceof Si?o.requestId:null,f=o instanceof Error?o.message:String(o);throw Dr("API_GOAL_CREATE_FAILED",{requestId:u,message:f}),o}}function Ew(s){return s==="ru"?"en":"ru"}function Cw(s,a,l){return`ui-create-works.autotranslate.v1:${s}:${a}:${l}`}function Sr(s){return s.en.trim()!==""&&s.en===s.ru}async function ic(s,a,l,o){const u=jw(l.en),f=Ew(u),p=Cw(s,a,f);if(sessionStorage.getItem(p)==="1")return;sessionStorage.setItem(p,"1");const m=u==="ru"?l.ru:l.en;try{const v=await Aw(m,u,f);await Tw(v,o),yt.update(s,x=>{const y=x[a];return!y||!Sr(y)?x:{...x,[a]:u==="ru"?{ru:m,en:v}:{en:m,ru:v}}})}catch(v){console.error("[autoTranslateTask] translate/createGoal failed",v)}}async function Ey(s,a,l){Sr(a.title)&&await ic(s,"title",a.title,l),Sr(a.shortDescription)&&await ic(s,"shortDescription",a.shortDescription,l),a.requirements&&Sr(a.requirements)&&await ic(s,"requirements",a.requirements,l),a.description&&Sr(a.description)&&await ic(s,"description",a.description,l)}function Os(s,a){const l=Date.parse(s);return Number.isFinite(l)?Math.max(0,l-a):0}function Nn(s,a){const l=Math.floor(s/1e3),o=Math.floor(l/60)%60,u=Math.floor(l/3600)%24,f=Math.floor(l/86400),p=a==="ru"?"":"h",m=a==="ru"?"":"m",v=a==="ru"?"":"d";return f>0?`${f}${v} ${u}${p}`:u>0?`${u}${p} ${o}${m}`:`${o}${m}`}const af={position:"fixed",top:0,left:0,width:0,maxHeight:0,visibility:"hidden"};function Ea({value:s,onChange:a,options:l,label:o,disabled:u}){const[f,p]=h.useState(!1),m=h.useRef(null),v=h.useRef(null),x=h.useRef(null),[y,b]=h.useState(()=>af);h.useEffect(()=>{if(!f)return;const j=k=>{m.current&&!m.current.contains(k.target)&&p(!1)},C=k=>{k.key==="Escape"&&p(!1)};return document.addEventListener("mousedown",j),document.addEventListener("keydown",C),()=>{document.removeEventListener("mousedown",j),document.removeEventListener("keydown",C)}},[f]),h.useLayoutEffect(()=>{if(!f)return;const j=()=>{const C=v.current?.getBoundingClientRect();if(!C)return;const k=Math.round(C.bottom+8),D=l.reduce((E,A)=>Math.max(E,A.label.length),0),F=Math.round(D*7.5+64),q=Math.max(Math.round(C.width),Math.min(360,Math.max(180,F))),B=8,ae=Math.min(Math.max(C.left,B),Math.max(B,window.innerWidth-q-B)),W=Math.round(ae),X=Math.max(80,Math.min(320,Math.round(window.innerHeight-C.bottom-16)));b({position:"fixed",top:k,left:W,width:q,maxHeight:X,visibility:"visible"})};return b(af),j(),window.addEventListener("resize",j),window.addEventListener("scroll",j,{passive:!0,capture:!0}),()=>{window.removeEventListener("resize",j),window.removeEventListener("scroll",j,!0)}},[f]),h.useEffect(()=>{f||b(af)},[f]),h.useEffect(()=>{u&&p(!1)},[u]),h.useEffect(()=>{if(!f)return;const j=x.current;if(!j)return;const C=k=>{if(!(j.scrollHeight>j.clientHeight))return;const F=k.deltaY,q=j.scrollTop<=0,B=j.scrollTop+j.clientHeight>=j.scrollHeight-1,ae=F<0,W=F>0;(ae&&!q||W&&!B)&&k.stopPropagation()};return j.addEventListener("wheel",C,{passive:!1}),()=>j.removeEventListener("wheel",C)},[f]);const N=l.find(j=>j.value===s);return n.jsxs("div",{className:"customSelectContainer",ref:m,children:[n.jsx("label",{className:"customSelectLabel",children:o}),n.jsxs("button",{type:"button",className:`customSelectButton${f?" customSelectButton--open":""}`,onClick:()=>{u||p(j=>!j)},"aria-haspopup":"listbox","aria-expanded":f,ref:v,disabled:u,children:[n.jsx("span",{className:"customSelectValue",children:N?.label||s}),n.jsx("span",{className:"customSelectArrow","aria-hidden":"true",children:""})]}),f?n.jsx("ul",{className:"customSelectDropdown",role:"listbox",ref:x,style:y,children:l.map(j=>n.jsx("li",{role:"option","aria-selected":j.value===s,children:n.jsxs("button",{type:"button",className:`customSelectOption${j.value===s?" customSelectOption--selected":""}`,onClick:()=>{a(j.value),p(!1)},children:[n.jsx("span",{className:"customSelectOptionLabel",children:j.label}),j.value===s?n.jsx("span",{className:"customSelectCheck","aria-hidden":"true",children:""}):null]})},j.value))}):null]})}const Cy=[{value:"TikTok",label:"TikTok"},{value:"Instagram Reels",label:"Instagram Reels"},{value:"YouTube Shorts",label:"YouTube Shorts"},{value:"VK ",label:"VK "},{value:"Telegram",label:"Telegram"},{value:"MAX",label:"MAX"},{value:" ",label:" "},{value:"Wibes",label:"Wibes"},{value:"Snapchat Spotlight",label:"Snapchat Spotlight"},{value:"Facebook Reels",label:"Facebook Reels"}],Dy=[{value:"9:16",label:"9:16 ()"},{value:"1:1",label:"1:1 ()"},{value:"16:9",label:"16:9 ()"},{value:"Talking head",label:"Talking head"},{value:"UGC",label:"UGC"},{value:"Motion graphics",label:"Motion graphics"},{value:"Screen recording",label:"Screen recording"},{value:"Voiceover",label:"Voiceover"},{value:"Subtitles",label:" "},{value:"Tutorial",label:" / how-to"},{value:"Review",label:" / review"}];function ws(s){const a=s.tone?`statusPill--${s.tone}`:"statusPill--neutral";return n.jsx("span",{className:`statusPill ${a}${s.className?` ${s.className}`:""}`,children:s.label})}function gl(s){const{locale:a}=lt(),l=Number.isFinite(s.page)&&s.page>0?Math.floor(s.page):1,o=Number.isFinite(s.pageCount)&&s.pageCount>0?Math.floor(s.pageCount):1,u=l>1,f=l<o,p=h.useMemo(()=>a==="ru"?`. ${l}  ${o}`:`Page ${l} of ${o}`,[a,l,o]);return o<=1?null:n.jsxs("div",{className:"pager",role:"navigation","aria-label":a==="ru"?"":"Pagination",children:[n.jsx("button",{type:"button",className:"pager__btn",onClick:()=>s.onChange(l-1),disabled:!u,children:a==="ru"?" ":" Prev"}),n.jsx("div",{className:"pager__text","aria-live":"polite",children:p}),n.jsx("button",{type:"button",className:"pager__btn",onClick:()=>s.onChange(l+1),disabled:!f,children:a==="ru"?" ":"Next "})]})}function cx(s,a){return s?`${s} ${a??""}`.trim():null}function Dw(s,a){return s==="open"?a("task.status.open"):s==="in_progress"?a("task.status.inProgress"):s==="review"?a("task.status.review"):s==="dispute"?a("task.status.dispute"):s==="closed"?a("task.status.closed"):s.replace("_"," ")}function Ry(s){const a=(s??"").trim();if(!a)return[];const l=a.split(",").map(p=>p.trim()).filter(Boolean),o=l.length>1?l:a.includes(" / ")?a.split(" / ").map(p=>p.trim()).filter(Boolean):a.includes("")?a.split("").map(p=>p.trim()).filter(Boolean):l,u=[],f=new Set;for(const p of o){const m=p.toLowerCase();f.has(m)||(f.add(m),u.push(p))}return u}function lc(s){const a=Ry(s);return a.length?a.join(", "):null}function rc(s,a){const l=a.trim().toLowerCase();return l?Ry(s).some(o=>o.toLowerCase()===l):!1}function Rw(){const{t:s,locale:a}=lt(),l=Ut(),o=Qt(),u=l.user?.role==="customer",f=l.user?.role==="executor",p=vs(),[m,v]=h.useState(()=>Date.now()),[x,y]=h.useState(""),b=h.useMemo(()=>x.trim().toLowerCase().split(/\s+/).filter(Boolean),[x]),[N,j]=h.useState(null),[C,k]=h.useState(null),[D,F]=h.useState("created"),[q,B]=h.useState(1),[ae,W]=h.useState(1),X=20,[E,A]=h.useState(!1),O=h.useRef(null),le=h.useRef(null),se=h.useRef(null),be=h.useRef(null),Se=h.useRef(null),Ce=h.useRef(null),ge=Nl(),L=Ti(),U=h.useMemo(()=>l.user?.role!=="executor"||!l.user?.id?new Set:new Set(ge.filter(T=>T.executorUserId===l.user?.id&&T.status==="pending").map(T=>T.taskId)),[ge,l.user?.id,l.user?.role]),ce=h.useMemo(()=>l.user?.role!=="executor"||!l.user?.id?new Set:new Set(L.filter(T=>T.executorId===l.user.id&&T.status==="removed_auto").map(T=>T.taskId)),[L,l.user?.id,l.user?.role]),Q=h.useMemo(()=>{if(l.user?.role!=="executor"||!l.user?.id)return[];const T=l.user.id,H=new Set(["pending_start","in_progress","pause_requested","paused","submitted","overdue"]);return L.filter(ke=>ke.executorId===T&&H.has(ke.status))},[L,l.user?.id,l.user?.role]),de=h.useMemo(()=>new Set(Q.map(T=>T.taskId)),[Q]),w=h.useMemo(()=>{if(!Q.length)return[];const T=new Map(p.map($=>[$.id,$])),H=Q.map($=>{const De=T.get($.taskId)??null;return De?{task:De,assignment:$}:null}).filter(Boolean),ke=$=>{if(b.length===0)return!0;const De=[$.title.en,$.title.ru,$.shortDescription.en,$.shortDescription.ru,$.requirements?.en??"",$.requirements?.ru??"",$.description.en,$.description.ru,$.category??"",$.location??""].join(" ").toLowerCase();return b.every(Ye=>De.includes(Ye))};return H.filter(({task:$})=>ke($)).filter(({task:$})=>N?rc($.category,N):!0).filter(({task:$})=>C?rc($.location,C):!0).slice().sort(($,De)=>{const Ye=st=>st==="pending_start"?0:st==="in_progress"?1:st==="pause_requested"?2:st==="paused"?3:st==="submitted"?4:st==="overdue"?5:9,Ge=Ye($.assignment.status),fe=Ye(De.assignment.status);if(Ge!==fe)return Ge-fe;const Re=st=>st.status==="pending_start"?Os(st.startDeadlineAt,m):st.executionDeadlineAt?Os(st.executionDeadlineAt,m):Number.POSITIVE_INFINITY;return Re($.assignment)-Re(De.assignment)})},[p,Q,b,N,C,m]),V=h.useMemo(()=>!f||!l.user?.id?!1:wn.get(l.user.id).accountStatus==="banned",[l.user?.id,f]);h.useEffect(()=>{const T=window.setInterval(()=>v(Date.now()),3e4);return()=>window.clearInterval(T)},[]);const G=Cy,ie=Dy,ee=h.useMemo(()=>[{value:"created",label:s("tasks.created")},{value:"budget_asc",label:s("tasks.sort.cheapest")},{value:"budget_desc",label:s("tasks.sort.expensive")}],[s]);if(u)return n.jsx("main",{className:"tasksCustomerLanding",children:n.jsxs("div",{className:"tasksCustomerLanding__card",children:[n.jsx("h1",{className:"tasksCustomerLanding__title",children:s("tasks.customerLanding.title")}),n.jsx("p",{className:"tasksCustomerLanding__subtitle",children:s("tasks.customerLanding.subtitle")}),n.jsxs("div",{className:"tasksCustomerLanding__actions",children:[n.jsxs(xe,{className:"tasksCreateBtn",to:K.taskCreate,children:[s("tasks.customerLanding.create")," ",n.jsx("span",{"aria-hidden":"true",children:""})]}),n.jsx(xe,{className:"tasksCustomerLanding__secondary",to:K.customerTasks,children:s("tasks.customerLanding.manage")})]})]})});if(V)return n.jsx("main",{children:n.jsx("div",{className:"tasksHeader",children:n.jsxs("div",{children:[n.jsx("h1",{className:"tasksTitle",children:s("tasks.banned.title")}),n.jsx("p",{className:"tasksSubtitle",children:s("tasks.banned.text")})]})})});const M=h.useMemo(()=>p.filter(H=>{if(H.executorMode==="ai")return!1;const ke=H.assignedExecutorIds?.length??0,we=H.maxExecutors??1,$=ke<we;return(H.status==="open"||H.status==="in_progress"||(H.status==="review"||H.status==="dispute")&&$)&&$}).filter(H=>!U.has(H.id)).filter(H=>!ce.has(H.id)).filter(H=>!de.has(H.id)).filter(H=>!(b.length&&!b.every(ke=>[H.title.en,H.title.ru,H.shortDescription.en,H.shortDescription.ru,H.requirements?.en??"",H.requirements?.ru??"",H.description.en,H.description.ru,H.category??"",H.location??""].join(" ").toLowerCase().includes(ke))||N&&!rc(H.category,N)||C&&!rc(H.location,C))).slice().sort((H,ke)=>{const we=$=>{const De=typeof $.budgetAmount=="number"?$.budgetAmount:null;return De===null||!Number.isFinite(De)?null:De};if(D==="created"){if(H.createdAt!==ke.createdAt)return ke.createdAt.localeCompare(H.createdAt)}else if(D==="budget_asc"){const $=we(H),De=we(ke);if($===null&&De!==null)return 1;if($!==null&&De===null)return-1;if($!==null&&De!==null&&$!==De)return $-De}else if(D==="budget_desc"){const $=we(H),De=we(ke);if($===null&&De!==null)return 1;if($!==null&&De===null)return-1;if($!==null&&De!==null&&$!==De)return De-$}return ke.createdAt.localeCompare(H.createdAt)}),[p,m,b,N,C,D,U,ce,de]),S=h.useMemo(()=>Math.max(1,Math.ceil(w.length/X)),[w.length]),ue=h.useMemo(()=>{const T=(q-1)*X;return w.slice(T,T+X)},[w,q]),ye=h.useMemo(()=>Math.max(1,Math.ceil(M.length/X)),[M.length]),Ne=h.useMemo(()=>{const T=(ae-1)*X;return M.slice(T,T+X)},[M,ae]);h.useEffect(()=>{B(1),W(1)},[x,N,C,D]),h.useEffect(()=>B(T=>Math.min(Math.max(1,T),S)),[S]),h.useEffect(()=>W(T=>Math.min(Math.max(1,T),ye)),[ye]),h.useEffect(()=>{if(Se.current===null){Se.current=q;return}Se.current!==q&&(Se.current=q,window.requestAnimationFrame(()=>{se.current?.scrollIntoView({behavior:"smooth",block:"start"})}))},[q]),h.useEffect(()=>{if(Ce.current===null){Ce.current=ae;return}Ce.current!==ae&&(Ce.current=ae,window.requestAnimationFrame(()=>{be.current?.scrollIntoView({behavior:"smooth",block:"start"})}))},[ae]),h.useEffect(()=>{if(!E)return;const T=H=>{const ke=O.current,we=le.current,$=H.target;ke&&$ instanceof Node&&!ke.contains($)&&!(we&&we.contains($))&&A(!1)};return window.addEventListener("pointerdown",T),()=>window.removeEventListener("pointerdown",T)},[E]),h.useEffect(()=>{const T=by();if(T.length)for(const H of T){const ke=yt.getById(H);ke?.createdByUserId&&(js.deleteForTask(H),Fe.addTaskUnclaimed({recipientUserId:ke.createdByUserId,actorUserId:ke.createdByUserId,taskId:H}))}},[ge]),h.useEffect(()=>{const T=M.slice(0,3);(async()=>{const H=l.user?.id??"demo-user";for(const ke of T)await Ey(ke.id,{title:ke.title,shortDescription:ke.shortDescription},H)})()},[M,a,l.user?.id]);const Ee=T=>{if(b.length===0)return{__html:T};const H=b.map(we=>we.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")).filter(Boolean);if(!H.length)return{__html:T};const ke=new RegExp(`(${H.join("|")})`,"gi");return{__html:T.replace(ke,"<mark>$1</mark>")}},Be=T=>T==="pending_start"?{tone:"pending",label:s("executor.status.pendingStart")}:T==="pause_requested"?{tone:"paused",label:s("executor.status.pauseRequested")}:T==="paused"?{tone:"paused",label:s("executor.status.paused")}:T==="submitted"?{tone:"review",label:s("task.status.review")}:T==="overdue"?{tone:"overdue",label:s("executor.status.overdue")}:{tone:"in_progress",label:s("task.status.inProgress")};return n.jsxs("main",{children:[n.jsxs("div",{className:"tasksHeader",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"tasksTitle",children:s("tasks.title")}),n.jsx("p",{className:"tasksSubtitle",children:s("tasks.subtitle")})]}),l.user?.role==="customer"?n.jsxs(xe,{className:"tasksCreateBtn",to:K.taskCreate,children:[s("nav.postTask")," ",n.jsx("span",{"aria-hidden":"true",children:""})]}):null]}),n.jsx("section",{className:"tasksControls",children:n.jsxs("div",{className:"tasksSearchWrap",children:[n.jsxs("div",{className:"tasksSearchRow",children:[n.jsx("input",{value:x,onChange:T=>y(T.target.value),placeholder:s("tasks.search.placeholder"),className:"tasksSearch"}),n.jsxs("button",{type:"button",className:`tasksFiltersButton${E?" tasksFiltersButton--open":""}`,ref:le,onClick:()=>A(T=>!T),"aria-label":"Open filters",children:[n.jsx("span",{className:"tasksFiltersButton__label",children:s("customerTasks.filterTasks")}),n.jsx("span",{className:"tasksFiltersButton__chevron","aria-hidden":"true",children:""})]})]}),E?n.jsx("div",{className:"tasksInlineFilters",ref:O,children:n.jsxs("div",{className:"tasksFilters",children:[n.jsxs("div",{className:"tasksFilterGroup",children:[n.jsx("span",{className:"tasksFilterLabel",children:s("task.create.category")}),n.jsxs("div",{className:"tasksFilterChips",children:[n.jsx("button",{type:"button",className:`tasksFilterChip${N===null?" tasksFilterChip--active":""}`,onClick:()=>{j(null)},children:s("tasks.filters.anyCategory")}),G.map(T=>n.jsx("button",{type:"button",className:`tasksFilterChip${N===T.value?" tasksFilterChip--active":""}`,onClick:()=>{j(T.value)},children:T.label},T.value))]})]}),n.jsxs("div",{className:"tasksFilterGroup",children:[n.jsx("span",{className:"tasksFilterLabel",children:s("task.create.location")}),n.jsxs("div",{className:"tasksFilterChips",children:[n.jsx("button",{type:"button",className:`tasksFilterChip${C===null?" tasksFilterChip--active":""}`,onClick:()=>{k(null)},children:s("tasks.filters.anyFormat")}),ie.map(T=>n.jsx("button",{type:"button",className:`tasksFilterChip${C===T.value?" tasksFilterChip--active":""}`,onClick:()=>{k(T.value)},children:T.label},T.value))]})]}),n.jsx("div",{className:"tasksSort",children:n.jsx(Ea,{label:s("tasks.sortLabel"),value:D,options:ee,onChange:T=>F(T)})})]})}):null]})}),w.length>0?n.jsxs("section",{className:"tasksMyActive",children:[n.jsxs("h2",{className:"tasksMyActive__title",children:[s("tasks.myActive.title")," ",n.jsxs("span",{className:"tasksSectionCount",children:["(",w.length,")"]})]}),n.jsx("div",{className:"taskGrid",ref:se,children:ue.map(({task:T,assignment:H})=>{const ke=Be(H.status);return n.jsxs("article",{className:"taskCard taskCard--clickable",role:"link",tabIndex:0,onClick:()=>o(Oe(T.id)),onKeyDown:we=>{(we.key==="Enter"||we.key===" ")&&(we.preventDefault(),o(Oe(T.id)))},children:[n.jsx("div",{className:"taskCard__accent"}),n.jsxs("div",{className:"taskCard__content",children:[n.jsxs("div",{className:"taskCard__left",children:[n.jsx("div",{className:"taskCard__header",children:n.jsx("h2",{className:"taskCard__title",children:n.jsx(xe,{className:"taskLink",to:Oe(T.id),children:ft(T.title,a)})})}),n.jsx("p",{className:"taskCard__desc",dangerouslySetInnerHTML:Ee(ft(T.shortDescription,a))}),n.jsxs("div",{className:"taskCard__badges",children:[n.jsx(ws,{tone:ke.tone,label:ke.label}),T.dueDate?n.jsxs("span",{className:"chip",children:[s("tasks.due"),": ",T.dueDate]}):null]})]}),n.jsxs("div",{className:"taskCard__right",children:[(()=>{const we=cx(T.budgetAmount,T.budgetCurrency),$=Qa(T.createdAt,a,m),De=lc(T.category),Ye=lc(T.location),Ge=!De||!De.includes(","),fe=!Ye||!Ye.includes(","),Re=!!we&&Ge&&fe;return n.jsxs("div",{className:`taskCard__topRow${Re?" taskCard__topRow--compactPayout":""}`,children:[n.jsxs("div",{className:"taskCard__metaInline",children:[n.jsxs("span",{className:"metaChip metaChip--published",title:`${s("tasks.published")}: ${$}`,"aria-label":`${s("tasks.published")}: ${$}`,children:[n.jsx("span",{className:"metaChip__icon","aria-hidden":"true",children:""}),n.jsx("span",{className:"metaChip__value",children:$})]}),n.jsxs("span",{className:"taskCard__metaRest","aria-hidden":!1,children:[De?n.jsxs("span",{className:"metaChip metaChip--truncate",title:`${s("task.create.category")}: ${De}`,children:[n.jsx("span",{className:"metaChip__icon","aria-hidden":"true",children:""}),n.jsx("span",{className:"metaChip__value",children:De})]}):null,Ye?n.jsxs("span",{className:"metaChip metaChip--truncate",title:`${s("task.create.location")}: ${Ye}`,children:[n.jsx("span",{className:"metaChip__icon","aria-hidden":"true",children:""}),n.jsx("span",{className:"metaChip__value",children:Ye})]}):null]})]}),we?n.jsx("div",{className:"taskCard__payout","aria-label":`${s("tasks.payout")}: ${we}`,children:n.jsxs("span",{className:"payoutPill",children:[n.jsx("span",{className:"payoutPill__label",children:s("tasks.payout")}),n.jsx("span",{className:"payoutPill__amount",children:we})]})}):null]})})(),n.jsx("div",{className:"taskCard__footer",children:n.jsxs(xe,{className:"taskCard__actionBtn",to:Oe(T.id),onClick:we=>we.stopPropagation(),children:[n.jsx("span",{className:"taskCard__actionText",children:s("tasks.viewDetails")}),n.jsx("span",{className:"taskCard__actionArrow","aria-hidden":"true",children:""})]})})]})]})]},T.id)})}),n.jsx(gl,{page:q,pageCount:S,onChange:B})]}):null,n.jsxs("section",{className:"tasksMarket",children:[n.jsx("h2",{className:"tasksMarket__title",children:s("tasks.market.title")}),M.length===0?n.jsx("div",{className:"emptyState",children:b.length?s("tasks.search.empty"):n.jsxs(n.Fragment,{children:[s("tasks.empty")," ",l.user?.role==="customer"?n.jsxs(n.Fragment,{children:[n.jsx(xe,{to:K.taskCreate,children:s("tasks.postFirst")}),"."]}):null]})}):n.jsx("div",{className:"taskGrid",ref:be,children:Ne.map(T=>n.jsxs("article",{className:"taskCard taskCard--clickable",role:"link",tabIndex:0,onClick:()=>o(Oe(T.id)),onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&(H.preventDefault(),o(Oe(T.id)))},children:[n.jsx("div",{className:"taskCard__accent"}),n.jsxs("div",{className:"taskCard__content",children:[n.jsxs("div",{className:"taskCard__left",children:[n.jsx("div",{className:"taskCard__header",children:n.jsx("h2",{className:"taskCard__title",children:n.jsx(xe,{className:"taskLink",to:Oe(T.id),children:ft(T.title,a)})})}),n.jsx("p",{className:"taskCard__desc",dangerouslySetInnerHTML:Ee(ft(T.shortDescription,a))}),n.jsxs("div",{className:"taskCard__badges",children:[n.jsx(ws,{tone:T.status,label:Dw(T.status,s)}),T.dueDate?n.jsxs("span",{className:"chip",children:[s("tasks.due"),": ",T.dueDate]}):null,n.jsxs("span",{className:"chip",children:[s("task.meta.assigned"),": ",T.assignedExecutorIds.length,"/",T.maxExecutors??1]})]})]}),n.jsxs("div",{className:"taskCard__right",children:[(()=>{const H=cx(T.budgetAmount,T.budgetCurrency),ke=Qa(T.createdAt,a,m),we=lc(T.category),$=lc(T.location),De=!we||!we.includes(","),Ye=!$||!$.includes(","),Ge=!!H&&De&&Ye;return n.jsxs("div",{className:`taskCard__topRow${Ge?" taskCard__topRow--compactPayout":""}`,children:[n.jsxs("div",{className:"taskCard__metaInline",children:[n.jsxs("span",{className:"metaChip metaChip--published",title:`${s("tasks.published")}: ${ke}`,"aria-label":`${s("tasks.published")}: ${ke}`,children:[n.jsx("span",{className:"metaChip__icon","aria-hidden":"true",children:""}),n.jsx("span",{className:"metaChip__value",children:ke})]}),n.jsxs("span",{className:"taskCard__metaRest","aria-hidden":!1,children:[we?n.jsxs("span",{className:"metaChip metaChip--truncate",title:`${s("task.create.category")}: ${we}`,children:[n.jsx("span",{className:"metaChip__icon","aria-hidden":"true",children:""}),n.jsx("span",{className:"metaChip__value",children:we})]}):null,$?n.jsxs("span",{className:"metaChip metaChip--truncate",title:`${s("task.create.location")}: ${$}`,children:[n.jsx("span",{className:"metaChip__icon","aria-hidden":"true",children:""}),n.jsx("span",{className:"metaChip__value",children:$})]}):null]})]}),H?n.jsx("div",{className:"taskCard__payout","aria-label":`${s("tasks.payout")}: ${H}`,children:n.jsxs("span",{className:"payoutPill",children:[n.jsx("span",{className:"payoutPill__label",children:s("tasks.payout")}),n.jsx("span",{className:"payoutPill__amount",children:H})]})}):null]})})(),n.jsx("div",{className:"taskCard__footer",children:n.jsxs(xe,{className:"taskCard__actionBtn",to:Oe(T.id),onClick:H=>H.stopPropagation(),children:[n.jsx("span",{className:"taskCard__actionText",children:s("tasks.viewDetails")}),n.jsx("span",{className:"taskCard__actionArrow","aria-hidden":"true",children:""})]})})]})]})]},T.id))}),n.jsx(gl,{page:ae,pageCount:ye,onChange:W})]})]})}function jr(s){return s.trim().replace(/\s+/g," ")}function ux({label:s,ariaLabel:a,placeholder:l,value:o,options:u,allowCustom:f,customPlaceholder:p,onChange:m}){const[v,x]=h.useState(!1),[y,b]=h.useState(""),[N,j]=h.useState(""),C=h.useRef(null),k=h.useRef(null),[D,F]=h.useState(void 0),q=h.useMemo(()=>new Set(o.map(jr).filter(Boolean)),[o]),B=h.useMemo(()=>{const A=new Map;for(const O of u){const le=jr(O.value);le&&(A.has(le)||A.set(le,{value:le,label:O.label}))}return Array.from(A.values())},[u]),ae=h.useMemo(()=>{const A=new Map;for(const se of B)A.set(se.value,se);for(const se of q)A.has(se)||A.set(se,{value:se,label:se});const O=Array.from(A.values());if(!y.trim())return O;const le=y.trim().toLowerCase();return O.filter(se=>se.label.toLowerCase().includes(le)||se.value.toLowerCase().includes(le))},[B,q,y]);h.useEffect(()=>{if(!v)return;const A=le=>{const se=C.current;se&&le.target instanceof Node&&!se.contains(le.target)&&x(!1)},O=le=>{le.key==="Escape"&&x(!1)};return window.addEventListener("pointerdown",A),window.addEventListener("keydown",O),()=>{window.removeEventListener("pointerdown",A),window.removeEventListener("keydown",O)}},[v]),h.useLayoutEffect(()=>{if(!v)return;const A=()=>{const O=k.current?.getBoundingClientRect();if(!O)return;const le=Math.round(O.bottom+8),se=Math.round(O.left),be=Math.round(O.width),Se=Math.max(80,Math.min(320,Math.round(window.innerHeight-O.bottom-16)));F({position:"fixed",top:le,left:se,width:be,maxHeight:Se,visibility:"visible"})};return F({position:"fixed",top:0,left:0,width:0,maxHeight:0,visibility:"hidden"}),A(),window.addEventListener("resize",A),window.addEventListener("scroll",A,{passive:!0,capture:!0}),()=>{window.removeEventListener("resize",A),window.removeEventListener("scroll",A,{capture:!0})}},[v]);const W=h.useMemo(()=>{const A=new Map(B.map(O=>[O.value,O.label]));return o.map(jr).filter(Boolean).map(O=>A.get(O)??O)},[o,B]),X=A=>{const O=jr(A);if(!O)return;const le=new Set(q);le.has(O)?le.delete(O):le.add(O),m(Array.from(le))},E=()=>{const A=jr(N);if(!A)return;const O=new Set(q);O.add(A),m(Array.from(O)),j(""),b("")};return n.jsxs("div",{className:"multiSelect",ref:C,children:[n.jsx("div",{className:"multiSelect__label",children:s}),n.jsxs("button",{type:"button",className:`multiSelect__button${v?" multiSelect__button--open":""}`,onMouseDown:A=>{A.preventDefault()},ref:k,onClick:()=>{x(A=>!A)},"aria-haspopup":"listbox","aria-expanded":v,children:[n.jsx("span",{className:`multiSelect__value${W.length?"":" multiSelect__value--placeholder"}`,children:W.length?W.join(", "):l}),n.jsx("span",{className:"multiSelect__chevron","aria-hidden":"true",children:""})]}),v?n.jsxs("div",{className:"multiSelect__panel",role:"listbox","aria-label":typeof a=="string"?a:typeof s=="string"?s:"Multi select",style:D,children:[n.jsx("input",{className:"multiSelect__search",value:y,onChange:A=>b(A.target.value),placeholder:"",autoComplete:"off"}),n.jsx("div",{className:"multiSelect__options",children:ae.map(A=>{const O=q.has(A.value);return n.jsxs("button",{type:"button",className:`multiSelect__option${O?" multiSelect__option--checked":""}`,onClick:()=>X(A.value),children:[n.jsx("span",{className:"multiSelect__check","aria-hidden":"true",children:O?"":""}),n.jsx("span",{className:"multiSelect__optionLabel",children:A.label})]},A.value)})}),f?n.jsxs("div",{className:"multiSelect__custom",children:[n.jsx("input",{className:"multiSelect__customInput",value:N,onChange:A=>j(A.target.value),placeholder:p??" ",onKeyDown:A=>{A.key==="Enter"&&(A.preventDefault(),E())}}),n.jsx("button",{type:"button",className:"multiSelect__add",onClick:E,disabled:!N.trim(),children:""})]}):null]}):null]})}function Mw(s){const a=(s??"").trim();if(!a)return null;const l=a.indexOf(":");return l===-1?null:a.slice(l+1).trim()||null}function Uw(s){const a=s.trim();return a?a[0].toLocaleUpperCase()+a.slice(1):""}function ul(s){s.preventDefault(),s.stopPropagation()}function dx(s){return s.key==="Enter"||s.key===" "}function Ws({open:s,onToggle:a,onClose:l,content:o,ariaLabel:u,title:f,triggerLabel:p,footer:m}){const v=f?.trim()||Mw(u)||null,x=Uw(v??u??"");return h.useEffect(()=>{if(!s)return;const y=b=>{b.key==="Escape"&&l()};return window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}},[s,l]),n.jsxs("span",{className:`helpTip${p?" helpTip--withLabel":""}`,children:[p?n.jsx("span",{className:"helpTip__labelBtn",role:"button",tabIndex:0,onPointerDown:ul,onClick:y=>{ul(y),a()},onKeyDown:y=>{dx(y)&&(ul(y),a())},children:p}):null,n.jsx("span",{className:`helpTip__btn${s?" helpTip__btn--active":""}`,"aria-label":u??"Help","aria-haspopup":"dialog","aria-expanded":s,role:"button",tabIndex:0,onPointerDown:ul,onClick:y=>{ul(y),a()},onKeyDown:y=>{dx(y)&&(ul(y),a())},children:"?"}),s?zN.createPortal(n.jsx("div",{className:"helpTipOverlay",role:"dialog","aria-modal":"true","aria-label":u??"Help",onPointerDown:()=>l(),children:n.jsxs("div",{className:"helpTipModal",onPointerDown:y=>y.stopPropagation(),children:[n.jsxs("div",{className:"helpTipModal__header",children:[n.jsx("div",{className:"helpTipModal__title",children:x}),n.jsx("button",{type:"button",className:"helpTipModal__close","aria-label":"",onClick:()=>l(),children:""})]}),n.jsx("div",{className:"helpTipModal__content",children:o}),m?n.jsx("div",{className:"helpTipModal__footer",children:m}):null]})}),document.body):null]})}const Bw="ui-create-works.files.v1",ti="blobs",Lw=1;function Am(){return new Promise((s,a)=>{const l=indexedDB.open(Bw,Lw);l.onupgradeneeded=()=>{const o=l.result;o.objectStoreNames.contains(ti)||o.createObjectStore(ti,{keyPath:"id"})},l.onsuccess=()=>s(l.result),l.onerror=()=>a(l.error??new Error("Failed to open IndexedDB"))})}function Tm(s){return new Promise((a,l)=>{s.oncomplete=()=>a(),s.onerror=()=>l(s.error??new Error("IndexedDB transaction failed")),s.onabort=()=>l(s.error??new Error("IndexedDB transaction aborted"))})}async function My(s,a){const l=await Am(),o=l.transaction(ti,"readwrite"),u=o.objectStore(ti),f={id:s,blob:a,createdAt:new Date().toISOString()};u.put(f),await Tm(o),l.close()}async function Er(s){const a=await Am(),l=a.transaction(ti,"readonly"),u=l.objectStore(ti).get(s),f=await new Promise((p,m)=>{u.onsuccess=()=>p(u.result),u.onerror=()=>m(u.error??new Error("Failed to read blob"))});return await Tm(l),a.close(),f?.blob??null}async function fx(s){const a=await Am(),l=a.transaction(ti,"readwrite");l.objectStore(ti).delete(s),await Tm(l),a.close()}const Yf=60,Gf=1e3,Kf=500,Ow="9999-12-31T23:59:59.999Z",nf=12,va=3,ji=3;function Xf(s){return s==="RUB"?5:4}function qw(s){const a=Xf(s);return Math.pow(10,a)-1}function mx(s,a){const o=s.replace(/[^\d,]/g,"").split(","),u=a?.maxIntDigits,f=u?o[0].slice(0,u):o[0];if(o.length===1)return f;const p=o.slice(1).join("").slice(0,2);return`${f},${p}`}function Uy(s){const a=s.trim();if(!a||!/^\d+(,\d{1,2})?$/.test(a))return null;const l=a.replace(",","."),o=Number(l);return Number.isFinite(o)?o:null}function px(s){return s?s.split(",").map(a=>a.trim()).filter(Boolean):[]}function zw(s,a,l,o){const u={},f=s.executorMode==="ai",p=s.title.trim(),m=s.description.trim(),v=s.formatRequirements.trim(),x=s.referenceUrl.trim();if(p?p.length>Yf&&(u.title=o("validation.taskTitleLength")):u.title=o("validation.taskTitleRequired"),m?m.length>Gf&&(u.description=o("validation.taskFullLength")):u.description=o("validation.taskFullRequired"),!a.length&&!x?u.referenceUrl=l==="ru"?" :     .":"Reference is required: paste a link or attach a video.":!a.length&&x&&((()=>{if(!/^https?:\/\//i.test(x))return!1;try{return new URL(x),!0}catch{return!1}})()||(u.referenceUrl=l==="ru"?"    http://  https://.":"Link must start with http:// or https://.")),v.length>Kf&&(u.formatRequirements=o("validation.taskRequirementsLength")),s.platforms.length){const y=s.platformVideoCounts??{};s.platforms.some(N=>{const j=(y[N]??"1").trim(),C=Number(j);return!Number.isFinite(C)||!Number.isInteger(C)||C<1||C>50})&&(u.platformVideoCounts=l==="ru"?"       (150).":"Please set a valid video quantity for each platform (150).")}if(!f){if(!s.budgetAmount.trim())u.budgetAmount=o("validation.budgetRequired");else{const N=Uy(s.budgetAmount);if(N===null)u.budgetAmount=o("validation.budgetInvalid");else{const j=qw(s.budgetCurrency);Math.floor(N)>j&&(u.budgetAmount=o("validation.budgetTooLarge",{max:j,currency:s.budgetCurrency}))}}s.budgetCurrency||(u.budgetCurrency=o("validation.currencyRequired"));const y=s.maxExecutors.trim(),b=y?Number(y):NaN;y?(!Number.isFinite(b)||!Number.isInteger(b)||b<1||b>10)&&(u.maxExecutors=o("validation.maxExecutorsRange")):u.maxExecutors=o("validation.maxExecutorsRequired")}return u}function gc(s,a){return a==="ru"?{ru:s,en:s}:{en:s,ru:s}}function Hw(s,a){const l=s.trim(),o=200,u=l.length<=o?l:`${l.slice(0,o).trimEnd()}`;return gc(u,a)}function Vw(){const{t:s,locale:a}=lt(),l=Ut(),o=Qt(),u=ts(),f=u.state?.draft,p=u.state?.backTo&&typeof u.state.backTo=="string"?u.state.backTo:null,m=f,v=Cy,x=Dy,y=h.useMemo(()=>{if(!m)return{executorMode:"customer_post",title:"",description:"",referenceUrl:"",formatRequirements:"",platforms:[],platformVideoCounts:{},formats:[],budgetAmount:"",budgetCurrency:a==="ru"?"RUB":"USD",maxExecutors:""};const S=ye=>ye[a]||ye.en||"",ue={};for(const ye of m.deliverables??[])ye?.platform&&(ue[ye.platform]=String(Math.max(1,Math.floor(ye.quantity??1))));return{executorMode:m.executorMode==="blogger_ad"||m.executorMode==="ai"?m.executorMode:"customer_post",title:S(m.title),description:S(m.description),referenceUrl:m.reference?.kind==="url"?m.reference.url:"",formatRequirements:m.requirements?S(m.requirements):"",platforms:px(m.category??""),platformVideoCounts:ue,formats:px(m.location??""),budgetAmount:m.budgetAmount?String(m.budgetAmount):"",budgetCurrency:m.budgetCurrency==="RUB"?"RUB":"USD",maxExecutors:m.maxExecutors?String(m.maxExecutors):""}},[m,a]),[b,N]=h.useState(()=>y),[j,C]=h.useState({}),[k,D]=h.useState(!1),[F,q]=h.useState(!1),[B,ae]=h.useState(()=>{const S=Array.isArray(m?.descriptionFiles)?(m?.descriptionFiles??[]).slice(0,ji):null;return S&&S.length?S:m?.descriptionFile?[m.descriptionFile]:[]}),W=h.useRef(null),[X,E]=h.useState(!1),[A,O]=h.useState(!1),[le,se]=h.useState(null),[be,Se]=h.useState(()=>{const S=m?.reference;return S?S.kind==="video"?[{blobId:S.blobId,name:S.name,mimeType:S.mimeType}]:S.kind==="videos"?(S.videos??[]).slice(0,va):[]:[]}),Ce=h.useRef(null),[ge,L]=h.useState(!1),[U,ce]=h.useState(!1);h.useEffect(()=>{const S=Array.isArray(m?.descriptionFiles)?(m?.descriptionFiles??[]).slice(0,ji):null;if(S&&S.length){ae(S);return}ae(m?.descriptionFile?[m.descriptionFile]:[])},[m?.id]),h.useEffect(()=>{const S=m?.reference;if(!S){Se([]);return}if(S.kind==="video"){Se([{blobId:S.blobId,name:S.name,mimeType:S.mimeType}]);return}if(S.kind==="videos"){Se((S.videos??[]).slice(0,va));return}Se([])},[m?.id]),h.useEffect(()=>{F||N(S=>({...S,budgetCurrency:a==="ru"?"RUB":"USD"}))},[a,F]),h.useEffect(()=>{if(!U)return;const S=ue=>{ue.key==="Escape"&&ce(!1)};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[U]),h.useEffect(()=>{if(!A)return;const S=ue=>{ue.key==="Escape"&&O(!1)};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[A]);const Q=h.useMemo(()=>zw(b,be,a,s),[b,be,a,s]),de=Object.keys(Q).length===0,w=k?Q:Object.fromEntries(Object.entries(Q).filter(([S])=>j[S])),V=b.title.length,G=b.description.length,ie=b.formatRequirements.length;function ee(S,ue){N(ye=>({...ye,[S]:ue}))}async function M(S){if(S.preventDefault(),D(!0),!de)return;if(!l.user){o(K.login);return}if(l.user.role!=="customer")return;const ue=b.executorMode==="ai",ye=ue?null:Uy(b.budgetAmount),Ne=ue?1:Math.floor(Number(b.maxExecutors)),Ee=Ow,Be=b.platformVideoCounts??{},T=b.platforms.map(we=>{const $=(Be[we]??"1").trim(),De=Number($),Ye=Number.isFinite(De)&&Number.isInteger(De)?Math.max(1,Math.min(50,De)):1;return{platform:we,quantity:Ye}}).filter(we=>we.platform.trim().length>0),H={executorMode:b.executorMode,deliverables:T.length?T:void 0,title:gc(b.title.trim(),a),shortDescription:Hw(b.description,a),requirements:b.formatRequirements.trim()?gc(b.formatRequirements.trim(),a):void 0,description:gc(b.description.trim(),a),descriptionFiles:B.length?B.map(we=>({...we})):void 0,descriptionFile:B.length?{...B[0]}:void 0,reference:be.length?{kind:"videos",videos:be.slice(0,va)}:b.referenceUrl.trim()?{kind:"url",url:b.referenceUrl.trim()}:void 0,category:b.platforms.length?b.platforms.join(", "):void 0,location:b.formats.length?b.formats.join(", "):void 0,budgetAmount:ue?void 0:ye??void 0,budgetCurrency:ue?void 0:b.budgetCurrency,expiresAt:Ee,maxExecutors:Ne},ke=await rs.post("/tasks",H);o(Oe(ke.id),{state:p?{backTo:p}:{fromCreateDraft:!0}})}return l.user?l.user?.role==="executor"?n.jsx("div",{className:"createTaskPage",children:n.jsxs("div",{className:"createTaskCard",children:[n.jsx("h1",{className:"createTaskTitle",children:s("task.create.title")}),n.jsx("div",{style:{opacity:.9,marginTop:8},children:s("task.actions.onlyClientsCanPost")}),n.jsx("div",{className:"actionsRow",style:{marginTop:14},children:n.jsx(xe,{className:"primaryLink",to:K.tasks,children:s("task.details.backToTasks")})})]})}):n.jsx("div",{className:"createTaskPage",children:n.jsxs("div",{className:"createTaskCard",children:[n.jsx("h1",{className:"createTaskTitle",children:s("task.create.title")}),n.jsx("p",{className:"createTaskSubtitle",children:b.executorMode==="ai"?a==="ru"?"   .         .":"AI executor is not connected yet. For now, these tasks will be shown only in your profile.":a==="ru"?"          .":"Fill the description and technical requirements  executors will see the description in the feed."}),n.jsxs("form",{onSubmit:M,className:"form",children:[n.jsxs("div",{className:"field",children:[n.jsx("span",{className:"field__labelRow",children:n.jsx(Ws,{triggerLabel:n.jsx("span",{className:"field__label",children:a==="ru"?" ":"Executor type"}),open:le==="executorMode",onToggle:()=>se(S=>S==="executorMode"?null:"executorMode"),onClose:()=>se(null),ariaLabel:a==="ru"?":  ":"Help: executor type",content:a==="ru"?[",         .","","1)             .","2)        ,     (/   ).","3)         .    :              ."].join(`
`):["Choose who executes the task and where the result will be published.","","1) Blogger ad  the video is posted on the executors social account as sponsored content.","2) Content for your account  the executor produces the video and you publish it on your own social account (you can download it from the app).","3) AI executor  future video generation by your instructions. AI is not connected yet: these tasks are hidden from the executor marketplace and are visible only in your profile."].join(`
`)})}),n.jsxs("div",{className:"executorModeGrid",role:"radiogroup","aria-label":a==="ru"?" ":"Executor type",children:[n.jsxs("label",{className:`executorModeOption${b.executorMode==="blogger_ad"?" executorModeOption--active":""}`,children:[n.jsx("input",{className:"executorModeOption__input",type:"radio",name:"executorMode",value:"blogger_ad",checked:b.executorMode==="blogger_ad",onChange:()=>{ee("executorMode","blogger_ad"),C(S=>({...S,executorMode:!0}))}}),n.jsx("span",{className:"executorModeOption__title",children:a==="ru"?"  ":"Blogger ad"}),n.jsx("span",{className:"executorModeOption__desc",children:a==="ru"?"        .":"The video will be posted on the executors social account as sponsored content."})]}),n.jsxs("label",{className:`executorModeOption${b.executorMode==="customer_post"?" executorModeOption--active":""}`,children:[n.jsx("input",{className:"executorModeOption__input",type:"radio",name:"executorMode",value:"customer_post",checked:b.executorMode==="customer_post",onChange:()=>{ee("executorMode","customer_post"),C(S=>({...S,executorMode:!0}))}}),n.jsx("span",{className:"executorModeOption__title",children:a==="ru"?"   ":"Content for your account"}),n.jsx("span",{className:"executorModeOption__desc",children:a==="ru"?"  ,      .":"The executor delivers the video, and you publish it on your own account."})]}),n.jsxs("label",{className:`executorModeOption${b.executorMode==="ai"?" executorModeOption--active":""}`,children:[n.jsx("input",{className:"executorModeOption__input",type:"radio",name:"executorMode",value:"ai",checked:b.executorMode==="ai",onChange:()=>{ee("executorMode","ai"),C(S=>({...S,executorMode:!0}))}}),n.jsx("span",{className:"executorModeOption__title",children:a==="ru"?" ()":"AI executor (soon)"}),n.jsx("span",{className:"executorModeOption__desc",children:a==="ru"?"    .        .":"Video generation by your instructions. Hidden from executors for now."})]})]})]}),n.jsxs("label",{className:"field",children:[n.jsx("span",{className:"field__labelRow",children:n.jsx(Ws,{triggerLabel:n.jsx("span",{className:"field__label",children:s("task.create.titleField")}),open:le==="title",onToggle:()=>se(S=>S==="title"?null:"title"),onClose:()=>se(null),ariaLabel:a==="ru"?": ":"Help: title",content:a==="ru"?["    : ,     .      .",""," :","-    ( ): UGC, , , , .","-  / : , ,  .","-   : // ( ).","",":","-  :  UGC 9:16      ,   .","-      .","-   60      .","",":","- UGC 9:16:  , 2530 ","-  Reels    +  ( 40 )"].join(`
`):["The title is the front cover of your task. Contractors see it first in the feed, so it must be short and unambiguous.","","What to include:","- The deliverable type: UGC video, edit, script, voiceover, review, etc.","- The topic/product/service.","- One key parameter if critical (duration / quantity / deadline).","","Tips:","- Be specific and keep only what matters most.","- Title is limited to 60 characters.","","Examples:","- UGC 9:16 video: app review, 2530s","- Reels edit + subtitles (up to 40s)"].join(`
`)})}),n.jsxs("div",{className:"field__control",children:[n.jsx("input",{className:"field__input",value:b.title,onChange:S=>ee("title",S.target.value),onBlur:()=>C(S=>({...S,title:!0})),placeholder:s("task.create.placeholder.title"),autoComplete:"off"}),n.jsxs("span",{className:`field__counterInField ${V>=Yf?"field__counter--danger":""}`,children:[V,"/",Yf]})]}),w.title?n.jsx("span",{className:"field__error",children:w.title}):null]}),n.jsxs("label",{className:"field",children:[n.jsx("span",{className:"field__labelRow",children:n.jsx(Ws,{triggerLabel:n.jsx("span",{className:"field__label",children:a==="ru"?"":"Description"}),open:le==="description",onToggle:()=>se(S=>S==="description"?null:"description"),onClose:()=>se(null),ariaLabel:a==="ru"?": ":"Help: description",content:a==="ru"?["    .        .","","   (   ):","1) : /    ().","2) :     .","3)  : 12 ,    .","4) :      CTA (  ).","5) :   /,  .","",":","-   1000 .      .txt ."].join(`
`):["Description is your main brief. A contractor should understand the task end-to-end from it.","","What to include (bullet points):","1) Context (product/service, audience).","2) Goal (what outcome you want).","3) Key message (12 must-have points).","4) Outline (hook  body  CTA).","5) Constraints (do/dont, mandatory mentions).","","Limit: 1000 characters. If you have a lot of details  attach a .txt file."].join(`
`)})}),n.jsx("input",{ref:W,type:"file",accept:".txt,text/plain",className:"field__fileInputHidden",onChange:S=>{const ue=Array.from(S.currentTarget.files??[]);if(S.currentTarget.value="",!ue.length)return;const ye=Math.max(0,ji-B.length);if(ye<=0){O(!0);return}const Ne=ue.slice(0,ye);ue.length>ye&&O(!0),E(!0),(async()=>{try{const Ee=await Promise.all(Ne.map(async Be=>({name:Be.name,text:await Be.text()})));ae(Be=>[...Be,...Ee].slice(0,ji))}finally{E(!1)}})()},multiple:!0}),n.jsxs("div",{className:"field__control field__control--textarea",children:[n.jsx("textarea",{className:"field__textarea",value:b.description,onChange:S=>ee("description",S.target.value),onBlur:()=>C(S=>({...S,description:!0})),placeholder:a==="ru"?"   ":"Describe the task for the contractor",rows:7}),n.jsx("div",{className:"field__bottomRight",children:n.jsxs("span",{className:`field__counterInField ${G>=Gf?"field__counter--danger":""}`,children:[G,"/",Gf]})})]}),n.jsx("div",{className:"referenceActionsRow",children:n.jsx("button",{type:"button",className:`field__refBtn field__refBtn--full${B.length>=ji?" field__refBtn--inactive":""}`,onClick:()=>{if(!X){if(B.length>=ji){O(!0);return}W.current?.click()}},disabled:X,"aria-disabled":B.length>=ji,children:X?a==="ru"?"":"Loading":a==="ru"?" ":"Attach file"})}),B.length?n.jsx("div",{className:"deliverablesBox",style:{marginTop:10},children:n.jsx("div",{className:"deliverablesList",style:{maxHeight:"none"},children:B.map((S,ue)=>n.jsxs("div",{className:`deliverablesRow${ue===0?" deliverablesRow--first":""}`,children:[n.jsx("span",{className:"deliverablesRow__platform",title:S.name,children:S.name}),n.jsx("div",{className:"deliverablesRow__controls",children:n.jsx("button",{type:"button",className:"deliverablesRow__btn","aria-label":a==="ru"?` : ${S.name}`:`Remove file: ${S.name}`,onPointerDown:ye=>{ye.preventDefault(),ye.stopPropagation()},onClick:ye=>{ye.preventDefault(),ye.stopPropagation(),ae(Ne=>Ne.filter((Ee,Be)=>Be!==ue))},children:""})})]},`${S.name}-${ue}`))})}):null,w.description?n.jsx("span",{className:"field__error",children:w.description}):null]}),n.jsxs("label",{className:"field",children:[n.jsx("span",{className:"field__labelRow",children:n.jsx(Ws,{triggerLabel:n.jsx("span",{className:"field__label",children:a==="ru"?"":"Reference"}),open:le==="reference",onToggle:()=>se(S=>S==="reference"?null:"reference"),onClose:()=>se(null),ariaLabel:a==="ru"?": ":"Help: reference",content:a==="ru"?["  ,     .",""," :","-    (YouTube, TikTok, Reels  ..).",`-    ( ${va} .).`,"","    :","-    .","-  (UGC / talking head / ).","-  .","-    .",""," :        ."].join(`
`):["Reference is an example the contractor should follow.","","You can provide:","- A video link (YouTube, TikTok, Reels, etc.)",`- Or attach video files (up to ${va}).`,"","A good reference shows:","- Editing style and pace","- Delivery style (UGC / talking head / tutorial)","- Approximate duration","- Tone and energy","","This field is required: choose at least one option  either a link or videos."].join(`
`)})}),n.jsxs("div",{className:"field__controlRow",children:[n.jsx("input",{className:"field__input",value:b.referenceUrl,disabled:be.length>0,onChange:S=>{const ue=S.target.value;if(be.length){const ye=be.map(Ne=>Ne.blobId);Se([]);for(const Ne of ye)fx(Ne).catch(()=>{})}ee("referenceUrl",ue)},onBlur:()=>C(S=>({...S,referenceUrl:!0})),placeholder:be.length?a==="ru"?" ":"Video attached":a==="ru"?"   ":"Paste a reference link",autoComplete:"off"}),n.jsx("input",{ref:Ce,type:"file",accept:"video/*",className:"field__fileInputHidden",onChange:S=>{const ue=Array.from(S.currentTarget.files??[]);if(S.currentTarget.value="",!ue.length)return;const ye=Math.max(0,va-be.length);if(ye<=0){alert(a==="ru"?`   ${va} .`:`You can attach up to ${va} videos.`);return}const Ne=ue.slice(0,ye);L(!0),(async()=>{try{b.referenceUrl.trim()&&ee("referenceUrl","");const Ee=[];for(const Be of Ne){const T=nf*1024*1024;if(Be.size>T){alert(a==="ru"?` ${Be.name}   ( ${nf} ).`:`File ${Be.name} is too large (max ${nf} MB).`);continue}if(!Be.type.startsWith("video/")){alert(a==="ru"?` ${Be.name}   .`:`File ${Be.name} is not a video.`);continue}const H=ze("blob");await My(H,Be),Ee.push({blobId:H,name:Be.name,mimeType:Be.type})}Ee.length&&Se(Be=>[...Be,...Ee].slice(0,va))}finally{L(!1)}})()}})]}),n.jsx("div",{className:"referenceActionsRow",children:n.jsx("button",{type:"button",className:`field__refBtn field__refBtn--full${be.length>=va?" field__refBtn--inactive":""}`,onClick:()=>{if(!ge){if(be.length>=va){ce(!0);return}Ce.current?.click()}},disabled:ge,"aria-disabled":be.length>=va,children:ge?a==="ru"?"":"Loading":a==="ru"?" ":"Attach video"})}),be.length?n.jsx("div",{className:"deliverablesBox",style:{marginTop:10},children:n.jsx("div",{className:"deliverablesList",style:{maxHeight:"none"},children:be.map((S,ue)=>n.jsxs("div",{className:`deliverablesRow${ue===0?" deliverablesRow--first":""}`,children:[n.jsx("span",{className:"deliverablesRow__platform",title:S.name,children:S.name}),n.jsx("div",{className:"deliverablesRow__controls",children:n.jsx("button",{type:"button",className:"deliverablesRow__btn","aria-label":a==="ru"?` : ${S.name}`:`Remove video: ${S.name}`,onPointerDown:ye=>{ye.preventDefault(),ye.stopPropagation()},onClick:ye=>{ye.preventDefault(),ye.stopPropagation(),Se(Ne=>Ne.filter(Ee=>Ee.blobId!==S.blobId)),fx(S.blobId).catch(()=>{})},children:""})})]},S.blobId))})}):null,w.referenceUrl?n.jsx("span",{className:"field__error",children:w.referenceUrl}):null]}),U?n.jsx("div",{className:"createTaskOverlay",role:"dialog","aria-modal":"true","aria-label":a==="ru"?"  ":"Reference videos limit",onPointerDown:()=>ce(!1),children:n.jsxs("div",{className:"createTaskModal",onPointerDown:S=>S.stopPropagation(),children:[n.jsxs("div",{className:"createTaskModal__header",children:[n.jsx("div",{className:"createTaskModal__title",children:a==="ru"?"   3 ":"You can attach up to 3 videos"}),n.jsx("button",{type:"button",className:"createTaskModal__close","aria-label":a==="ru"?"":"Close",onClick:()=>ce(!1),children:""})]}),n.jsx("div",{className:"createTaskModal__content",children:a==="ru"?"   3   .   ,     .":"You already attached 3 reference videos. Remove one to upload another."}),n.jsx("div",{className:"createTaskModal__actions",children:n.jsx("button",{type:"button",className:"field__refBtn field__refBtn--full",onClick:()=>ce(!1),children:a==="ru"?"":"OK"})})]})}):null,A?n.jsx("div",{className:"createTaskOverlay",role:"dialog","aria-modal":"true","aria-label":a==="ru"?"  ":"Description files limit",onPointerDown:()=>O(!1),children:n.jsxs("div",{className:"createTaskModal",onPointerDown:S=>S.stopPropagation(),children:[n.jsxs("div",{className:"createTaskModal__header",children:[n.jsx("div",{className:"createTaskModal__title",children:a==="ru"?"   3 ":"You can attach up to 3 files"}),n.jsx("button",{type:"button",className:"createTaskModal__close","aria-label":a==="ru"?"":"Close",onClick:()=>O(!1),children:""})]}),n.jsx("div",{className:"createTaskModal__content",children:a==="ru"?"   3    .        .":"You can attach up to 3 text files to the description. Remove one to attach another."}),n.jsx("div",{className:"createTaskModal__actions",children:n.jsx("button",{type:"button",className:"field__refBtn field__refBtn--full",onClick:()=>O(!1),children:a==="ru"?"":"OK"})})]})}):null,n.jsxs("label",{className:"field",children:[n.jsx("span",{className:"field__labelRow",children:n.jsx(Ws,{triggerLabel:n.jsx("span",{className:"field__label",children:a==="ru"?" ":"Technical requirements"}),open:le==="formatReq",onToggle:()=>se(S=>S==="formatReq"?null:"formatReq"),onClose:()=>se(null),ariaLabel:a==="ru"?":  ":"Help: technical requirements",content:a==="ru"?["        .    ,      .","","  :","- :  2030 , 3045 .","- : / , , ,  (/).","- : /,   .","- :  10801920, 30fps ( ).","-  : MP4/MOV, ,  ( ).","   500 .     ."].join(`
`):["Technical requirements are the technical and visual constraints of the deliverable. Be specific to avoid surprises.","","Common items:","- Duration (e.g. 2030s)","- Voiceover (yes/no, language, tone)","- Quality (10801920, fps)","- Delivery format (MP4/MOV, sources if needed)","","Limit: 500 characters."].join(`
`)})}),n.jsxs("div",{className:"field__control field__control--textarea",children:[n.jsx("textarea",{className:"field__textarea",value:b.formatRequirements,onChange:S=>ee("formatRequirements",S.target.value),onBlur:()=>C(S=>({...S,formatRequirements:!0})),placeholder:a==="ru"?":  2030 ,   (RU),  1080p":"E.g. 2030s, voiceover needed (EN), 1080p",rows:4}),n.jsxs("span",{className:`field__counterInField ${ie>=Kf?"field__counter--danger":""}`,children:[ie,"/",Kf]})]}),w.formatRequirements?n.jsx("span",{className:"field__error",children:w.formatRequirements}):null]}),n.jsxs("div",{className:"grid2",children:[n.jsx(ux,{label:n.jsx(Ws,{triggerLabel:n.jsx("span",{children:s("task.create.category")}),open:le==="platforms",onToggle:()=>se(S=>S==="platforms"?null:"platforms"),onClose:()=>se(null),ariaLabel:a==="ru"?": ":"Help: platform",content:a==="ru"?["      .    , ,     CTA.","","  :","-     (TikTok  YouTube  Telegram).","-    : ,  ,   ,  CTA.",""," :","-           ."].join(`
`):["Platform is where you will publish the result. It affects pacing, framing and CTA.","","Why it matters:","- Different platforms have different native styles and constraints.","","Tip: you can select multiple platforms if needed."].join(`
`)}),ariaLabel:s("task.create.category"),placeholder:s("task.create.placeholder.category"),value:b.platforms,options:v,allowCustom:!0,customPlaceholder:a==="ru"?" ":"Add platform",onChange:S=>{N(ue=>{const ye={};for(const Ne of S){const Ee=ue.platformVideoCounts?.[Ne];ye[Ne]=(Ee??"1").trim()||"1"}return{...ue,platforms:S,platformVideoCounts:ye}})}}),n.jsx(ux,{label:n.jsx(Ws,{triggerLabel:n.jsx("span",{children:s("task.create.location")}),open:le==="formats",onToggle:()=>se(S=>S==="formats"?null:"formats"),onClose:()=>se(null),ariaLabel:a==="ru"?": ":"Help: format",content:a==="ru"?["      (   ).","",":","- 9:16   (Shorts/Reels/TikTok).","- 1:1   (/).","- 16:9   (YouTube//).","- Talking head       .","- UGC      .","- Motion graphics  ///.","- Screen recording    (/).","- Voiceover    .","-      .","-  / how-to  :  .","-  / review   //.","",":  13  ,   (, , , )   ."].join(`
`):["Format helps executors understand the deliverable (aspect ratio and style).","","Options:","- 9:16  vertical (Shorts/Reels/TikTok).","- 1:1  square.","- 16:9  horizontal (YouTube/web/presentations).","- Talking head  person speaking to camera.","- UGC  native user-generated style.","- Motion graphics  animations/graphics/titles/infographics.","- Screen recording  app/website screen capture.","- Voiceover  narration over video.","- Subtitles  subtitles are required.","- Tutorial  step-by-step how-to.","- Review  product/service review.","","Tip: pick 13 key formats, and describe details (length, structure, tone, references) in the requirements."].join(`
`)}),ariaLabel:s("task.create.location"),placeholder:s("task.create.placeholder.location"),value:b.formats,options:x,allowCustom:!0,customPlaceholder:a==="ru"?" ":"Add format",onChange:S=>ee("formats",S)})]}),b.platforms.length?n.jsxs("div",{className:"field",children:[n.jsx("span",{className:"field__labelRow",children:n.jsx("span",{className:"field__label",children:a==="ru"?"   ":"Video quantity per platform"})}),n.jsx("div",{className:"deliverablesBox",children:n.jsx("div",{className:"deliverablesList",children:b.platforms.map((S,ue)=>{const ye=(b.platformVideoCounts?.[S]??"1").trim(),Ne=Number(ye),Ee=Number.isFinite(Ne)?Math.max(1,Math.min(50,Math.floor(Ne))):1,Be=Ee<=1,T=Ee>=50;return n.jsxs("div",{className:`deliverablesRow${ue===0?" deliverablesRow--first":""}`,children:[n.jsx("span",{className:"deliverablesRow__platform",title:S,children:S}),n.jsxs("div",{className:"deliverablesRow__controls",children:[n.jsx("button",{type:"button",className:"deliverablesRow__btn",disabled:Be,"aria-label":a==="ru"?`   ${S}`:`Decrease quantity for ${S}`,onClick:()=>{N(H=>({...H,platformVideoCounts:{...H.platformVideoCounts??{},[S]:String(Math.max(1,Ee-1))}}))},children:""}),n.jsx("input",{className:"deliverablesRow__input",value:ye,onChange:H=>{const ke=H.target.value.replace(/[^\d]/g,"").slice(0,2);N(we=>({...we,platformVideoCounts:{...we.platformVideoCounts??{},[S]:ke}}))},onBlur:()=>{C(H=>({...H,platformVideoCounts:!0})),N(H=>{const ke=(H.platformVideoCounts?.[S]??"").trim(),we=Number(ke),$=Number.isFinite(we)&&Number.isInteger(we)?Math.max(1,Math.min(50,we)):1;return{...H,platformVideoCounts:{...H.platformVideoCounts??{},[S]:String($)}}})},inputMode:"numeric",min:1,max:50,placeholder:"1","aria-label":a==="ru"?`   ${S}`:`Video quantity for ${S}`}),n.jsx("button",{type:"button",className:"deliverablesRow__btn",disabled:T,"aria-label":a==="ru"?`   ${S}`:`Increase quantity for ${S}`,onClick:()=>{N(H=>({...H,platformVideoCounts:{...H.platformVideoCounts??{},[S]:String(Math.min(50,Ee+1))}}))},children:"+"})]})]},S)})})}),w.platformVideoCounts?n.jsx("div",{className:"field__error",style:{marginTop:8},children:w.platformVideoCounts}):null]}):null,b.executorMode!=="ai"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid2",children:[n.jsxs("label",{className:"field",children:[n.jsx("span",{className:"field__labelRow",children:n.jsx(Ws,{triggerLabel:n.jsx("span",{className:"field__label",children:s("task.create.budgetAmount")}),open:le==="budget",onToggle:()=>se(S=>S==="budget"?null:"budget"),onClose:()=>se(null),ariaLabel:a==="ru"?": ":"Help: budget",content:a==="ru"?["          .","","    :","-    ,   ()   .","","   :","-        .","-    ( +  +  + )   .","","  ,   ,     ."].join(`
`):["Budget is the payment amount per one contractor for this task.","","How it works:","- When you assign a contractor, the amount is reserved during execution."].join(`
`)})}),n.jsx("input",{className:"field__input",value:b.budgetAmount,onChange:S=>ee("budgetAmount",mx(S.target.value,{maxIntDigits:Xf(b.budgetCurrency)})),onBlur:()=>C(S=>({...S,budgetAmount:!0})),placeholder:s("task.create.placeholder.amount"),inputMode:"decimal"}),w.budgetAmount?n.jsx("span",{className:"field__error",children:w.budgetAmount}):null]}),n.jsxs("div",{className:"field",children:[n.jsx(Ea,{label:n.jsx(Ws,{triggerLabel:n.jsx("span",{children:s("task.create.currency")}),open:le==="currency",onToggle:()=>se(S=>S==="currency"?null:"currency"),onClose:()=>se(null),ariaLabel:a==="ru"?": ":"Help: currency",content:a==="ru"?["       (RUB  USD).","",":   ,        ."].join(`
`):["Currency is the unit for the budget (RUB or USD).","Pick the currency you use to manage your balance."].join(`
`)}),value:b.budgetCurrency,options:[{value:"USD",label:"USD ($)"},{value:"RUB",label:"RUB ()"}],onChange:S=>{q(!0),N(ue=>({...ue,budgetCurrency:S,budgetAmount:mx(ue.budgetAmount,{maxIntDigits:Xf(S)})})),C(ue=>({...ue,budgetCurrency:!0}))}}),w.budgetCurrency?n.jsx("span",{className:"field__error",children:w.budgetCurrency}):null]})]}),n.jsx("div",{className:"grid2",children:n.jsxs("label",{className:"field",children:[n.jsx("span",{className:"field__labelRow",children:n.jsx(Ws,{triggerLabel:n.jsx("span",{className:"field__label",children:s("task.create.maxExecutors")}),open:le==="maxExec",onToggle:()=>se(S=>S==="maxExec"?null:"maxExec"),onClose:()=>se(null),ariaLabel:a==="ru"?":  ":"Help: number of contractors",content:a==="ru"?["          .","","  :","-     /.","-     ( )     .","",":","-        1."].join(`
`):["Max contractors is how many people you can assign to this task."].join(`
`)})}),n.jsx("input",{className:"field__input",value:b.maxExecutors,onChange:S=>ee("maxExecutors",S.target.value.replace(/[^\d]/g,"").slice(0,2)),onBlur:()=>C(S=>({...S,maxExecutors:!0})),placeholder:s("task.create.maxExecutors.placeholder"),inputMode:"numeric",min:1,max:10}),w.maxExecutors?n.jsx("span",{className:"field__error",children:w.maxExecutors}):null]})})]}):null,n.jsxs("div",{className:"actionsRow",children:[n.jsxs("button",{className:"primaryBtn primaryBtn--plain",type:"submit",children:[s("task.create.publish")," ",n.jsx("span",{className:"btnArrow","aria-hidden":"true",children:""})]}),n.jsx(xe,{className:"secondaryLink",to:K.tasks,children:s("common.cancel")})]})]})]})},u.key??"create-task"):n.jsx("div",{className:"createTaskPage",children:n.jsxs("div",{className:"createTaskCard",children:[n.jsx("h1",{className:"createTaskTitle",children:s("task.create.title")}),n.jsx("div",{style:{opacity:.9,marginTop:8},children:s("task.actions.signInToPost")}),n.jsxs("div",{className:"actionsRow",style:{marginTop:14},children:[n.jsx(xe,{className:"primaryLink",to:K.login,children:s("auth.signIn")}),n.jsx(xe,{className:"secondaryLink",to:K.register,children:s("auth.signUp")})]})]})})}let Qf=[],Xa={timer:null,subs:new Set};async function hx(){if(!Xt.getToken()){Qf=[];for(const s of Xa.subs)s();return}try{Qf=await rs.get("/submissions")}catch{}for(const s of Xa.subs)s()}function vx(){return Qf}function Ic(){return h.useSyncExternalStore(s=>(Xa.subs.add(s),Xa.timer||(hx(),Xa.timer=window.setInterval(()=>{hx()},5e3)),()=>{Xa.subs.delete(s),Xa.subs.size===0&&Xa.timer&&(window.clearInterval(Xa.timer),Xa.timer=null)}),vx,vx)}const Pw="ui-create-works.disputes.v1";let lf={raw:null,list:[]};function gx(){const s=localStorage.getItem(Pw);if(lf.raw===s)return lf.list;const a=Ot.listAll();return lf={raw:s,list:a},a}function jl(){return h.useSyncExternalStore(Ot.subscribe,gx,gx)}function $w({open:s,onClose:a,onSubmit:l}){const{locale:o}=lt(),[u,f]=h.useState("illness"),[p,m]=h.useState("6"),[v,x]=h.useState("");h.useEffect(()=>{s&&(f("illness"),m("6"),x(""))},[s]),h.useEffect(()=>{if(!s)return;const C=k=>{k.key==="Escape"&&a()};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[s,a]);const y=h.useMemo(()=>[{value:"illness",label:o==="ru"?"":"Illness"},{value:"family",label:o==="ru"?" ":"Family circumstances"},{value:"force_majeure",label:o==="ru"?"-":"Force majeure"}],[o]),b=h.useMemo(()=>Array.from({length:24}).map((C,k)=>{const D=String(k+1);return{value:D,label:o==="ru"?`${D} `:`${D} h`}}),[o]);if(!s)return null;const N=Number(p),j=Number.isFinite(N)&&N>=1&&N<=24;return n.jsx("div",{className:"pauseOverlay",onClick:a,role:"dialog","aria-modal":"true",children:n.jsxs("div",{className:"pauseModal",onClick:C=>C.stopPropagation(),children:[n.jsxs("header",{className:"pauseModal__header",children:[n.jsxs("div",{className:"pauseModal__headerContent",children:[n.jsx("p",{className:"pauseModal__label",children:o==="ru"?" ":"Request pause"}),n.jsx("h2",{className:"pauseModal__title",children:o==="ru"?"-":"Force majeure"})]}),n.jsx("button",{className:"pauseModal__close",type:"button",onClick:a,"aria-label":o==="ru"?"":"Cancel",children:""})]}),n.jsxs("div",{className:"pauseModal__body",children:[n.jsx("p",{className:"pauseModal__hint",style:{marginTop:0,whiteSpace:"pre-line"},children:o==="ru"?`    .
       24 .   .`:`Circumstances are considered only BEFORE the deadline.
Pause is available once and up to 24 hours. No documents required.`}),n.jsxs("div",{className:"pauseModal__grid",children:[n.jsx(Ea,{label:o==="ru"?"":"Reason",value:u,onChange:f,options:y}),n.jsx(Ea,{label:o==="ru"?"":"Duration",value:p,onChange:m,options:b})]}),n.jsx("textarea",{className:"pauseModal__detail",placeholder:o==="ru"?" ()":"Comment (optional)",value:v,onChange:C=>x(C.target.value.slice(0,500)),rows:4,autoFocus:!0})]}),n.jsxs("footer",{className:"pauseModal__footer",children:[n.jsx("button",{type:"button",className:"pauseModal__cancel",onClick:a,children:o==="ru"?"":"Cancel"}),n.jsx("button",{type:"button",className:"pauseModal__submit",onClick:()=>l({reasonId:u,durationHours:N,comment:v.trim()}),disabled:!j,children:o==="ru"?"":"Send"})]})]})})}function Nc({open:s,title:a,subjectName:l,onClose:o,onSubmit:u}){const{locale:f}=lt(),[p,m]=h.useState(5),[v,x]=h.useState("");h.useEffect(()=>{s&&(m(5),x(""))},[s]);const y=p>=1&&p<=5,b=h.useMemo(()=>f==="ru"?l?`: ${l}`:"":l?`Rate: ${l}`:"Rate",[f,l]);return s?n.jsx("div",{className:"ratingOverlay",onClick:o,role:"dialog","aria-modal":"true",children:n.jsxs("div",{className:"ratingModal",onClick:N=>N.stopPropagation(),children:[n.jsxs("header",{className:"ratingModal__header",children:[n.jsx("div",{className:"ratingModal__headerContent",children:n.jsx("p",{className:"ratingModal__label",children:a??b})}),n.jsx("button",{className:"ratingModal__close",type:"button",onClick:o,"aria-label":f==="ru"?"":"Close",children:""})]}),n.jsxs("div",{className:"ratingModal__body",children:[n.jsx("div",{className:"ratingStars","aria-label":f==="ru"?"":"Rating",children:Array.from({length:5}).map((N,j)=>{const C=j+1,k=C<=p;return n.jsx("button",{type:"button",className:`ratingStar${k?" ratingStar--active":""}`,onClick:()=>m(C),"aria-label":`${C}`,children:""},C)})}),n.jsx("textarea",{className:"ratingModal__comment",placeholder:f==="ru"?" ()":"Comment (optional)",value:v,onChange:N=>x(N.target.value),rows:4})]}),n.jsxs("footer",{className:"ratingModal__footer",children:[n.jsx("button",{type:"button",className:"ratingModal__cancel",onClick:o,children:f==="ru"?"":"Cancel"}),n.jsx("button",{type:"button",className:"ratingModal__submit",onClick:()=>u({rating:p,comment:v.trim()}),disabled:!y,children:f==="ru"?"":"Submit"})]})]})}):null}const Em="ui-create-works.ratings.v1",Zf="ui-create-works.ratings.change";function Fw(s){if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch{return[]}}function xx(){return Fw(localStorage.getItem(Em))}function Ww(s){localStorage.setItem(Em,JSON.stringify(s)),window.dispatchEvent(new Event(Zf))}function By(){return new Date().toISOString()}function Yw(s){if(!s||typeof s!="object")return null;const a=s,l=typeof a.id=="string"?a.id:ze("rate"),o=typeof a.contractId=="string"?a.contractId:"",u=typeof a.fromUserId=="string"?a.fromUserId:"",f=typeof a.toUserId=="string"?a.toUserId:"",p=typeof a.createdAt=="string"?a.createdAt:By(),m=typeof a.rating=="number"?a.rating:NaN;if(!o||!u||!f||!Number.isFinite(m)||m<1||m>5)return null;const v=typeof a.comment=="string"&&a.comment.trim()?a.comment.trim():void 0;return{id:l,contractId:o,fromUserId:u,toUserId:f,rating:m,comment:v,createdAt:p}}const Zn={listAll(){return xx().map(Yw).filter(Boolean)},listForUser(s){return this.listAll().filter(a=>a.toUserId===s).slice().sort((a,l)=>l.createdAt.localeCompare(a.createdAt))},listGivenByUser(s){return this.listAll().filter(a=>a.fromUserId===s).slice().sort((a,l)=>l.createdAt.localeCompare(a.createdAt))},getForContractPair(s,a){return this.listAll().find(l=>l.contractId===s&&l.fromUserId===a)??null},upsert(s){const a=xx(),l=By(),o=a.findIndex(f=>f?.contractId===s.contractId&&f?.fromUserId===s.fromUserId),u={id:o===-1?ze("rate"):a[o]?.id??ze("rate"),contractId:s.contractId,fromUserId:s.fromUserId,toUserId:s.toUserId,rating:Math.max(1,Math.min(5,Math.round(s.rating))),comment:s.comment?.trim()||void 0,createdAt:o===-1?l:a[o]?.createdAt??l};return o===-1?a.push(u):a[o]=u,Ww(a),u},averageForUser(s){const a=this.listForUser(s);return a.length?a.reduce((o,u)=>o+u.rating,0)/a.length:null},subscribe(s){const a=()=>s();window.addEventListener(Zf,a);const l=o=>{o.key===Em&&a()};return window.addEventListener("storage",l),()=>{window.removeEventListener(Zf,a),window.removeEventListener("storage",l)}}};function Cm({open:s,count:a,onClose:l,onConfirm:o}){const{locale:u}=lt();if(h.useEffect(()=>{if(!s)return;const m=v=>{v.key==="Escape"&&l()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[s,l]),!s)return null;const f=u==="ru"?"":"Heads up",p=u==="ru"?`  ${a}     .   ?`:`This executor previously did not start assigned tasks ${a} times. Assign anyway?`;return n.jsx("div",{className:"noStartOverlay",onClick:l,role:"dialog","aria-modal":"true","aria-label":f,children:n.jsxs("div",{className:"noStartModal",onClick:m=>m.stopPropagation(),children:[n.jsxs("header",{className:"noStartModal__header",children:[n.jsxs("div",{className:"noStartModal__headerContent",children:[n.jsx("p",{className:"noStartModal__label",children:u==="ru"?"  ":"Before you assign"}),n.jsx("h2",{className:"noStartModal__title",children:f})]}),n.jsx("button",{className:"noStartModal__close",type:"button",onClick:l,"aria-label":u==="ru"?"":"Close",title:u==="ru"?"":"Close",children:""})]}),n.jsx("div",{className:"noStartModal__body",children:n.jsx("p",{className:"noStartModal__text",children:p})}),n.jsxs("footer",{className:"noStartModal__footer",children:[n.jsx("button",{type:"button",className:"noStartModal__cancel",onClick:l,children:u==="ru"?"":"Cancel"}),n.jsx("button",{type:"button",className:"noStartModal__confirm",onClick:()=>{o(),l()},children:u==="ru"?"":"Assign"})]})]})})}function Ly({open:s,executorName:a,onClose:l,onSubmit:o}){const{locale:u}=lt(),[f,p]=h.useState(""),[m,v]=h.useState(!1);return h.useEffect(()=>{s&&(p(""),v(!1))},[s]),s?n.jsxs("div",{className:"revisionOverlay",onClick:l,role:"dialog","aria-modal":"true",children:[n.jsxs("div",{className:"revisionModal",onClick:x=>x.stopPropagation(),children:[n.jsxs("header",{className:"revisionModal__header",children:[n.jsxs("div",{className:"revisionModal__headerContent",children:[n.jsx("p",{className:"revisionModal__label",children:u==="ru"?" ":"Request revision"}),n.jsx("h2",{className:"revisionModal__title",children:a??(u==="ru"?"":"Executor")})]}),n.jsx("button",{className:"revisionModal__close",type:"button",onClick:l,"aria-label":u==="ru"?"":"Cancel",children:""})]}),n.jsxs("div",{className:"revisionModal__body",children:[n.jsx("p",{className:"revisionModal__hint",style:{marginTop:0},children:u==="ru"?",     .         .":"Describe what to fix or . Executor will see it in notifications and on the task page."}),n.jsx("textarea",{className:"revisionModal__detail",placeholder:u==="ru"?":  ,  ,   ":"E.g. replace music, add subtitles, fix the first frame",value:f,onChange:x=>p(x.target.value),rows:5,autoFocus:!0})]}),n.jsxs("footer",{className:"revisionModal__footer",children:[n.jsx("button",{type:"button",className:"revisionModal__cancel",onClick:l,children:u==="ru"?"":"Cancel"}),n.jsx("button",{type:"button",className:"revisionModal__submit",onClick:()=>{const x=f.trim();if(!x){v(!0);return}o(x)},children:u==="ru"?"":"Send"})]})]}),m?n.jsx("div",{className:"revisionInfoOverlay",role:"dialog","aria-modal":"true","aria-label":u==="ru"?" ":"Details required",onClick:()=>v(!1),children:n.jsxs("div",{className:"revisionInfoModal",onClick:x=>x.stopPropagation(),children:[n.jsx("h3",{className:"revisionInfoModal__title",children:u==="ru"?"  ":"Add clarification details"}),n.jsx("p",{className:"revisionInfoModal__text",children:u==="ru"?"    ,   ,       . ,   ,    (/),      .":"To help the executor deliver exactly what you expect, a revision request must include specific changes. Describe what to adjust, where it appears (timestamps/frames), and what outcome you want."}),n.jsx("div",{className:"revisionInfoModal__actions",children:n.jsx("button",{type:"button",className:"revisionInfoModal__button",onClick:()=>v(!1),children:u==="ru"?"":"Got it"})})]})}):null]}):null}const Oy=h.createContext(null),Gw=5e3,Kw=260,Xw=4;function Qw(){const s=globalThis.crypto;return s?.randomUUID?s.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,10)}`}function Zw({children:s}){const[a,l]=h.useState([]),o=h.useRef(new Map),u=h.useCallback(p=>{l(x=>x.map(y=>y.id===p?{...y,closing:!0}:y));const m=o.current.get(p);m?.auto&&window.clearTimeout(m.auto),m?.remove&&window.clearTimeout(m.remove);const v=window.setTimeout(()=>{l(x=>x.filter(y=>y.id!==p)),o.current.delete(p)},Kw);o.current.set(p,{remove:v})},[]),f=h.useMemo(()=>({showToast:({message:p,tone:m="info",durationMs:v=Gw})=>{const x=p.trim();if(!x)return"";const y=Qw();l(N=>[{id:y,message:x,tone:m,closing:!1},...N].slice(0,Xw));const b=window.setTimeout(()=>u(y),Math.max(0,v));return o.current.set(y,{auto:b}),y},closeToast:p=>{p&&u(p)},clearToasts:()=>{for(const[,p]of o.current)p.auto&&window.clearTimeout(p.auto),p.remove&&window.clearTimeout(p.remove);o.current.clear(),l([])}}),[u]);return h.useEffect(()=>()=>{for(const[,p]of o.current)p.auto&&window.clearTimeout(p.auto),p.remove&&window.clearTimeout(p.remove);o.current.clear()},[]),n.jsxs(Oy.Provider,{value:f,children:[s,n.jsx("div",{className:"toastViewport","aria-live":"polite","aria-relevant":"additions removals","aria-atomic":"true",children:a.map(p=>{const m=p.tone==="error"?"alert":"status";return n.jsxs("div",{className:`toastItem toastItem--${p.tone}${p.closing?" toastItem--closing":""}`,role:m,children:[n.jsx("div",{className:"toastItem__message",children:p.message}),n.jsx("button",{type:"button",className:"toastItem__close","aria-label":"",onClick:()=>u(p.id),children:""})]},p.id)})})]})}function Dm(){const s=h.useContext(Oy);if(!s)throw new Error("useToast must be used within <ToastProvider>.");return s}function Jw(s){return s.startsWith("http://")||s.startsWith("https://")}function eS(s,a){if(Jw(a))return a;const l=s.endsWith("/")?s.slice(0,-1):s,o=a.startsWith("/")?a:`/${a}`;return`${l}${o}`}async function Ls(s){const{toast:a,telegramUserId:l,text:o,tone:u="info"}=s;if(a(o,u),!!l)try{const p=eS("/api","/notify"),m=Xt.getToken();await fetch(p,{method:"POST",headers:{"Content-Type":"application/json",...m?{Authorization:`Bearer ${m}`}:null},body:JSON.stringify({telegramUserId:l,text:o})})}catch{}}function wr(s,a){return s?`${s} ${a??""}`.trim():null}function tS(s,a){return s==="draft"?a("task.status.draft"):s==="open"?a("task.status.open"):s==="waiting"?a("task.status.waiting"):s==="in_progress"?a("task.status.inProgress"):s==="review"?a("task.status.review"):s==="dispute"?a("task.status.dispute"):s==="closed"?a("task.status.closed"):s==="archived"?a("task.status.archived"):s.replace("_"," ")}function dl(s){if(!s)return[];const a=Array.isArray(s.deliverables)?s.deliverables:null;if(a&&a.length){const l=[];for(const o of a){const u=(o?.platform??"").trim(),f=typeof o?.quantity=="number"&&Number.isFinite(o.quantity)?Math.floor(o.quantity):1,p=Math.max(1,Math.min(50,f));if(u)for(let m=1;m<=p;m++)l.push(p>1?`${u} #${m}`:u)}return l.length?l:yx(s.category)}return yx(s.category)}function yx(s){const a=(s??"").trim();if(!a)return[];const l=a.split(",").map(p=>p.trim()).filter(Boolean),o=l.length>1?l:a.includes(" / ")?a.split(" / ").map(p=>p.trim()).filter(Boolean):l,u=[],f=new Set;for(const p of o){const m=p.toLowerCase();f.has(m)||(f.add(m),u.push(p))}return u}function sS(s,a){const l=(s||"description.txt").trim()||"description.txt",o=new Blob([a],{type:"text/plain;charset=utf-8"}),u=URL.createObjectURL(o),f=document.createElement("a");f.href=u,f.download=l,f.rel="noreferrer",f.click(),window.setTimeout(()=>URL.revokeObjectURL(u),0)}function bx(s,a){const l=(s||"file").trim()||"file",o=URL.createObjectURL(a),u=document.createElement("a");u.href=o,u.download=l,u.rel="noreferrer",u.click(),window.setTimeout(()=>URL.revokeObjectURL(o),0)}function oc(s){const a=s.platforms.length?s.platforms:[""],l=new Map;for(const u of s.existingLinks??[])!u?.platform||!u?.url||l.set(u.platform.toLowerCase(),u.url);const o=s.fallbackUrl?.trim()||"";return a.map((u,f)=>{const p=u.trim().toLowerCase(),v=(p?l.get(p):void 0)??(!l.size&&f===0?o:u?"":o);return{platform:u,url:v}})}function aS(){const{t:s,locale:a}=lt(),l=Ut(),o=Dm(),u=l.user?.telegramUserId??null,f=(P,je)=>o.showToast({message:P,tone:je}),p=ai(),m=Qt(),v=ts(),x=!!v.state?.fromCreateDraft,y=v.state?.backTo&&typeof v.state.backTo=="string"?v.state.backTo:null,b=!!(y&&y.includes("tab=executor_completed")),{taskId:N}=si(),j=qs(),C=vs(),k=N?C.find(P=>P.id===N)??null:null,[D,F]=h.useState(null),[q,B]=h.useState(!1),[ae,W]=h.useState(null),[X,E]=h.useState(()=>Date.now()),[A,O]=h.useState(""),[le,se]=h.useState(!1),be=Nl(),Se=ya(),Ce=Ic(),ge=jl(),L=Ti(),U=l.user,ce=(k?.executorMode??"blogger_ad")!=="customer_post",Q=(k?.executorMode??null)==="customer_post",de=h.useMemo(()=>ce?dl(k):[],[ce,k]),w=h.useMemo(()=>{const P=k?.reference;return P?P.kind==="video"?[{blobId:P.blobId,name:P.name,mimeType:P.mimeType}]:P.kind==="videos"?(P.videos??[]).map(je=>({blobId:je.blobId,name:je.name,mimeType:je.mimeType})):[]:[]},[k?.reference]),V=ae?.blobId??null;h.useEffect(()=>{let P=!1,je=null;F(null);const _e=ae;if(_e)return(async()=>{const Xe=await Er(_e.blobId);P||Xe&&(je=URL.createObjectURL(Xe),F(je))})(),()=>{P=!0,je&&URL.revokeObjectURL(je)}},[V]),h.useEffect(()=>{if(!q)return;const P=je=>{je.key==="Escape"&&B(!1)};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[q]),h.useEffect(()=>{w.length||B(!1)},[w.length]);const[G,ie]=h.useState(()=>ce?oc({platforms:de,existingLinks:k?.completionLinks,fallbackUrl:k?.completionVideoUrl}):[]),[ee,M]=h.useState(null),[S,ue]=h.useState(null),[ye,Ne]=h.useState(""),[Ee,Be]=h.useState(!1),[T,H]=h.useState(!1),[ke,we]=h.useState(!1),[$,De]=h.useState(!1),[Ye,Ge]=h.useState(!1),[fe,Re]=h.useState(!1),[st,mt]=h.useState(!1),[Es,$t]=h.useState(!1),[ne,Ie]=h.useState(null),[$e,rt]=h.useState(null),[Ve,_t]=h.useState(null),[Mt,gt]=h.useState(null),[os,qt]=h.useState(null),[ba,Ca]=h.useState(null),Da=h.useMemo(()=>k?be.filter(P=>P.taskId===k.id):[],[be,k]),ka=h.useMemo(()=>k?L.filter(P=>P.taskId===k.id):[],[L,k]),Za=h.useMemo(()=>ka.filter(P=>P.status==="pause_requested"),[ka]),Cs=h.useMemo(()=>U&&k?be.find(P=>P.taskId===k.id&&P.executorUserId===U.id)??null:null,[be,U,k]),Ss=P=>{Ie(P),$t(!0)};h.useEffect(()=>{if(!N||!k)return;ie(ce?oc({platforms:dl(k),existingLinks:k.completionLinks,fallbackUrl:k.completionVideoUrl}):[]),M(null),ue(null),Be(!1),H(!1),we(!1),Ge(!1);const P=l.user?.id??"demo-user";Ey(N,{title:k.title,shortDescription:k.shortDescription,...k.requirements?{requirements:k.requirements}:{},description:k.description},P)},[ce,N,a,k,l.user?.id]),h.useEffect(()=>{const P=window.setInterval(()=>E(Date.now()),3e4);return()=>window.clearInterval(P)},[]),h.useEffect(()=>{if(!Ve)return;const P=je=>{je.key==="Escape"&&_t(null)};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[Ve]),h.useEffect(()=>{if(!Mt)return;const P=je=>{je.key==="Escape"&&gt(null)};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[Mt]),h.useEffect(()=>{if(!Ye)return;const P=je=>{je.key==="Escape"&&Ge(!1)};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[Ye]);const _a=()=>{if(x&&k?.status==="draft"&&l.user?.role==="customer"&&l.user.id===k.createdByUserId){m(K.taskCreate,{state:{draft:k}});return}const P=v.state?.backTo&&typeof v.state.backTo=="string"?v.state.backTo:null;if(P){m(P);return}if(!!v.state?.fromProfileBack){m(K.tasks);return}m(-1)};if(!k)return n.jsx("main",{className:"taskDetails",children:n.jsx("div",{className:"taskDetailsContainer",children:n.jsxs("div",{className:"taskDetailsContentWrap",children:[n.jsxs("button",{type:"button",className:"taskDetailsBack taskDetailsBack--outside",onClick:_a,"aria-label":s("task.details.backToTasks"),children:[n.jsx("span",{className:"taskDetailsBack__icon",children:""}),n.jsx("span",{className:"taskDetailsBack__text",children:s("task.details.back")})]}),n.jsx("div",{className:"taskDetailsContent",children:n.jsx("div",{className:"taskDetailsHeader",children:n.jsx("h1",{className:"taskDetailsTitle",children:s("task.details.notFound")})})})]})})});const pt=N,wl=ml.activeForceMajeureForTask(pt,X),Ja=Os(k.expiresAt,X)===0,Ra=k.assignedExecutorIds.length,cs=k.maxExecutors??1,ni=Ra<cs,ot=l.user?.role==="executor"&&k.assignedExecutorIds.includes(l.user.id),ia=!!Cs,Ma=G.every(P=>P.url.trim().length>0),ct=h.useMemo(()=>!k||!U||U.role!=="executor"?null:Se.find(P=>P.taskId===k.id&&P.executorId===U.id)??null,[Se,U,k]),et=h.useMemo(()=>!k||!U||U.role!=="executor"?null:L.find(P=>P.taskId===k.id&&P.executorId===U.id)??null,[L,U,k]),Ua=h.useMemo(()=>ct?Ot.getForContract(ct.id):null,[ge,ct]),la=h.useMemo(()=>!U||U.role!=="executor"||!ct?!1:ct.status==="approved"||ct.status==="resolved"||ct.status==="disputed"&&(Ua?.status==="decided"||Ua?.status==="closed"),[U,ct,Ua?.status]);h.useEffect(()=>{st&&(la||mt(!1))},[la,st]),h.useEffect(()=>{!U||U.role!=="executor"||k&&ot&&ct?.status==="revision_requested"&&et?.status==="submitted"&&Ke.resumeAfterRevisionRequest(k.id,U.id)},[U,ot,et?.status,ct?.status,k]);const ra=h.useMemo(()=>ct?.status==="revision_requested"&&et?.status==="submitted"?"in_progress":et?.status??null,[et?.status,ct?.status]),Ft=U?.role==="executor"&&ot&&(ct?ct.status==="submitted":et?.status==="submitted"),Wt=h.useMemo(()=>k?L.filter(P=>P.taskId===k.id&&P.status==="overdue"):[],[L,k]);h.useEffect(()=>{k&&(!U||U.role!=="executor"||ot&&k.createdByUserId&&(ct||He.createActive({taskId:k.id,clientId:k.createdByUserId,executorId:U.id,escrowAmount:k.budgetAmount??0,revisionIncluded:2})))},[U,ot,ct,k]),h.useEffect(()=>{k&&(!U||U.role!=="executor"||ot&&(et||Ke.createPendingStart({taskId:k.id,executorId:U.id,assignedAt:k.takenAt??ct?.createdAt})))},[U,ot,et,ct?.createdAt,k]);const Ds=l.user?.role==="executor"&&!!ct&&(ct?.status==="active"||ct?.status==="revision_requested")&&ot&&!!et?.startedAt&&(ra==="in_progress"||ra==="overdue")&&!Ja,ii=p.enabled&&l.user?.role==="executor"&&ot&&!!k.createdByUserId&&!!et&&(et?.status==="pending_start"||et?.status==="in_progress"||et?.status==="overdue"),Sl=l.user?.role==="executor"&&ni&&!ot&&(k.status==="open"||k.status==="in_progress"||k.status==="review"||k.status==="dispute")&&!Ja&&!ia&&!!l.user?.id,Ba=l.user?.role==="executor"&&l.user?.id?wn.canRespond(l.user.id,X):{ok:!0,reason:null,until:null},oe=!(Ds&&(Q?!!S:Ma)&&Ee),me=l.user?.role==="customer"&&k.createdByUserId===l.user.id,Ae=me&&Wt.length>0&&k.status==="in_progress",at=p.enabled,Le=(me||at)&&k.status==="open"&&Ra===0,Te=me&&k.status==="open"&&Ra===0&&Da.length===0,nt=y??K.customerTasks,it=me&&!Ja,Vt=h.useMemo(()=>!l.user||l.user.role!=="customer"?!1:Se.some(P=>P.taskId===pt&&P.clientId===l.user.id&&(P.status==="submitted"||P.status==="disputed")),[l.user,Se,pt]),Na=P=>{const je=yt.getById(P);if(!je)return;const _e=He.listForTask(P),Xe=_e.some(gs=>gs.status==="disputed"),Ze=_e.some(gs=>gs.status==="submitted"),Zt=_e.some(gs=>gs.status==="active"||gs.status==="revision_requested"),St=_e.length>0&&_e.every(gs=>gs.status==="approved"||gs.status==="resolved"||gs.status==="cancelled"),Yt=je.assignedExecutorIds.length,Ks=je.maxExecutors??1,en=!(Yt<Ks)&&St,Oa=en?"closed":Xe?"dispute":Ze?"review":Zt||Yt>0?"in_progress":"open";yt.update(P,gs=>({...gs,status:Oa,completedAt:en?new Date().toISOString():gs.completedAt}))},Ei=P=>{const je=Se.find(_e=>_e.id===P)??null;if(je&&!(!l.user||l.user.role!=="customer")){rs.post(`/contracts/${je.id}/approve`,{}).catch(()=>{}),Ls({toast:f,telegramUserId:u,text:s("toast.workApproved"),tone:"success"});return}},Al=(P,je)=>{const _e=Se.find(Zt=>Zt.id===P)??null;if(!_e||!l.user||l.user.role!=="customer")return;const Xe=_e.revisionIncluded??0,Ze=_e.revisionUsed??0;if(!(Xe<=0)&&!(Ze>=Xe)){rs.post(`/contracts/${_e.id}/revision`,{message:je}).catch(()=>{}),Ls({toast:f,telegramUserId:u,text:s("toast.revisionRequested"),tone:"info"});return}},li=(P,je)=>{if(!it||!l.user||l.user.role!=="customer"||!k.createdByUserId||k.createdByUserId!==l.user.id||!ni)return;const _e=Da.find(Xe=>Xe.id===P)??null;if(!(!_e||_e.status!=="pending")&&!k.assignedExecutorIds.includes(_e.executorUserId)){rs.post(`/applications/${P}/select`,{}).catch(()=>{}),Ls({toast:f,telegramUserId:u,text:s("toast.executorAssigned"),tone:"success"});return}},Gs=P=>{me&&(js.reject(P),Ls({toast:f,telegramUserId:u,text:s("toast.applicationRejected"),tone:"info"}))},In=()=>{me&&k.status==="draft"&&(rs.post(`/tasks/${pt}/publish`,{}).catch(()=>{}),Ls({toast:f,telegramUserId:u,text:s("toast.taskPublished"),tone:"success"}))},La=me&&k.status==="draft",Rs=La||Te||Le||p.enabled,Pt=k.createdByUserId?j.find(P=>P.id===k.createdByUserId)??null:null,Tl=()=>{if(et?.status==="paused"||et?.status==="pause_requested")return alert(a==="ru"?"  ,   .     .":"You cannot submit while the task is paused. End the pause and continue."),null;if(!Ee)return H(!0),M(a==="ru"?"       ( ),   .":"Please confirm the copyright waiver checkbox to submit your work."),null;if(!ct)return;const P=k.createdByUserId;if(Q)return S?{files:[{kind:"upload",url:`idb:${S.blobId}`,title:S.name,mediaType:"video"}],firstUrl:"",recipientUserId:P,taskCompletionLinks:void 0}:(M(s("task.completionUpload.required")),null);if(ce){const je=G.filter(St=>!St.url.trim()).map(St=>St.platform).filter(Boolean);if(je.length>0)return M(a==="ru"?`  : ${je.join(", ")}`:`Add link for: ${je.join(", ")}`),null;if(G.length===1&&!G[0].url.trim())return M(s("task.completionLink.required")),null;const _e=G.map(St=>({platform:St.platform.trim(),url:St.url.trim()})).filter(St=>St.url.length>0),Xe=_e[0]?.url??"",Ze=_e.map(St=>({kind:"external_url",url:St.url,title:St.platform||void 0,mediaType:"video"})),Zt=_e.filter(St=>St.platform).length?_e.filter(St=>St.platform):void 0;return{files:Ze,firstUrl:Xe,recipientUserId:P,taskCompletionLinks:Zt}}return{files:[],firstUrl:"",recipientUserId:P,taskCompletionLinks:void 0}},Ac=()=>{const P=Tl();if(!P||!ct)return;const{files:je,firstUrl:_e,recipientUserId:Xe,taskCompletionLinks:Ze}=P;rs.post(`/contracts/${ct.id}/submissions`,{message:ye.trim()||void 0,files:je}).catch(()=>{}),Ne(""),ue(null),Be(!1),H(!1),Ge(!1),Ls({toast:f,telegramUserId:u,text:s("toast.submitted"),tone:"success"}),Re(!0)};return n.jsxs("main",{className:"taskDetails",children:[n.jsx("div",{className:"taskDetailsContainer",children:n.jsxs("div",{className:"taskDetailsContentWrap",children:[n.jsxs("button",{type:"button",className:"taskDetailsBack taskDetailsBack--outside",onClick:_a,"aria-label":s("task.details.backToTasks"),children:[n.jsx("span",{className:"taskDetailsBack__icon",children:""}),n.jsx("span",{className:"taskDetailsBack__text",children:s("task.details.back")})]}),n.jsxs("div",{className:"taskDetailsContent",children:[n.jsxs("div",{className:"taskDetailsHeader",children:[n.jsxs("div",{className:"taskDetailsHeaderMain",children:[n.jsx("h1",{className:"taskDetailsTitle",children:ft(k.title,a)}),l.user?.role==="executor"&&wr(k.budgetAmount,k.budgetCurrency)?n.jsxs("div",{className:"taskDetailsPayout","aria-label":`${s("tasks.payout")}: ${wr(k.budgetAmount,k.budgetCurrency)}`,children:[n.jsx("span",{className:"taskDetailsPayout__label",children:s("tasks.payout")}),n.jsx("span",{className:"taskDetailsPayout__amount",children:wr(k.budgetAmount,k.budgetCurrency)})]}):null,!me&&Pt?n.jsxs("div",{className:"taskDetailsHeaderMeta",children:[n.jsx("span",{className:"taskDetailsHeaderMeta__label",children:s("task.meta.postedBy")}),n.jsx(xe,{to:ds(Pt.id),state:{backTo:Oe(pt)},className:"taskDetailsHeaderMeta__link",children:Pt.fullName})]}):null]}),n.jsx(ws,{tone:Ae?"pending":k.status,label:Ae?s("task.status.waiting"):tS(k.status,s)})]}),n.jsxs("div",{className:"taskDetailsMeta",children:[n.jsxs("div",{className:"taskDetailsMeta__section",children:[n.jsx("span",{className:"taskDetailsMeta__label",children:s("tasks.published")}),n.jsx("span",{className:"taskDetailsMeta__value",children:Qa(k.createdAt,a,X)})]}),n.jsxs("div",{className:"taskDetailsMeta__section",children:[n.jsx("span",{className:"taskDetailsMeta__label",children:s("task.meta.assigned")}),n.jsxs("span",{className:"taskDetailsMeta__value",children:[Ra,"/",cs]})]}),k.category?n.jsxs("div",{className:"taskDetailsMeta__section",children:[n.jsx("span",{className:"taskDetailsMeta__label",children:s("task.create.category")}),n.jsx("span",{className:"taskDetailsMeta__value",children:k.category})]}):null,k.location?n.jsxs("div",{className:"taskDetailsMeta__section",children:[n.jsx("span",{className:"taskDetailsMeta__label",children:s("task.create.location")}),n.jsx("span",{className:"taskDetailsMeta__value",children:k.location})]}):null,l.user?.role!=="executor"&&wr(k.budgetAmount,k.budgetCurrency)?n.jsxs("div",{className:"taskDetailsMeta__section",children:[n.jsx("span",{className:"taskDetailsMeta__label",children:s("tasks.budget")}),n.jsx("span",{className:"taskDetailsMeta__value",children:wr(k.budgetAmount,k.budgetCurrency)})]}):null,k.status!=="closed"&&k.dueDate?n.jsxs("div",{className:"taskDetailsMeta__section",children:[n.jsx("span",{className:"taskDetailsMeta__label",children:s("tasks.due")}),n.jsx("span",{className:"taskDetailsMeta__value",children:k.dueDate})]}):null]}),wl?n.jsx("div",{className:"taskDetailsBody",style:{marginTop:6},children:n.jsxs("div",{className:"taskDetailsHint",style:{whiteSpace:"pre-line",opacity:.95},children:[n.jsx("strong",{children:a==="ru"?"- ()":"Force majeure (system)"}),`
`,a==="ru"?"  .  ,   ,   .":"A system event is active. Timers are paused, penalties are disabled, deadlines will be shifted."]})}):null,ot&&l.user?.role==="executor"&&et?n.jsx("div",{className:"taskDetailsBody",style:{marginTop:6},children:et.status==="pending_start"?n.jsxs("div",{className:"taskDetailsHint",style:{whiteSpace:"pre-line",opacity:.95},children:[n.jsx("strong",{children:a==="ru"?" ":"Start work"}),`
`,a==="ru"?"      12     .":"If you do not start within 12 hours, the assignment will be removed.",`
`,a==="ru"?" : ":"Time to start: ",Nn(Os(et.startDeadlineAt,X),a),n.jsx("div",{style:{marginTop:10},children:n.jsx("button",{type:"button",className:"taskDetailsButton taskDetailsButton--primary",onClick:()=>{l.user&&rs.post(`/assignments/${pt}/start`,{}).catch(()=>{})},children:a==="ru"?" ":"Start work"})})]}):et.status==="pause_requested"?n.jsxs("div",{className:"taskDetailsHint",style:{whiteSpace:"pre-line",opacity:.95},children:[n.jsx("strong",{children:a==="ru"?" ":"Pause requested"}),`
`,a==="ru"?"  .":"Waiting for customer decision.",et.pauseAutoAcceptAt?n.jsxs(n.Fragment,{children:[`
`,a==="ru"?"- : ":"Auto-accept in: ",Nn(Os(et.pauseAutoAcceptAt,X),a)]}):null]}):et.status==="paused"?n.jsxs("div",{className:"taskDetailsHint",style:{whiteSpace:"pre-line",opacity:.95},children:[n.jsx("strong",{children:a==="ru"?" ":"Paused"}),et.pausedUntil?n.jsxs(n.Fragment,{children:[`
`,a==="ru"?" : ":"Resumes in: ",Nn(Os(et.pausedUntil,X),a)]}):null,n.jsx("div",{style:{marginTop:10},children:n.jsx("button",{type:"button",className:"taskDetailsButton",onClick:()=>{l.user&&Ke.endPauseEarly(pt,l.user.id)},children:a==="ru"?" ":"End pause"})})]}):et.executionDeadlineAt&&!b?n.jsxs("div",{className:"taskDetailsHint",style:{whiteSpace:"pre-line",opacity:.95},children:[n.jsx("strong",{children:a==="ru"?" ":"Execution timer"}),`
`,et.status==="overdue"?a==="ru"?": .":"Status: overdue.":null,a==="ru"?`
: `:`
Time left: `,Nn(Os(et.executionDeadlineAt,X),a)]}):null}):null,ot&&l.user?.role==="executor"&&et?.status==="in_progress"&&!et.pauseUsed&&et.executionDeadlineAt&&Os(et.executionDeadlineAt,X)>0?n.jsx("div",{className:"taskDetailsBody",style:{marginTop:6},children:n.jsxs("div",{className:"taskDetailsHint",style:{whiteSpace:"pre-line",opacity:.95},children:[n.jsx("strong",{children:a==="ru"?"-":"Force majeure"}),`
`,a==="ru"?"     .  /,     12      .":"You can request one pause before the deadline. Customer can accept/reject; if they do not respond within 12 hours, it will be auto-accepted.",n.jsx("div",{style:{marginTop:10,display:"flex",gap:10,flexWrap:"wrap"},children:n.jsx("button",{type:"button",className:"taskDetailsButton",onClick:()=>{De(!0)},children:a==="ru"?" ":"Request pause"})})]})}):null,n.jsx($w,{open:$,onClose:()=>De(!1),onSubmit:({reasonId:P,durationHours:je,comment:_e})=>{l.user&&k.createdByUserId&&(Ke.requestPause({taskId:pt,executorId:l.user.id,reasonId:P,comment:_e,durationMs:Math.round(je*60*60*1e3)}),Fe.addTaskPauseRequested({recipientUserId:k.createdByUserId,actorUserId:l.user.id,taskId:pt,message:_e||void 0}),Ls({toast:f,telegramUserId:u,text:s("toast.pauseRequested"),tone:"success"}),De(!1))}}),n.jsxs("div",{className:"taskDetailsBody",children:[n.jsx("h2",{className:"taskDetailsSection__title",children:s("task.details.description")}),n.jsx("p",{className:"taskDetailsDescription",children:ft(k.description,a)}),(k.descriptionFiles?.length?k.descriptionFiles:k.descriptionFile?[k.descriptionFile]:[]).length?n.jsx("div",{style:{marginTop:10,display:"flex",flexDirection:"column",gap:6},children:(k.descriptionFiles?.length?k.descriptionFiles:k.descriptionFile?[k.descriptionFile]:[]).map((P,je)=>n.jsx("button",{type:"button",className:"linkBtn",onClick:()=>sS(P.name,P.text),children:a==="ru"?` : ${P.name}`:`Download file: ${P.name}`},`${P.name}-${je}`))}):null]}),k.reference?n.jsxs("div",{className:"taskDetailsBody",children:[n.jsx("h2",{className:"taskDetailsSection__title",children:a==="ru"?"":"Reference"}),k.reference.kind==="url"?n.jsx("a",{className:"linkBtn",href:k.reference.url,target:"_blank",rel:"noreferrer",children:a==="ru"?" ":"Open link"}):null,w.length?w.map(P=>{const je=ae?.blobId===P.blobId,_e=!!D&&je;return n.jsxs("div",{className:"referenceVideoCompact",style:{marginTop:10},children:[n.jsxs("div",{className:"referenceVideoCompact__meta",children:[n.jsx("div",{className:"referenceVideoCompact__kicker",children:a==="ru"?"":"Video file"}),n.jsx("div",{className:"referenceVideoCompact__name",title:P.name,children:P.name})]}),n.jsxs("div",{className:"referenceVideoCompact__actions",children:[n.jsx("button",{type:"button",className:"linkBtn",onClick:()=>{W({blobId:P.blobId,name:P.name}),B(!0)},children:a==="ru"?"":"Preview"}),n.jsx("button",{type:"button",className:"linkBtn",onClick:()=>{(async()=>{const Xe=await Er(P.blobId);Xe&&bx(P.name,Xe)})()},children:a==="ru"?"":"Download"})]}),ae?.blobId===P.blobId&&!_e?n.jsx("div",{className:"referenceVideoCompact__hint",children:a==="ru"?"    (    ).  ,    .":"Video preview is unavailable (not found in browser storage). You can try downloading if it still exists."}):null]},P.blobId)}):null]}):null,q&&ae&&D?n.jsx("div",{className:"referenceVideoOverlay",role:"dialog","aria-modal":"true","aria-label":a==="ru"?" ":"Reference preview",onClick:()=>B(!1),children:n.jsxs("div",{className:"referenceVideoModal",onClick:P=>P.stopPropagation(),children:[n.jsxs("div",{className:"referenceVideoModal__top",children:[n.jsx("div",{className:"referenceVideoModal__title",title:ae.name,children:ae.name}),n.jsx("button",{type:"button",className:"referenceVideoModal__close",onClick:()=>B(!1),"aria-label":a==="ru"?"":"Close",children:""})]}),n.jsx("video",{className:"referenceVideoModal__player",controls:!0,autoPlay:!0,src:D})]})}):null,k.requirements?n.jsxs("div",{className:"taskDetailsBody",children:[n.jsx("h2",{className:"taskDetailsSection__title",children:a==="ru"?"":"Requirements"}),n.jsx("p",{className:"taskDetailsDescription",style:{whiteSpace:"pre-line"},children:ft(k.requirements,a)})]}):null,Ft?n.jsxs("div",{className:"taskDetailsNotice",children:[n.jsx("strong",{className:"taskDetailsNotice__title",children:a==="ru"?"  ":"Submitted for review"}),n.jsx("div",{className:"taskDetailsNotice__text",children:a==="ru"?"  .      .        .":"Your work was sent to the client. They will either approve it or request a revision. You will get a notification once a decision is made."})]}):null,Ds?n.jsxs("div",{className:"taskDetailsSection",children:[n.jsx("h2",{className:"taskDetailsSection__title",children:s("task.actions.complete")}),n.jsxs("div",{className:"taskDetailsForm",children:[ii&&ce?n.jsx("button",{type:"button",className:"taskDetailsButton",onClick:()=>{if(!l.user||!k.createdByUserId)return;Ke.getForTaskExecutor(pt,l.user.id)||Ke.createPendingStart({taskId:pt,executorId:l.user.id}),Ke.getForTaskExecutor(pt,l.user.id)?.status==="pending_start"&&Ke.startWork(pt,l.user.id);const Xe=He.getForTaskExecutor(pt,l.user.id)??He.createActive({taskId:pt,clientId:k.createdByUserId,executorId:l.user.id,escrowAmount:k.budgetAmount??0,revisionIncluded:2}),Ze="https://example.com/demo.mp4",Zt=a==="ru"?"  ().":"Demo submission (autofill).",St=_c.create({contractId:Xe.id,message:Zt,files:oc({platforms:dl(k),existingLinks:void 0,fallbackUrl:Ze}).map(Yt=>({platform:Yt.platform,url:Ze})).map(Yt=>({kind:"external_url",url:Yt.url,title:Yt.platform||void 0,mediaType:"video"}))});He.setStatus(Xe.id,"submitted"),He.setLastSubmission(Xe.id,St.id),Ke.markSubmitted(pt,l.user.id),yt.update(pt,Yt=>({...Yt,status:"review",reviewSubmittedAt:new Date().toISOString(),completionVideoUrl:Ze,completionLinks:dl(k).length?dl(k).map(Ks=>({platform:Ks,url:Ze})):void 0})),Fe.addTaskSubmitted({recipientUserId:k.createdByUserId,actorUserId:l.user.id,taskId:pt,completionVideoUrl:Ze}),ie(oc({platforms:dl(k),existingLinks:void 0,fallbackUrl:Ze}).map(Yt=>({...Yt,url:Ze}))),Ne(Zt),M(null),Re(!0)},title:a==="ru"?"Dev:   ":"Dev: autofill and submit",children:a==="ru"?": ":"Dev: auto submit"}):null,ct?.status==="revision_requested"?n.jsxs("div",{className:"taskDetailsHint",style:{marginBottom:10,whiteSpace:"pre-line",opacity:.95},children:[n.jsx("strong",{children:a==="ru"?"":"Revision"}),ct.lastRevisionMessage?n.jsxs(n.Fragment,{children:[`
`,ct.lastRevisionMessage]}):n.jsxs(n.Fragment,{children:[`
`,a==="ru"?"  .           .":"Client requested a revision. No details provided  add questions in your resubmission message."]})]}):null,n.jsxs("label",{className:"taskDetailsField",children:[n.jsx("span",{className:"taskDetailsField__label",children:a==="ru"?"":"Message"}),n.jsx("textarea",{className:"taskDetailsField__textarea",value:ye,onChange:P=>Ne(P.target.value),placeholder:a==="ru"?":  ,  ,  ":"What you delivered, where to check it, notes",rows:3})]}),ce?G.map((P,je)=>n.jsxs("label",{className:"taskDetailsField",children:[n.jsxs("span",{className:"taskDetailsField__label",children:[s("task.completionLink"),P.platform?`  ${P.platform}`:""]}),n.jsx("input",{className:"taskDetailsField__input",value:P.url,onChange:_e=>{const Xe=_e.target.value;ie(Ze=>Ze.map((Zt,St)=>St===je?{...Zt,url:Xe}:Zt)),M(null)},placeholder:"https://",autoComplete:"off"})]},`${P.platform||"link"}-${je}`)):Q?n.jsxs("label",{className:"taskDetailsField",children:[n.jsx("span",{className:"taskDetailsField__label",children:s("task.completionUpload")}),n.jsx("input",{className:"taskDetailsField__input",type:"file",accept:"video/*",onChange:P=>{const je=P.target.files?.[0]??null;if(!je)return;const _e=(je.type??"").trim();if(!_e.startsWith("video/")){M(s("task.completionUpload.invalid")),P.currentTarget.value="";return}const Xe=ze("blob");My(Xe,je).then(()=>{ue({blobId:Xe,name:je.name||"video",mimeType:_e}),M(null)})}}),S?n.jsxs("div",{style:{marginTop:8,display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[n.jsxs("span",{style:{opacity:.9},children:[a==="ru"?":":"File:"," ",n.jsx("strong",{children:S.name})]}),n.jsx("button",{type:"button",className:"taskDetailsButton",onClick:()=>ue(null),children:a==="ru"?"":"Remove"})]}):null]}):null,n.jsxs("div",{className:"taskDetailsCopyright",children:[n.jsx("div",{className:"taskDetailsCopyright__header",children:n.jsx("span",{className:"taskDetailsCopyright__title",children:n.jsx(Ws,{triggerLabel:n.jsx("span",{className:"taskDetailsField__label",children:a==="ru"?" ":"Copyright"}),open:ke,onToggle:()=>we(P=>!P),onClose:()=>we(!1),ariaLabel:a==="ru"?":      ":"Help: copyright waiver",content:a==="ru"?["  ,  ,                   / (, DMCA)   .","","   :","-       (,   /,   ,    /).","",":","-  ,          ,    (, ,  /  ..).","-                   .","","     (,     ,     ..)        ."].join(`
`):["By checking this box, you confirm that you will not raise copyright claims against the client or the platform regarding the delivered work, and you will not file takedowns/strikes (e.g., DMCA) due to the client using it.","","What it allows the client to do:","- use the deliverable within the scope of the task (publish it, show it in portfolio/social media, use it in advertising, and edit/adapt it if needed).","","Important:","- you confirm you have the necessary rights/permissions for all included materials (music, fonts, stock footage/photos, etc.).","- this does not affect payment or task terms  it only covers usage rights for the deliverable.","","If you need different terms (e.g., no public posting until a date, mandatory credit, etc.), agree them with the client before submitting."].join(`
`)})})}),n.jsxs("label",{className:"taskDetailsCopyright__check",children:[n.jsx("input",{className:"taskDetailsCopyright__checkbox",type:"checkbox",checked:Ee,onChange:P=>{const je=P.target.checked;Be(je),je&&M(null)},onBlur:()=>H(!0)}),n.jsx("span",{className:"taskDetailsCopyright__text",children:a==="ru"?"       ,  .":"I waive copyright claims to the deliverable provided to the client."})]}),!Ee&&T?n.jsx("div",{className:"taskDetailsError",style:{marginTop:6},children:a==="ru"?"  ,   .":"To submit, please confirm this item."}):null]}),ee?n.jsx("div",{className:"taskDetailsError",children:ee}):null,n.jsx("button",{type:"button",className:"taskDetailsButton taskDetailsButton--primary",onClick:()=>{H(!0),Tl()&&Ge(!0)},disabled:oe,children:s("task.actions.complete")})]})]}):null,me&&Za.length>0?n.jsx("div",{className:"taskDetailsSection",children:Za.map(P=>{const je=j.find(Xe=>Xe.id===P.executorId)??null,_e=P.pauseReasonId==="illness"?a==="ru"?"":"Illness":P.pauseReasonId==="family"?a==="ru"?" ":"Family":P.pauseReasonId==="force_majeure"?a==="ru"?"-":"Force majeure":null;return n.jsxs("div",{className:"taskDetailsApplication",children:[n.jsxs("div",{className:"taskDetailsApplication__header",children:[n.jsxs("div",{className:"taskDetailsApplication__who",children:[n.jsx("span",{className:"taskDetailsApplication__avatar","aria-hidden":"true",children:je?.avatarDataUrl?n.jsx("img",{src:je.avatarDataUrl,alt:""}):n.jsx("span",{className:"taskDetailsApplication__avatarFallback",children:(je?.fullName??je?.email??"?").trim().slice(0,1).toUpperCase()})}),n.jsxs("div",{children:[n.jsx("strong",{className:"taskDetailsApplication__name",children:je?.fullName??je?.email??s("notifications.someone")}),n.jsx("span",{className:"taskDetailsApplication__status",children:a==="ru"?" ":"pause requested"})]})]}),n.jsxs("div",{className:"taskDetailsApplication__headerRight",children:[je?n.jsx(xe,{className:"taskDetailsApplication__link",to:ds(je.id),state:{backTo:Oe(pt)},children:s("notifications.viewProfile")}):null,n.jsxs("div",{className:"taskDetailsApplication__actions",children:[n.jsx("button",{type:"button",className:"taskDetailsApplication__actionButton taskDetailsApplication__actionButton--primary",onClick:()=>{l.user&&(Ke.acceptPause(k.id,P.executorId),Fe.addTaskPauseAccepted({recipientUserId:P.executorId,actorUserId:l.user.id,taskId:k.id}),Ls({toast:f,telegramUserId:u,text:s("toast.pauseAccepted"),tone:"success"}))},children:a==="ru"?" ":"Accept pause"}),n.jsx("button",{type:"button",className:"taskDetailsApplication__actionButton",onClick:()=>{l.user&&(Ke.rejectPause(k.id,P.executorId),Fe.addTaskPauseRejected({recipientUserId:P.executorId,actorUserId:l.user.id,taskId:k.id}),Ls({toast:f,telegramUserId:u,text:s("toast.pauseRejected"),tone:"info"}))},children:a==="ru"?"":"Reject"}),n.jsx("button",{type:"button",className:"taskDetailsApplication__actionButton taskDetailsApplication__actionButton--danger",onClick:()=>{if(!confirm(a==="ru"?" ?    .":"Switch executor? Current assignment will be cancelled."))return;Ke.cancelByCustomer(k.id,P.executorId);const Ze=He.getForTaskExecutor(k.id,P.executorId);Ze&&He.setStatus(Ze.id,"cancelled");const Zt=Ys.release(k.id,P.executorId);Zt>0&&k.createdByUserId&&fs.deposit(k.createdByUserId,Zt);const St=js.listForTask(k.id).find(Yt=>Yt.executorUserId===P.executorId);St&&St.status!=="rejected"&&js.reject(St.id),yt.removeExecutor(k.id,P.executorId)},children:a==="ru"?" ":"Switch executor"})]})]})]}),n.jsxs("div",{className:"taskDetailsHint",style:{whiteSpace:"pre-line",opacity:.95,marginTop:8},children:[_e?n.jsxs(n.Fragment,{children:[n.jsxs("strong",{children:[a==="ru"?"":"Reason",":"]})," ",_e,`
`]}):null,P.pauseComment?n.jsxs(n.Fragment,{children:[n.jsxs("strong",{children:[a==="ru"?"":"Comment",":"]})," ",P.pauseComment,`
`]}):null,P.pauseAutoAcceptAt?n.jsxs(n.Fragment,{children:[n.jsxs("strong",{children:[a==="ru"?"- ":"Auto-accept in",":"]})," ",Nn(Os(P.pauseAutoAcceptAt,X),a)]}):null]})]},P.id)})}):null,Sl?n.jsxs("div",{className:"taskDetailsSection",children:[n.jsx("h2",{className:"taskDetailsSection__title",children:s("task.actions.apply")}),n.jsxs("div",{className:"taskDetailsForm",children:[Ba.ok?null:n.jsxs("div",{className:"taskDetailsHint",style:{marginBottom:10,whiteSpace:"pre-line",opacity:.95},children:[n.jsx("strong",{children:a==="ru"?" ":"Applications disabled"}),`
`,(()=>{if(Ba.reason==="banned")return a==="ru"?"  .  .":"Your account is banned. You cannot apply.";if(Ba.reason==="blocked"&&Ba.until){const P=Os(Ba.until,X);return a==="ru"?` . : ${Nn(P,a)}`:`Applications are blocked. Time left: ${Nn(P,a)}`}return null})()]}),n.jsx("textarea",{className:"taskDetailsField__textarea",value:A,onChange:P=>O(P.target.value),placeholder:s("task.application.placeholder"),rows:4}),n.jsx("button",{type:"button",className:"taskDetailsButton taskDetailsButton--primary",disabled:le||!Ba.ok,onClick:()=>{if(!k.createdByUserId||!l.user||!wn.canRespond(l.user.id,Date.now()).ok)return;const P=A.trim();se(!0),rs.post(`/tasks/${pt}/applications`,{message:P||void 0}).catch(()=>{}),O(""),se(!1),Ls({toast:f,telegramUserId:u,text:s("toast.applied"),tone:"success"})},children:s("task.actions.apply")})]})]}):null,me&&(Da.length>0||Wt.length>0||Vt)?n.jsxs("div",{className:"taskDetailsSection",children:[n.jsxs("div",{className:"taskDetailsSectionHeader",children:[n.jsx("h2",{className:"taskDetailsSection__title",children:s("task.applications.title")}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:8,flexWrap:"wrap",justifyContent:"flex-end"},children:[Vt?n.jsx(ws,{tone:"review",label:s("task.status.review")}):null,Wt.length>0?n.jsx(ws,{tone:"overdue",label:s("executor.status.overdue")}):null]})]}),Wt.length>0?n.jsx("div",{className:"taskDetailsHint",style:{whiteSpace:"pre-line",opacity:.95},children:a==="ru"?"    .    .":"Executor missed the execution timer. You can choose another executor."}):null,n.jsx("div",{className:"taskDetailsApplications",children:Da.map(P=>{const je=j.find(We=>We.id===P.executorUserId),_e=Se.find(We=>We.taskId===pt&&We.executorId===P.executorUserId)??null,Xe=ka.find(We=>We.executorId===P.executorUserId)??null,Ze=!!(_e&&(_e.status==="submitted"||_e.status==="disputed")),Zt=_e?ge.find(We=>We.contractId===_e.id)??null:null,St=_e?Ce.filter(We=>We.contractId===_e.id&&We.status==="submitted").slice().sort((We,ss)=>ss.createdAt.localeCompare(We.createdAt))[0]??null:null,Yt=_e?(_e.lastSubmissionId?Ce.find(We=>We.id===_e.lastSubmissionId)??null:null)??St:null,Ks=Yt?.createdAt??_e?.updatedAt??_e?.createdAt??null,ri=Yt?.files.filter(We=>We.kind==="external_url"||We.kind==="upload")??[],en=!!(_e&&Ke.getForTaskExecutor(_e.taskId,_e.executorId)?.startedAt),Oa=_e?.revisionIncluded??0,gs=_e?.revisionUsed??0,Lr=Math.max(0,Oa-gs)>0,Ci=!!(_e&&(_e.status==="approved"||_e.status==="resolved")),Ec=P.status==="selected"?Ci?"task.status.closed":_e?.status==="submitted"||_e?.status==="disputed"?"task.status.review":Xe?.status==="overdue"?"executor.status.overdue":Xe?.status==="paused"?"executor.status.paused":Xe?.startedAt?"executor.status.inWork":"executor.status.approved":P.status==="rejected"?"task.status.closed":"task.status.open",Cc=P.status==="rejected"?"closed":P.status==="selected"?Ci?"closed":_e?.status==="submitted"||_e?.status==="disputed"?"review":Xe?.status==="overdue"?"overdue":Xe?.status==="paused"?"paused":Xe?.startedAt?"in_progress":"open":"open";return n.jsxs("div",{className:`taskDetailsApplication${je?" taskDetailsApplication--clickable":""}${Ze?" taskDetailsApplication--review":""}`,role:je?"link":void 0,tabIndex:je?0:void 0,"aria-label":je?s("notifications.viewProfile"):void 0,onClick:We=>{if(!je)return;const ss=We.target;ss instanceof HTMLElement&&ss.closest('a,button,input,textarea,select,[role="button"]')||m(ds(P.executorUserId),{state:{backTo:Oe(pt)}})},onKeyDown:We=>{je&&(We.key==="Enter"||We.key===" ")&&(We.preventDefault(),m(ds(P.executorUserId),{state:{backTo:Oe(pt)}}))},children:[n.jsxs("div",{className:"taskDetailsApplication__header",children:[n.jsxs("div",{className:"taskDetailsApplication__who",children:[n.jsx("span",{className:"taskDetailsApplication__avatar","aria-hidden":"true",children:je?.avatarDataUrl?n.jsx("img",{src:je.avatarDataUrl,alt:""}):n.jsx("span",{className:"taskDetailsApplication__avatarFallback",children:(je?.fullName??je?.email??"?").trim().slice(0,1).toUpperCase()})}),n.jsxs("div",{children:[n.jsx("strong",{className:"taskDetailsApplication__name",children:je?.fullName??je?.email??s("notifications.someone")}),n.jsx(ws,{tone:Cc,label:s(Ec),className:"taskDetailsApplication__statusPill"})]})]}),n.jsxs("div",{className:"taskDetailsApplication__headerRight",children:[n.jsx(xe,{className:"taskDetailsApplication__link",to:ds(P.executorUserId),state:{backTo:Oe(pt)},children:s("notifications.viewProfile")}),P.status==="selected"&&Xe?.status==="overdue"?n.jsxs("div",{className:"taskDetailsApplication__actions",children:[n.jsx("button",{type:"button",className:"taskDetailsApplication__actionButton taskDetailsApplication__actionButton--primary",onClick:()=>{_t({executorId:P.executorUserId})},children:a==="ru"?"  ":"Choose another executor"}),_e?.status==="revision_requested"&&(_e.revisionUsed??0)>=2?n.jsx("button",{type:"button",className:"taskDetailsApplication__actionButton taskDetailsApplication__actionButton--danger",onClick:()=>gt({executorId:P.executorUserId}),children:a==="ru"?" ":"Open dispute"}):null]}):null,Ze&&_e?n.jsxs("div",{className:"taskDetailsApplication__actions",children:[n.jsx("button",{type:"button",className:"taskDetailsApplication__actionButton taskDetailsApplication__actionButton--primary",onClick:()=>{if(_e.status==="disputed"){Ca({title:a==="ru"?"  ":"Cannot approve",message:a==="ru"?"  ,   .       .":"You cannot approve while the dispute is open. Open the dispute and wait for arbitration."});return}if(!en){Ca({title:a==="ru"?"  ":"Cannot approve",message:a==="ru"?"  ,      .":"Cannot approve unless the executor clicked Start work."});return}Ei(_e.id)},title:_e.status==="disputed"?a==="ru"?"   ":"Unavailable during dispute":en?void 0:a==="ru"?"    ":"Executor did not click Start work",style:_e.status==="disputed"||!en?{opacity:.7}:void 0,children:s("customerReview.approve")}),Lr?n.jsx("button",{type:"button",className:"taskDetailsApplication__actionButton",onClick:()=>qt(_e.id),disabled:_e.status==="disputed",title:_e.status==="disputed"?a==="ru"?"   ":"Unavailable during dispute":void 0,children:s("customerReview.revision")}):null,(_e.revisionUsed??0)>=2?n.jsx("button",{type:"button",className:"taskDetailsApplication__actionButton taskDetailsApplication__actionButton--danger",onClick:()=>{if(!l.user)return;if(_e.status==="disputed"){const ss=Ot.getForContract(_e.id);ss?m(aa(ss.id)):Ca({title:a==="ru"?"":"Dispute",message:a==="ru"?"  ,       .":"The dispute is already open, but it was not found."});return}const We=Ot.open({contractId:_e.id,openedByUserId:l.user.id,reason:{categoryId:"universal",reasonId:"other"}});Fe.addDisputeOpened({recipientUserId:_e.executorId,actorUserId:l.user.id,taskId:_e.taskId,disputeId:We.id}),He.setStatus(_e.id,"disputed"),Ke.openDispute(_e.taskId,_e.executorId),Na(_e.taskId),m(aa(We.id))},title:_e.status==="disputed"?a==="ru"?"  ":"Open dispute":void 0,style:_e.status==="disputed"?{opacity:.85}:void 0,children:_e.status==="disputed"?a==="ru"?"  ":"Open dispute":a==="ru"?"":"Dispute"}):null]}):null,P.status==="pending"?n.jsxs("div",{className:"taskDetailsApplication__actions",children:[n.jsx("button",{type:"button",className:"taskDetailsApplication__actionButton taskDetailsApplication__actionButton--primary",onClick:()=>li(P.id),disabled:!it||!ni,children:s("task.actions.assign")}),n.jsx("button",{type:"button",className:"taskDetailsApplication__actionButton taskDetailsApplication__actionButton--danger",onClick:()=>Gs(P.id),disabled:!it,children:s("task.actions.reject")})]}):null]})]}),P.message?n.jsx("p",{className:"taskDetailsApplication__message",children:P.message}):null,Ze&&Ks?n.jsxs("div",{className:"taskDetailsReviewMeta",children:[n.jsx("div",{className:"taskDetailsReviewMeta__label",children:a==="ru"?"":"Submitted"}),n.jsx("div",{className:"taskDetailsReviewMeta__value",children:new Date(Ks).toLocaleString(a==="ru"?"ru-RU":"en-US")}),Yt?.message?.trim()?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"taskDetailsReviewMeta__label",children:a==="ru"?"":"Message"}),n.jsx("div",{className:"taskDetailsReviewMeta__value taskDetailsReviewMeta__message",children:Yt.message})]}):null,_e?.status==="disputed"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"taskDetailsReviewMeta__label",children:a==="ru"?"":"Dispute"}),n.jsxs("div",{className:"taskDetailsReviewMeta__value",children:[a==="ru"?"":"Opened",Zt?.reason?.reasonId?` (${Zt.reason.reasonId})`:""]})]}):null,ri.length?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"taskDetailsReviewMeta__label",children:ri.some(We=>We.kind==="upload")?s("task.completionDeliverable"):s("task.completionLink")}),n.jsx("div",{className:"taskDetailsReviewMeta__value",children:n.jsx("div",{className:"taskDetailsChips",children:ri.map((We,ss)=>We.kind==="upload"&&We.url.startsWith("idb:")?n.jsxs("button",{type:"button",className:"taskDetailsChip",title:a==="ru"?" ":"Download file",onClick:()=>{const El=We.url.slice(4),Cl=(We.title??"").trim()||"video";(async()=>{const tn=await Er(El);tn&&bx(Cl,tn)})()},children:[" ",We.title?We.title:s("task.completionDeliverable")]},`${We.url}-${ss}`):n.jsxs("a",{href:We.url,target:"_blank",rel:"noreferrer",className:"taskDetailsChip",title:We.url,children:[" ",We.title?We.title:s("task.completionLink")]},`${We.url}-${ss}`))})})]}):null]}):null]},P.id)})})]}):null,Rs?n.jsx("div",{className:`taskDetailsActions${La?" taskDetailsActions--draft":Te?" taskDetailsActions--singleDanger":""}`,children:La?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"taskDetailsButton taskDetailsButton--primary",onClick:In,children:s("task.create.publish")}),x?null:n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"taskDetailsButton",onClick:()=>m(K.taskCreate,{state:{draft:k,backTo:nt}}),children:s("task.details.edit")}),n.jsx("button",{type:"button",className:"taskDetailsButton taskDetailsButton--danger",onClick:()=>{Ss(nt)},children:s("task.actions.delete")})]})]}):Te?n.jsx("button",{type:"button",className:"taskDetailsButton taskDetailsButton--danger",onClick:()=>{Ss(K.customerTasks)},children:s("task.actions.delete")}):n.jsxs(n.Fragment,{children:[Le?n.jsx("button",{type:"button",className:"taskDetailsButton taskDetailsButton--danger",onClick:()=>{Ss(l.user?.role==="customer"?K.customerTasks:K.tasks)},children:s("task.actions.delete")}):null,p.enabled?n.jsx(xe,{className:"taskDetailsButton",to:ay(pt),children:s("task.details.edit")}):null]})}):null]})]})}),Ye?n.jsx("div",{className:"submitDoneOverlay",role:"dialog","aria-modal":"true","aria-label":a==="ru"?"  ":"Confirm submission",onClick:()=>Ge(!1),children:n.jsxs("div",{className:"submitDoneModal",onClick:P=>P.stopPropagation(),children:[n.jsx("h3",{className:"submitDoneModal__title",children:a==="ru"?"  ":"Confirm submission"}),n.jsx("p",{className:"submitDoneModal__text",style:{whiteSpace:"pre-line"},children:a==="ru"?["  ,          ,     (  ).","","           ,     ."].join(`
`):["Before submitting, please confirm that the work is fully completed and matches the task requirements and the clients feedback (if any).","","After submission, you wont be able to change the message or links until the client requests a revision."].join(`
`)}),n.jsxs("div",{className:"submitDoneModal__actions",children:[n.jsx("button",{type:"button",className:"submitDoneModal__primary",onClick:()=>{Ge(!1),Ac()},children:a==="ru"?"   ":"Confirm and send to client"}),n.jsx("button",{type:"button",className:"submitDoneModal__secondary",onClick:()=>Ge(!1),children:a==="ru"?"  ":"Back to editing"})]})]})}):null,fe?n.jsx("div",{className:"submitDoneOverlay",role:"dialog","aria-modal":"true","aria-label":a==="ru"?" ":"Submitted",onClick:()=>Re(!1),children:n.jsxs("div",{className:"submitDoneModal",onClick:P=>P.stopPropagation(),children:[n.jsx("h3",{className:"submitDoneModal__title",children:a==="ru"?" ":"Submitted"}),n.jsx("p",{className:"submitDoneModal__text",children:a==="ru"?"    .          .":"Your work was sent to the client for review. They will approve it or request a revision  you will get a notification."}),n.jsx("div",{className:"submitDoneModal__actions",children:n.jsx("button",{type:"button",className:"submitDoneModal__primary",onClick:()=>Re(!1),children:a==="ru"?"":"OK"})})]})}):null,Es?n.jsx("div",{className:"submitDoneOverlay",role:"dialog","aria-modal":"true","aria-label":s("task.actions.delete"),onClick:()=>$t(!1),children:n.jsxs("div",{className:"submitDoneModal",onClick:P=>P.stopPropagation(),children:[n.jsx("h3",{className:"submitDoneModal__title",children:s("task.actions.delete")}),n.jsx("p",{className:"submitDoneModal__text",children:s("task.actions.deleteConfirm")}),n.jsxs("div",{className:"submitDoneModal__actions",children:[n.jsx("button",{type:"button",className:"submitDoneModal__secondary",onClick:()=>$t(!1),children:s("common.cancel")}),n.jsx("button",{type:"button",className:"submitDoneModal__primary",onClick:()=>{yt.delete(pt),$t(!1),m(ne??(l.user?.role==="customer"?K.customerTasks:K.tasks))},children:s("task.actions.delete")})]})]})}):null,n.jsx(Nc,{open:st,title:a==="ru"?" ":"Rate client",subjectName:Pt?.fullName,onClose:()=>mt(!1),onSubmit:({rating:P,comment:je})=>{if(!(!l.user||l.user.role!=="executor")&&k?.createdByUserId&&ct){if(!la){alert(a==="ru"?"        .":"You cannot rate the customer before the task is approved or the dispute is finished.");return}Zn.upsert({contractId:ct.id,fromUserId:l.user.id,toUserId:k.createdByUserId,rating:P,comment:je}),mt(!1)}}}),n.jsx(Cm,{open:!!$e,count:$e?.count??0,onClose:()=>rt(null),onConfirm:()=>{$e&&li($e.applicationId)}}),Ve?n.jsx("div",{className:"profileModalOverlay",role:"dialog","aria-modal":"true","aria-label":a==="ru"?"":"Confirmation",onClick:()=>_t(null),children:n.jsxs("div",{className:"profileModal",onClick:P=>P.stopPropagation(),style:{width:"min(560px, 100%)"},children:[n.jsxs("div",{className:"profileModalHeader",children:[n.jsx("h2",{className:"profileModalTitle",children:a==="ru"?"  ":"Choose another executor"}),n.jsx("button",{type:"button",className:"profileModalClose",onClick:()=>_t(null),"aria-label":s("common.cancel"),children:""})]}),n.jsx("div",{style:{opacity:.92,lineHeight:1.5},children:a==="ru"?"         ?":"Cancel this assignment and reopen the task to choose another executor?"}),n.jsxs("div",{className:"profileConfirmActions",style:{marginTop:14},children:[n.jsx("button",{type:"button",className:"profileBtn profileBtn--ghost",onClick:()=>_t(null),children:a==="ru"?"":"Cancel"}),n.jsx("button",{type:"button",className:"profileBtn profileBtn--danger",onClick:()=>{if(!k.createdByUserId)return;const P=Ve.executorId;_t(null),Ke.cancelByCustomer(k.id,P);const je=He.getForTaskExecutor(k.id,P);je&&He.setStatus(je.id,"cancelled");const _e=Ys.release(k.id,P);_e>0&&fs.deposit(k.createdByUserId,_e);const Xe=js.listForTask(k.id).find(Ze=>Ze.executorUserId===P);Xe&&Xe.status!=="rejected"&&js.reject(Xe.id),yt.removeExecutor(k.id,P)},children:a==="ru"?"":"Confirm"})]})]})}):null,Mt?n.jsx("div",{className:"profileModalOverlay",role:"dialog","aria-modal":"true","aria-label":a==="ru"?"":"Confirmation",onClick:()=>gt(null),children:n.jsxs("div",{className:"profileModal",onClick:P=>P.stopPropagation(),style:{width:"min(560px, 100%)"},children:[n.jsxs("div",{className:"profileModalHeader",children:[n.jsx("h2",{className:"profileModalTitle",children:a==="ru"?" ":"Open dispute"}),n.jsx("button",{type:"button",className:"profileModalClose",onClick:()=>gt(null),"aria-label":s("common.cancel"),children:""})]}),n.jsx("div",{style:{opacity:.92,lineHeight:1.5},children:a==="ru"?"     ?":"Open a dispute due to missed deadline after a revision request?"}),n.jsxs("div",{className:"profileConfirmActions",style:{marginTop:14},children:[n.jsx("button",{type:"button",className:"profileBtn profileBtn--ghost",onClick:()=>gt(null),children:a==="ru"?"":"Cancel"}),n.jsx("button",{type:"button",className:"profileBtn profileBtn--danger",onClick:()=>{if(!l.user)return;const P=Mt.executorId;gt(null);const je=He.getForTaskExecutor(k.id,P);if(!je||(je.revisionUsed??0)<2)return;if(!_c.listForContract(je.id).some(Ze=>Ze.status==="submitted"&&((Ze.files?.length??0)>0||!!Ze.message?.trim()))){alert(a==="ru"?"      : /   .":"Dispute can be opened only if there was activity (files/message) and the task is overdue.");return}Ot.open({contractId:je.id,openedByUserId:l.user.id,reason:{categoryId:"quality",reasonId:"miss_deadline"}});const Xe=Ot.getForContract(je.id);Xe&&(Fe.addDisputeOpened({recipientUserId:P,actorUserId:l.user.id,taskId:k.id,disputeId:Xe.id}),m(aa(Xe.id))),He.setStatus(je.id,"disputed"),Ke.openDispute(k.id,P),Na(k.id)},children:a==="ru"?"":"Open"})]})]})}):null,ba?n.jsx("div",{className:"profileModalOverlay",role:"dialog","aria-modal":"true","aria-label":ba.title,onClick:()=>Ca(null),children:n.jsxs("div",{className:"profileModal",onClick:P=>P.stopPropagation(),style:{width:"min(560px, 100%)"},children:[n.jsxs("div",{className:"profileModalHeader",children:[n.jsx("h2",{className:"profileModalTitle",children:ba.title}),n.jsx("button",{type:"button",className:"profileModalClose",onClick:()=>Ca(null),"aria-label":s("common.cancel"),children:""})]}),n.jsx("div",{style:{opacity:.92,lineHeight:1.5},children:ba.message}),n.jsx("div",{className:"profileConfirmActions",style:{marginTop:14},children:n.jsx("button",{type:"button",className:"profileBtn",onClick:()=>Ca(null),children:a==="ru"?"":"OK"})})]})}):null,n.jsx(Ly,{open:!!os,executorName:(()=>{const P=os?He.getById(os):null;return(P?j.find(_e=>_e.id===P.executorId)??null:null)?.fullName})(),onClose:()=>qt(null),onSubmit:P=>{os&&(Al(os,P),qt(null))}})]})}const nS=2,Jf=8,iS=5,em=25,lS=5,tm=120,rS=15,sm=200;function Jn(s){const a=s.trim();if(!a)return 0;try{return(a.match(new RegExp("\\p{L}[\\p{L}\\p{N}'-]*","gu"))??[]).length}catch{return a.split(/\s+/).filter(Boolean).length}}function oS(s,a){const l={},o=s.title.trim(),u=s.shortDescription.trim(),f=s.requirements.trim(),p=s.description.trim();if(!o)l.title=a("validation.taskTitleRequired");else{const x=Jn(o);(x<nS||x>Jf)&&(l.title=a("validation.taskTitleLength"))}if(!u)l.shortDescription=a("validation.taskShortRequired");else{const x=Jn(u);(x<iS||x>em)&&(l.shortDescription=a("validation.taskShortLength"))}if(!f)l.requirements=kx(a,"validation.taskRequirementsRequired","Requirements are required");else{const x=Jn(f);(x<lS||x>tm)&&(l.requirements=kx(a,"validation.taskRequirementsLength","Requirements length is invalid"))}if(!p)l.description=a("validation.taskFullRequired");else{const x=Jn(p);(x<rS||x>sm)&&(l.description=a("validation.taskFullLength"))}const m=s.maxExecutors.trim(),v=m?Number(m):NaN;return m?(!Number.isFinite(v)||!Number.isInteger(v)||v<1||v>10)&&(l.maxExecutors=a("validation.maxExecutorsRange")):l.maxExecutors=a("validation.maxExecutorsRequired"),l}function kx(s,a,l){const o=s(a);return o===a?l:o}function cS(){const{t:s,locale:a}=lt(),l=Qt(),{taskId:o}=si(),u=h.useMemo(()=>o?yt.getById(o):null,[o]),[f,p]=h.useState(()=>({title:u?.title[a]??"",shortDescription:u?.shortDescription[a]??"",requirements:u?.requirements?.[a]??"",description:u?.description[a]??"",category:u?.category??"",location:u?.location??"",budgetAmount:u?.budgetAmount?String(u.budgetAmount):"",budgetCurrency:u?.budgetCurrency??"USD",maxExecutors:String(u?.maxExecutors??1)})),[m,v]=h.useState({}),[x,y]=h.useState(!1),b=h.useMemo(()=>oS(f,s),[f,s]),N=Object.keys(b).length===0,j=x?b:Object.fromEntries(Object.entries(b).filter(([W])=>m[W]));if(!o||!u)return n.jsxs("main",{style:{padding:24},children:[n.jsx("h1",{children:s("task.details.notFound")}),n.jsx("p",{children:n.jsx(xe,{to:K.tasks,children:s("task.details.backToTasks")})})]});const C=o,k=Jn(f.title),D=Jn(f.shortDescription),F=Jn(f.requirements),q=Jn(f.description);function B(W,X){p(E=>({...E,[W]:X}))}function ae(W){if(W.preventDefault(),y(!0),!N)return;const X=Math.floor(Number(f.maxExecutors));yt.update(C,E=>({...E,title:{...E.title,[a]:f.title.trim()},shortDescription:{...E.shortDescription,[a]:f.shortDescription.trim()},requirements:{...E.requirements??{en:"",ru:""},[a]:f.requirements.trim()},description:{...E.description,[a]:f.description.trim()},category:f.category.trim()||void 0,location:f.location.trim()||void 0,budgetAmount:f.budgetAmount.trim()?Number(f.budgetAmount):void 0,budgetCurrency:f.budgetCurrency.trim()||void 0,maxExecutors:X})),l(Oe(C))}return n.jsx("div",{className:"editTaskPage",children:n.jsxs("div",{className:"editTaskCard",children:[n.jsx("h1",{className:"editTaskTitle",children:s("task.edit.title")}),n.jsxs("form",{onSubmit:ae,children:[n.jsxs("label",{className:"field",children:[n.jsxs("span",{className:"field__labelRow",children:[n.jsx("span",{className:"field__label",children:s("task.create.titleField")}),n.jsxs("span",{className:`field__counter ${k>=Jf?"field__counter--danger":""}`,children:[k,"/",Jf]})]}),n.jsx("input",{className:"field__input",value:f.title,onChange:W=>B("title",W.target.value),onBlur:()=>v(W=>({...W,title:!0}))}),j.title?n.jsx("span",{className:"field__error",children:j.title}):null]}),n.jsxs("label",{className:"field",children:[n.jsxs("span",{className:"field__labelRow",children:[n.jsx("span",{className:"field__label",children:s("task.create.shortDescription")}),n.jsxs("span",{className:`field__counter ${D>=em?"field__counter--danger":""}`,children:[D,"/",em]})]}),n.jsx("textarea",{className:"field__textarea",value:f.shortDescription,onChange:W=>B("shortDescription",W.target.value),onBlur:()=>v(W=>({...W,shortDescription:!0}))}),j.shortDescription?n.jsx("span",{className:"field__error",children:j.shortDescription}):null]}),n.jsxs("label",{className:"field",children:[n.jsxs("span",{className:"field__labelRow",children:[n.jsx("span",{className:"field__label",children:a==="ru"?"":"Requirements"}),n.jsxs("span",{className:`field__counter ${F>=tm?"field__counter--danger":""}`,children:[F,"/",tm]})]}),n.jsx("textarea",{className:"field__textarea",value:f.requirements,onChange:W=>B("requirements",W.target.value),onBlur:()=>v(W=>({...W,requirements:!0})),rows:4}),j.requirements?n.jsx("span",{className:"field__error",children:j.requirements}):null]}),n.jsxs("label",{className:"field",children:[n.jsxs("span",{className:"field__labelRow",children:[n.jsx("span",{className:"field__label",children:s("task.create.fullDescription")}),n.jsxs("span",{className:`field__counter ${q>=sm?"field__counter--danger":""}`,children:[q,"/",sm]})]}),n.jsx("textarea",{className:"field__textarea",value:f.description,onChange:W=>B("description",W.target.value),onBlur:()=>v(W=>({...W,description:!0}))}),j.description?n.jsx("span",{className:"field__error",children:j.description}):null]}),n.jsxs("div",{className:"grid2",children:[n.jsxs("label",{className:"field",children:[n.jsx("span",{className:"field__label",children:s("task.create.category")}),n.jsx("input",{className:"field__input",value:f.category,onChange:W=>B("category",W.target.value),onBlur:()=>v(W=>({...W,category:!0}))})]}),n.jsxs("label",{className:"field",children:[n.jsx("span",{className:"field__label",children:s("task.create.location")}),n.jsx("input",{className:"field__input",value:f.location,onChange:W=>B("location",W.target.value),onBlur:()=>v(W=>({...W,location:!0}))})]})]}),n.jsxs("div",{className:"grid2",children:[n.jsxs("label",{className:"field",children:[n.jsx("span",{className:"field__label",children:s("task.create.budgetAmount")}),n.jsx("input",{className:"field__input",value:f.budgetAmount,onChange:W=>B("budgetAmount",W.target.value),onBlur:()=>v(W=>({...W,budgetAmount:!0})),inputMode:"decimal"})]}),n.jsxs("label",{className:"field",children:[n.jsx("span",{className:"field__label",children:s("task.create.currency")}),n.jsx("input",{className:"field__input",value:f.budgetCurrency,onChange:W=>B("budgetCurrency",W.target.value),onBlur:()=>v(W=>({...W,budgetCurrency:!0}))})]})]}),n.jsxs("label",{className:"field",children:[n.jsx("span",{className:"field__label",children:s("task.create.maxExecutors")}),n.jsx("input",{className:"field__input",value:f.maxExecutors,onChange:W=>B("maxExecutors",W.target.value.replace(/[^\d]/g,"").slice(0,2)),onBlur:()=>v(W=>({...W,maxExecutors:!0})),placeholder:s("task.create.maxExecutors.placeholder"),inputMode:"numeric",min:1,max:10}),j.maxExecutors?n.jsx("span",{className:"field__error",children:j.maxExecutors}):null]}),n.jsxs("div",{className:"actionsRow",children:[n.jsxs("button",{type:"button",className:"secondaryLink",onClick:()=>{l(-1)},children:[n.jsx("span",{"aria-hidden":"true",style:{marginRight:8},children:""}),s("task.details.back")]}),n.jsx("button",{className:"primaryBtn",type:"submit",children:s("task.edit.save")})]})]})]})})}const pl=[{key:"instagram",label:"Instagram",simpleIconsSlug:"instagram",normalize:s=>$a(s,"https://instagram.com/")},{key:"tiktok",label:"TikTok",simpleIconsSlug:"tiktok",normalize:s=>{const a=am(s);return a.startsWith("http")?a:a?`https://www.tiktok.com/${a.startsWith("@")?a:`@${a}`}`:""}},{key:"youtube",label:"YouTube",simpleIconsSlug:"youtube",normalize:s=>{const a=am(s);return a.startsWith("http")?a:a?`https://www.youtube.com/${a.startsWith("@")?a:`@${a}`}`:""}},{key:"telegram",label:"Telegram",simpleIconsSlug:"telegram",normalize:s=>$a(s,"https://t.me/")},{key:"whatsapp",label:"WhatsApp",simpleIconsSlug:"whatsapp",normalize:s=>{const a=s.trim();if(!a)return"";if(a.startsWith("http"))return a;const l=a.replace(/[^\d+]/g,"");return l?`https://wa.me/${l.replace("+","")}`:""}},{key:"vk",label:"VK",simpleIconsSlug:"vk",normalize:s=>$a(s,"https://vk.com/")},{key:"x",label:"X",simpleIconsSlug:"x",normalize:s=>$a(s,"https://x.com/")},{key:"facebook",label:"Facebook",simpleIconsSlug:"facebook",normalize:s=>$a(s,"https://facebook.com/")},{key:"linkedin",label:"LinkedIn",simpleIconsSlug:"linkedin",normalize:s=>$a(s,"https://www.linkedin.com/in/")},{key:"discord",label:"Discord",simpleIconsSlug:"discord",normalize:s=>s.trim()},{key:"twitch",label:"Twitch",simpleIconsSlug:"twitch",normalize:s=>$a(s,"https://twitch.tv/")},{key:"snapchat",label:"Snapchat",simpleIconsSlug:"snapchat",normalize:s=>$a(s,"https://www.snapchat.com/add/")},{key:"pinterest",label:"Pinterest",simpleIconsSlug:"pinterest",normalize:s=>$a(s,"https://pinterest.com/")},{key:"reddit",label:"Reddit",simpleIconsSlug:"reddit",normalize:s=>$a(s,"https://reddit.com/user/")}];function am(s){return s.trim().replace(/^@/,"")}function $a(s,a){const l=s.trim();return l?l.startsWith("http://")||l.startsWith("https://")?l:`${a}${am(l)}`:""}function qy({socials:s}){if(!s)return null;const a=h.useMemo(()=>pl.map(u=>({...u,url:s[u.key]?.trim()||""})).filter(u=>u.url),[s]),[l,o]=h.useState({});return a.length===0?null:n.jsx("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:a.map(u=>n.jsx("a",{href:u.url,target:"_blank",rel:"noreferrer",title:u.label,style:{width:36,height:36,borderRadius:10,border:"1px solid rgba(255,255,255,0.14)",background:"rgba(255,255,255,0.06)",display:"grid",placeItems:"center",textDecoration:"none"},children:l[u.key]?n.jsx("span",{style:{fontSize:12,fontWeight:700,opacity:.9},children:u.label.slice(0,1).toUpperCase()}):n.jsx("img",{src:`https://cdn.simpleicons.org/${u.simpleIconsSlug}/ffffff`,alt:u.label,width:18,height:18,loading:"lazy",referrerPolicy:"no-referrer",style:{display:"block"},onError:()=>o(f=>({...f,[u.key]:!0}))})},u.key))})}function uS(s){return h.useSyncExternalStore(fs.subscribe,()=>fs.get(s),()=>fs.get(s))}function dS(s){return new Promise((a,l)=>{const o=new FileReader;o.onerror=()=>l(new Error("file_read_failed")),o.onload=()=>a(String(o.result??"")),o.readAsDataURL(s)})}function fS(s){return new Promise((a,l)=>{const o=new Image;o.onload=()=>a(o),o.onerror=()=>l(new Error("image_load_failed")),o.src=s})}async function mS(s,a=160){const l=await dS(s),o=await fS(l),u=o.naturalWidth||o.width,f=o.naturalHeight||o.height,p=Math.min(u,f),m=Math.max(0,Math.floor((u-p)/2)),v=Math.max(0,Math.floor((f-p)/2)),x=document.createElement("canvas");x.width=a,x.height=a;const y=x.getContext("2d");if(!y)throw new Error("canvas_not_supported");return y.imageSmoothingEnabled=!0,y.imageSmoothingQuality="high",y.drawImage(o,m,v,p,p,0,0,a,a),x.toDataURL("image/jpeg",.86)}const zy="ui-create-works.fx.usdRubRate.v1",Hy=90,pS=360*60*1e3;function Rm(s){return typeof s=="number"&&Number.isFinite(s)&&s>0}function Vy(){const s=localStorage.getItem(zy);if(!s)return null;try{const a=JSON.parse(s);if(typeof a!="object"||a===null)return null;const l=a;return!Rm(l.rate)||typeof l.updatedAt!="number"?null:{rate:l.rate,updatedAt:l.updatedAt}}catch{return null}}function hS(s){if(!Rm(s))return;const a={rate:s,updatedAt:Date.now()};localStorage.setItem(zy,JSON.stringify(a))}function vS(){return Vy()?.rate??Hy}async function gS(){const s=await fetch("https://open.er-api.com/v6/latest/USD");if(!s.ok)throw new Error(`FX fetch failed: ${s.status}`);const a=await s.json();if(typeof a!="object"||a===null)throw new Error("FX response invalid");const o=a.rates?.RUB;if(!Rm(o))throw new Error("FX RUB rate missing");return o}async function xS(s=pS){const a=Vy();if(a&&Date.now()-a.updatedAt<=s)return a.rate;try{const l=await gS();return hS(l),l}catch{return a?.rate??Hy}}const yS="ui-create-works.ratings.v1";let rf={raw:null,list:[]};function _x(){const s=localStorage.getItem(yS);if(rf.raw===s)return rf.list;const a=Zn.listAll();return rf={raw:s,list:a},a}function Mm(){return h.useSyncExternalStore(Zn.subscribe,_x,_x)}function bS(s,a){if(!a)return null;const l=s.filter(f=>f.toUserId===a);return l.length?{avg:l.reduce((f,p)=>f+p.rating,0)/l.length,count:l.length}:null}function Py(s,a,l){const o=bS(s,l);if(!o||!l)return o;const f=1+a.filter(m=>m.executorId===l).reduce((m,v)=>m+v.deltaPercent,0)/100;return{avg:Math.max(0,Math.min(5,o.avg*f)),count:o.count}}const kS="ui-create-works.ratingAdjustments.v1";let of={raw:null,list:[]};function Nx(){const s=localStorage.getItem(kS);if(of.raw===s)return of.list;const a=Sc.listAll();return of={raw:s,list:a},a}function $y(){return h.useSyncExternalStore(Sc.subscribe,Nx,Nx)}function _S(s){const a=(s??"").trim();if(!a)return[];const l=a.split(",").map(p=>p.trim()).filter(Boolean),o=l.length>1?l:a.includes(" / ")?a.split(" / ").map(p=>p.trim()).filter(Boolean):a.includes("")?a.split("").map(p=>p.trim()).filter(Boolean):l,u=[],f=new Set;for(const p of o){const m=p.toLowerCase();f.has(m)||(f.add(m),u.push(p))}return u}function ei(s,a){const l=_S(s);if(!l.length)return null;const o=l.slice(0,a).join(", ");return l.length>a?`${o}`:o}const NS="ui-create-works.executorViolations.v1";let bn={executorId:null,raw:null,list:[]};function jS(s){if(!s)return(bn.executorId!==null||bn.raw!==null||bn.list.length)&&(bn={executorId:null,raw:null,list:[]}),bn.list;const a=localStorage.getItem(NS);if(bn.executorId===s&&bn.raw===a)return bn.list;const l=Ai.listForExecutor(s);return bn={executorId:s,raw:a,list:l},l}function Fy(s){return h.useSyncExternalStore(Ai.subscribe,()=>jS(s??null),()=>[])}function wS(){const{t:s,locale:a}=lt(),l=Ut(),o=Dm(),u=l.user?.telegramUserId??null,f=(I,oe)=>o.showToast({message:I,tone:oe}),p=ai(),[m]=MN(),v=vs(),x=qs(),y=ya(),b=6,N=20,[j,C]=h.useState(()=>Date.now()),[k,D]=h.useState(!1),[F,q]=h.useState(!1),B=h.useRef(null),ae=Nl(),W=jl(),X=Br(l.user?.id??null),[E,A]=h.useState(null),O=Qt(),[le,se]=h.useState(1),[be,Se]=h.useState(1),Ce=h.useRef(null),ge=h.useRef(null),L=uS(l.user?.id??null),[U,ce]=h.useState(()=>vS()),[Q,de]=h.useState(""),[w,V]=h.useState(null),[G,ie]=h.useState(""),[ee,M]=h.useState(null),[S,ue]=h.useState(null),[ye,Ne]=h.useState(!1),Ee=h.useMemo(()=>new Intl.NumberFormat(a==="ru"?"ru-RU":"en-US",{style:"currency",currency:a==="ru"?"RUB":"USD",minimumFractionDigits:2}),[a]);h.useEffect(()=>{let I=!1;return xS().then(oe=>{I||ce(oe)}),()=>{I=!0}},[]);const Be=h.useMemo(()=>a==="ru"?L*U:L,[L,a,U]),T=I=>{js.reject(I),Ls({toast:f,telegramUserId:u,text:s("toast.applicationRejected"),tone:"info"})},H=(I,oe)=>{if(!$||$.role!=="customer")return;const me=ae.find(Rs=>Rs.id===I)??null;if(!me||me.status!=="pending")return;const Ae=yt.getById(me.taskId);if(!Ae||Os(Ae.expiresAt,Date.now())<=0||!Ae.createdByUserId||Ae.createdByUserId!==$.id)return;const at=Ae.assignedExecutorIds.length??0,Le=Ae.maxExecutors??1;if(!(at<Le)||Ae.assignedExecutorIds.includes(me.executorUserId))return;const nt=Ay(me.executorUserId);if(nt>=2&&!oe?.bypassNoStartConfirm){ue({applicationId:I,count:nt});return}const it=He.getForTaskExecutor(Ae.id,me.executorUserId),Vt=Ae.budgetAmount??0;if(!it&&Vt>0&&!fs.withdraw(Ae.createdByUserId,Vt))return;if(!!!(yt.addExecutor(Ae.id,me.executorUserId)?yt.getById(Ae.id):null)?.assignedExecutorIds.includes(me.executorUserId)){!it&&Vt>0&&fs.deposit(Ae.createdByUserId,Vt);return}const li=it??He.createActive({taskId:Ae.id,clientId:Ae.createdByUserId,executorId:me.executorUserId,escrowAmount:Vt,revisionIncluded:2});js.select(me.id,{contractId:li.id}),Ke.createPendingStart({taskId:Ae.id,executorId:me.executorUserId}),!it&&Vt>0&&Ys.freeze(Ae.createdByUserId,Ae.id,me.executorUserId,Vt),Fe.addTaskAssigned({recipientUserId:me.executorUserId,actorUserId:$.id,taskId:Ae.id});const Gs=yt.getById(Ae.id);Gs&&Gs.createdByUserId&&Fe.addTaskTaken({recipientUserId:Gs.createdByUserId,actorUserId:me.executorUserId,taskId:Gs.id});const In=Gs?.assignedExecutorIds.length??0,La=Gs?.maxExecutors??1;if(Gs&&In>=La){const Rs=js.listForTask(Gs.id).filter(Pt=>Pt.status==="pending"&&Pt.id!==me.id);for(const Pt of Rs)js.reject(Pt.id),Fe.addTaskAssignedElse({recipientUserId:Pt.executorUserId,actorUserId:$.id,taskId:Gs.id})}Ls({toast:f,telegramUserId:u,text:s("toast.executorAssigned"),tone:"success"})},ke=()=>{if(!$)return;const I=Number(G);if(!Number.isFinite(I)||I<=0){M(s("profile.balance.withdrawError"));return}const oe=a==="ru"?I/U:I;if(!fs.withdraw($.id,oe)){M(s("profile.balance.insufficient"));return}ie(""),M(s("profile.balance.withdrawSuccess"))},we=h.useMemo(()=>{const I=x.find(oe=>oe.id===l.user?.id)??l.user;return I?`${I.email} (${I.role})`:""},[x,l.user]);h.useEffect(()=>{const I=window.setInterval(()=>C(Date.now()),3e4);return()=>window.clearInterval(I)},[]),h.useEffect(()=>{if(!F)return;const I=me=>{const Ae=B.current;Ae&&me.target instanceof Node&&!Ae.contains(me.target)&&q(!1)},oe=me=>{me.key==="Escape"&&q(!1)};return window.addEventListener("pointerdown",I),window.addEventListener("keydown",oe),()=>{window.removeEventListener("pointerdown",I),window.removeEventListener("keydown",oe)}},[F]),h.useEffect(()=>{if(!E)return;const I=oe=>{oe.key==="Escape"&&A(null)};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[E]);const $=l.user,De=Mm(),Ye=$y(),Ge=Ti(),fe=h.useMemo(()=>{const I=new Map;for(const oe of Ge)oe.status!=="paused"&&oe.status!=="pause_requested"||I.get(oe.taskId)==="paused"||I.set(oe.taskId,oe.status);return I},[Ge]),Re=h.useMemo(()=>{const I=new Set;for(const oe of Ge)oe.status==="overdue"&&I.add(oe.taskId);return I},[Ge]),st=$?v.filter(I=>I.createdByUserId===$.id&&I.status!=="archived"):[],mt=$?v.filter(I=>I.assignedExecutorIds.includes($.id)):[],Es=h.useMemo(()=>{const I=new Map;if(!$||$.role!=="executor")return I;for(const oe of Ge){if(oe.executorId!==$.id)continue;const me=I.get(oe.taskId);(!me||oe.assignedAt.localeCompare(me.assignedAt)>0)&&I.set(oe.taskId,oe)}return I},[Ge,$]),$t=I=>I==="overdue"||I==="removed_auto"||I==="cancelled_by_customer"||I==="dispute_opened",ne=$&&$.role==="executor"?mt.filter(I=>{if(I.status==="closed")return!1;const oe=Es.get(I.id)??null;return!$t(oe?.status??null)}):mt.filter(I=>I.status!=="closed"),Ie=mt.filter(I=>I.status==="closed").filter(I=>typeof I.completedAt=="string"&&I.completedAt&&I.completedAt<=I.expiresAt),$e=h.useMemo(()=>{if(!$||$.role!=="executor")return[];const I=Ge.filter(Ae=>Ae.executorId===$.id&&$t(Ae.status)).slice().sort((Ae,at)=>at.assignedAt.localeCompare(Ae.assignedAt)),oe=new Set,me=[];for(const Ae of I){if(oe.has(Ae.taskId))continue;oe.add(Ae.taskId);const at=v.find(Le=>Le.id===Ae.taskId)??null;at&&me.push(at)}return me},[Ge,v,$]),rt=st.slice().sort((I,oe)=>oe.createdAt.localeCompare(I.createdAt)),Ve=ne.slice().sort((I,oe)=>oe.createdAt.localeCompare(I.createdAt)),_t=Ie.slice().sort((I,oe)=>oe.createdAt.localeCompare(I.createdAt)),Mt=$e.slice().sort((I,oe)=>oe.createdAt.localeCompare(I.createdAt)),gt=h.useMemo(()=>Math.max(1,Math.ceil(rt.length/N)),[N,rt.length]),os=h.useMemo(()=>{const I=(be-1)*N;return rt.slice(I,I+N)},[N,be,rt]),qt=h.useMemo(()=>!$||$.role!=="executor"?0:Ve.filter(I=>(Ge.find(Ae=>Ae.taskId===I.id&&Ae.executorId===$.id)??null)?.status==="pending_start"?!0:(y.find(Ae=>Ae.taskId===I.id&&Ae.executorId===$.id)??null)?.status==="revision_requested").length,[y,Ve,Ge,$]),ba=h.useMemo(()=>$?X.filter(I=>!I.readAt&&(I.type==="dispute_opened"||I.type==="dispute_message")).length:0,[X,$]),Ca=h.useMemo(()=>{const I=new Map;for(const oe of X){if(oe.readAt||oe.type!=="dispute_opened"&&oe.type!=="dispute_message")continue;const me=typeof oe.disputeId=="string"?oe.disputeId:"";me&&I.set(me,(I.get(me)??0)+1)}return I},[X]),Da=h.useMemo(()=>{if(!$)return[];if($.role!=="customer"&&$.role!=="executor")return[];const I=new Map(y.map(oe=>[oe.id,oe]));return W.filter(oe=>{const me=I.get(oe.contractId)??null;return me?$.role==="customer"?me.clientId===$.id:me.executorId===$.id:!1}).slice().sort((oe,me)=>me.updatedAt.localeCompare(oe.updatedAt))},[y,W,$]),ka=E?s(E==="customerMy"?"profile.myTasks":"profile.postedActive"):"",Za=st.filter(I=>Os(I.expiresAt,j)>0).map(I=>I.id),Cs=ae.filter(I=>Za.includes(I.taskId)).slice().sort((I,oe)=>oe.createdAt.localeCompare(I.createdAt)),Ss=Cs.filter(I=>I.status==="pending").length,_a=20,pt=h.useMemo(()=>Math.max(1,Math.ceil(Cs.length/_a)),[Cs.length]),wl=h.useMemo(()=>{const I=(le-1)*_a;return Cs.slice(I,I+_a)},[Cs,le]);h.useEffect(()=>{se(I=>Math.min(Math.max(1,I),pt))},[pt]);const Ja=E?E==="customerMy"?rt:Ve:[];if(!$)return n.jsx("main",{className:"profilePage",children:n.jsxs("div",{className:"profileHero",children:[n.jsx("h1",{className:"profileTitle",children:s("auth.profile")}),n.jsx("div",{className:"profileEmpty",children:n.jsx(xe,{to:K.login,children:s("auth.signIn")})})]})});const Ra=$.role==="customer"?"my_tasks":"executor_active",cs=m.get("tab"),ni=cs==="balance"||cs==="my_tasks"||cs==="applications"||cs==="disputes"||cs==="executor_active"||cs==="executor_completed"||cs==="executor_uncompleted"||cs==="violations"||cs==="settings"?cs:Ra,[ot,ia]=h.useState(ni),[Ma,ct]=h.useState(null),[et,Ua]=h.useState(null);h.useEffect(()=>{ot==="applications"&&se(1),ot==="my_tasks"&&Se(1)},[ot]),h.useEffect(()=>{Se(I=>Math.min(Math.max(1,I),gt))},[gt]),h.useEffect(()=>{if(ot==="my_tasks"){if(ge.current===null){ge.current=be;return}ge.current!==be&&(ge.current=be,window.requestAnimationFrame(()=>{Ce.current?.scrollIntoView({behavior:"smooth",block:"start"})}))}},[be,ot]);const la=h.useMemo(()=>Py(De,Ye,$?.id),[De,Ye,$?.id]),Ft=90*24*60*60*1e3,Wt=Fy($?.role==="executor"?$.id:null),Ds=h.useMemo(()=>{if(!$||$.role!=="executor")return[];const I=j-Ft;return Wt.filter(oe=>{const me=Date.parse(oe.createdAt);return Number.isFinite(me)&&me>=I}).slice().sort((oe,me)=>oe.createdAt.localeCompare(me.createdAt))},[j,$,Wt,Ft]),ii=h.useMemo(()=>{const I=new Map;for(const me of Ds){const Ae=I.get(me.type)??[];Ae.push(me),I.set(me.type,Ae)}const oe=new Map;for(const[me,Ae]of I){const at=Ae.slice().sort((Le,Te)=>Le.createdAt.localeCompare(Te.createdAt));for(let Le=0;Le<at.length;Le++)oe.set(at[Le].id,Le+1)}return oe},[Ds]);function Sl(I){return I<=1?"violations.sanction.warning":I===2?"violations.sanction.ratingPenalty5":I===3?"violations.sanction.block24h":I===4?"violations.sanction.block72h":"violations.sanction.ban"}function Ba(I){return I>=3}function Il(I){if(a==="ru"){if(I==="open")return"";if(I==="in_review")return" ";if(I==="need_more_info")return" ";if(I==="decided")return" ";if(I==="closed")return""}else{if(I==="open")return"Open";if(I==="in_review")return"In review";if(I==="need_more_info")return"Need info";if(I==="decided")return"Decided";if(I==="closed")return"Closed"}return I}return n.jsxs("main",{className:"profilePage",children:[n.jsxs("div",{className:"profileLayout",children:[n.jsxs("aside",{className:"profileNav","aria-label":"Profile navigation",children:[n.jsxs("div",{className:"profileNav__group",children:[n.jsxs("button",{type:"button",className:`profileNav__item${ot===($.role==="customer"?"my_tasks":"executor_active")?" profileNav__item--active":""}`,onClick:()=>ia($.role==="customer"?"my_tasks":"executor_active"),children:[n.jsx("span",{className:"profileNav__label",children:$.role==="customer"?s("profile.myTasks"):s("profile.postedActive")}),$.role==="executor"&&qt>0?n.jsx("span",{className:"profileNav__badge","aria-label":`${s("profile.postedActive")}: ${qt}`,title:a==="ru"?" ":"Needs action",children:qt>99?"99+":qt}):null]}),$.role==="executor"?n.jsx("button",{type:"button",className:`profileNav__item${ot==="executor_completed"?" profileNav__item--active":""}`,onClick:()=>ia("executor_completed"),children:n.jsx("span",{className:"profileNav__label",children:s("profile.stats.completed")})}):null,$.role==="executor"?n.jsx("button",{type:"button",className:`profileNav__item${ot==="executor_uncompleted"?" profileNav__item--active":""}`,onClick:()=>ia("executor_uncompleted"),children:n.jsx("span",{className:"profileNav__label",children:s("profile.stats.uncompleted")})}):null,$.role==="executor"?n.jsx("button",{type:"button",className:`profileNav__item${ot==="violations"?" profileNav__item--active":""}`,onClick:()=>ia("violations"),children:n.jsx("span",{className:"profileNav__label",children:s("profile.myViolations")})}):null,$.role==="customer"?n.jsxs("button",{type:"button",className:`profileNav__item${ot==="applications"?" profileNav__item--active":""}`,onClick:()=>ia("applications"),children:[n.jsx("span",{className:"profileNav__label",children:s("profile.applications")}),Ss>0?n.jsx("span",{className:"profileNav__badge","aria-label":`${s("profile.applications")}: ${Ss}`,children:Ss>99?"99+":Ss}):null]}):null,$.role==="customer"||$.role==="executor"?n.jsxs("button",{type:"button",className:`profileNav__item${ot==="disputes"?" profileNav__item--active":""}`,onClick:()=>ia("disputes"),children:[n.jsx("span",{className:"profileNav__label",children:a==="ru"?"":"Disputes"}),ba>0?n.jsx("span",{className:"profileNav__badge","aria-label":`${a==="ru"?"":"Disputes"}: ${ba}`,children:ba>99?"99+":ba}):null]}):null,n.jsx("button",{type:"button",className:`profileNav__item${ot==="balance"?" profileNav__item--active":""}`,onClick:()=>ia("balance"),children:s("profile.balance.title")})]}),n.jsx("div",{className:"profileNav__footer",children:n.jsx("button",{type:"button",className:"profileNav__danger",onClick:()=>{l.signOut(),O(K.login)},children:s("auth.signOut")})})]}),n.jsxs("section",{className:"profileMain",children:[n.jsxs("header",{className:"profileTopbar",children:[n.jsx("div",{className:"profileTopbar__left",children:p.enabled?n.jsxs("div",{className:"profileSelectWrap",ref:B,children:[n.jsxs("button",{type:"button",className:"profileSelectBtn","aria-haspopup":"menu","aria-expanded":F,onClick:()=>q(I=>!I),title:s("account.switch"),children:[n.jsx("span",{className:"profileSelectValue",children:we}),n.jsx("span",{className:"profileSelectChevron","aria-hidden":"true",children:""})]}),F?n.jsx("div",{className:"profileSelectMenu",role:"menu","aria-label":s("account.switch"),children:x.map(I=>{const oe=I.id===l.user?.id;return n.jsxs("button",{type:"button",role:"menuitem",className:`profileSelectItem${oe?" profileSelectItem--active":""}`,onClick:()=>{l.switchUser(I.id),q(!1)},children:[n.jsxs("span",{className:"profileSelectItemText",children:[I.email," (",I.role,")"]}),oe?n.jsx("span",{className:"profileSelectItemMark",children:""}):null]},I.id)})}):null]}):null}),n.jsxs("div",{className:"profileTopbar__right",children:[n.jsxs("div",{className:"profileTopbar__actions",children:[p.enabled?n.jsx(xe,{className:"profileBtn",to:K.register,children:s("account.add")}):null,n.jsx(xe,{className:"profileBtn",to:K.profileEdit,children:s("profile.edit")})]}),n.jsxs("div",{className:"profileTopbar__me",children:[n.jsxs("div",{className:"profileTopbar__meta",children:[n.jsx("div",{className:"profileTopbar__name",children:$.fullName}),n.jsx("div",{className:"profileTopbar__sub",children:$.role==="customer"?s("profile.roleCustomer"):$.role==="executor"?s("profile.roleExecutor"):a==="ru"?"":"Arbiter"}),la?n.jsx(xe,{className:"profileTopbar__sub profileRatingLink",style:{opacity:.9},to:K.reviews,state:{backTo:K.profile},children:a==="ru"?` ${la.avg.toFixed(1)} (${la.count})`:` ${la.avg.toFixed(1)} (${la.count})`}):null,p.enabled&&$.role==="executor"?n.jsxs("div",{className:"profileTopbar__sub",style:{opacity:.85},children:[s("profile.executorIdLabel"),": ",$.id]}):null]}),n.jsxs("label",{className:"profileAvatar profileAvatarUpload",title:s("profile.avatar.hint"),children:[n.jsx("input",{className:"profileAvatarInput",type:"file",accept:"image/*",disabled:k,onChange:I=>{const oe=I.currentTarget.files?.[0];oe&&(async()=>{D(!0);try{const me=await mS(oe,160);l.updateProfile({fullName:$.fullName,phone:$.phone,email:$.email,company:$.company,socials:$.socials,avatarDataUrl:me})}finally{D(!1),I.currentTarget.value=""}})()}}),$.avatarDataUrl?n.jsx("img",{className:"profileAvatarImg",src:$.avatarDataUrl,alt:s("profile.avatar.change")}):n.jsx("div",{className:"profileAvatarMark","aria-hidden":"true",children:"UI"}),n.jsx("div",{className:"profileAvatarOverlay","aria-label":s("profile.avatar.upload"),children:k?n.jsx("span",{className:"profileAvatarOverlayIcon","aria-hidden":"true",children:""}):n.jsxs("svg",{className:"profileAvatarOverlayIcon",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[n.jsx("path",{d:"M9 7L10.2 5.4C10.5 5 11 4.8 11.5 4.8H12.5C13 4.8 13.5 5 13.8 5.4L15 7",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M20 7H4C2.9 7 2 7.9 2 9V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V9C22 7.9 21.1 7 20 7Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M12 17C13.7 17 15 15.7 15 14C15 12.3 13.7 11 12 11C10.3 11 9 12.3 9 14C9 15.7 10.3 17 12 17Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]})]})]}),n.jsxs("div",{className:"profileContent",children:[ot==="my_tasks"&&$.role==="customer"?n.jsxs("div",{className:"profilePanel",children:[n.jsx("div",{className:"profilePanel__header",children:n.jsxs("h2",{className:"profilePanel__title",children:[s("profile.myTasks")," ",n.jsxs("span",{className:"profilePanel__countInline",children:["(",rt.length,")"]})]})}),rt.length===0?n.jsxs("div",{className:"profileEmpty",children:[s("tasks.empty")," ",n.jsx(xe,{to:K.taskCreate,children:s("nav.postTask")})]}):n.jsxs(n.Fragment,{children:[n.jsx("ul",{className:"customerTasksList",ref:Ce,children:os.map(I=>{const oe=fe.get(I.id)??null,me=Re.has(I.id)&&I.status==="in_progress",Ae=oe?"executor.status.paused":I.status==="closed"?"task.status.closed":me?"task.status.waiting":I.status==="in_progress"?"task.status.inProgress":I.status==="dispute"?"task.status.dispute":I.status==="review"?"task.status.review":"task.status.open",at=I.status!=="closed"?[]:y.filter(Le=>Le.taskId===I.id&&Le.clientId===$.id&&(Le.status==="approved"||Le.status==="resolved")&&!Zn.getForContractPair(Le.id,$.id)).map(Le=>{const Te=x.find(it=>it.id===Le.executorId)??null,nt=(Te?.fullName??Te?.email??Le.executorId).trim()||Le.executorId;return{contractId:Le.id,executorName:nt}});return n.jsxs("li",{className:"customerTasksItem",role:"link",tabIndex:0,onClick:Le=>{const Te=Le.target;if(!(Te instanceof HTMLElement)){O(Oe(I.id));return}Te.closest('a,button,input,textarea,select,[role="button"]')||O(Oe(I.id))},onKeyDown:Le=>{(Le.key==="Enter"||Le.key===" ")&&(Le.preventDefault(),O(Oe(I.id)))},children:[n.jsxs("div",{className:"customerTasksItemContent",children:[n.jsx("div",{className:"customerTasksItemHeader",children:n.jsx(xe,{className:"customerTasksItemTitle",to:Oe(I.id),children:ft(I.title,a)})}),n.jsxs("div",{className:"customerTasksItemBadges",children:[n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",s("tasks.published"),": ",Qa(I.createdAt,a,j)]}),I.status!=="closed"&&I.dueDate?n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",s("tasks.due"),": ",I.dueDate]}):null,ei(I.category,3)?n.jsxs("span",{className:"customerTasksItemBadge",style:{whiteSpace:"normal"},children:[" ",s("task.create.category"),": ",ei(I.category,3)]}):null,ei(I.location,3)?n.jsxs("span",{className:"customerTasksItemBadge",style:{whiteSpace:"normal"},children:[" ",s("task.create.location"),": ",ei(I.location,3)]}):null,n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",s("task.meta.assigned"),": ",I.assignedExecutorIds.length,"/",I.maxExecutors??1]}),I.completionVideoUrl?n.jsx("span",{className:"customerTasksItemBadge customerTasksItemBadge--link",children:n.jsxs("a",{href:I.completionVideoUrl,target:"_blank",rel:"noreferrer",children:[" ",s("task.completionLink")]})}):null]})]}),n.jsxs("div",{className:"customerTasksItemRight",children:[n.jsx(ws,{tone:oe?"paused":me?"pending":I.status,label:s(Ae)}),at.length?n.jsx("div",{className:"customerTasksItemActions",children:(()=>{const Le=at.length>1;return at.map(Te=>n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:nt=>{nt.preventDefault(),nt.stopPropagation(),Ua(Te.contractId)},title:Te.executorName,children:Le?a==="ru"?`: ${Te.executorName}`:`Rate: ${Te.executorName}`:a==="ru"?" ":"Rate executor"},Te.contractId))})()}):null]})]},I.id)})}),n.jsx(gl,{page:be,pageCount:gt,onChange:Se})]})]}):null,ot==="applications"&&$.role==="customer"?n.jsxs("div",{className:"profilePanel",children:[n.jsx("div",{className:"profilePanel__header",children:n.jsxs("h2",{className:"profilePanel__title",children:[s("profile.applications")," ",n.jsxs("span",{className:"profilePanel__countInline",children:["(",Cs.length,")"]})]})}),rt.length===0&&Cs.length===0?n.jsxs("div",{className:"profileEmpty",children:[s("profile.applications.emptyNoTasks")," ",n.jsx(xe,{className:"profileBtn profileBtn--ghost",to:K.taskCreate,children:s("nav.postTask")})]}):Cs.length===0?n.jsx("div",{className:"profileEmpty",children:s("profile.taskApplications.empty")}):n.jsxs(n.Fragment,{children:[n.jsx("ul",{className:"profileApplicationsList",children:wl.map(I=>{const oe=x.find(it=>it.id===I.executorUserId)??null,me=v.find(it=>it.id===I.taskId)??null,Ae=me?He.getForTaskExecutor(me.id,I.executorUserId):null,at=me?Ge.find(it=>it.taskId===me.id&&it.executorId===I.executorUserId)??null:null,Le=!!(Ae&&(Ae.status==="approved"||Ae.status==="resolved")),Te=at?.status==="removed_auto"?"executor.status.removed":I.status==="selected"?Le?"task.status.closed":Ae?.status==="submitted"||Ae?.status==="disputed"?"task.status.review":at?.status==="overdue"?"executor.status.overdue":at?.status==="paused"?"executor.status.paused":at?.startedAt?"executor.status.inWork":"executor.status.approved":I.status==="rejected"?"task.status.closed":"task.status.open",nt=Te==="executor.status.overdue"?"overdue":Te==="executor.status.paused"?"paused":Te==="task.status.review"?"review":Te==="executor.status.inWork"?"in_progress":Te==="executor.status.approved"||Te==="task.status.open"?"open":Te==="task.status.closed"?"closed":"neutral";return n.jsxs("li",{className:`profileApplicationsListItem${I.status==="selected"?" profileApplicationsListItem--selected":""}`,role:me?"link":void 0,tabIndex:me?0:void 0,"aria-label":me?s("notifications.viewTask"):void 0,onClick:it=>{if(!me)return;const Vt=it.target;Vt instanceof HTMLElement&&Vt.closest('a,button,input,textarea,select,[role="button"]')||O(Oe(me.id),{state:{backTo:`${K.profile}?tab=applications`}})},onKeyDown:it=>{me&&(it.key==="Enter"||it.key===" ")&&(it.preventDefault(),O(Oe(me.id),{state:{backTo:`${K.profile}?tab=applications`}}))},children:[n.jsxs("div",{className:"profileApplicationsListItem__header",children:[n.jsxs("div",{className:"profileApplicationsListItem__headerLeft",children:[n.jsx("span",{className:"profileApplicationsListItem__avatar","aria-hidden":"true",children:oe?.avatarDataUrl?n.jsx("img",{src:oe.avatarDataUrl,alt:""}):n.jsx("span",{className:"profileApplicationsListItem__avatarFallback",children:(oe?.fullName??oe?.email??"?").trim().slice(0,1).toUpperCase()})}),n.jsx("strong",{children:oe?.fullName??oe?.email??s("notifications.someone")})]}),n.jsxs("div",{className:"profileApplicationsListItem__headerRight",children:[I.status==="pending"?n.jsxs("div",{className:"profileApplicationsListItem__actionsRight",children:[n.jsx("button",{type:"button",className:"profileApplicationsListItem__actionButton profileApplicationsListItem__actionButton--primary",onClick:()=>H(I.id),disabled:(()=>{const it=v.find(Ei=>Ei.id===I.taskId)??null;if(!it||Os(it.expiresAt,j)<=0)return!0;const Vt=it.maxExecutors??1;return!!((it.assignedExecutorIds.length??0)>=Vt||it.assignedExecutorIds.includes(I.executorUserId))})(),children:s("profile.taskApplications.assign")}),n.jsx("button",{type:"button",className:"profileApplicationsListItem__actionButton profileApplicationsListItem__actionButton--danger",onClick:()=>T(I.id),children:s("profile.taskApplications.reject")})]}):null,n.jsx(ws,{tone:nt,label:s(Te),className:"profileApplicationsListItem__statusPill"})]})]}),n.jsxs("div",{className:"profileApplicationsListItem__meta",children:[oe?n.jsx(xe,{className:"linkBtn profileApplicationsListItem__profileLink",to:ds(oe.id),state:{backTo:`${K.profile}?tab=applications`},children:s("notifications.viewProfile")}):null,me?n.jsx(xe,{className:"linkBtn",to:Oe(me.id),state:{backTo:`${K.profile}?tab=applications`},children:s("notifications.viewTask")}):null,n.jsx("span",{className:"pill",children:new Date(I.createdAt).toLocaleString()})]}),n.jsx("p",{className:"profileApplicationsListItem__message",children:I.message?I.message:""})]},I.id)})}),n.jsx(gl,{page:le,pageCount:pt,onChange:se})]})]}):null,ot==="disputes"&&($.role==="customer"||$.role==="executor")?n.jsxs("div",{className:"profilePanel",children:[n.jsx("div",{className:"profilePanel__header",children:n.jsxs("h2",{className:"profilePanel__title",children:[a==="ru"?"":"Disputes"," ",n.jsxs("span",{className:"profilePanel__countInline",children:["(",Da.length,")"]})]})}),Da.length===0?n.jsx("div",{className:"profileEmpty",children:a==="ru"?"  .":"No disputes yet."}):n.jsx("ul",{className:"customerTasksList","aria-label":a==="ru"?"":"Disputes",children:Da.map(I=>{const oe=He.getById(I.contractId),me=oe?yt.getById(oe.taskId):null,Ae=me?ft(me.title,a):oe?.taskId??I.contractId,at=x.find(nt=>nt.id===I.openedByUserId)??null,Le=Ca.get(I.id)??0,Te=new Date(I.updatedAt).toLocaleString(a==="ru"?"ru-RU":"en-US");return n.jsxs("li",{className:"customerTasksItem",role:"link",tabIndex:0,onClick:nt=>{const it=nt.target;it instanceof HTMLElement&&it.closest('a,button,input,textarea,select,[role="button"]')||O(aa(I.id))},onKeyDown:nt=>{(nt.key==="Enter"||nt.key===" ")&&(nt.preventDefault(),O(aa(I.id)))},children:[n.jsxs("div",{className:"customerTasksItemContent",children:[n.jsx("div",{className:"customerTasksItemHeader",children:n.jsx(xe,{className:"customerTasksItemTitle",to:aa(I.id),children:Ae})}),n.jsxs("div",{className:"customerTasksItemBadges",children:[n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",a==="ru"?"":"Status",": ",Il(I.status)]}),n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",a==="ru"?"":"Updated",": ",Te]}),n.jsxs("span",{className:"customerTasksItemBadge",children:[a==="ru"?"":"Opened by",": ",at?.fullName??I.openedByUserId]}),Le?n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",a==="ru"?"":"Unread",": ",Le>99?"99+":Le]}):null]})]}),n.jsx("div",{className:"customerTasksItemRight",children:n.jsx(xe,{className:"linkBtn",to:aa(I.id),children:a==="ru"?" ":"Open chat"})})]},I.id)})})]}):null,ot==="executor_active"&&$.role==="executor"?n.jsxs("div",{className:"profilePanel",children:[n.jsx("div",{className:"profilePanel__header",children:n.jsxs("h2",{className:"profilePanel__title",children:[s("profile.postedActive")," ",n.jsxs("span",{className:"profilePanel__countInline",children:["(",Ve.length,")"]})]})}),Ve.length===0?n.jsxs("div",{className:"profileEmpty",children:[s("profile.noneYet")," ",n.jsx(xe,{to:K.tasks,children:s("profile.takeTask")})]}):n.jsx("ul",{className:"customerTasksList",children:Ve.slice(0,b).map(I=>{const oe=Ge.find(Te=>Te.taskId===I.id&&Te.executorId===$.id)??null,me=oe?Os(oe.startDeadlineAt,j):null,Ae=oe?.executionDeadlineAt?Os(oe.executionDeadlineAt,j):null,at=oe?.status==="pending_start"?a==="ru"?" ":"Start required":oe?.status==="paused"||oe?.status==="pause_requested"?s("executor.status.paused"):oe?.status==="overdue"?a==="ru"?"":"Overdue":I.status==="dispute"?s("task.status.dispute"):I.status==="review"?s("task.status.review"):s("task.status.inProgress"),Le=oe?.status==="pending_start"?"pending":oe?.status==="paused"||oe?.status==="pause_requested"?"paused":oe?.status==="overdue"?"overdue":I.status==="dispute"?"dispute":I.status==="review"?"review":"in_progress";return n.jsxs("li",{className:"customerTasksItem",role:"link",tabIndex:0,onClick:Te=>{const nt=Te.target;if(!(nt instanceof HTMLElement)){O(Oe(I.id));return}nt.closest('a,button,input,textarea,select,[role="button"]')||O(Oe(I.id))},onKeyDown:Te=>{(Te.key==="Enter"||Te.key===" ")&&(Te.preventDefault(),O(Oe(I.id)))},children:[n.jsxs("div",{className:"customerTasksItemContent",children:[n.jsx("div",{className:"customerTasksItemHeader",children:n.jsx(xe,{className:"customerTasksItemTitle",to:Oe(I.id),children:ft(I.title,a)})}),n.jsxs("div",{className:"customerTasksItemBadges",children:[n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",s("tasks.published"),": ",Qa(I.createdAt,a,j)]}),I.status!=="closed"&&I.dueDate?n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",s("tasks.due"),": ",I.dueDate]}):null,oe?.status==="pending_start"&&me!==null?n.jsxs("span",{className:"customerTasksItemBadge",style:{opacity:.9},children:[a==="ru"?"  ":"Start within",": ",Nn(me,a)]}):null,(oe?.status==="in_progress"||oe?.status==="overdue")&&Ae!==null?n.jsxs("span",{className:"customerTasksItemBadge",style:oe?.status==="overdue"?{color:"rgba(239,68,68,0.95)"}:void 0,children:[oe?.status==="overdue"?a==="ru"?"":"Overdue":a==="ru"?"":"Time left",": ",Nn(Ae,a)]}):null]})]}),n.jsxs("div",{className:"customerTasksItemRight",children:[n.jsx(ws,{tone:Le,label:at}),n.jsx("div",{className:"customerTasksItemActions",children:oe?.status==="pending_start"?n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:Te=>{Te.preventDefault(),Te.stopPropagation(),rs.post(`/assignments/${I.id}/start`,{}).catch(()=>{}),Ls({toast:f,telegramUserId:u,text:s("toast.workStarted"),tone:"success"})},title:a==="ru"?" ":"Start work",children:a==="ru"?"":"Start"}):null})]})]},I.id)})})]}):null,ot==="executor_completed"&&$.role==="executor"?n.jsxs("div",{className:"profilePanel",children:[n.jsx("div",{className:"profilePanel__header",children:n.jsxs("h2",{className:"profilePanel__title",children:[s("profile.stats.completed")," ",n.jsxs("span",{className:"profilePanel__countInline",children:["(",_t.length,")"]})]})}),_t.length===0?n.jsx("div",{className:"profileEmpty",children:s("profile.noneYet")}):n.jsx("ul",{className:"customerTasksList",children:_t.slice(0,b).map(I=>{const oe=`${K.profile}?tab=executor_completed`,me=He.getForTaskExecutor(I.id,$.id),Ae=me?.clientId??I.createdByUserId??null,at=me?!!Zn.getForContractPair(me.id,$.id):!1,Le=me?Ot.getForContract(me.id):null,Te=!!(me&&(me.status==="approved"||me.status==="resolved"||me.status==="disputed"&&(Le?.status==="decided"||Le?.status==="closed")));return n.jsxs("li",{className:"customerTasksItem",role:"link",tabIndex:0,onClick:nt=>{const it=nt.target;if(!(it instanceof HTMLElement)){O(Oe(I.id),{state:{backTo:oe}});return}it.closest('a,button,input,textarea,select,[role="button"]')||O(Oe(I.id),{state:{backTo:oe}})},onKeyDown:nt=>{(nt.key==="Enter"||nt.key===" ")&&(nt.preventDefault(),O(Oe(I.id),{state:{backTo:oe}}))},children:[n.jsxs("div",{className:"customerTasksItemContent",children:[n.jsx("div",{className:"customerTasksItemHeader",children:n.jsx(xe,{className:"customerTasksItemTitle",to:Oe(I.id),state:{backTo:oe},children:ft(I.title,a)})}),n.jsx("div",{className:"customerTasksItemBadges"})]}),n.jsxs("div",{className:"customerTasksItemRight",children:[n.jsx(ws,{tone:"closed",label:s("task.status.closed")}),n.jsx("div",{className:"customerTasksItemActions",children:me&&Ae&&!at&&Te?n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:nt=>{nt.preventDefault(),nt.stopPropagation(),ct(me.id)},children:a==="ru"?" ":"Rate client"}):null})]})]},I.id)})})]}):null,ot==="executor_uncompleted"&&$.role==="executor"?n.jsxs("div",{className:"profilePanel",children:[n.jsx("div",{className:"profilePanel__header",children:n.jsxs("h2",{className:"profilePanel__title",children:[s("profile.stats.uncompleted")," ",n.jsxs("span",{className:"profilePanel__countInline",children:["(",Mt.length,")"]})]})}),Mt.length===0?n.jsx("div",{className:"profileEmpty",children:s("profile.noneYet")}):n.jsx("ul",{className:"customerTasksList",children:Mt.slice(0,b).map(I=>{const oe=`${K.profile}?tab=executor_uncompleted`,me=Es.get(I.id)??null,Ae=me?.status==="removed_auto"?"executor.status.removed":me?.status==="cancelled_by_customer"?"executor.status.cancelledByCustomer":me?.status==="dispute_opened"?"executor.status.disputeOpened":"executor.status.overdue",at=me?.status==="overdue"?"overdue":me?.status==="dispute_opened"?"review":"neutral";return n.jsxs("li",{className:"customerTasksItem",role:"link",tabIndex:0,onClick:Le=>{const Te=Le.target;if(!(Te instanceof HTMLElement)){O(Oe(I.id),{state:{backTo:oe}});return}Te.closest('a,button,input,textarea,select,[role="button"]')||O(Oe(I.id),{state:{backTo:oe}})},onKeyDown:Le=>{(Le.key==="Enter"||Le.key===" ")&&(Le.preventDefault(),O(Oe(I.id),{state:{backTo:oe}}))},children:[n.jsxs("div",{className:"customerTasksItemContent",children:[n.jsx("div",{className:"customerTasksItemHeader",children:n.jsx(xe,{className:"customerTasksItemTitle",to:Oe(I.id),state:{backTo:oe},children:ft(I.title,a)})}),n.jsx("div",{className:"customerTasksItemBadges"})]}),n.jsx("div",{className:"customerTasksItemRight",children:n.jsx(ws,{tone:at,label:s(Ae)})})]},I.id)})})]}):null,ot==="violations"&&$.role==="executor"?n.jsxs("div",{className:"profilePanel",children:[n.jsx("div",{className:"profilePanel__header",children:n.jsxs("h2",{className:"profilePanel__title",children:[s("violations.title")," ",n.jsxs("span",{className:"profilePanel__countInline",children:["(",Ds.length,")"]})," ",n.jsx(Ws,{open:ye,onToggle:()=>Ne(I=>!I),onClose:()=>Ne(!1),ariaLabel:s("violations.help.buttonLabel"),title:s("violations.help.title"),content:[s("violations.help.p1"),"",a==="ru"?":":"Violations:",` ${s("violations.help.violation.noStart12h")}`,` ${s("violations.help.violation.noSubmit24h")}`,"",s("violations.help.sanctionsTitle"),` ${s("violations.help.sanctions.warning")}`,` ${s("violations.help.sanctions.ratingPenalty")}`,` ${s("violations.help.sanctions.block24")}`,` ${s("violations.help.sanctions.block72")}`,` ${s("violations.help.sanctions.ban")}`].join(`
`)})]})}),n.jsx("div",{className:"profileSubtitle",style:{marginTop:6},children:s("violations.subtitle")}),Ds.length===0?n.jsx("div",{className:"profileEmpty",children:s("violations.empty")}):n.jsx("ul",{className:"profileList","aria-label":s("violations.title"),style:{marginTop:10},children:Ds.map(I=>{const oe=v.find(Te=>Te.id===I.taskId)??null,me=oe?ft(oe.title,a):I.taskId,Ae=ii.get(I.id)??1,at=new Date(I.createdAt).toLocaleString(a==="ru"?"ru-RU":"en-US"),Le=I.type==="no_submit_24h"?"violations.reason.noSubmit24h":"violations.reason.noStart12h";return n.jsxs("li",{className:"profileItem profileItem--card",role:"link",tabIndex:0,onClick:Te=>{const nt=Te.target;nt instanceof HTMLElement&&nt.closest('a,button,input,textarea,select,[role="button"]')||O(Oe(I.taskId),{state:{backTo:`${K.profile}?tab=violations`}})},onKeyDown:Te=>{(Te.key==="Enter"||Te.key===" ")&&(Te.preventDefault(),O(Oe(I.taskId),{state:{backTo:`${K.profile}?tab=violations`}}))},children:[n.jsxs("div",{className:"profileItemTitleRow",children:[n.jsx(xe,{className:"profileItemTitle",to:Oe(I.taskId),state:{backTo:`${K.profile}?tab=violations`},children:me}),n.jsx("span",{className:`pill${Ba(Ae)?" pill--danger":""}`,children:s(Sl(Ae))})]}),n.jsxs("div",{className:"profileItemMeta",children:[n.jsx("span",{className:"pill",title:s("violations.col.date"),children:at}),n.jsxs("span",{className:"pill",title:`#${Ae}`,children:["#",Ae]})]}),n.jsxs("div",{style:{opacity:.85,fontSize:13,lineHeight:1.45},children:[n.jsxs("strong",{style:{opacity:.9},children:[s("violations.col.reason"),":"]})," ",s(Le)]})]},I.id)})})]}):null,ot==="balance"?n.jsxs("div",{className:"profilePanel",children:[n.jsx("div",{className:"profilePanel__header",children:n.jsxs("h2",{className:"profilePanel__title",children:[s("profile.balance.title")," ",n.jsxs("span",{className:"profilePanel__countInline",children:["(",Ee.format(Be),")"]})]})}),$.role==="customer"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"profileBalanceForm",children:[n.jsx("input",{type:"number",min:"0",placeholder:s("profile.balance.placeholder"),value:Q,onChange:I=>{de(I.target.value),V(null)}}),n.jsx("button",{type:"button",className:"profileBalanceButton",disabled:Number(Q)<=0,onClick:()=>{const I=Number(Q);if(!Number.isFinite(I)||I<=0){V(s("profile.balance.error"));return}const oe=a==="ru"?I/U:I;fs.deposit($.id,oe),de(""),V(s("profile.balance.success"))},children:s("profile.balance.add")}),n.jsx("button",{type:"button",className:"profileBalanceButton profileBalanceButton--ghost",onClick:()=>{fs.reset($.id),de(""),V(s("profile.balance.resetSuccess"))},children:s("profile.balance.reset")})]}),w?n.jsx("div",{className:"profileBalanceMessage",children:w}):null]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"profileBalanceForm",children:[n.jsx("input",{type:"number",min:"0",placeholder:s("profile.balance.placeholder"),value:G,onChange:I=>{ie(I.target.value),M(null)}}),n.jsx("button",{type:"button",className:"profileBalanceButton",disabled:Number(G)<=0,onClick:ke,children:s("profile.balance.withdraw")})]}),ee?n.jsx("div",{className:"profileBalanceMessage",children:ee}):null]})]}):null,ot==="settings"?n.jsx("div",{className:"profilePanel",children:n.jsxs("div",{className:"profileSettings",children:[n.jsxs("div",{className:"profileSettings__row",children:[n.jsx("div",{className:"profileSettings__label",children:s("profile.socials")}),n.jsx("div",{className:"profileSettings__value",children:n.jsx(qy,{socials:$.socials})})]}),n.jsxs("div",{className:"profileSettings__row",children:[n.jsx("div",{className:"profileSettings__label",children:s("register.email")}),n.jsx("div",{className:"profileSettings__value",children:$.email})]}),n.jsxs("div",{className:"profileSettings__row",children:[n.jsx("div",{className:"profileSettings__label",children:s("register.phone")}),n.jsx("div",{className:"profileSettings__value",children:$.phone})]})]})}):null]})]})]}),E?n.jsx("div",{className:"profileModalOverlay",role:"dialog","aria-modal":"true","aria-label":ka,onClick:()=>A(null),children:n.jsxs("div",{className:"profileModal",onClick:I=>I.stopPropagation(),children:[n.jsxs("div",{className:"profileModalHeader",children:[n.jsx("h2",{className:"profileModalTitle",children:ka}),n.jsx("button",{type:"button",className:"profileModalClose",onClick:()=>A(null),children:s("common.cancel")})]}),Ja.length===0?n.jsx("div",{className:"profileEmpty",children:s("profile.noneYet")}):n.jsx("ul",{className:"profileList",children:Ja.map(I=>{const oe=I.assignedExecutorIds[0]??null,me=oe?x.find(at=>at.id===oe)??null:null,Ae=I.status==="closed"?"task.status.closed":I.status==="in_progress"?"task.status.inProgress":I.status==="dispute"?"task.status.dispute":I.status==="review"?"task.status.review":"task.status.open";return n.jsxs("li",{className:"profileItem",children:[n.jsxs("div",{className:"profileItemTitleRow",children:[n.jsx(xe,{className:"profileItemTitle",to:Oe(I.id),onClick:()=>A(null),children:ft(I.title,a)}),n.jsx("span",{className:"pill",children:s(Ae)})]}),E==="customerMy"&&(I.status!=="closed"||me)?n.jsxs("div",{className:"profileItemMeta",children:[n.jsxs("span",{className:"pill",children:[s("tasks.published"),": ",Qa(I.createdAt,a,j)]}),null]}):null]},I.id)})})]})}):null,n.jsx(Nc,{open:!!Ma,subjectName:(()=>{const I=Ma?He.getById(Ma):null;return(I?x.find(me=>me.id===I.clientId)??null:null)?.fullName})(),onClose:()=>ct(null),onSubmit:({rating:I,comment:oe})=>{if(!Ma||!$)return;const me=He.getById(Ma);me&&(Zn.upsert({contractId:me.id,fromUserId:$.id,toUserId:me.clientId,rating:I,comment:oe}),ct(null))}}),n.jsx(Nc,{open:!!et,title:a==="ru"?" ":"Rate executor",subjectName:(()=>{const I=et?He.getById(et):null;return(I?x.find(me=>me.id===I.executorId)??null:null)?.fullName})(),onClose:()=>Ua(null),onSubmit:({rating:I,comment:oe})=>{if(!et||!$||$.role!=="customer")return;const me=He.getById(et);me&&(Zn.upsert({contractId:me.id,fromUserId:$.id,toUserId:me.executorId,rating:I,comment:oe}),Ua(null))}}),n.jsx(Cm,{open:!!S,count:S?.count??0,onClose:()=>ue(null),onConfirm:()=>{S&&H(S.applicationId,{bypassNoStartConfirm:!0})}})]})}function SS(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.trim())}function IS(s){const a=s.replace(/\D/g,"");return a.length>=10&&a.length<=15}function AS(){const{t:s}=lt(),a=Ut(),l=Qt(),o=a.user,[u,f]=h.useState(o?.fullName??""),[p,m]=h.useState(o?.phone??""),[v,x]=h.useState(o?.email??""),[y,b]=h.useState(o?.company??""),[N,j]=h.useState(()=>o?.socials??{}),[C,k]=h.useState(()=>({})),[D,F]=h.useState(!1),[q,B]=h.useState(()=>o?.socials??{}),[ae,W]=h.useState(()=>({})),[X,E]=h.useState(()=>({})),[A,O]=h.useState(null),[le,se]=h.useState(!1),[be,Se]=h.useState(null),[Ce,ge]=h.useState({}),[L,U]=h.useState(!1),ce=h.useMemo(()=>{const ee={};return u.trim()||(ee.fullName=s("validation.fullNameRequired")),p.trim()?IS(p)||(ee.phone=s("validation.phoneInvalid")):ee.phone=s("validation.phoneRequired"),v.trim()?SS(v)||(ee.email=s("validation.emailInvalid")):ee.email=s("validation.emailRequired"),ee},[u,p,v,s]),Q=L?ce:Object.fromEntries(Object.entries(ce).filter(([ee])=>Ce[ee])),de=Object.keys(ce).length===0;if(h.useEffect(()=>{if(!D)return;const ee=M=>{M.key==="Escape"&&F(!1)};return window.addEventListener("keydown",ee),()=>window.removeEventListener("keydown",ee)},[D]),!o)return n.jsxs("main",{style:{padding:24},children:[n.jsx("h1",{children:s("profile.edit")}),n.jsx("p",{children:n.jsx(xe,{to:K.login,children:s("auth.signIn")})})]});const w=h.useMemo(()=>{let ee=0;for(const M of pl){if(!!!(q[M.key]??"").trim())continue;(ae[M.key]??null)||(ee+=1)}return ee},[q,ae]),V=h.useMemo(()=>{let ee=0;for(const M of pl){if(!!!(q[M.key]??"").trim())continue;(ae[M.key]??null)&&(ee+=1)}return ee},[q,ae]),G=V>0&&w===0;h.useEffect(()=>{A&&G&&O(null)},[G,A]);function ie(ee){if(ee.preventDefault(),U(!0),Se(null),!!de)try{const M={};for(const S of pl){const ue=N[S.key]?.trim()??"",ye=S.normalize(ue);ye&&(M[S.key]=ye)}a.updateProfile({fullName:u,phone:p,email:v,company:y,socials:M}),l(K.profile)}catch{Se(s("auth.genericError"))}}return n.jsxs("main",{className:"editProfilePage",children:[n.jsx("h1",{className:"editProfileTitle",children:s("profile.edit")}),n.jsxs("form",{onSubmit:ie,className:"editProfileForm",children:[be?n.jsx("div",{className:"editProfileError",children:be}):null,n.jsxs("label",{className:"editProfileField",children:[n.jsx("span",{className:"editProfileLabel",children:s("register.fullName")}),n.jsx("input",{value:u,onChange:ee=>f(ee.target.value),onBlur:()=>ge(ee=>({...ee,fullName:!0})),className:"editProfileInput"}),Q.fullName?n.jsx("div",{className:"editProfileError",children:Q.fullName}):null]}),n.jsxs("label",{className:"editProfileField",children:[n.jsx("span",{className:"editProfileLabel",children:s("register.phone")}),n.jsx("input",{value:p,onChange:ee=>m(ee.target.value),onBlur:()=>ge(ee=>({...ee,phone:!0})),inputMode:"tel",className:"editProfileInput"}),Q.phone?n.jsx("div",{className:"editProfileError",children:Q.phone}):null]}),n.jsxs("label",{className:"editProfileField",children:[n.jsx("span",{className:"editProfileLabel",children:s("register.email")}),n.jsx("input",{value:v,onChange:ee=>x(ee.target.value),onBlur:()=>ge(ee=>({...ee,email:!0})),inputMode:"email",className:"editProfileInput"}),Q.email?n.jsx("div",{className:"editProfileError",children:Q.email}):null]}),n.jsxs("label",{className:"editProfileField",children:[n.jsxs("span",{className:"editProfileLabel",children:[s("register.company")," ",n.jsx("span",{className:"editProfileOptional",children:s("common.optional")})]}),n.jsx("input",{value:y,onChange:ee=>b(ee.target.value),className:"editProfileInput"})]}),n.jsxs("div",{style:{marginTop:6},children:[n.jsxs("div",{className:"editProfileSocialsHead",children:[n.jsxs("div",{className:"editProfileSocialsHeadLeft",children:[n.jsx("div",{className:"editProfileLabel",children:s("profile.socialsModalTitle")}),n.jsx(Ws,{open:le,onToggle:()=>se(ee=>!ee),onClose:()=>se(!1),ariaLabel:s("profile.socialsHelp.aria"),title:s("profile.socialsHelp.title"),content:s("profile.socialsHelp.text"),footer:n.jsx("button",{type:"button",className:"helpTipModal__actionBtn",disabled:!0,title:s("profile.socialsHelp.videoMissingHint"),onClick:()=>{},children:s("profile.socialsHelp.watchVideo")})})]}),n.jsx("div",{className:"editProfileSocialsHint",children:s("profile.socialsHint")})]}),n.jsx("button",{type:"button",onClick:()=>{B(N),W(C),E({}),O(null),F(!0)},className:"editProfileSocialsBtn",children:s("profile.socialsButton")})]}),n.jsxs("div",{className:"editProfileActions",children:[n.jsx("button",{type:"submit",className:"editProfileBtn editProfileBtn--primary",children:s("task.edit.save")}),n.jsx(xe,{to:K.profile,className:"editProfileCancelLink",children:s("common.cancel")})]})]}),D?n.jsx("div",{role:"dialog","aria-modal":"true","aria-label":s("profile.socialsModalTitle"),className:"editProfileOverlay",children:n.jsxs("div",{onClick:ee=>ee.stopPropagation(),className:"editProfileModal",children:[n.jsx("div",{className:"editProfileModalTop",children:n.jsxs("div",{className:"editProfileModalTitleRow",children:[n.jsx("h2",{className:"editProfileModalTitle",children:s("profile.socialsModalTitle")}),n.jsx(Ws,{open:le,onToggle:()=>se(ee=>!ee),onClose:()=>se(!1),ariaLabel:s("profile.socialsHelp.aria"),title:s("profile.socialsHelp.title"),content:s("profile.socialsHelp.text"),footer:n.jsx("button",{type:"button",className:"helpTipModal__actionBtn",disabled:!0,title:s("profile.socialsHelp.videoMissingHint"),onClick:()=>{},children:s("profile.socialsHelp.watchVideo")})})]})}),A?n.jsx("div",{className:"editProfileError",style:{marginTop:10},children:A}):null,n.jsx("div",{className:"editProfileSocialsGrid",children:pl.map(ee=>n.jsxs("label",{className:"editProfileField",children:[n.jsx("span",{className:"editProfileLabel",children:ee.label}),(()=>{const M=!!(q[ee.key]??"").trim(),S=`social-video-${ee.key}`,ue=ae[ee.key]??null,ye=X[ee.key]??null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"editProfileInputWithAction",children:[n.jsx("input",{value:q[ee.key]??"",onChange:Ne=>{const Ee=Ne.target.value;B(T=>({...T,[ee.key]:Ee})),Ee.trim()||(W(T=>({...T,[ee.key]:null})),E(T=>{const H={...T};return delete H[ee.key],H}))},placeholder:ee.key==="telegram"?"@username or https://t.me/username":"@username or URL",className:"editProfileInput"}),n.jsx("input",{id:S,type:"file",accept:"video/*",className:"editProfileHiddenFileInput",onChange:Ne=>{const Ee=Ne.target.files?.[0]??null;W(Be=>({...Be,[ee.key]:Ee})),Ee&&E(Be=>{const T={...Be};return delete T[ee.key],T}),O(null)}}),M?n.jsx("button",{type:"button",className:"editProfileInputActionBtn",onClick:()=>{document.getElementById(S)?.click()},children:s("profile.socialsAttachVideo")}):null]}),ye?n.jsx("div",{className:"editProfileError",children:ye}):null,ue?n.jsxs("div",{className:"editProfileAttachedVideoHint",children:[s("profile.socialsAttachedVideo"),": ",ue.name]}):null]})})()]},ee.key))}),n.jsxs("div",{className:"editProfileModalActions",children:[n.jsx("button",{type:"button",onClick:()=>{O(null);const ee=[];for(const M of pl){if(!!!(q[M.key]??"").trim())continue;(ae[M.key]??null)||ee.push(M.key)}if(ee.length>0){const M=Object.fromEntries(ee.map(S=>[S,s("profile.socialsVideoRequired")]));E(M);return}if(V===0){O(s("profile.socialsModerationNothingError"));return}j(q),k(ae),F(!1)},className:`editProfileBtn editProfileBtn--primary${G?"":" editProfileBtn--inactive"}`,"aria-disabled":!G,title:G?void 0:w>0?s("profile.socialsVideoRequired"):s("profile.socialsSubmitRequiresPair"),children:s("profile.socialsSubmitForModeration")}),n.jsx("button",{type:"button",onClick:()=>{E({}),O(null),F(!1)},className:"editProfileBtn",children:s("common.cancel")})]})]})}):null]})}const Ir="/api",nm=new Set;async function cf(s,a){const l=await fetch(s,a);if(!l.ok){const o=await l.json().catch(()=>null);throw new Error(o?.error??l.statusText)}return await l.json()}function uf(){for(const s of nm)s()}const xl={async listForUser(s){const a=`${Ir}/users/${s}/works`;return cf(a)},async create(s){const a=new FormData;a.append("ownerId",s.ownerId),a.append("title",s.title.trim()),a.append("description",(s.description??"").trim()),s.mediaUrl?.trim()&&a.append("externalUrl",s.mediaUrl.trim()),a.append("mediaType",s.mediaType??"video"),s.file&&a.append("file",s.file);const l=s.file?await TS(a,s.onProgress):await cf(`${Ir}/videos`,{method:"POST",body:a});return uf(),l},async delete(s){await fetch(`${Ir}/videos/${s}`,{method:"DELETE"}),uf()},async update(s,a){const l=await cf(`${Ir}/videos/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({...typeof a.title=="string"?{title:a.title}:null,...typeof a.description=="string"?{description:a.description}:null})});return uf(),l},subscribe(s){return nm.add(s),()=>{nm.delete(s)}}};function TS(s,a){return new Promise((l,o)=>{const u=new XMLHttpRequest;u.open("POST",`${Ir}/videos`),u.timeout=600*1e3,u.onloadstart=()=>{console.log("[workRepo] upload: onloadstart")},u.upload.onprogress=f=>{if(!a)return;const p=typeof f.total=="number"&&f.total>0?f.total:void 0,m=p?Math.round(f.loaded/p*100):void 0;a({loaded:f.loaded,total:p,percent:m})},u.upload.onload=()=>{console.log("[workRepo] upload: upload.onload (request body fully sent)")},u.upload.onerror=()=>{console.error("[workRepo] upload: upload.onerror")},u.onload=()=>{try{const f=u.responseText||"",p=f?JSON.parse(f):null;return u.status>=200&&u.status<300?l(p):o(new Error(p?.error??u.statusText))}catch(f){return o(f instanceof Error?f:new Error("upload_failed"))}},u.onloadend=()=>{console.log("[workRepo] upload: onloadend",{status:u.status})},u.onerror=()=>{o(new Error("network_error"))},u.onabort=()=>{o(new Error("upload_aborted"))},u.ontimeout=()=>{o(new Error("upload_timeout"))},u.send(s)})}function Um(s){const[a,l]=h.useState([]);return h.useEffect(()=>{if(!s)return;let o=!1;const u=async()=>{try{const p=await xl.listForUser(s);o||l(p)}catch{o||l([])}};u();const f=xl.subscribe(()=>{u()});return()=>{o=!0,f()}},[s]),a}function ES(s,a){s&&(typeof s=="function"?s(a):s.current=a)}function yl({src:s,videoRef:a,className:l,style:o,controls:u=!0,onPlay:f,onPause:p,onEnded:m}){const{t:v}=lt(),[x,y]=h.useState(!1),b=h.useCallback(N=>{ES(a,N)},[a]);return x?n.jsxs("div",{style:{display:"grid",gap:6},children:[n.jsx("div",{style:{fontSize:12,opacity:.85,color:"#ff9b9b"},children:v("video.unsupported")}),n.jsx("a",{href:s,target:"_blank",rel:"noreferrer",style:{fontSize:12,color:"#63b3ff"},children:v("profile.videoLink")})]}):n.jsx("video",{ref:b,controls:u,playsInline:!0,preload:"metadata",src:s,onError:()=>y(!0),onPlay:()=>f?.(),onPause:()=>p?.(),onEnded:()=>m?.(),className:l,style:{width:"100%",borderRadius:10,marginTop:6,maxHeight:240,objectFit:"cover",...o}})}function CS(s,a){return s==="open"?a("task.status.open"):s==="in_progress"?a("task.status.inProgress"):s==="review"?a("task.status.review"):s==="dispute"?a("task.status.dispute"):s==="closed"?a("task.status.closed"):String(s).replace("_"," ")}function jx(s){return s?s.startsWith("http://")||s.startsWith("https://"):!1}function DS(s){const{t:a,locale:l}=lt(),o=qs(),u=vs(),f=ya(),p=o.find(M=>M.id===s.ownerId)??null,m=Um(p?.id??null),v=h.useMemo(()=>{if(!p)return{list:[],doneAtByTaskId:new Map,completedTaskIds:new Set};const M=f.filter(Ne=>Ne.status!=="approved"&&Ne.status!=="resolved"?!1:p.role==="executor"?Ne.executorId===p.id:Ne.clientId===p.id),S=new Map;for(const Ne of M){const Ee=S.get(Ne.taskId)??"",Be=Ne.updatedAt||Ne.createdAt;(!Ee||Be.localeCompare(Ee)>0)&&S.set(Ne.taskId,Be)}const ue=new Set(M.map(Ne=>Ne.taskId));return{list:u.filter(Ne=>ue.has(Ne.id)?p.role==="executor"?Ne.assignedExecutorIds.includes(p.id):Ne.createdByUserId===p.id:!1).slice().sort((Ne,Ee)=>{const Be=S.get(Ne.id)??Ne.completedAt??Ne.createdAt;return(S.get(Ee.id)??Ee.completedAt??Ee.createdAt).localeCompare(Be)}),doneAtByTaskId:S,completedTaskIds:ue}},[f,p,u]),x=v.list,y=p?.role==="executor",b=h.useMemo(()=>y?m.filter(M=>jx(M.mediaUrl??M.videoUrl)).slice().sort((M,S)=>(S.createdAt??"").localeCompare(M.createdAt??"")):[],[y,m]),N=h.useMemo(()=>y?m.filter(M=>{const S=M.mediaUrl??M.videoUrl;return S?!jx(S):!1}):[],[y,m]),[j,C]=h.useState(0),[k,D]=h.useState(null),[F,q]=h.useState(null),[B,ae]=h.useState(!1),[W,X]=h.useState(!1),[E,A]=h.useState(null),[O,le]=h.useState(null),se=F?N.find(M=>M.id===F)??null:null,be=h.useRef(new Map),Se=h.useRef(null),Ce=h.useRef(null),ge=h.useRef(null),L=h.useRef([]),U=h.useRef(!1),ce=h.useRef(null);h.useEffect(()=>{const M=N[j]?.id??null;O&&O!==M&&le(null),E&&E!==M&&A(null);for(const[S,ue]of be.current)if(!(M&&S===M))try{ue.pause()}catch{}},[O,j,E,N]);const Q=(M,S="smooth")=>{const ue=ge.current,ye=L.current[M];if(!ue||!ye)return;const Ne=ye.offsetLeft+ye.offsetWidth/2-ue.clientWidth/2;ue.scrollTo({left:Ne,behavior:S})},de=M=>{if(!N.length)return;const S=Math.min(Math.max(M,0),N.length-1);if(S===j){Q(S);return}C(S),U.current=!0,ce.current!==null&&window.clearTimeout(ce.current),Q(S),ce.current=window.setTimeout(()=>{U.current=!1,ce.current=null},420)},w=()=>{if(U.current)return;const M=ge.current;if(!M||L.current.length===0)return;const S=M.scrollLeft+M.clientWidth/2;let ue=0,ye=Number.POSITIVE_INFINITY;for(let Ne=0;Ne<L.current.length;Ne++){const Ee=L.current[Ne];if(!Ee)continue;const Be=Ee.offsetLeft+Ee.offsetWidth/2,T=Math.abs(Be-S);T<ye&&(ye=T,ue=Ne)}ue!==j&&C(ue)},V=()=>{if(!N.length)return;const M=j<=0?N.length-1:j-1;de(M)},G=()=>{if(!N.length)return;const M=j>=N.length-1?0:j+1;de(M)},ie=M=>{D(S=>S===M?null:M)};h.useEffect(()=>{if(!se)return;ae(!1),X(!1);const M=S=>{const ue=S.target,ye=!!ue&&(ue.tagName==="INPUT"||ue.tagName==="TEXTAREA"||ue.tagName==="SELECT"||ue.isContentEditable);if(S.key==="Escape"){q(null);return}if(!ye&&!S.ctrlKey&&!S.metaKey&&!S.altKey&&(S.key==="ArrowLeft"||S.key==="ArrowRight")){if(se.mediaType==="photo")return;const Ne=Se.current;if(!Ne)return;S.preventDefault();const Ee=5,Be=S.key==="ArrowLeft"?-Ee:Ee,T=Number.isFinite(Ne.duration)?Ne.duration:null,H=Ne.currentTime+Be,ke=T!=null?Math.min(T,Math.max(0,H)):Math.max(0,H);try{Ne.currentTime=ke}catch{}}};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[se]),h.useEffect(()=>{if(!se||se.mediaType==="photo")return;const M=Ce.current,S=Se.current;if(!S)return;const ue=()=>{if(M){if(Number.isFinite(M.currentTime))try{S.currentTime=M.currentTime}catch{}S.muted=M.muted,S.volume=M.volume,S.playbackRate=M.playbackRate;const ye=!M.paused;M.pause(),ye?S.play().catch(()=>{}):S.pause()}};if(S.readyState>=1)ue();else return S.addEventListener("loadedmetadata",ue,{once:!0}),()=>S.removeEventListener("loadedmetadata",ue)},[se?.id,se?.mediaType]);const ee=()=>{const M=Ce.current,S=Se.current;if(M&&S){if(Number.isFinite(S.currentTime))try{M.currentTime=S.currentTime}catch{}M.muted=S.muted,M.volume=S.volume,M.playbackRate=S.playbackRate,!S.paused?M.play().catch(()=>{}):M.pause()}Se.current=null,Ce.current=null,ae(!1),X(!1),q(null)};return p?n.jsxs("div",{className:"portfolioInline",children:[y?n.jsx("section",{className:"portfolioCarousel",children:n.jsx("div",{className:"portfolioCarousel__media",children:N.length===0?n.jsx("div",{className:"portfolioCarousel__empty",children:a("portfolio.noWorks")}):n.jsxs("div",{className:"portfolioCarousel__viewport",tabIndex:0,"aria-label":a("portfolio.carouselTitle"),onKeyDown:M=>{M.key==="ArrowLeft"?(M.preventDefault(),V()):M.key==="ArrowRight"&&(M.preventDefault(),G())},children:[n.jsx("div",{className:"portfolioCarousel__fade portfolioCarousel__fade--left","aria-hidden":"true"}),n.jsx("div",{className:"portfolioCarousel__fade portfolioCarousel__fade--right","aria-hidden":"true"}),n.jsx("div",{className:`portfolioCarousel__track${N.length===1?" portfolioCarousel__track--single":""}`,ref:ge,onScroll:w,children:N.map((M,S)=>n.jsx("div",{className:`portfolioCarousel__slide${S===j?" portfolioCarousel__slide--active":""}`,ref:ue=>{L.current[S]=ue},onClick:()=>{de(S),M.mediaType==="photo"&&(Ce.current=null,ae(!1),X(!1),q(M.id))},role:"group","aria-label":`${S+1} / ${N.length}`,children:n.jsx("div",{className:"portfolioCarousel__slideInner",children:M.mediaType==="photo"?n.jsx("img",{src:M.mediaUrl??M.videoUrl,alt:M.title,className:"portfolioCarousel__image",loading:"lazy"}):n.jsxs("div",{className:`portfolioVideo${E===M.id?" portfolioVideo--playing":""}`,children:[n.jsx("button",{type:"button",className:"portfolioVideo__openBtn",title:l==="ru"?"  ":"Open in overlay","aria-label":l==="ru"?"  ":"Open in overlay",onClick:ue=>{ue.preventDefault(),ue.stopPropagation(),Ce.current=be.current.get(M.id)??null,ae(!1),X(!1),q(M.id)},children:n.jsxs("svg",{className:"portfolioVideo__openIcon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[n.jsx("path",{d:"M9 3H5a2 2 0 0 0-2 2v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2h-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M3 15v4a2 2 0 0 0 2 2h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),n.jsx(yl,{src:M.mediaUrl??M.videoUrl??"",controls:O===M.id,videoRef:ue=>{const ye=be.current;ue?ye.set(M.id,ue):ye.delete(M.id)},onPlay:()=>{A(M.id),le(M.id)},onPause:()=>A(null),onEnded:()=>A(null)}),S===j?n.jsx("button",{type:"button",className:"portfolioVideo__playBtn","aria-label":l==="ru"?"":"Play",onClick:ue=>{ue.preventDefault(),ue.stopPropagation(),le(M.id);for(const[Ne,Ee]of be.current)if(Ne!==M.id)try{Ee.pause()}catch{}const ye=be.current.get(M.id)??null;ye&&ye.play().catch(()=>{})}}):null]})})},M.id))}),N.length>1?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"portfolioCarousel__navBtn portfolioCarousel__navBtn--prev",onClick:V,"aria-label":a("portfolio.carouselPrev"),children:""}),n.jsx("button",{type:"button",className:"portfolioCarousel__navBtn portfolioCarousel__navBtn--next",onClick:G,"aria-label":a("portfolio.carouselNext"),children:""})]}):null]})})}):null,se?n.jsx("div",{className:"portfolioWorkOverlay",role:"dialog","aria-modal":"true","aria-label":se.title,onClick:()=>ee(),children:n.jsxs("div",{className:"portfolioWorkOverlay__modal",onClick:M=>M.stopPropagation(),children:[n.jsxs("div",{className:"portfolioWorkOverlay__header",children:[n.jsxs("div",{className:"portfolioWorkOverlay__titleWrap",children:[n.jsx("div",{className:"portfolioWorkOverlay__kicker",children:a("profile.workShowcase")}),n.jsx("h3",{className:"portfolioWorkOverlay__title",children:se.title})]}),n.jsx("button",{type:"button",className:"portfolioWorkOverlay__close",onClick:()=>ee(),"aria-label":a("common.cancel"),children:""})]}),n.jsxs("div",{className:"portfolioWorkOverlay__content",children:[n.jsx("div",{className:"portfolioWorkOverlay__media",children:se.mediaType==="photo"?n.jsx("img",{src:se.mediaUrl??se.videoUrl,alt:se.title,className:"portfolioWorkOverlay__image",loading:"lazy"}):n.jsx("div",{className:"portfolioWorkOverlay__video",children:n.jsxs("div",{className:`portfolioVideo${B?" portfolioVideo--playing":""}`,children:[n.jsx(yl,{src:se.mediaUrl??se.videoUrl??"",controls:W,videoRef:Se,onPlay:()=>ae(!0),onPause:()=>ae(!1),onEnded:()=>ae(!1)}),n.jsx("button",{type:"button",className:"portfolioVideo__playBtn","aria-label":l==="ru"?"":"Play",onClick:()=>{X(!0);const M=Se.current;M&&(M.paused?M.play().catch(()=>{}):M.pause())}})]})})}),n.jsxs("aside",{className:"portfolioWorkOverlay__details",children:[se.description?.trim()?n.jsx("p",{className:"portfolioWorkOverlay__description",children:se.description}):n.jsx("p",{className:"portfolioWorkOverlay__description",style:{opacity:.6},children:a("profile.workNoDescription")}),n.jsxs("div",{className:"portfolioWorkOverlay__meta",children:[se.createdAt?n.jsx("span",{children:new Date(se.createdAt).toLocaleDateString()}):null,se.mediaUrl??se.videoUrl?n.jsx("a",{href:se.mediaUrl??se.videoUrl,target:"_blank",rel:"noreferrer",children:a("profile.videoLink")}):null]})]})]})]})}):null,y&&b.length>0?n.jsxs("section",{className:"portfolioLinks",children:[n.jsxs("div",{className:"portfolioLinks__header",children:[n.jsx("div",{children:n.jsx("p",{className:"portfolioLinks__label",children:a("portfolio.externalWorksTitle")})}),n.jsx("span",{className:"portfolioLinks__count",children:b.length})]}),n.jsx("ul",{className:"portfolioLinksList",children:b.map(M=>{const S=M.mediaUrl??M.videoUrl??"";return n.jsxs("li",{className:"portfolioLinksItem",children:[n.jsxs("div",{className:"portfolioLinksItem__top",children:[n.jsxs("div",{className:"portfolioLinksItem__titleWrap",children:[n.jsx("h3",{className:"portfolioLinksItem__title",children:M.title}),M.createdAt?n.jsx("span",{className:"portfolioLinksItem__date",children:new Date(M.createdAt).toLocaleDateString()}):null]}),n.jsx("div",{className:"portfolioLinksItem__actions"})]}),M.description?.trim()?n.jsx("p",{className:"portfolioLinksItem__desc",children:M.description}):n.jsx("p",{className:"portfolioLinksItem__desc portfolioLinksItem__desc--empty",children:a("profile.workNoDescription")}),n.jsx("a",{className:"portfolioLinksItem__url",href:S,target:"_blank",rel:"noreferrer",title:S,children:S})]},M.id)})})]}):null,n.jsxs("section",{className:"portfolioTasks",children:[n.jsx("div",{className:"portfolioTasks__header",children:n.jsxs("div",{children:[n.jsxs("p",{className:"portfolioTasks__label",children:[a("portfolio.completedTasksTitle")," ",n.jsxs("span",{className:"portfolioTasks__countInline",children:["(",x.length,")"]})]}),n.jsx("p",{className:"portfolioTasks__subtitle",children:p.role==="executor"?a("portfolio.executorCompletedHint"):a("portfolio.customerCompletedHint")})]})}),x.length===0?n.jsx("div",{className:"portfolioEmpty",children:a("portfolio.completedTasksNone")}):n.jsx("ul",{className:"portfolioTasksList",children:x.map(M=>{const S=M.assignedExecutorIds[0]??null,ue=S?o.find(T=>T.id===S)??null:null,ye=M.createdByUserId&&M.createdByUserId!==p.id?o.find(T=>T.id===M.createdByUserId)??null:null,Ne=k===M.id,Ee=v.completedTaskIds.has(M.id),Be=v.doneAtByTaskId.get(M.id)??M.completedAt??null;return n.jsxs("li",{className:"portfolioTasksItem",children:[n.jsxs("button",{type:"button",className:"portfolioTasksItem__summary",onClick:()=>ie(M.id),children:[n.jsxs("div",{className:"portfolioTasksItem__summaryMain",children:[n.jsx("h3",{className:"portfolioTasksItem__title",children:ft(M.title,l)}),n.jsx(ws,{tone:Ee?"closed":M.status,label:Ee?a("task.status.closed"):CS(M.status,a),className:"portfolioTasksItem__statusPill"})]}),n.jsx("span",{className:"portfolioTasksItem__toggle",children:a(Ne?"portfolio.hideDetails":"portfolio.showDetails")})]}),Ne?n.jsxs("div",{className:"portfolioTasksItem__details",children:[n.jsxs("div",{className:"portfolioTasksItem__block",children:[n.jsx("div",{className:"portfolioTasksItem__blockTitle",children:l==="ru"?"":"Description"}),n.jsx("div",{className:"portfolioTasksItem__text",children:ft(M.description,l)?ft(M.description,l):""})]}),n.jsxs("div",{className:"portfolioTasksItem__block",children:[n.jsx("div",{className:"portfolioTasksItem__blockTitle",children:l==="ru"?"":"Details"}),n.jsxs("div",{className:"portfolioTasksItem__kv",children:[Be?n.jsxs("div",{className:"portfolioTasksItem__kvRow",children:[n.jsx("span",{className:"portfolioTasksItem__kvKey",children:a("profile.stats.completed")}),n.jsx("span",{className:"portfolioTasksItem__kvValue",children:new Date(Be).toLocaleDateString()})]}):null,M.dueDate?n.jsxs("div",{className:"portfolioTasksItem__kvRow",children:[n.jsx("span",{className:"portfolioTasksItem__kvKey",children:a("tasks.due")}),n.jsx("span",{className:"portfolioTasksItem__kvValue",children:M.dueDate})]}):null,n.jsxs("div",{className:"portfolioTasksItem__kvRow",children:[n.jsx("span",{className:"portfolioTasksItem__kvKey",children:a("task.meta.assigned")}),n.jsxs("span",{className:"portfolioTasksItem__kvValue",children:[M.assignedExecutorIds.length,"/",M.maxExecutors??1]})]}),p.role==="customer"&&ue?n.jsxs("div",{className:"portfolioTasksItem__kvRow",children:[n.jsx("span",{className:"portfolioTasksItem__kvKey",children:a("profile.takenBy")}),n.jsx("span",{className:"portfolioTasksItem__kvValue portfolioTasksItem__person",children:n.jsx(xe,{to:yc(ue.id),children:ue.fullName})})]}):null,p.role==="executor"&&ye?n.jsxs("div",{className:"portfolioTasksItem__kvRow",children:[n.jsx("span",{className:"portfolioTasksItem__kvKey",children:a("task.meta.postedBy")}),n.jsx("span",{className:"portfolioTasksItem__kvValue portfolioTasksItem__person",children:n.jsx(xe,{to:yc(ye.id),children:ye.fullName})})]}):null]})]}),n.jsxs("div",{className:"portfolioTasksItem__block",children:[n.jsx("div",{className:"portfolioTasksItem__blockTitle",children:l==="ru"?"":"Links"}),n.jsx("div",{className:"portfolioTasksItem__links",children:M.completionVideoUrl?n.jsx("a",{className:"portfolioTasksItem__completion",href:M.completionVideoUrl,target:"_blank",rel:"noreferrer",children:a("portfolio.completionLinkLabel")}):n.jsx("span",{className:"portfolioTasksItem__completionDisabled",children:a("portfolio.noCompletionLink")})})]})]}):null]},M.id)})})]})]}):null}function RS(){const{t:s,locale:a}=lt(),{userId:l}=si(),o=ts(),u=qs(),f=Ut(),p=ai(),m=Mm(),v=$y(),x=l?u.find(q=>q.id===l)??null:null,y=Um(x?.id??null),b=x?f.user?.id===x.id:!1,N=f.user?.role==="customer"&&x?.role==="executor"||f.user?.role==="executor"&&x?.role==="customer",j=h.useMemo(()=>Py(m,v,x?.id),[m,v,x?.id]),C=o.state?.backTo&&typeof o.state.backTo=="string"?o.state.backTo:K.tasks,k=h.useMemo(()=>/^\/tasks\/[^/]+$/.test(C),[C]),D=h.useMemo(()=>/^\/profile(\?|$)/.test(C)&&C.includes("tab=applications"),[C]),F=k?a==="ru"?"  ":"Back to task":D?a==="ru"?"  ":"Back to applications":s("task.details.backToTasks");return x?n.jsx(n.Fragment,{children:n.jsxs("main",{className:"profilePage",children:[n.jsx("section",{className:"profileHero",children:n.jsxs("div",{className:"profileHeroTop",children:[n.jsxs("div",{className:"profileIdentity",children:[n.jsx("div",{className:"profileAvatar","aria-hidden":"true",children:x.avatarDataUrl?n.jsx("img",{className:"profileAvatarImg",src:x.avatarDataUrl,alt:x.fullName}):n.jsx("div",{className:"profileAvatarMark","aria-hidden":"true",children:"UI"})}),n.jsxs("div",{style:{minWidth:0},children:[n.jsx("h1",{className:"profileTitle",children:x.fullName}),n.jsx("div",{className:"profileSubline",children:x.email}),n.jsxs("div",{className:"profileMetaLine",children:[n.jsx("span",{className:"pill",children:x.role==="customer"?s("profile.roleCustomer"):s("profile.roleExecutor")}),j?n.jsxs(xe,{className:"pill profileRatingLink",to:gf(x.id),state:{backTo:C},children:[" ",j.avg.toFixed(1)," (",j.count,")"]}):null,n.jsx("span",{className:"pill",children:x.phone}),x.company?n.jsx("span",{className:"pill",children:x.company}):null]}),p.enabled?n.jsxs("div",{className:"profileMetaLine profileMetaLine--id",children:[n.jsxs("span",{children:[s("profile.personalIdLabel"),": ",x.personalId]}),x.role==="executor"?n.jsxs("span",{children:[s("profile.executorIdLabel"),": ",x.id]}):null]}):null,n.jsx("div",{className:"profileSocials profileSocials--inline",children:n.jsx(qy,{socials:x.socials})})]})]}),n.jsxs("div",{className:"profileActions",children:[n.jsxs(xe,{className:"profileBtn",to:C,state:k?{fromProfileBack:!0}:void 0,children:[n.jsx("span",{"aria-hidden":"true",style:{marginRight:8},children:""}),F]}),b?null:n.jsx(xe,{className:"profileReportBtn",to:HN(x.id),children:s("profile.report")})]})]})}),N&&x?n.jsx("section",{className:"profileSection",children:n.jsx(DS,{ownerId:x.id})}):y?n.jsxs("section",{className:"profileSection profileWorksSection",children:[n.jsxs("div",{className:"profileSectionHeader",children:[n.jsx("h2",{className:"profileSectionTitle",children:s("profile.workShowcase")}),n.jsx("div",{className:"profileCount",children:y.length})]}),y.length===0?n.jsx("div",{className:"profileEmpty",children:s("profile.workEmpty")}):n.jsx("div",{className:"profileWorksGrid",children:y.map(q=>n.jsxs("div",{className:"profileWorksCard",children:[n.jsxs("div",{className:"profileWorksCard__header",children:[n.jsx("strong",{children:q.title}),q.createdAt?n.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()}):null]}),n.jsx("p",{children:q.description}),(()=>{const B=q.mediaUrl??q.videoUrl??null;return B?q.mediaType==="photo"?n.jsx("img",{src:B,alt:q.title,style:{width:"100%",borderRadius:10,marginTop:6,objectFit:"cover"}}):n.jsx(yl,{src:B}):null})(),q.mediaUrl??q.videoUrl?n.jsx("a",{className:"profileWorksCard__link",href:q.mediaUrl??q.videoUrl,target:"_blank",rel:"noreferrer",children:s("profile.videoLink")}):null]},q.id))})]}):null]})}):n.jsx("main",{className:"profilePage",children:n.jsxs("div",{className:"profileHero",children:[n.jsx("h1",{className:"profileTitle",children:s("auth.profile")}),n.jsx("div",{className:"profileEmpty",children:s("task.details.notFound")}),n.jsx("div",{children:n.jsx(xe,{to:C,children:s("task.details.backToTasks")})})]})})}const cc="ui-create-works.works.v1";async function MS(s){if(typeof window>"u")return{migrated:!1};const a=window.localStorage.getItem(cc);if(!a)return{migrated:!1};let l;try{if(l=JSON.parse(a),!Array.isArray(l))throw new Error("invalid")}catch{return window.localStorage.removeItem(cc),{migrated:!1}}const o=l.filter(p=>p.ownerId!==s),u=l.filter(p=>p.ownerId===s);if(!u.length)return window.localStorage.setItem(cc,JSON.stringify(o)),{migrated:!1};const f=[];for(const p of u){if(!p.title?.trim()||!p.ownerId)continue;let m=null;if(p.videoFileDataUrl)try{m=await US(p.videoFileDataUrl,p.videoFileName)}catch{continue}if(!(!m&&!p.videoUrl?.trim()))try{await xl.create({ownerId:s,title:p.title,description:p.description??"",mediaUrl:m?void 0:p.videoUrl,mediaType:m&&m.type.startsWith("image/")?"photo":"video",file:m}),f.push(p)}catch{continue}}return window.localStorage.setItem(cc,JSON.stringify([...o,...u.filter(p=>!f.includes(p))])),{migrated:f.length>0}}async function US(s,a){const o=await(await fetch(s)).blob(),u=a?a.split(".").pop():"",f=a??`work-${Date.now()}${u?`.${u}`:""}`;return new File([o],f,{type:o.type||"video/mp4"})}const BS=2*1024*1024*1024;function wx(){return`${Date.now()}-${Math.random().toString(36).slice(2,10)}`}function LS(s){const a=s.lastIndexOf(".");return a>0?s.slice(0,a):s}function Sx(s){const a=s.trim();return!a||a.startsWith("/videos/")?!0:a.startsWith("https://")||a.startsWith("http://")}function OS({open:s,ownerId:a,serverAvailable:l,migrationError:o,onClose:u}){const{t:f}=lt(),[p,m]=h.useState([]),[v,x]=h.useState(null),[y,b]=h.useState(!1),[N,j]=h.useState(null),[C,k]=h.useState(null),D=h.useRef(null),[F,q]=h.useState(""),[B,ae]=h.useState(""),[W,X]=h.useState(""),[E,A]=h.useState("video"),O=h.useMemo(()=>p.some(Q=>Q.status==="idle"||Q.status==="error"),[p]),le=h.useMemo(()=>p.filter(Q=>Q.status==="idle"||Q.status==="error").length,[p]);if(h.useEffect(()=>{s&&(x(null),j(null),k(null),q(""),ae(""),X(""),A("video"))},[s]),h.useEffect(()=>{if(!s)return;const Q=de=>{de.key==="Escape"&&u()};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[s,u]),h.useEffect(()=>{s||(m(Q=>{for(const de of Q)de.previewUrl&&URL.revokeObjectURL(de.previewUrl);return[]}),x(null),b(!1),j(null),k(null))},[s]),!s)return null;function se(Q,de){m(w=>w.map(V=>V.id===Q?{...V,...de}:V))}function be(Q){m(de=>{const w=de.find(V=>V.id===Q)??null;return w?.previewUrl&&URL.revokeObjectURL(w.previewUrl),de.filter(V=>V.id!==Q)})}function Se(){const Q=F.trim(),de=B.trim(),w=W.trim(),V=!!w,G=Sx(w)&&!!w,ie=Q?V?G?null:f("profile.workInvalidUrl"):f("profile.workNeedMedia"):f("validation.taskTitleRequired");if(ie){x(ie);return}x(null),m(ee=>[{id:wx(),title:Q,description:de,mediaUrl:w,mediaType:E,file:null,fileName:null,previewUrl:null,status:"idle",error:null},...ee]),q(""),ae(""),X(""),A("video")}function Ce(Q){const de=[];let w=null;for(const V of Q){if(V.size>BS){w||(w=f("profile.workTooLargeOne",{name:V.name}));continue}if(!V.type.startsWith("video/")&&!V.type.startsWith("image/")){w||(w=f("profile.workStorageFailed"));continue}const G=URL.createObjectURL(V);de.push({id:wx(),title:LS(V.name),description:"",mediaUrl:"",mediaType:V.type.startsWith("image/")?"photo":"video",file:V,fileName:V.name,previewUrl:G,status:"idle",error:null})}w&&x(w),de.length&&m(V=>[...de,...V])}function ge(Q){const de=Array.from(Q.target.files??[]);Q.target.value="",de.length&&(x(null),Ce(de))}function L(Q){const de=Q instanceof Error?Q.message:String(Q);return f(de==="file_too_large"?"profile.workTooLarge":de==="invalid_url"?"profile.workInvalidUrl":de==="missing_video"||de==="missing_fields"?"profile.workNeedMedia":de==="network_error"?"profile.serverUnavailable":"profile.workStorageFailed")}async function U(){if(y)return;x(null);const Q=p.map(V=>{if(V.status==="done")return{...V,error:null};const G=V.title.trim(),ie=V.description.trim(),ee=V.mediaUrl.trim(),M=!!V.file||!!ee,S=Sx(ee),ue=G?M?S?null:f("profile.workInvalidUrl"):f("profile.workNeedMedia"):f("validation.taskTitleRequired");return{...V,title:G,description:ie,mediaUrl:ee,error:ue,status:ue?"error":"idle"}});m(Q);const de=Q.filter(V=>V.status!=="done"&&!V.error);if(de.length===0){x(f("profile.workQueueEmpty"));return}if(!l){x(f("profile.serverUnavailable"));return}b(!0),k({current:0,total:de.length}),j(null);let w=0;for(let V=0;V<de.length;V++){const G=de[V];k({current:V+1,total:de.length}),se(G.id,{status:"uploading",error:null}),j(G.file?{loaded:0,total:G.file.size}:null);try{await xl.create({ownerId:a,title:G.title,description:G.description,mediaUrl:G.file?void 0:G.mediaUrl||void 0,mediaType:G.mediaType,file:G.file,onProgress:ie=>j(ie)}),w++,se(G.id,{status:"done",error:null})}catch(ie){se(G.id,{status:"error",error:L(ie)})}finally{j(null)}}b(!1),k(null),j(null),w===de.length?u():x(`${f("profile.workSaving",{current:w,total:de.length})}`)}const ce=C?f("profile.workSaving",{current:C.current,total:C.total}):N?.total?f("profile.workUploadProgress",{loaded:(N.loaded/1024/1024).toFixed(1),total:(N.total/1024/1024).toFixed(1)}):N?f("profile.workUploadProgressUnknown",{loaded:(N.loaded/1024/1024).toFixed(1)}):null;return n.jsx("div",{className:"addWorksOverlay",onClick:u,role:"dialog","aria-modal":"true","aria-label":f("profile.worksTitle"),children:n.jsxs("div",{className:"addWorksModal",onClick:Q=>Q.stopPropagation(),children:[n.jsxs("header",{className:"addWorksModal__header",children:[n.jsxs("div",{className:"addWorksModal__headerContent",children:[n.jsx("p",{className:"addWorksModal__label",children:f("profile.workShowcase")}),n.jsx("h2",{className:"addWorksModal__title",children:f("profile.addWorks")})]}),n.jsx("button",{className:"addWorksModal__close",type:"button",onClick:u,"aria-label":f("common.cancel"),children:""})]}),n.jsxs("div",{className:"addWorksModal__body",children:[l?null:n.jsx("div",{className:"addWorksModal__alert",children:f("profile.serverUnavailable")}),o?n.jsx("div",{className:"addWorksModal__alert",children:o}):null,v?n.jsx("div",{className:"addWorksModal__alert",children:v}):null,n.jsxs("div",{className:"addWorksModal__toolbar",children:[n.jsx("input",{ref:D,type:"file",multiple:!0,accept:"video/*,image/*",disabled:y,onChange:ge,className:"addWorksModal__fileInput"}),n.jsx("button",{type:"button",className:"addWorksModal__button",onClick:()=>D.current?.click(),disabled:y,children:f("profile.workUploadMany")})]}),n.jsxs("div",{className:"addWorksLinkBlock",children:[n.jsx("div",{className:"addWorksLinkBlock__header",children:n.jsx("p",{className:"addWorksLinkBlock__title",children:f("profile.workAddByLink")})}),n.jsxs("div",{className:"addWorksLinkBlock__grid",children:[n.jsxs("label",{className:"addWorksLinkBlock__field",children:[n.jsx("span",{className:"addWorksLinkBlock__label",children:f("profile.workTitle")}),n.jsx("input",{className:"addWorksLinkBlock__input",value:F,onChange:Q=>q(Q.target.value),disabled:y})]}),n.jsxs("div",{className:"addWorksLinkBlock__type",children:[n.jsx("span",{className:"addWorksLinkBlock__label",children:f("portfolio.mediaTypeLabel")}),n.jsxs("div",{className:"addWorksLinkBlock__typeButtons",children:[n.jsx("button",{type:"button",className:`addWorksLinkBlock__typeBtn${E==="video"?" addWorksLinkBlock__typeBtn--active":""}`,onClick:()=>A("video"),disabled:y,children:f("portfolio.mediaTypeVideo")}),n.jsx("button",{type:"button",className:`addWorksLinkBlock__typeBtn${E==="photo"?" addWorksLinkBlock__typeBtn--active":""}`,onClick:()=>A("photo"),disabled:y,children:f("portfolio.mediaTypePhoto")})]})]}),n.jsxs("label",{className:"addWorksLinkBlock__field addWorksLinkBlock__field--span2",children:[n.jsx("span",{className:"addWorksLinkBlock__label",children:f("profile.workLink")}),n.jsx("input",{className:"addWorksLinkBlock__input",value:W,onChange:Q=>X(Q.target.value),placeholder:"https://",disabled:y})]}),n.jsxs("label",{className:"addWorksLinkBlock__field addWorksLinkBlock__field--span2",children:[n.jsxs("span",{className:"addWorksLinkBlock__label",children:[f("profile.workDescription")," ",n.jsx("span",{className:"addWorksCard__optional",children:f("common.optional")})]}),n.jsx("textarea",{className:"addWorksLinkBlock__textarea",value:B,onChange:Q=>ae(Q.target.value),rows:3,disabled:y,placeholder:f("profile.workNoDescription")})]}),n.jsx("div",{className:"addWorksLinkBlock__actions",children:n.jsx("button",{type:"button",className:"addWorksModal__button",onClick:Se,disabled:y,children:f("profile.workAddLinkToQueue")})})]})]}),n.jsx("div",{className:"addWorksModal__queueHeader",children:n.jsxs("p",{className:"addWorksModal__queueTitle",children:[f("profile.workQueue")," ",n.jsxs("span",{className:"addWorksModal__queueCount",children:["(",p.length,")"]})]})}),p.length===0?n.jsx("div",{className:"addWorksModal__empty",children:f("profile.workQueueEmpty")}):n.jsx("div",{className:"addWorksModal__grid",children:p.map(Q=>n.jsxs("div",{className:`addWorksCard${Q.status==="done"?" addWorksCard--done":""}`,children:[n.jsx("div",{className:"addWorksCard__media",children:Q.previewUrl?Q.file?.type.startsWith("image/")?n.jsx("img",{className:"addWorksCard__img",src:Q.previewUrl,alt:Q.title||Q.fileName||""}):n.jsx("video",{className:"addWorksCard__video",src:Q.previewUrl,controls:!0}):n.jsx("div",{className:"addWorksCard__placeholder",children:Q.mediaType==="photo"?f("portfolio.mediaTypePhoto"):f("portfolio.mediaTypeVideo")})}),n.jsxs("div",{className:"addWorksCard__fields",children:[n.jsxs("label",{className:"addWorksCard__field",children:[n.jsx("span",{className:"addWorksCard__label",children:f("profile.workTitle")}),n.jsx("input",{className:"addWorksCard__input",value:Q.title,onChange:de=>se(Q.id,{title:de.target.value,status:"idle",error:null}),disabled:y})]}),n.jsxs("label",{className:"addWorksCard__field",children:[n.jsxs("span",{className:"addWorksCard__label",children:[f("profile.workDescription")," ",n.jsx("span",{className:"addWorksCard__optional",children:f("common.optional")})]}),n.jsx("textarea",{className:"addWorksCard__textarea",value:Q.description,onChange:de=>se(Q.id,{description:de.target.value,status:"idle",error:null}),rows:3,disabled:y,placeholder:f("profile.workNoDescription")})]}),Q.file?n.jsx("div",{className:"addWorksCard__fileName",title:Q.fileName??void 0,children:Q.fileName}):n.jsxs("label",{className:"addWorksCard__field",children:[n.jsx("span",{className:"addWorksCard__label",children:f("profile.workLink")}),n.jsx("input",{className:"addWorksCard__input",value:Q.mediaUrl,onChange:de=>se(Q.id,{mediaUrl:de.target.value,status:"idle",error:null}),placeholder:"https://",disabled:y})]}),Q.error?n.jsx("div",{className:"addWorksCard__error",children:Q.error}):null,n.jsxs("div",{className:"addWorksCard__actions",children:[n.jsx("button",{type:"button",className:"addWorksCard__remove",onClick:()=>be(Q.id),disabled:y||Q.status==="uploading",children:f("profile.workRemoveFromQueue")}),n.jsx("span",{className:"addWorksCard__status",children:Q.status==="uploading"?f("profile.workUploading"):Q.status==="done"?"OK":Q.status==="error"?"":""})]})]})]},Q.id))})]}),n.jsxs("footer",{className:"addWorksModal__footer",children:[n.jsx("button",{type:"button",className:"addWorksModal__cancel",onClick:u,disabled:y,children:f("common.cancel")}),n.jsx("button",{type:"button",className:"addWorksModal__submit",onClick:U,disabled:y||!O||p.length===0||!l,children:f("profile.workSaveAll",{count:le})})]}),ce?n.jsx("div",{className:"addWorksModal__progress",children:ce}):null]})})}function qS(s){const a=s.trim().split(/\s+/).filter(Boolean),l=a[0]?.[0]??"",o=a.length>1?a[a.length-1]?.[0]??"":"";return(l+o).toUpperCase()||"U"}function zS(s,a){return s==="open"?a("task.status.open"):s==="in_progress"?a("task.status.inProgress"):s==="review"?a("task.status.review"):s==="dispute"?a("task.status.dispute"):s==="closed"?a("task.status.closed"):s.replace("_"," ")}function Ix(s){return s?s.startsWith("http://")||s.startsWith("https://"):!1}function HS(){const{t:s,locale:a}=lt(),l=Ut(),{userId:o}=si(),u=qs(),f=Um(o??null),p=vs(),m=ya(),v=o?u.find(ne=>ne.id===o)??null:null,x=h.useMemo(()=>{if(!v)return{list:[],doneAtByTaskId:new Map,completedTaskIds:new Set};const ne=m.filter(Ve=>Ve.status!=="approved"&&Ve.status!=="resolved"?!1:v.role==="executor"?Ve.executorId===v.id:Ve.clientId===v.id),Ie=new Map;for(const Ve of ne){const _t=Ie.get(Ve.taskId)??"",Mt=Ve.updatedAt||Ve.createdAt;(!_t||Mt.localeCompare(_t)>0)&&Ie.set(Ve.taskId,Mt)}const $e=new Set(ne.map(Ve=>Ve.taskId));return{list:p.filter(Ve=>$e.has(Ve.id)?v.role==="executor"?Ve.assignedExecutorIds.includes(v.id):Ve.createdByUserId===v.id:!1).slice().sort((Ve,_t)=>{const Mt=Ie.get(Ve.id)??Ve.completedAt??Ve.createdAt;return(Ie.get(_t.id)??_t.completedAt??_t.createdAt).localeCompare(Mt)}),doneAtByTaskId:Ie,completedTaskIds:$e}},[m,v,p]),y=x.list,b=v?.role==="executor",j=!!(l.user&&v&&l.user.id===v.id)&&v?.role==="executor",C=h.useMemo(()=>b?f.filter(ne=>Ix(ne.mediaUrl??ne.videoUrl)).slice().sort((ne,Ie)=>(Ie.createdAt??"").localeCompare(ne.createdAt??"")):[],[b,f]),k=h.useMemo(()=>b?f.filter(ne=>{const Ie=ne.mediaUrl??ne.videoUrl;return Ie?!Ix(Ie):!1}):[],[b,f]),[D,F]=h.useState(0),[q,B]=h.useState(null),[ae,W]=h.useState(null),[X,E]=h.useState(!1),[A,O]=h.useState(!1),[le,se]=h.useState(null),[be,Se]=h.useState(null),[Ce,ge]=h.useState(!1),[L,U]=h.useState(""),[ce,Q]=h.useState(""),[de,w]=h.useState(!1),[V,G]=h.useState(null),ie=ae?k.find(ne=>ne.id===ae)??null:null,ee=h.useRef(null),M=h.useRef([]),S=h.useRef(!1),ue=h.useRef(null),ye=h.useRef(new Map),Ne=h.useRef(null),Ee=h.useRef(null),[Be,T]=h.useState(!1),[H,ke]=h.useState(!1),[we,$]=h.useState(null),De=h.useRef(new Set);h.useEffect(()=>{const ne=k[D]?.id??null;be&&be!==ne&&Se(null),le&&le!==ne&&se(null);for(const[Ie,$e]of ye.current)if(!(ne&&Ie===ne))try{$e.pause()}catch{}},[be,D,le,k]),h.useEffect(()=>{if(!j)return;let ne=!1;const Ie="/api",$e=async()=>{try{const Ve=await fetch(`${Ie}/health`);ne||ke(Ve.ok)}catch{ne||ke(!1)}};$e();const rt=window.setInterval($e,3e4);return()=>{ne=!0,window.clearInterval(rt)}},[j]),h.useEffect(()=>{if(!j||!v||!H||De.current.has(v.id))return;let ne=!1;return MS(v.id).then(Ie=>{ne||Ie.migrated&&$(null)}).catch(()=>{ne||$(s("profile.workMigrationFailed"))}).finally(()=>{ne||De.current.add(v.id)}),()=>{ne=!0}},[j,v,H,s]),h.useEffect(()=>{if(!k.length){F(0);return}F(ne=>Math.min(Math.max(ne,0),k.length-1))},[k.length]),h.useEffect(()=>{if(!ie)return;E(!1),O(!1),ge(!1),U(ie.title??""),Q(ie.description??""),w(!1),G(null);const ne=Ie=>{const $e=Ie.target,rt=!!$e&&($e.tagName==="INPUT"||$e.tagName==="TEXTAREA"||$e.tagName==="SELECT"||$e.isContentEditable);if(Ie.key==="Escape"){Ye();return}if(!rt&&!Ie.ctrlKey&&!Ie.metaKey&&!Ie.altKey&&(Ie.key==="ArrowLeft"||Ie.key==="ArrowRight")){if(ie.mediaType==="photo")return;const Ve=Ne.current;if(!Ve)return;Ie.preventDefault();const _t=5,Mt=Ie.key==="ArrowLeft"?-_t:_t,gt=Number.isFinite(Ve.duration)?Ve.duration:null,os=Ve.currentTime+Mt,qt=gt!=null?Math.min(gt,Math.max(0,os)):Math.max(0,os);try{Ve.currentTime=qt}catch{}}};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[ie]),h.useEffect(()=>{if(!ie||ie.mediaType==="photo")return;const ne=Ee.current,Ie=Ne.current;if(!Ie)return;const $e=()=>{if(!ne)return;if(Number.isFinite(ne.currentTime))try{Ie.currentTime=ne.currentTime}catch{}Ie.muted=ne.muted,Ie.volume=ne.volume,Ie.playbackRate=ne.playbackRate;const rt=!ne.paused;ne.pause(),rt?Ie.play().catch(()=>{}):Ie.pause()};if(Ie.readyState>=1)$e();else return Ie.addEventListener("loadedmetadata",$e,{once:!0}),()=>Ie.removeEventListener("loadedmetadata",$e)},[ie?.id,ie?.mediaType]);function Ye(){const ne=Ee.current,Ie=Ne.current;if(ne&&Ie){if(Number.isFinite(Ie.currentTime))try{ne.currentTime=Ie.currentTime}catch{}ne.muted=Ie.muted,ne.volume=Ie.volume,ne.playbackRate=Ie.playbackRate,!Ie.paused?ne.play().catch(()=>{}):ne.pause()}Ne.current=null,Ee.current=null,E(!1),O(!1),ge(!1),w(!1),G(null),W(null)}const Ge=(ne,Ie="smooth")=>{const $e=ee.current,rt=M.current[ne];if(!$e||!rt)return;const Ve=rt.offsetLeft+rt.offsetWidth/2-$e.clientWidth/2;$e.scrollTo({left:Ve,behavior:Ie})},fe=ne=>{if(!k.length)return;const Ie=Math.min(Math.max(ne,0),k.length-1);if(Ie===D){Ge(Ie);return}F(Ie),S.current=!0,ue.current!==null&&window.clearTimeout(ue.current),Ge(Ie),ue.current=window.setTimeout(()=>{S.current=!1,ue.current=null},420)},Re=()=>{if(S.current)return;const ne=ee.current;if(!ne||M.current.length===0)return;const Ie=ne.scrollLeft+ne.clientWidth/2;let $e=0,rt=Number.POSITIVE_INFINITY;for(let Ve=0;Ve<M.current.length;Ve++){const _t=M.current[Ve];if(!_t)continue;const Mt=_t.offsetLeft+_t.offsetWidth/2,gt=Math.abs(Mt-Ie);gt<rt&&(rt=gt,$e=Ve)}$e!==D&&F($e)},st=()=>{if(!k.length)return;const ne=D<=0?k.length-1:D-1;fe(ne)},mt=()=>{if(!k.length)return;const ne=D>=k.length-1?0:D+1;fe(ne)},Es=ne=>{B(Ie=>Ie===ne?null:ne)},$t=async ne=>{if(!(!j||!window.confirm(s("profile.workDeleteConfirm"))))try{await xl.delete(ne),ae===ne&&W(null)}catch{}};return v?n.jsxs("main",{className:"portfolioPage",children:[n.jsxs("div",{className:"portfolioHeader",children:[n.jsxs("div",{className:"portfolioHeaderLeft",children:[n.jsx("div",{className:"portfolioAvatar","aria-hidden":!!v.avatarDataUrl,children:v.avatarDataUrl?n.jsx("img",{className:"portfolioAvatarImg",src:v.avatarDataUrl,alt:v.fullName}):n.jsx("div",{className:"portfolioAvatarFallback","aria-hidden":"true",children:qS(v.fullName)})}),n.jsxs("div",{children:[n.jsx("h1",{className:"portfolioTitle",children:v.fullName}),n.jsx("p",{className:"portfolioSubtitle",children:s("portfolio.subtitle")})]})]}),n.jsx("div",{style:{display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:j?n.jsx("button",{type:"button",className:"portfolioBackLink",onClick:()=>T(!0),children:s("profile.addWorks")}):null})]}),b?n.jsx("section",{className:"portfolioCarousel",children:n.jsx("div",{className:"portfolioCarousel__media",children:k.length===0?n.jsx("div",{className:"portfolioCarousel__empty",children:s("portfolio.noWorks")}):n.jsxs("div",{className:"portfolioCarousel__viewport",tabIndex:0,"aria-label":s("portfolio.carouselTitle"),onKeyDown:ne=>{ne.key==="ArrowLeft"?(ne.preventDefault(),st()):ne.key==="ArrowRight"&&(ne.preventDefault(),mt())},children:[n.jsx("div",{className:"portfolioCarousel__fade portfolioCarousel__fade--left","aria-hidden":"true"}),n.jsx("div",{className:"portfolioCarousel__fade portfolioCarousel__fade--right","aria-hidden":"true"}),n.jsx("div",{className:`portfolioCarousel__track${k.length===1?" portfolioCarousel__track--single":""}`,ref:ee,onScroll:Re,children:k.map((ne,Ie)=>n.jsx("div",{className:`portfolioCarousel__slide${Ie===D?" portfolioCarousel__slide--active":""}`,ref:$e=>{M.current[Ie]=$e},onClick:()=>{fe(Ie),ne.mediaType==="photo"&&(Ee.current=null,E(!1),O(!1),W(ne.id))},role:"group","aria-label":`${Ie+1} / ${k.length}`,children:n.jsx("div",{className:"portfolioCarousel__slideInner",children:ne.mediaType==="photo"?n.jsx("img",{src:ne.mediaUrl??ne.videoUrl,alt:ne.title,className:"portfolioCarousel__image",loading:"lazy"}):n.jsxs("div",{className:`portfolioVideo${le===ne.id?" portfolioVideo--playing":""}`,children:[n.jsx("button",{type:"button",className:"portfolioVideo__openBtn",title:a==="ru"?"  ":"Open in overlay","aria-label":a==="ru"?"  ":"Open in overlay",onClick:$e=>{$e.preventDefault(),$e.stopPropagation(),Ee.current=ye.current.get(ne.id)??null,E(!1),O(!1),W(ne.id)},children:n.jsxs("svg",{className:"portfolioVideo__openIcon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[n.jsx("path",{d:"M9 3H5a2 2 0 0 0-2 2v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2h-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M3 15v4a2 2 0 0 0 2 2h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),n.jsx(yl,{src:ne.mediaUrl??ne.videoUrl??"",controls:be===ne.id,videoRef:$e=>{const rt=ye.current;$e?rt.set(ne.id,$e):rt.delete(ne.id)},onPlay:()=>{se(ne.id),Se(ne.id)},onPause:()=>se(null),onEnded:()=>se(null)}),Ie===D?n.jsx("button",{type:"button",className:"portfolioVideo__playBtn","aria-label":a==="ru"?"":"Play",onClick:$e=>{$e.preventDefault(),$e.stopPropagation(),Se(ne.id);for(const[Ve,_t]of ye.current)if(Ve!==ne.id)try{_t.pause()}catch{}const rt=ye.current.get(ne.id)??null;rt&&rt.play().catch(()=>{})}}):null]})})},ne.id))}),k.length>1?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"portfolioCarousel__navBtn portfolioCarousel__navBtn--prev",onClick:st,"aria-label":s("portfolio.carouselPrev"),children:""}),n.jsx("button",{type:"button",className:"portfolioCarousel__navBtn portfolioCarousel__navBtn--next",onClick:mt,"aria-label":s("portfolio.carouselNext"),children:""})]}):null]})})}):null,ie?n.jsx("div",{className:"portfolioWorkOverlay",role:"dialog","aria-modal":"true","aria-label":ie.title,onClick:()=>Ye(),children:n.jsxs("div",{className:"portfolioWorkOverlay__modal",onClick:ne=>ne.stopPropagation(),children:[n.jsxs("div",{className:"portfolioWorkOverlay__header",children:[n.jsxs("div",{className:"portfolioWorkOverlay__titleWrap",children:[n.jsx("div",{className:"portfolioWorkOverlay__kicker",children:s("profile.workShowcase")}),Ce?n.jsx("input",{value:L,onChange:ne=>U(ne.target.value),placeholder:a==="ru"?" ":"Work title",style:{width:"min(560px, 100%)",padding:"8px 10px",borderRadius:10,border:"1px solid var(--border)",background:"var(--card2)",color:"var(--text)",outline:"none",fontSize:16,fontWeight:700}}):n.jsx("h3",{className:"portfolioWorkOverlay__title",children:ie.title})]}),n.jsxs("div",{className:"portfolioWorkOverlay__headerActions",children:[j?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"portfolioWorkOverlay__edit",onClick:()=>{if(!Ce){G(null),U(ie.title??""),Q(ie.description??""),ge(!0);return}(async()=>{if(!ie)return;const ne=L.trim();if(!ne){G(a==="ru"?"    .":"Title cannot be empty.");return}w(!0),G(null);try{await xl.update(ie.id,{title:ne,description:ce}),ge(!1)}catch{G(a==="ru"?"  . ,   .":"Failed to save. Make sure the server is running.")}finally{w(!1)}})()},disabled:de,title:Ce?a==="ru"?"":"Save":a==="ru"?"":"Edit","aria-label":Ce?a==="ru"?"":"Save":a==="ru"?"":"Edit",children:Ce?a==="ru"?"":"Save":a==="ru"?"":"Edit"}),Ce?n.jsx("button",{type:"button",className:"portfolioWorkOverlay__edit",style:{background:"transparent",opacity:.9},onClick:()=>{G(null),w(!1),ge(!1),U(ie.title??""),Q(ie.description??"")},disabled:de,children:a==="ru"?"":"Cancel"}):null,n.jsx("button",{type:"button",className:"portfolioWorkOverlay__delete",onClick:()=>$t(ie.id),disabled:de,children:s("profile.workDelete")})]}):null,n.jsx("button",{type:"button",className:"portfolioWorkOverlay__close",onClick:()=>Ye(),"aria-label":s("common.cancel"),children:""})]})]}),n.jsxs("div",{className:"portfolioWorkOverlay__content",children:[n.jsx("div",{className:"portfolioWorkOverlay__media",children:ie.mediaType==="photo"?n.jsx("img",{src:ie.mediaUrl??ie.videoUrl,alt:ie.title,className:"portfolioWorkOverlay__image",loading:"lazy"}):n.jsx("div",{className:"portfolioWorkOverlay__video",children:n.jsxs("div",{className:`portfolioVideo${X?" portfolioVideo--playing":""}`,children:[n.jsx(yl,{src:ie.mediaUrl??ie.videoUrl??"",controls:A,videoRef:Ne,onPlay:()=>E(!0),onPause:()=>E(!1),onEnded:()=>E(!1)}),n.jsx("button",{type:"button",className:"portfolioVideo__playBtn","aria-label":a==="ru"?"":"Play",onClick:()=>{O(!0);const ne=Ne.current;ne&&(ne.paused?ne.play().catch(()=>{}):ne.pause())}})]})})}),n.jsxs("aside",{className:"portfolioWorkOverlay__details",children:[V?n.jsx("div",{style:{color:"rgba(239, 68, 68, 0.95)",fontSize:13,fontWeight:600},children:V}):null,Ce?n.jsx("textarea",{value:ce,onChange:ne=>Q(ne.target.value),placeholder:a==="ru"?" ()":"Description (optional)",rows:6,style:{width:"100%",resize:"vertical",padding:"10px 12px",borderRadius:12,border:"1px solid var(--border)",background:"var(--card2)",color:"var(--text)",outline:"none",fontSize:13,lineHeight:1.5}}):ie.description?.trim()?n.jsx("p",{className:"portfolioWorkOverlay__description",children:ie.description}):n.jsx("p",{className:"portfolioWorkOverlay__description",style:{opacity:.6},children:s("profile.workNoDescription")}),n.jsxs("div",{className:"portfolioWorkOverlay__meta",children:[ie.createdAt?n.jsx("span",{children:new Date(ie.createdAt).toLocaleDateString()}):null,ie.mediaUrl??ie.videoUrl?n.jsx("a",{href:ie.mediaUrl??ie.videoUrl,target:"_blank",rel:"noreferrer",children:s("profile.videoLink")}):null]})]})]})]})}):null,b&&C.length>0?n.jsxs("section",{className:"portfolioLinks",children:[n.jsxs("div",{className:"portfolioLinks__header",children:[n.jsx("div",{children:n.jsx("p",{className:"portfolioLinks__label",children:s("portfolio.externalWorksTitle")})}),n.jsx("span",{className:"portfolioLinks__count",children:C.length})]}),n.jsx("ul",{className:"portfolioLinksList",children:C.map(ne=>{const Ie=ne.mediaUrl??ne.videoUrl??"";return n.jsxs("li",{className:"portfolioLinksItem",children:[n.jsxs("div",{className:"portfolioLinksItem__top",children:[n.jsxs("div",{className:"portfolioLinksItem__titleWrap",children:[n.jsx("h3",{className:"portfolioLinksItem__title",children:ne.title}),ne.createdAt?n.jsx("span",{className:"portfolioLinksItem__date",children:new Date(ne.createdAt).toLocaleDateString()}):null]}),n.jsx("div",{className:"portfolioLinksItem__actions",children:j?n.jsx("button",{type:"button",className:"portfolioLinksItem__delete",onClick:()=>$t(ne.id),children:s("profile.workDelete")}):null})]}),ne.description?.trim()?n.jsx("p",{className:"portfolioLinksItem__desc",children:ne.description}):n.jsx("p",{className:"portfolioLinksItem__desc portfolioLinksItem__desc--empty",children:s("profile.workNoDescription")}),n.jsx("a",{className:"portfolioLinksItem__url",href:Ie,target:"_blank",rel:"noreferrer",title:Ie,children:Ie})]},ne.id)})})]}):null,n.jsxs("section",{className:"portfolioTasks",children:[n.jsx("div",{className:"portfolioTasks__header",children:n.jsxs("div",{children:[n.jsxs("p",{className:"portfolioTasks__label",children:[s("portfolio.completedTasksTitle")," ",n.jsxs("span",{className:"portfolioTasks__countInline",children:["(",y.length,")"]})]}),n.jsx("p",{className:"portfolioTasks__subtitle",children:v.role==="executor"?s("portfolio.executorCompletedHint"):s("portfolio.customerCompletedHint")})]})}),y.length===0?n.jsx("div",{className:"portfolioEmpty",children:s("portfolio.completedTasksNone")}):n.jsx("ul",{className:"portfolioTasksList",children:y.map(ne=>{const Ie=ne.assignedExecutorIds[0]??null,$e=Ie?u.find(gt=>gt.id===Ie)??null:null,rt=ne.createdByUserId&&ne.createdByUserId!==v.id?u.find(gt=>gt.id===ne.createdByUserId)??null:null,Ve=q===ne.id,_t=x.completedTaskIds.has(ne.id),Mt=x.doneAtByTaskId.get(ne.id)??ne.completedAt??null;return n.jsxs("li",{className:"portfolioTasksItem",children:[n.jsxs("button",{type:"button",className:"portfolioTasksItem__summary",onClick:()=>Es(ne.id),children:[n.jsxs("div",{className:"portfolioTasksItem__summaryMain",children:[n.jsx("h3",{className:"portfolioTasksItem__title",children:ft(ne.title,a)}),n.jsx(ws,{tone:_t?"closed":ne.status,label:_t?s("task.status.closed"):zS(ne.status,s),className:"portfolioTasksItem__statusPill"})]}),n.jsx("span",{className:"portfolioTasksItem__toggle",children:s(Ve?"portfolio.hideDetails":"portfolio.showDetails")})]}),Ve?n.jsxs("div",{className:"portfolioTasksItem__details",children:[n.jsxs("div",{className:"portfolioTasksItem__block",children:[n.jsx("div",{className:"portfolioTasksItem__blockTitle",children:a==="ru"?"":"Description"}),n.jsx("div",{className:"portfolioTasksItem__text",children:ft(ne.description,a)?ft(ne.description,a):""})]}),n.jsxs("div",{className:"portfolioTasksItem__block",children:[n.jsx("div",{className:"portfolioTasksItem__blockTitle",children:a==="ru"?"":"Details"}),n.jsxs("div",{className:"portfolioTasksItem__kv",children:[Mt?n.jsxs("div",{className:"portfolioTasksItem__kvRow",children:[n.jsx("span",{className:"portfolioTasksItem__kvKey",children:s("profile.stats.completed")}),n.jsx("span",{className:"portfolioTasksItem__kvValue",children:new Date(Mt).toLocaleDateString()})]}):null,ne.dueDate?n.jsxs("div",{className:"portfolioTasksItem__kvRow",children:[n.jsx("span",{className:"portfolioTasksItem__kvKey",children:s("tasks.due")}),n.jsx("span",{className:"portfolioTasksItem__kvValue",children:ne.dueDate})]}):null,n.jsxs("div",{className:"portfolioTasksItem__kvRow",children:[n.jsx("span",{className:"portfolioTasksItem__kvKey",children:s("task.meta.assigned")}),n.jsxs("span",{className:"portfolioTasksItem__kvValue",children:[ne.assignedExecutorIds.length,"/",ne.maxExecutors??1]})]}),v.role==="customer"&&$e?n.jsxs("div",{className:"portfolioTasksItem__kvRow",children:[n.jsx("span",{className:"portfolioTasksItem__kvKey",children:s("profile.takenBy")}),n.jsx("span",{className:"portfolioTasksItem__kvValue portfolioTasksItem__person",children:n.jsx(xe,{to:yc($e.id),children:$e.fullName})})]}):null,v.role==="executor"&&rt?n.jsxs("div",{className:"portfolioTasksItem__kvRow",children:[n.jsx("span",{className:"portfolioTasksItem__kvKey",children:s("task.meta.postedBy")}),n.jsx("span",{className:"portfolioTasksItem__kvValue portfolioTasksItem__person",children:n.jsx(xe,{to:yc(rt.id),children:rt.fullName})})]}):null]})]}),n.jsxs("div",{className:"portfolioTasksItem__block",children:[n.jsx("div",{className:"portfolioTasksItem__blockTitle",children:a==="ru"?"":"Links"}),n.jsxs("div",{className:"portfolioTasksItem__links",children:[ne.completionVideoUrl?n.jsx("a",{className:"portfolioTasksItem__completion",href:ne.completionVideoUrl,target:"_blank",rel:"noreferrer",children:s("portfolio.completionLinkLabel")}):n.jsx("span",{className:"portfolioTasksItem__completionDisabled",children:s("portfolio.noCompletionLink")}),n.jsx(xe,{className:"portfolioTasksItem__detailsLink",to:Oe(ne.id),children:s("portfolio.viewTask")})]})]})]}):null]},ne.id)})})]}),j?n.jsx(OS,{open:Be,ownerId:v.id,serverAvailable:H,migrationError:we,onClose:()=>T(!1)}):null]}):n.jsx("main",{className:"portfolioPage",children:n.jsx("div",{className:"portfolioHeader",children:n.jsxs("div",{children:[n.jsx("h1",{className:"portfolioTitle",children:s("portfolio.notFoundTitle")}),n.jsx("p",{className:"portfolioSubtitle",children:s("portfolio.notFoundHint")})]})})})}const Ax="ui-create-works.openApplications",VS=[{value:"all",key:"customerTasks.status.all"},{value:"draft",key:"task.status.draft"},{value:"open",key:"task.status.open"},{value:"waiting",key:"task.status.waiting"},{value:"in_progress",key:"task.status.inProgress"},{value:"review",key:"task.status.review"},{value:"dispute",key:"task.status.dispute"},{value:"closed",key:"task.status.closed"}];function df(s){const a=s.trim();return a?a[0].toUpperCase()+a.slice(1):s}function PS(){const{t:s,locale:a}=lt(),l=Ut(),o=ai(),u=Qt(),f=vs(),p=qs(),m=Nl(),v=ya(),x=Ti(),[y,b]=h.useState(null),[N,j]=h.useState("all"),[C,k]=h.useState(""),[D,F]=h.useState(null),[q,B]=h.useState(null),[ae,W]=h.useState("new"),[X,E]=h.useState(1),A=20,O=h.useRef(null),le=h.useRef(null),se=h.useMemo(()=>l.user?f.filter(T=>T.createdByUserId===l.user?.id):[],[l.user,f]),be=h.useMemo(()=>se.some(T=>T.status!=="draft"),[se]),Se=h.useMemo(()=>C.trim().toLowerCase().split(/\s+/).filter(Boolean),[C]),Ce=h.useMemo(()=>{const T=new Set;for(const H of x)H.status==="overdue"&&T.add(H.taskId);return T},[x]),ge=h.useMemo(()=>{const T=new Map,H=new Map;for(const ke of m){const we=T.get(ke.taskId);we?we.push(ke):T.set(ke.taskId,[ke]),ke.status==="pending"&&H.set(ke.taskId,(H.get(ke.taskId)??0)+1)}return{all:T,pendingCount:H}},[m]),L=h.useMemo(()=>{const T=H=>Ce.has(H.id)&&H.status==="in_progress";return se.filter(H=>H.status!=="archived").filter(H=>N==="all"?!0:N==="draft"?H.status==="draft":N==="waiting"?T(H):N==="in_progress"?H.status==="in_progress"&&!T(H):H.status===N).filter(H=>{if(!Se.length)return!0;const ke=[ft(H.title,a),ft(H.shortDescription,a),H.requirements?ft(H.requirements,a):"",ft(H.description,a),H.category??"",H.location??""].join(" ").toLowerCase();return Se.every(we=>ke.includes(we))}).sort((H,ke)=>{const we=ge.pendingCount.get(H.id)??0,$=ge.pendingCount.get(ke.id)??0,De=we>0,Ye=$>0;if(De!==Ye)return De?-1:1;const Ge=H.status==="review"||H.status==="dispute",fe=ke.status==="review"||ke.status==="dispute";if(Ge!==fe)return Ge?-1:1;const Re=H.status==="closed",st=ke.status==="closed";return Re!==st?Re?1:-1:ae==="new"?ke.createdAt.localeCompare(H.createdAt):H.createdAt.localeCompare(ke.createdAt)})},[se,N,Se,a,ae,Ce,ge]),U=h.useMemo(()=>Math.max(1,Math.ceil(L.length/A)),[L.length]),ce=h.useMemo(()=>{const T=(X-1)*A;return L.slice(T,T+A)},[L,X]);h.useEffect(()=>{E(1)},[N,C,ae]),h.useEffect(()=>{E(T=>Math.min(Math.max(1,T),U))},[U]),h.useEffect(()=>{if(le.current===null){le.current=X;return}le.current!==X&&(le.current=X,window.requestAnimationFrame(()=>{O.current?.scrollIntoView({behavior:"smooth",block:"start"})}))},[X]);const Q=h.useMemo(()=>l.user?v.filter(T=>T.clientId===l.user.id&&T.status==="submitted").length:0,[l.user,v]),de=h.useMemo(()=>{if(!l.user||l.user.role!=="customer")return 0;const T=new Set(se.map(H=>H.id));return x.filter(H=>H.status==="pause_requested"&&T.has(H.taskId)).length},[x,l.user,se]),w=h.useMemo(()=>{const T=new Map;for(const H of x)H.status!=="paused"&&H.status!=="pause_requested"||T.get(H.taskId)==="paused"||T.set(H.taskId,H.status);return T},[x]),V=D?(ge.all.get(D)??[]).slice().sort((T,H)=>H.createdAt.localeCompare(T.createdAt)):[],G=D?yt.getById(D)??null:null,ie=G?.assignedExecutorIds.length??0,ee=G?.maxExecutors??1,M=ie<ee,[S,ue]=h.useState(!1),ye=h.useRef(null),Ne=h.useRef(null);h.useEffect(()=>{if(!S)return;const T=ke=>{const we=ke.target;we instanceof Node&&(ye.current?.contains(we)||Ne.current?.contains(we)||ue(!1))},H=ke=>{ke.key==="Escape"&&ue(!1)};return window.addEventListener("pointerdown",T),window.addEventListener("keydown",H),()=>{window.removeEventListener("pointerdown",T),window.removeEventListener("keydown",H)}},[S]);const Ee=(T,H)=>{if(!G||!l.user)return;b(null);const ke=G.createdByUserId,we=He.getForTaskExecutor(G.id,T.executorUserId),$=G.budgetAmount??0,De=Ay(T.executorUserId);if(De>=2&&!H?.bypassNoStartConfirm){B({applicationId:T.id,count:De});return}if(!we&&$>0&&!fs.withdraw(ke,$)){b(G.id);return}if(!yt.addExecutor(G.id,T.executorUserId)){!we&&$>0&&ke&&fs.deposit(ke,$),b(G.id);return}const Ge=we??He.createActive({taskId:G.id,clientId:ke??l.user.id,executorId:T.executorUserId,escrowAmount:$,revisionIncluded:2});!we&&$>0&&ke&&Ys.freeze(ke,G.id,T.executorUserId,$);const fe=js.select(T.id,{contractId:Ge.id})?.selected??null;Ke.createPendingStart({taskId:G.id,executorId:T.executorUserId}),fe&&G.createdByUserId&&Fe.addTaskTaken({recipientUserId:G.createdByUserId,actorUserId:fe.executorUserId,taskId:G.id}),Fe.addTaskAssigned({recipientUserId:T.executorUserId,actorUserId:l.user.id,taskId:G.id});const Re=yt.getById(G.id),st=Re?.maxExecutors??1,mt=Re?.assignedExecutorIds.length??0;if(Re&&mt>=st){const Es=(ge.all.get(Re.id)??[]).filter($t=>$t.status==="pending"&&$t.id!==T.id);for(const $t of Es)js.reject($t.id),Fe.addTaskAssignedElse({recipientUserId:$t.executorUserId,actorUserId:l.user.id,taskId:Re.id})}},Be=T=>{js.reject(T)};return h.useEffect(()=>{const T=()=>{const ke=by(m);for(const $ of ke){const Ye=yt.getById($)?.createdByUserId??null;Ye&&Fe.addTaskUnclaimed({recipientUserId:Ye,actorUserId:Ye,taskId:$})}const we=Sj(Date.now());for(const $ of we){const Ye=yt.getById($)?.createdByUserId??null;Ye&&Fe.addTaskUnclaimed({recipientUserId:Ye,actorUserId:Ye,taskId:$});const Ge=m.filter(fe=>fe.taskId===$&&fe.status!=="rejected");for(const fe of Ge)js.reject(fe.id),Ye&&Fe.addTaskApplicationCancelled({recipientUserId:fe.executorUserId,actorUserId:Ye,taskId:$})}};T();const H=window.setInterval(T,6e4);return()=>window.clearInterval(H)},[m]),h.useEffect(()=>{if(!D)return;const T=H=>{H.key==="Escape"&&F(null)};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[D]),h.useEffect(()=>{const T=H=>{const ke=H.detail;ke?.taskId&&F(ke.taskId)};return window.addEventListener(Ax,T),()=>window.removeEventListener(Ax,T)},[]),n.jsxs("main",{className:"customerTasksPage",children:[n.jsxs("div",{className:"customerTasksContainer",children:[n.jsxs("div",{className:"customerTasksHeader",children:[n.jsxs("div",{className:"customerTasksHeaderTop",children:[n.jsx("h1",{className:"customerTasksTitle",children:s("customerTasks.title")}),n.jsx("p",{className:"customerTasksSubtitle",children:s("customerTasks.titleHint")})]}),n.jsxs("div",{className:"customerTasksControls",children:[n.jsxs("div",{className:"customerTasksFilters",children:[n.jsx(Ea,{label:s("customerTasks.filterStatusLabel"),value:N,onChange:T=>j(T),options:VS.map(T=>({value:T.value,label:df(s(T.key))}))}),n.jsx(Ea,{label:s("customerTasks.sortLabel"),value:ae,onChange:T=>W(T),options:[{value:"new",label:df(s("customerTasks.sort.new"))},{value:"old",label:df(s("customerTasks.sort.old"))}]})]}),n.jsxs("div",{className:"customerTasksSearchWrapper",children:[n.jsxs("div",{className:"customerTasksSearchContainer",children:[n.jsx("input",{value:C,onChange:T=>k(T.target.value),placeholder:s("customerTasks.search.placeholder"),className:"customerTasksSearchInput"}),n.jsx("button",{type:"button",className:`customerTasksHelpButton${S?" customerTasksHelpButton--active":""}`,onClick:()=>ue(T=>!T),"aria-label":s("customerTasks.search.hint"),ref:ye,children:"?"})]}),S?n.jsx("div",{className:"customerTasksHelpTooltip",ref:Ne,children:s("customerTasks.search.hint")}):null]}),o.enabled?n.jsxs(xe,{className:"customerTasksArchiveBtn",to:K.customerArchive,children:[" ",s("customerTasks.archive.open")]}):null,n.jsxs(xe,{className:"customerTasksArchiveBtn",to:K.customerReview,children:[" ",s("customerReview.title"),Q?` (${Q})`:""]}),n.jsxs(xe,{className:"customerTasksArchiveBtn",to:K.customerRequests,children:[" ",s("customerRequests.title"),de?` (${de})`:""]}),o.enabled&&l.user?.role==="customer"?n.jsx("button",{type:"button",className:"customerTasksArchiveBtn",onClick:()=>{if(!l.user)return;const T=yt.create({title:{ru:"  (dev)",en:"Demo task (dev)"},shortDescription:{ru:"     .",en:"Created by one button to speed up testing."},requirements:{ru:`-   
-  
`,en:`- Video link
- Short message
`},description:{ru:"  .   //.",en:"This is a demo task to quickly test timers/pauses/disputes."},createdByUserId:l.user.id,category:"Dev",location:"Auto",budgetAmount:0,budgetCurrency:a==="ru"?"RUB":"USD",maxExecutors:1,dueDate:new Date(Date.now()+10080*60*1e3).toISOString().slice(0,10),expiresAt:new Date(Date.now()+10080*60*1e3).toISOString()});yt.update(T.id,H=>({...H,status:"open"})),u(Oe(T.id))},title:a==="ru"?"Dev:     ":"Dev: create and publish demo task",children:a==="ru"?" : ":" Dev: create"}):null]})]}),n.jsx("div",{className:"customerTasksContent",children:L.length===0?n.jsx("div",{className:"customerTasksEmpty",children:be?s("profile.noneYet"):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{marginBottom:14},children:s("customerTasks.empty.noPublished")}),n.jsxs(xe,{className:"customerTasksArchiveBtn",to:K.taskCreate,children:[" ",s("nav.postTask")]})]})}):n.jsxs(n.Fragment,{children:[n.jsx("ul",{className:"customerTasksList",ref:O,children:ce.map(T=>{const H=w.get(T.id)??null,ke=Ce.has(T.id)&&T.status==="in_progress",we=H?"executor.status.paused":T.status==="draft"?"task.status.draft":T.status==="closed"?"task.status.closed":ke?"task.status.waiting":T.status==="in_progress"?"task.status.inProgress":T.status==="dispute"?"task.status.dispute":T.status==="review"?"task.status.review":"task.status.open";return n.jsxs("li",{className:"customerTasksItem",role:"link",tabIndex:0,onClick:$=>{const De=$.target;if(!(De instanceof HTMLElement)){u(Oe(T.id),{state:{backTo:K.customerTasks}});return}De.closest('a,button,input,textarea,select,[role="button"]')||u(Oe(T.id),{state:{backTo:K.customerTasks}})},onKeyDown:$=>{($.key==="Enter"||$.key===" ")&&($.preventDefault(),u(Oe(T.id),{state:{backTo:K.customerTasks}}))},children:[n.jsxs("div",{className:"customerTasksItemContent",children:[n.jsx("div",{className:"customerTasksItemHeader",children:n.jsx(xe,{className:"customerTasksItemTitle",to:Oe(T.id),state:{backTo:K.customerTasks},children:ft(T.title,a)})}),n.jsxs("div",{className:"customerTasksItemBadges",children:[n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",s("tasks.published"),": ",Qa(T.createdAt,a)]}),T.status!=="closed"&&T.dueDate?n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",s("tasks.due"),": ",T.dueDate]}):null,ei(T.category,3)?n.jsxs("span",{className:"customerTasksItemBadge",style:{whiteSpace:"normal"},children:[" ",s("task.create.category"),": ",ei(T.category,3)]}):null,ei(T.location,3)?n.jsxs("span",{className:"customerTasksItemBadge",style:{whiteSpace:"normal"},children:[" ",s("task.create.location"),": ",ei(T.location,3)]}):null,n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",s("task.meta.assigned"),": ",T.assignedExecutorIds.length,"/",T.maxExecutors??1]}),T.completionVideoUrl?n.jsx("span",{className:"customerTasksItemBadge customerTasksItemBadge--link",children:n.jsxs("a",{href:T.completionVideoUrl,target:"_blank",rel:"noreferrer",children:[" ",s("task.completionLink")]})}):null]})]}),n.jsxs("div",{className:"customerTasksItemRight",children:[n.jsx(ws,{tone:H?"paused":ke?"pending":T.status,label:s(we)}),n.jsx("div",{className:"customerTasksItemActions",children:T.status!=="draft"&&(ge.all.get(T.id)?.length??0)>0?n.jsxs("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:()=>F(T.id),children:[s("profile.taskApplications.button"),(ge.pendingCount.get(T.id)??0)>0?n.jsx("span",{className:"customerTasksApplicationsBtn__count",children:ge.pendingCount.get(T.id)??0}):null]}):null})]})]},T.id)})}),n.jsx(gl,{page:X,pageCount:U,onChange:E})]})})]}),D?n.jsx("div",{className:"profileModalOverlay",role:"dialog","aria-modal":"true","aria-label":G?ft(G.title,a):s("profile.taskApplications.title"),onClick:()=>F(null),children:n.jsxs("div",{className:"profileModal profileApplicationsModal",onClick:T=>T.stopPropagation(),children:[n.jsxs("div",{className:"profileModalHeader",children:[n.jsx("h2",{className:"profileModalTitle",children:G?ft(G.title,a):s("profile.taskApplications.title")}),n.jsx("button",{type:"button",className:"profileModalClose",onClick:()=>F(null),"aria-label":s("common.cancel"),children:""})]}),V.length>0?n.jsx("div",{className:"profileApplicationsSubtitle",children:s("profile.taskApplications.subtitle",{count:V.length})}):null,V.length===0?n.jsx("div",{className:"profileEmpty",children:s("profile.taskApplications.empty")}):n.jsx("ul",{className:"profileApplicationsList",children:V.map(T=>{const H=p.find(fe=>fe.id===T.executorUserId)??null,ke=G?He.getForTaskExecutor(G.id,T.executorUserId):null,we=G?x.find(fe=>fe.taskId===G.id&&fe.executorId===T.executorUserId)??null:null,$=!!(ke&&(ke.status==="approved"||ke.status==="resolved")),De=we?.status==="removed_auto"?"executor.status.removed":T.status==="selected"?$?"task.status.closed":ke?.status==="disputed"?"task.status.dispute":ke?.status==="submitted"?"task.status.review":we?.status==="overdue"?"executor.status.overdue":we?.status==="paused"?"executor.status.paused":we?.startedAt?"executor.status.inWork":"executor.status.approved":T.status==="rejected"?"task.status.closed":"task.status.open",Ye=T.status==="pending",Ge=De==="executor.status.overdue";return n.jsxs("li",{className:`profileApplicationsListItem${T.status==="selected"?" profileApplicationsListItem--selected":""}${Ge?" profileApplicationsListItem--overdue":""}`,children:[n.jsxs("div",{className:"profileApplicationsListItem__header",children:[H?n.jsx(xe,{className:"profileApplicationsListItem__nameLink",to:ds(H.id),state:G?{backTo:Oe(G.id)}:void 0,onClick:()=>F(null),children:n.jsxs("span",{className:"profileApplicationsListItem__headerLeft",children:[n.jsx("span",{className:"profileApplicationsListItem__avatar","aria-hidden":"true",children:H.avatarDataUrl?n.jsx("img",{src:H.avatarDataUrl,alt:""}):n.jsx("span",{className:"profileApplicationsListItem__avatarFallback",children:(H.fullName??H.email??"?").trim().slice(0,1).toUpperCase()})}),n.jsx("strong",{children:H.fullName??H.email??s("notifications.someone")})]})}):n.jsxs("span",{className:"profileApplicationsListItem__headerLeft",children:[n.jsx("span",{className:"profileApplicationsListItem__avatar","aria-hidden":"true",children:n.jsx("span",{className:"profileApplicationsListItem__avatarFallback",children:"?"})}),n.jsx("strong",{children:s("notifications.someone")})]}),n.jsx("span",{className:`pill${Ge?" pill--danger":""}`,children:s(De)})]}),n.jsx("p",{className:"profileApplicationsListItem__message",children:T.message?T.message:""}),Ye?n.jsxs("div",{className:"profileApplicationsListItem__actions",children:[n.jsx("button",{type:"button",className:"profileApplicationsListItem__actionButton profileApplicationsListItem__actionButton--primary",disabled:!M,onClick:()=>Ee(T),children:s("profile.taskApplications.assign")}),n.jsx("button",{type:"button",className:"profileApplicationsListItem__actionButton profileApplicationsListItem__actionButton--danger",onClick:()=>Be(T.id),children:s("profile.taskApplications.reject")})]}):null]},T.id)})})]})}):null,n.jsx(Cm,{open:!!q,count:q?.count??0,onClose:()=>B(null),onConfirm:()=>{if(!q)return;const T=V.find(H=>H.id===q.applicationId)??null;T&&Ee(T,{bypassNoStartConfirm:!0})}}),y?n.jsx("div",{className:"profileModalOverlay",role:"alertdialog","aria-modal":"true","aria-label":s("profile.balance.insufficient"),onClick:()=>b(null),children:n.jsxs("div",{className:"profileModal",onClick:T=>T.stopPropagation(),children:[n.jsxs("div",{className:"profileModalHeader",children:[n.jsx("h2",{className:"profileModalTitle",children:s("profile.balance.insufficient")}),n.jsx("button",{type:"button",className:"profileModalClose",onClick:()=>b(null),"aria-label":s("common.cancel"),children:""})]}),n.jsx("div",{className:"profileBalanceMessage",style:{marginTop:10},children:s("profile.balance.insufficient")}),n.jsx("div",{className:"profileConfirmActions",style:{marginTop:14},children:n.jsx(xe,{className:"profileBtn profileBtn--success",to:`${K.profile}?tab=balance`,onClick:()=>b(null),children:s("profile.balance.add")})})]})}):null]})}function $S(){const{t:s,locale:a}=lt(),l=Ut(),o=ai(),u=Qt(),f=vs(),[p,m]=h.useState(null),[v,x]=h.useState(null),y=l.user?.role==="customer"?l.user:null,b=h.useMemo(()=>y?f.filter(D=>D.createdByUserId===y.id&&D.status==="archived"):[],[f,y]),N=h.useMemo(()=>p?b.find(D=>D.id===p)??null:null,[p,b]),j=h.useMemo(()=>v?b.find(D=>D.id===v)??null:null,[v,b]);if(!l.user)return n.jsx("main",{className:"customerTasksPage",children:n.jsxs("div",{className:"customerTasksContainer",children:[n.jsx("h1",{className:"customerTasksTitle",children:s("customerTasks.archive.title")}),n.jsx("p",{children:n.jsx(xe,{to:K.login,children:s("auth.signIn")})})]})});if(l.user.role!=="customer")return n.jsx("main",{className:"customerTasksPage",children:n.jsxs("div",{className:"customerTasksContainer",children:[n.jsx("h1",{className:"customerTasksTitle",children:s("customerTasks.archive.title")}),n.jsx("p",{style:{opacity:.8},children:s("customerRequests.onlyCustomer")})]})});if(!o.enabled)return n.jsx(fl,{to:K.customerTasks,replace:!0});const C=D=>{yt.repost(D)},k=D=>{const F=He.listForTask(D).length>0,q=Ke.listForTask(D).length>0,B=Ys.listForTask(D).length>0;return!F&&!q&&!B};return n.jsxs("main",{className:"customerTasksPage",children:[n.jsxs("div",{className:"customerTasksContainer",children:[n.jsxs("div",{className:"customerTasksHeader",children:[n.jsx("div",{className:"customerTasksHeaderTop",children:n.jsx("h1",{className:"customerTasksTitle",children:s("customerTasks.archive.title")})}),n.jsx("div",{className:"customerTasksControls",children:n.jsxs(xe,{className:"customerTasksArchiveBtn",to:K.customerTasks,children:[" ",s("customerTasks.archive.backToTasks")]})})]}),n.jsx("div",{className:"customerTasksContent",children:b.length===0?n.jsx("div",{className:"customerTasksEmpty",children:s("customerTasks.archive.empty")}):n.jsx("ul",{className:"customerTasksList",children:b.map(D=>n.jsxs("li",{className:"customerTasksItem",role:"link",tabIndex:0,onClick:F=>{const q=F.target;q instanceof HTMLElement&&q.closest('a,button,input,textarea,select,[role="button"]')||u(Oe(D.id),{state:{backTo:K.customerArchive}})},onKeyDown:F=>{(F.key==="Enter"||F.key===" ")&&(F.preventDefault(),u(Oe(D.id),{state:{backTo:K.customerArchive}}))},children:[n.jsxs("div",{className:"customerTasksItemContent",children:[n.jsxs("div",{className:"customerTasksItemHeader",children:[n.jsx(xe,{className:"customerTasksItemTitle",to:Oe(D.id),state:{backTo:K.customerArchive},children:ft(D.title,a)}),n.jsx(ws,{tone:"archived",label:s("task.status.archived")})]}),D.dueDate?n.jsx("div",{className:"customerTasksItemBadges",children:n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",s("tasks.due"),": ",D.dueDate]})}):null]}),n.jsxs("div",{className:"customerTasksItemActions",style:{gap:10},children:[n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:F=>{F.preventDefault(),F.stopPropagation(),m(D.id)},children:s("customerTasks.archive.restore")}),n.jsx(xe,{className:"customerTasksApplicationsBtn",style:{opacity:.9},to:ay(D.id),state:{backTo:K.customerArchive},onClick:F=>F.stopPropagation(),children:s("task.details.edit")}),n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",style:{opacity:.9},disabled:!k(D.id),title:k(D.id)?void 0:a==="ru"?" :   /   .":"Cannot delete: task has assignments/contracts or frozen funds.",onClick:F=>{F.preventDefault(),F.stopPropagation(),k(D.id)&&x(D.id)},children:s("task.actions.delete")})]})]},D.id))})})]}),N?n.jsx("div",{className:"profileModalOverlay",role:"dialog","aria-modal":"true","aria-label":s("profile.repostConfirm.title"),onClick:()=>m(null),children:n.jsxs("div",{className:"profileModal",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"profileModalHeader",children:[n.jsx("h2",{className:"profileModalTitle",children:s("profile.repostConfirm.title")}),n.jsx("button",{type:"button",className:"profileModalClose",onClick:()=>m(null),"aria-label":s("common.cancel"),children:""})]}),n.jsx("p",{style:{margin:"6px 0 14px",opacity:.9},children:s("profile.repostConfirm.text")}),n.jsxs("div",{className:"profileConfirmActions",children:[n.jsx("button",{type:"button",className:"profileBtn profileBtn--success",onClick:()=>{C(N.id),m(null)},children:s("common.yes")}),n.jsx("button",{type:"button",className:"profileBtn profileBtn--danger",onClick:()=>m(null),children:s("common.no")})]})]})}):null,j?n.jsx("div",{className:"profileModalOverlay",role:"dialog","aria-modal":"true","aria-label":s("task.actions.delete"),onClick:()=>x(null),children:n.jsxs("div",{className:"profileModal",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"profileModalHeader",children:[n.jsx("h2",{className:"profileModalTitle",children:s("task.actions.delete")}),n.jsx("button",{type:"button",className:"profileModalClose",onClick:()=>x(null),"aria-label":s("common.cancel"),children:""})]}),n.jsx("p",{style:{margin:"6px 0 14px",opacity:.9},children:s("task.actions.deleteConfirm")}),n.jsxs("div",{className:"profileConfirmActions",children:[n.jsx("button",{type:"button",className:"profileBtn profileBtn--danger",onClick:()=>{yt.delete(j.id),x(null)},children:s("task.actions.delete")}),n.jsx("button",{type:"button",className:"profileBtn",onClick:()=>x(null),children:s("common.cancel")})]})]})}):null]})}function FS(){const{t:s,locale:a}=lt(),l=Ut(),o=ai(),u=Qt(),f=vs(),p=qs(),m=ya(),v=Ic(),x=jl(),[y,b]=h.useState(null),[N,j]=h.useState(null),[C,k]=h.useState(null),D=l.user?.role==="customer"?l.user.id:null,F=h.useMemo(()=>{if(!D)return[];const E=A=>{const O=A.lastSubmissionId;return(O?v.find(se=>se.id===O)??null:null)?.createdAt??A.updatedAt??A.createdAt};return m.filter(A=>A.clientId===D).filter(A=>A.status==="submitted"||A.status==="disputed").slice().sort((A,O)=>E(O).localeCompare(E(A)))},[m,D,v]);if(!l.user)return n.jsx("main",{className:"customerTasksPage",children:n.jsxs("div",{className:"customerTasksContainer",children:[n.jsx("h1",{className:"customerTasksTitle",children:s("customerReview.title")}),n.jsx("p",{children:n.jsx(xe,{to:K.login,children:s("auth.signIn")})})]})});if(l.user.role!=="customer")return n.jsx("main",{className:"customerTasksPage",children:n.jsxs("div",{className:"customerTasksContainer",children:[n.jsx("h1",{className:"customerTasksTitle",children:s("customerReview.title")}),n.jsx("p",{style:{opacity:.8},children:s("customerReview.onlyCustomer")})]})});const q=E=>{const A=yt.getById(E);if(!A)return;const O=He.listForTask(E),le=O.some(Q=>Q.status==="disputed"),se=O.some(Q=>Q.status==="submitted"),be=O.some(Q=>Q.status==="active"||Q.status==="revision_requested"),Se=O.length>0&&O.every(Q=>Q.status==="approved"||Q.status==="resolved"||Q.status==="cancelled"),Ce=A.assignedExecutorIds.length,ge=A.maxExecutors??1,U=!(Ce<ge)&&Se,ce=U?"closed":le?"dispute":se?"review":be||Ce>0?"in_progress":"open";yt.update(E,Q=>({...Q,status:ce,completedAt:U?new Date().toISOString():Q.completedAt}))},B=E=>{const A=He.getById(E);if(!A)return;if(!Ke.getForTaskExecutor(A.taskId,A.executorId)?.startedAt){k({title:a==="ru"?"  ":"Cannot approve",message:a==="ru"?"    ,      .":"Cannot approve and leave a review unless the executor clicked Start work."});return}He.setStatus(A.id,"approved"),Ke.markAccepted(A.taskId,A.executorId);const le=Ys.claimFor(A.taskId,A.executorId);le&&fs.deposit(le.executorId,le.amount),Fe.addTaskApproved({recipientUserId:A.executorId,actorUserId:l.user.id,taskId:A.taskId}),Fe.addRateCustomer({recipientUserId:A.executorId,actorUserId:l.user.id,taskId:A.taskId}),q(A.taskId),b(A.id)},ae=(E,A)=>{const O=He.getById(E);if(!O)return;const le=O.revisionIncluded??0,se=O.revisionUsed??0;le<=0||se>=le||(He.setStatus(O.id,"revision_requested"),He.incrementRevisionUsed(O.id),Ke.resumeAfterRevisionRequest(O.taskId,O.executorId),He.update(O.id,be=>({...be,lastRevisionMessage:A.trim()||void 0,lastRevisionRequestedAt:new Date().toISOString()})),Fe.addTaskRevision({recipientUserId:O.executorId,actorUserId:l.user.id,taskId:O.taskId,message:A}),q(O.taskId))},W=E=>{const A=He.getById(E);if(!A||A.status==="disputed"||A.status==="resolved"||A.status==="approved"||A.status==="cancelled"||(A.revisionUsed??0)<2||!l.user)return;const le=Ot.open({contractId:A.id,openedByUserId:l.user.id,reason:{categoryId:"universal",reasonId:"other"}});Fe.addDisputeOpened({recipientUserId:A.executorId,actorUserId:l.user.id,taskId:A.taskId,disputeId:le.id}),He.setStatus(A.id,"disputed"),Ke.openDispute(A.taskId,A.executorId),q(A.taskId),u(aa(le.id))},X=(E,A)=>{const O=He.getById(E);if(!O)return;const le=Ot.getForContract(O.id);if(!le)return;const se=le.version??1,be=Ot.takeInWork({disputeId:le.id,arbiterId:"system",expectedVersion:se});if(!be)return;const Se=Ys.listForTask(O.taskId).find(ge=>ge.executorId===O.executorId)?.amount??0,Ce=Math.round(Se/2*100)/100;kc.decideAndExecute({disputeId:le.id,actorUserId:"system",expectedVersion:be.version??se+1,decisionKind:A==="executor"?"release_to_executor":A==="customer"?"refund_to_customer":"partial_refund",partial:A==="split"?{executorAmount:Ce,customerAmount:Se-Ce}:void 0,comment:`dev: resolve dispute (${A})`,checklist:{requirementsChecked:!0,videoReviewed:!0,chatReviewed:!0},closeAfter:!0}),A==="executor"&&Fe.addTaskApproved({recipientUserId:O.executorId,actorUserId:l.user.id,taskId:O.taskId}),b(O.id)};return n.jsxs("main",{className:"customerTasksPage",children:[n.jsxs("div",{className:"customerTasksContainer",children:[n.jsxs("div",{className:"customerTasksHeader",children:[n.jsxs("div",{className:"customerTasksHeaderTop",children:[n.jsx("h1",{className:"customerTasksTitle",children:s("customerReview.title")}),n.jsx("p",{className:"customerTasksSubtitle",children:s("customerReview.subtitle")})]}),n.jsx("div",{className:"customerTasksControls",children:n.jsxs(xe,{className:"customerTasksArchiveBtn",to:K.customerTasks,children:[" ",s("customerReview.backToMyTasks")]})})]}),n.jsx("div",{className:"customerTasksContent",children:F.length===0?n.jsx("div",{className:"customerTasksEmpty",children:s("customerReview.empty")}):n.jsx("ul",{className:"customerTasksList",children:F.map(E=>{const A=f.find(w=>w.id===E.taskId)??null,O=p.find(w=>w.id===E.executorId)??null,le=x.find(w=>w.contractId===E.id)??null,se=!!Ke.getForTaskExecutor(E.taskId,E.executorId)?.startedAt,be=v.filter(w=>w.contractId===E.id&&w.status==="submitted").slice().sort((w,V)=>V.createdAt.localeCompare(w.createdAt))[0]??null,Se=(E.lastSubmissionId?v.find(w=>w.id===E.lastSubmissionId)??null:null)??be,Ce=Se?.createdAt??E.updatedAt??E.createdAt,ge=Se?.files.filter(w=>w.kind==="external_url"||w.kind==="upload")??[],L=E.status==="disputed",U=E.revisionIncluded??0,ce=E.revisionUsed??0,de=Math.max(0,U-ce)>0;return n.jsxs("li",{className:"customerTasksItem",role:"link",tabIndex:0,onClick:w=>{if(!A)return;const V=w.target;V instanceof HTMLElement&&V.closest('a,button,input,textarea,select,[role="button"]')||u(Oe(A.id),{state:{backTo:K.customerReview}})},onKeyDown:w=>{A&&(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),u(Oe(A.id),{state:{backTo:K.customerReview}}))},children:[n.jsxs("div",{className:"customerTasksItemContent",children:[n.jsxs("div",{className:"customerTasksItemHeader",children:[A?n.jsx(xe,{className:"customerTasksItemTitle",to:Oe(A.id),state:{backTo:K.customerReview},children:ft(A.title,a)}):n.jsx("span",{className:"customerTasksItemTitle",style:{opacity:.85},children:s("task.details.notFound")}),n.jsx(ws,{tone:E.status==="disputed"?"dispute":"review",label:E.status==="disputed"?s("task.status.dispute"):s("task.status.review")})]}),n.jsxs("div",{className:"customerTasksItemBadges",children:[n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",s("customerReview.submitted"),": ",new Date(Ce).toLocaleString()]}),O?n.jsxs("span",{className:"customerTasksItemBadge",children:[s("profile.takenBy")," ",n.jsx(xe,{to:ds(O.id),children:O.fullName})]}):null,ge.length?ge.map((w,V)=>n.jsx("span",{className:"customerTasksItemBadge customerTasksItemBadge--link",children:n.jsxs("a",{href:w.url,target:"_blank",rel:"noreferrer",children:[" ",w.title?`${s("task.completionLink")}: ${w.title}`:s("task.completionLink")]})},`${w.url}-${V}`)):null,L?n.jsx("span",{className:"customerTasksItemBadge",style:{color:"rgba(239,68,68,0.9)"},children:a==="ru"?"  ":" Dispute opened"}):null,L&&le?.reason?.reasonId?n.jsxs("span",{className:"customerTasksItemBadge",style:{opacity:.8},children:[a==="ru"?"":"Reason",": ",le.reason.reasonId]}):null]})]}),n.jsxs("div",{className:"customerTasksItemActions",style:{gap:10},children:[n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:w=>{if(w.preventDefault(),w.stopPropagation(),L){k({title:a==="ru"?"  ":"Cannot approve",message:a==="ru"?"  ,   .       .":"You cannot approve while the dispute is open. Open the dispute and wait for arbitration."});return}if(!se){k({title:a==="ru"?"  ":"Cannot approve",message:a==="ru"?"  ,      .":"Cannot approve unless the executor clicked Start work."});return}B(E.id)},title:L?a==="ru"?"   ":"Unavailable during dispute":se?void 0:a==="ru"?"    ":"Executor did not click Start work",style:L||!se?{opacity:.7}:void 0,children:s("customerReview.approve")}),de?n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:w=>{w.preventDefault(),w.stopPropagation(),j(E.id)},style:{opacity:.9},disabled:L,title:L?a==="ru"?"   ":"Unavailable during dispute":void 0,children:s("customerReview.revision")}):null,ce>=2?n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:w=>{if(w.preventDefault(),w.stopPropagation(),L){le?u(aa(le.id)):k({title:a==="ru"?"":"Dispute",message:a==="ru"?"  ,       .":"The dispute is already open, but it was not found."});return}W(E.id)},style:{opacity:.9},children:L?a==="ru"?"  ":"Open dispute":a==="ru"?"":"Dispute"}):null,E.status==="disputed"&&o.enabled?n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:()=>X(E.id,"executor"),children:a==="ru"?": 100% ":"Resolve: 100% executor"}),n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:()=>X(E.id,"customer"),children:a==="ru"?": 100% ":"Resolve: 100% customer"}),n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:()=>X(E.id,"split"),children:a==="ru"?": 50/50":"Resolve: 50/50"})]}):null]})]},E.id)})})})]}),n.jsx(Nc,{open:!!y,subjectName:(()=>{const E=y?He.getById(y):null;return(E?p.find(O=>O.id===E.executorId)??null:null)?.fullName})(),onClose:()=>b(null),onSubmit:({rating:E,comment:A})=>{if(!y||!l.user)return;const O=He.getById(y);O&&(Zn.upsert({contractId:O.id,fromUserId:l.user.id,toUserId:O.executorId,rating:E,comment:A}),b(null))}}),n.jsx(Ly,{open:!!N,executorName:(()=>{const E=N?He.getById(N):null;return(E?p.find(O=>O.id===E.executorId)??null:null)?.fullName})(),onClose:()=>j(null),onSubmit:E=>{N&&(ae(N,E),j(null))}}),C?n.jsx("div",{className:"profileModalOverlay",role:"dialog","aria-modal":"true","aria-label":C.title,onClick:()=>k(null),children:n.jsxs("div",{className:"profileModal",onClick:E=>E.stopPropagation(),style:{width:"min(560px, 100%)"},children:[n.jsxs("div",{className:"profileModalHeader",children:[n.jsx("h2",{className:"profileModalTitle",children:C.title}),n.jsx("button",{type:"button",className:"profileModalClose",onClick:()=>k(null),"aria-label":s("common.cancel"),children:""})]}),n.jsx("div",{style:{opacity:.92,lineHeight:1.5},children:C.message}),n.jsx("div",{className:"profileConfirmActions",style:{marginTop:14},children:n.jsx("button",{type:"button",className:"profileBtn",onClick:()=>k(null),children:a==="ru"?"":"OK"})})]})}):null]})}function WS(){const{t:s,locale:a}=lt(),l=Ut(),o=Dm(),u=l.user?.telegramUserId??null,f=(b,N)=>o.showToast({message:b,tone:N}),p=vs(),m=qs(),v=Ti(),x=l.user?.role==="customer"?l.user.id:null,y=h.useMemo(()=>{if(!x)return[];const b=new Set(p.filter(N=>N.createdByUserId===x).map(N=>N.id));return v.filter(N=>N.status==="pause_requested"&&b.has(N.taskId)).slice().sort((N,j)=>(j.pauseRequestedAt??j.assignedAt).localeCompare(N.pauseRequestedAt??N.assignedAt))},[v,x,p]);return l.user?l.user.role!=="customer"?n.jsx("main",{className:"customerTasksPage",children:n.jsxs("div",{className:"customerTasksContainer",children:[n.jsx("h1",{className:"customerTasksTitle",children:s("customerRequests.title")}),n.jsx("p",{style:{opacity:.8},children:s("customerRequests.onlyCustomer")})]})}):n.jsx("main",{className:"customerTasksPage",children:n.jsxs("div",{className:"customerTasksContainer",children:[n.jsxs("div",{className:"customerTasksHeader",children:[n.jsxs("div",{className:"customerTasksHeaderTop",children:[n.jsx("h1",{className:"customerTasksTitle",children:s("customerRequests.title")}),n.jsx("p",{className:"customerTasksSubtitle",children:s("customerRequests.subtitle")})]}),n.jsx("div",{className:"customerTasksControls",children:n.jsxs(xe,{className:"customerTasksArchiveBtn",to:K.customerTasks,children:[" ",s("customerRequests.backToMyTasks")]})})]}),n.jsx("div",{className:"customerTasksContent",children:y.length===0?n.jsx("div",{className:"customerTasksEmpty",children:s("customerRequests.empty")}):n.jsx("ul",{className:"customerTasksList",children:y.map(b=>{const N=p.find(F=>F.id===b.taskId)??null,j=m.find(F=>F.id===b.executorId)??null,C=b.pauseRequestedAt??b.assignedAt,k=b.pauseRequestedDurationMs??0,D=k?Math.round(k/(3600*1e3)):null;return n.jsxs("li",{className:"customerTasksItem",children:[n.jsxs("div",{className:"customerTasksItemContent",children:[n.jsxs("div",{className:"customerTasksItemHeader",children:[N?n.jsx(xe,{className:"customerTasksItemTitle",to:Oe(N.id),children:N.title?a==="ru"?N.title.ru:N.title.en:s("task.details.notFound")}):n.jsx("span",{className:"customerTasksItemTitle",style:{opacity:.85},children:s("task.details.notFound")}),n.jsx(ws,{tone:"paused",label:a==="ru"?"":"Pause"})]}),n.jsxs("div",{className:"customerTasksItemBadges",children:[n.jsxs("span",{className:"customerTasksItemBadge",children:[" ",a==="ru"?"":"Request",": ",new Date(C).toLocaleString()]}),D!==null?n.jsxs("span",{className:"customerTasksItemBadge",style:{opacity:.85},children:[a==="ru"?"":"Duration",": ",D,"h"]}):null,b.pauseReasonId?n.jsxs("span",{className:"customerTasksItemBadge",style:{opacity:.85},children:[a==="ru"?"":"Reason",": ",b.pauseReasonId]}):null,j?n.jsxs("span",{className:"customerTasksItemBadge",children:[a==="ru"?"":"Executor",":"," ",n.jsx(xe,{to:ds(j.id),children:j.fullName})]}):null]}),b.pauseComment?n.jsx("p",{className:"taskDetailsApplication__message",style:{marginTop:8},children:b.pauseComment}):null]}),n.jsxs("div",{className:"customerTasksItemActions",style:{gap:10},children:[n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",onClick:()=>{Ke.acceptPause(b.taskId,b.executorId),Fe.addTaskPauseAccepted({recipientUserId:b.executorId,actorUserId:l.user.id,taskId:b.taskId}),Ls({toast:f,telegramUserId:u,text:s("toast.pauseAccepted"),tone:"success"})},children:s("customerRequests.accept")}),n.jsx("button",{type:"button",className:"customerTasksApplicationsBtn",style:{opacity:.9},onClick:()=>{Ke.rejectPause(b.taskId,b.executorId),Fe.addTaskPauseRejected({recipientUserId:b.executorId,actorUserId:l.user.id,taskId:b.taskId}),Ls({toast:f,telegramUserId:u,text:s("toast.pauseRejected"),tone:"info"})},children:s("customerRequests.reject")})]})]},b.id)})})})]})}):n.jsx("main",{className:"customerTasksPage",children:n.jsxs("div",{className:"customerTasksContainer",children:[n.jsx("h1",{className:"customerTasksTitle",children:s("customerRequests.title")}),n.jsx("p",{children:n.jsx(xe,{to:K.login,children:s("auth.signIn")})})]})})}function Tx(){return n.jsx("main",{style:{minHeight:"100%",display:"grid",placeItems:"center"},children:n.jsx("div",{style:{fontSize:"clamp(34px, 7vw, 72px)",fontWeight:800,letterSpacing:"0.4px",lineHeight:1.05,textAlign:"center",color:"rgba(255,255,255,0.95)"},children:""})})}const YS=[{id:"quality",labelKey:"report.category.quality",roles:["executor"],reasons:[{id:"not_done",labelKey:"report.reason.not_done"},{id:"partial",labelKey:"report.reason.partial"},{id:"low_quality",labelKey:"report.reason.low_quality"},{id:"not_matching",labelKey:"report.reason.not_matching"},{id:"miss_deadline",labelKey:"report.reason.miss_deadline"}]},{id:"violations_executor",labelKey:"report.category.violations",roles:["executor"],reasons:[{id:"fraud",labelKey:"report.reason.fraud"},{id:"fake_account",labelKey:"report.reason.fake_account"},{id:"plagiarism",labelKey:"report.reason.plagiarism"},{id:"bypass",labelKey:"report.reason.bypass"}]},{id:"safety",labelKey:"report.category.safety",roles:["executor"],reasons:[{id:"offensive",labelKey:"report.reason.offensive"},{id:"inappropriate",labelKey:"report.reason.inappropriate"}]},{id:"task",labelKey:"report.category.task",roles:["customer"],reasons:[{id:"unclear",labelKey:"report.reason.unclear"},{id:"illegal",labelKey:"report.reason.illegal"}]},{id:"violations_customer",labelKey:"report.category.violations",roles:["customer"],reasons:[{id:"customer_fake",labelKey:"report.reason.fake_account"},{id:"customer_policy",labelKey:"report.reason.platform_violation"}]}],GS={id:"universal",labelKey:"report.category.general",roles:["customer","executor"],reasons:[{id:"spam",labelKey:"report.reason.spam"},{id:"suspicious_activity",labelKey:"report.reason.suspicious_activity"},{id:"platform_violation",labelKey:"report.reason.platform_violation"},{id:"other",labelKey:"report.reason.other"}]};function KS(s){const a=s??"customer";return[...YS.filter(o=>o.roles.includes(a)),GS]}function XS(){const{t:s}=lt(),a=Ut(),l=Qt(),{userId:o}=si(),u=qs(),f=o?u.find(B=>B.id===o)??null:null,p=h.useMemo(()=>KS(f?.role??null),[f?.role]),[m,v]=h.useState(null),[x,y]=h.useState(null),[b,N]=h.useState("");h.useEffect(()=>{p.length&&v(B=>B&&p.some(ae=>ae.id===B)?B:p[0]?.id??null)},[p]),h.useEffect(()=>{y(null),N("")},[m]);const j=h.useMemo(()=>m?p.find(B=>B.id===m)??p[0]??null:p[0]??null,[p,m]),C=j?.reasons??[];h.useEffect(()=>{C.length&&y(B=>B&&C.some(ae=>ae.id===B)?B:C[0]?.id??null)},[j?.id]);const k=x??C[0]?.id??"",D=k==="other",F=!!(f&&a.user&&j&&k&&(!D||b.trim())),q=()=>{if(!f||!a.user||!j||!k)return;const B={ownerId:f.id,categoryId:j.id,reasonId:k,detail:b.trim()};console.log("report submitted",B),alert(s("profile.reportSent",{personalId:f.personalId})),l(ds(f.id))};return f?n.jsx("main",{className:"reportPage",children:n.jsxs("div",{className:"reportPage__card",children:[n.jsxs("div",{className:"reportPage__top",children:[n.jsxs("div",{children:[n.jsx("p",{className:"reportPage__kicker",children:s("profile.report")}),n.jsx("h1",{className:"reportPage__title",children:f.fullName}),n.jsx("p",{className:"reportPage__subtitle",children:f.email})]}),n.jsx("div",{className:"reportPage__topActions",children:n.jsxs(xe,{className:"reportPage__back",to:ds(f.id),children:[" ",s("notifications.viewProfile")]})})]}),n.jsxs("section",{className:"reportPage__section",children:[n.jsx("p",{className:"reportPage__step",children:s("profile.reportStep1")}),n.jsx(Ea,{label:s("report.select.category"),value:j?.id??p[0]?.id??"",onChange:B=>v(B),options:p.map(B=>({value:B.id,label:s(B.labelKey)}))})]}),j&&C.length>0?n.jsxs("section",{className:"reportPage__section",children:[n.jsx("p",{className:"reportPage__step",children:s("profile.reportStep2")}),n.jsx(Ea,{label:s("report.select.reason"),value:k??"",onChange:B=>y(B),options:C.map(B=>({value:B.id,label:s(B.labelKey)}))}),D?n.jsx("textarea",{className:"reportPage__detail",placeholder:s("profile.reportDetailPlaceholder"),value:b,onChange:B=>N(B.target.value),rows:4,autoFocus:!0}):null]}):null,n.jsxs("footer",{className:"reportPage__footer",children:[n.jsx(xe,{className:"reportPage__cancel",to:ds(f.id),children:s("common.cancel")}),n.jsx("button",{type:"button",className:"reportPage__submit",onClick:q,disabled:!F,children:s("profile.submitReport")})]})]})}):n.jsx("main",{className:"reportPage",children:n.jsxs("div",{className:"reportPage__card",children:[n.jsxs("div",{className:"reportPage__top",children:[n.jsx("h1",{className:"reportPage__title",children:s("profile.report")}),n.jsxs(xe,{className:"reportPage__back",to:"/tasks",children:[" ",s("tasks.back")]})]}),n.jsx("div",{className:"reportPage__empty",children:s("task.details.notFound")})]})})}function QS(){const s=Ut(),{t:a,locale:l}=lt(),o=Br(s.user?.id),u=qs(),f=vs(),[p,m]=h.useState("all"),v=h.useMemo(()=>{const N=new Map;for(const j of u)N.set(j.id,j);return N},[u]),x=h.useMemo(()=>{const N=new Map;for(const j of f)N.set(j.id,j);return N},[f]),y=h.useMemo(()=>p==="unread"?o.filter(N=>!N.readAt):o,[p,o]),b=h.useMemo(()=>o.filter(N=>!N.readAt).length,[o]);return s.user?n.jsx("main",{className:"notificationsPage",children:n.jsxs("div",{className:"notificationsContainer",children:[n.jsxs("div",{className:"notificationsHeader",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"notificationsTitle",children:a("notifications.title")}),n.jsx("div",{className:"notificationsSubtitle",children:b?a("notifications.unreadCount",{count:b}):a("notifications.empty")})]}),n.jsx("div",{className:"notificationsHeaderActions",children:n.jsx("button",{type:"button",className:"notificationsBtn",disabled:!b,onClick:()=>{rs.post("/notifications/read-all",{}).catch(()=>{})},children:a("notifications.markAllRead")})})]}),n.jsxs("div",{className:"notificationsFilters",children:[n.jsx("button",{type:"button",className:`notificationsFilter${p==="all"?" notificationsFilter--active":""}`,onClick:()=>m("all"),children:a("notifications.filter.all")}),n.jsx("button",{type:"button",className:`notificationsFilter${p==="unread"?" notificationsFilter--active":""}`,onClick:()=>m("unread"),disabled:!b,children:a("notifications.filter.unread")})]}),y.length===0?n.jsx("div",{className:"notificationsEmpty",children:a("notifications.empty")}):n.jsx("div",{className:"notificationsList",children:y.map(N=>{const j=v.get(N.actorUserId)??null,C=x.get(N.taskId)??null,k=ky({n:N,actorId:j?.id??null,task:C,locale:l,t:a});return n.jsxs("div",{className:`notificationsItem${k.unread?" notificationsItem--unread":""}`,children:[n.jsxs(xe,{to:k.href??K.profile,className:"notificationsItemMain",onClick:()=>{rs.post(`/notifications/${N.id}/read`,{}).catch(()=>{})},children:[n.jsx("span",{className:"notificationsItemIcon","aria-hidden":"true",children:k.icon}),n.jsxs("span",{className:"notificationsItemBody",children:[n.jsx("span",{className:"notificationsItemTitle",children:k.title}),n.jsx("span",{className:"notificationsItemSubtitle",children:k.subtitle})]}),n.jsx("span",{className:"notificationsItemTime",children:k.timeLabel})]}),n.jsxs("div",{className:"notificationsItemActions",children:[k.actorHref?n.jsx(xe,{to:k.actorHref,className:"notificationsLink",children:a("notifications.viewProfile")}):null,k.href?n.jsx(xe,{to:k.href,className:"notificationsLink",children:a("notifications.viewTask")}):null,k.completionHref?n.jsx("a",{className:"notificationsLink",href:k.completionHref,target:"_blank",rel:"noreferrer",children:a("task.completionLink")}):null]})]},N.id)})})]})}):n.jsx("main",{className:"notificationsPage",children:n.jsxs("div",{className:"notificationsContainer",children:[n.jsx("h1",{className:"notificationsTitle",children:a("notifications.title")}),n.jsx("p",{style:{opacity:.85},children:n.jsx(xe,{to:K.login,children:a("auth.signIn")})})]})})}const ZS=90,Wy=ZS*24*60*60*1e3,JS=4*Wy;function eI(s){return s<=1?"violations.sanction.warning":s===2?"violations.sanction.ratingPenalty5":s===3?"violations.sanction.block24h":s===4?"violations.sanction.block72h":"violations.sanction.ban"}function tI(s){return s<=1||s===2?"warning":"danger"}function sI(){const s=Ut(),{t:a,locale:l}=lt(),o=Qt(),u=vs(),f=Fy(s.user?.role==="executor"?s.user.id:null),[p,m]=h.useState(!1),v=h.useMemo(()=>{const j=new Map;for(const C of u)j.set(C.id,C);return j},[u]),y=Date.now()-JS,b=h.useMemo(()=>{const j=f.filter(D=>{const F=Date.parse(D.createdAt);return Number.isFinite(F)&&F>=y}).slice(),C=new Map;for(const D of j){const F=C.get(D.type)??[];F.push(D),C.set(D.type,F)}const k=new Map;for(const[D,F]of C){const q=F.slice().sort((W,X)=>W.createdAt.localeCompare(X.createdAt));let B=0,ae=null;for(const W of q){const X=Date.parse(W.createdAt);if(Number.isFinite(X)){if(ae!=null){const E=Math.floor((X-ae)/Wy);Number.isFinite(E)&&E>0&&(B=Math.max(0,B-E))}B+=1,k.set(W.id,B),ae=X}}}return k},[y,f]);if(h.useEffect(()=>{if(!p)return;const j=C=>{C.key==="Escape"&&m(!1)};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[p]),!s.user)return n.jsx("main",{className:"violationsPage",children:n.jsxs("div",{className:"violationsContainer",children:[n.jsx("h1",{className:"violationsTitle",children:a("violations.title")}),n.jsx("p",{style:{opacity:.85},children:n.jsx(xe,{to:K.login,children:a("auth.signIn")})})]})});if(s.user.role!=="executor")return n.jsx("main",{className:"violationsPage",children:n.jsxs("div",{className:"violationsContainer",children:[n.jsx("h1",{className:"violationsTitle",children:a("violations.title")}),n.jsx("div",{className:"violationsSubtitle",style:{opacity:.85},children:l==="ru"?"   .":"This page is available to executors only."})]})});const N=f.filter(j=>{const C=Date.parse(j.createdAt);return Number.isFinite(C)&&C>=y}).slice().sort((j,C)=>j.createdAt.localeCompare(C.createdAt));return n.jsxs("main",{className:"violationsPage",children:[n.jsxs("div",{className:"violationsContainer",children:[n.jsx("div",{className:"violationsHeader",children:n.jsxs("div",{children:[n.jsxs("div",{className:"violationsTitleRow",children:[n.jsx("button",{type:"button",className:"violationsBack",onClick:()=>{window.history.length>1?o(-1):o(K.profile)},"aria-label":a("task.details.back"),title:a("task.details.back"),children:n.jsx("span",{className:"violationsBack__icon","aria-hidden":"true",children:""})}),n.jsx("h1",{className:"violationsTitle",children:a("violations.title")}),n.jsx("button",{type:"button",className:"violationsHelpBtn","aria-label":a("violations.help.buttonLabel"),title:a("violations.help.buttonLabel"),onClick:()=>m(!0),children:"?"})]}),n.jsx("div",{className:"violationsSubtitle",children:a("violations.subtitle")})]})}),N.length===0?n.jsx("div",{className:"violationsEmpty",children:a("violations.empty")}):n.jsx("ul",{className:"violationsList","aria-label":a("violations.title"),children:N.map(j=>{const C=v.get(j.taskId)??null,k=C?ft(C.title,l):j.taskId,D=b.get(j.id)??1,F=tI(D),q=new Date(j.createdAt).toLocaleString(l==="ru"?"ru-RU":"en-US"),B=j.type==="no_submit_24h"?"violations.reason.noSubmit24h":"violations.reason.noStart12h";return n.jsxs("li",{className:"violationsCard",children:[n.jsxs("div",{className:"violationsCard__top",children:[n.jsx("div",{className:"violationsCard__meta",children:n.jsx("span",{className:"violationsCard__date",title:a("violations.col.date"),children:q})}),n.jsxs("div",{className:"violationsCard__badges",children:[n.jsxs("span",{className:"violationsPill violationsPill--neutral",title:`#${D}`,children:["#",D]}),n.jsx("span",{className:`violationsPill ${F==="danger"?"violationsPill--danger":"violationsPill--warning"}`,title:a("violations.col.sanction"),children:a(eI(D))})]})]}),n.jsxs("div",{className:"violationsCard__row",children:[n.jsx("div",{className:"violationsCard__label",children:a("violations.col.task")}),n.jsx("div",{className:"violationsCard__value",children:n.jsx(xe,{className:"violationsLink",to:Oe(j.taskId),children:k})})]}),n.jsxs("div",{className:"violationsCard__row",children:[n.jsx("div",{className:"violationsCard__label",children:a("violations.col.reason")}),n.jsx("div",{className:"violationsCard__value",children:a(B)})]})]},j.id)})})]}),p?n.jsx("div",{className:"violationsHelpOverlay",role:"dialog","aria-modal":"true","aria-label":a("violations.help.title"),onClick:()=>m(!1),children:n.jsxs("div",{className:"violationsHelpModal",onClick:j=>j.stopPropagation(),children:[n.jsxs("div",{className:"violationsHelpHeader",children:[n.jsx("h2",{className:"violationsHelpTitle",children:a("violations.help.title")}),n.jsx("button",{type:"button",className:"violationsHelpClose",onClick:()=>m(!1),"aria-label":l==="ru"?"":"Close",title:l==="ru"?"":"Close",children:""})]}),n.jsxs("div",{className:"violationsHelpBody",children:[n.jsx("p",{children:a("violations.help.p1")}),n.jsx("p",{children:n.jsx("strong",{children:l==="ru"?":":"Violations:"})}),n.jsxs("ul",{children:[n.jsx("li",{children:a("violations.help.violation.noStart12h")}),n.jsx("li",{children:a("violations.help.violation.noSubmit24h")})]}),n.jsx("p",{children:n.jsx("strong",{children:a("violations.help.sanctionsTitle")})}),n.jsxs("ul",{children:[n.jsx("li",{children:a("violations.help.sanctions.warning")}),n.jsx("li",{children:a("violations.help.sanctions.ratingPenalty")}),n.jsx("li",{children:a("violations.help.sanctions.block24")}),n.jsx("li",{children:a("violations.help.sanctions.block72")}),n.jsx("li",{children:a("violations.help.sanctions.ban")})]})]})]})}):null]})}function aI(s){const a=Math.max(1,Math.min(5,Math.round(s)));return"".repeat(a)+"".repeat(5-a)}function nI(s,a){return s?`${s} ${a??""}`.trim():null}function iI(s,a){const l=s.trim()||"file",o=URL.createObjectURL(a),u=document.createElement("a");u.href=o,u.download=l,u.rel="noreferrer",u.click(),window.setTimeout(()=>URL.revokeObjectURL(o),0)}function lI(s,a){return s?a==="ru"?s==="approved"?"":s==="submitted"?" ":s==="revision_requested"?" ":s==="disputed"?"":s==="resolved"?"":s==="cancelled"?"":s==="active"?" ":s:s==="approved"?"Completed":s==="submitted"?"Submitted":s==="revision_requested"?"Revision requested":s==="disputed"?"Disputed":s==="resolved"?"Resolved":s==="cancelled"?"Cancelled":s==="active"?"Active":s:null}function Ex(){const{t:s,locale:a}=lt(),l=Ut(),{userId:o}=si(),u=ts(),f=qs(),p=Mm(),m=ya(),v=vs(),x=Ic(),y=o??l.user?.id??null,b=u.state?.backTo&&typeof u.state.backTo=="string"?u.state.backTo:y&&l.user?.id===y?K.profile:y?ds(y):K.home,N=h.useMemo(()=>new Map(m.map(A=>[A.id,A])),[m]),j=h.useMemo(()=>new Map(v.map(A=>[A.id,A])),[v]),C=h.useMemo(()=>new Map(f.map(A=>[A.id,A])),[f]),k=h.useMemo(()=>{const A=new Map;for(const O of x){if(O.status!=="submitted")continue;const le=A.get(O.contractId);(!le||O.createdAt.localeCompare(le.createdAt)>0)&&A.set(O.contractId,O)}return A},[x]),D=h.useMemo(()=>y?p.filter(O=>O.toUserId===y).slice().sort((O,le)=>le.createdAt.localeCompare(O.createdAt)).map(O=>{const le=C.get(O.fromUserId)??null,se=N.get(O.contractId)??null,be=se?j.get(se.taskId)??null:null,Se=k.get(O.contractId)??null;return{id:O.id,createdAt:O.createdAt,rating:O.rating,comment:O.comment,fromUser:le?{id:le.id,fullName:le.fullName??le.email??s("notifications.someone"),avatarDataUrl:le.avatarDataUrl}:null,task:be?{id:be.id,title:ft(be.title,a),category:be.category,location:be.location,budgetAmount:be.budgetAmount,budgetCurrency:be.budgetCurrency,dueDate:be.dueDate,completionVideoUrl:be.completionVideoUrl}:null,contractStatus:se?.status,submission:Se?{createdAt:Se.createdAt,message:Se.message,files:(Se.files??[]).map(Ce=>({url:Ce.url,title:Ce.title}))}:null}}):[],[N,k,a,p,s,y,j,C]),F=20,[q,B]=h.useState(1),ae=h.useRef(null),W=h.useRef(null),X=h.useMemo(()=>Math.max(1,Math.ceil(D.length/F)),[D.length]),E=h.useMemo(()=>{const A=(q-1)*F;return D.slice(A,A+F)},[q,D]);return h.useEffect(()=>B(1),[y]),h.useEffect(()=>B(A=>Math.min(Math.max(1,A),X)),[X]),h.useEffect(()=>{if(W.current===null){W.current=q;return}W.current!==q&&(W.current=q,window.requestAnimationFrame(()=>{ae.current?.scrollIntoView({behavior:"smooth",block:"start"})}))},[q]),y?n.jsx("main",{className:"reviewsPage",children:n.jsxs("div",{className:"reviewsContainer",children:[n.jsxs("div",{className:"reviewsHeader",children:[n.jsxs("div",{className:"reviewsHeader__left",children:[n.jsxs("h1",{className:"reviewsTitle",children:[a==="ru"?"":"Reviews",n.jsxs("span",{className:"reviewsTitle__count",children:["(",D.length,")"]})]}),n.jsx("div",{className:"reviewsSubtitle",children:a==="ru"?"    ,    .":"Ratings and comments linked to completed tasks."})]}),n.jsx("div",{className:"reviewsHeader__right",children:n.jsxs(xe,{className:"reviewsBackLink",to:b,children:[" ",a==="ru"?"":"Back"]})})]}),D.length===0?n.jsx("div",{className:"reviewsEmpty",children:a==="ru"?"  .":"No reviews yet."}):n.jsxs("div",{ref:ae,className:"reviewsList",children:[E.map(A=>{const O=lI(A.contractStatus,a),le=new Date(A.createdAt).toLocaleString(a==="ru"?"ru-RU":"en-US"),se=A.submission?.createdAt?new Date(A.submission.createdAt).toLocaleString(a==="ru"?"ru-RU":"en-US"):null,be=A.task?nI(A.task.budgetAmount,A.task.budgetCurrency):null;return n.jsxs("article",{className:"reviewCard",children:[n.jsxs("div",{className:"reviewCard__top",children:[n.jsxs("div",{className:"reviewCard__rating","aria-label":a==="ru"?` ${A.rating}  5`:`Rating ${A.rating} of 5`,children:[aI(A.rating)," ",n.jsxs("span",{className:"reviewCard__ratingNum",children:[A.rating,"/5"]})]}),n.jsx("div",{className:"reviewCard__date",children:le})]}),n.jsx("div",{className:"reviewCard__who",children:A.fromUser?n.jsxs(xe,{className:"reviewCard__user",to:ds(A.fromUser.id),state:{backTo:o?gf(o):K.reviews},children:[n.jsx("span",{className:"reviewCard__avatar","aria-hidden":"true",children:A.fromUser.avatarDataUrl?n.jsx("img",{src:A.fromUser.avatarDataUrl,alt:""}):n.jsx("span",{className:"reviewCard__avatarFallback",children:A.fromUser.fullName.trim().slice(0,1).toUpperCase()})}),n.jsx("span",{className:"reviewCard__userName",children:A.fromUser.fullName})]}):n.jsx("span",{className:"reviewCard__userName",children:s("notifications.someone")})}),A.comment?n.jsxs("div",{className:"reviewCard__comment",children:["",A.comment,""]}):null,A.task?n.jsxs("div",{className:"reviewCard__task",children:[n.jsxs("div",{className:"reviewCard__taskTitleRow",children:[n.jsxs("span",{className:"reviewCard__taskLabel",children:[a==="ru"?"":"Task",":"]})," ",n.jsx(xe,{className:"reviewCard__taskLink",to:Oe(A.task.id),state:{backTo:o?gf(o):K.reviews},children:A.task.title}),O?n.jsx("span",{className:"reviewCard__statusPill",children:O}):null]}),n.jsxs("div",{className:"reviewCard__taskMeta",children:[be?l.user?.role==="executor"?n.jsxs("span",{className:"reviewCard__metaItem reviewCard__metaItem--payout",children:[s("tasks.payout"),": ",be]}):n.jsxs("span",{className:"reviewCard__metaItem",children:[a==="ru"?"":"Budget",": ",be]}):null,A.task.dueDate?n.jsxs("span",{className:"reviewCard__metaItem",children:[a==="ru"?"":"Due",": ",A.task.dueDate]}):null,A.task.category?n.jsxs("span",{className:"reviewCard__metaItem",children:[a==="ru"?"":"Platform",": ",A.task.category]}):null,A.task.location?n.jsxs("span",{className:"reviewCard__metaItem",children:[a==="ru"?"":"Format",": ",A.task.location]}):null]}),A.submission?n.jsxs("div",{className:"reviewCard__submission",children:[n.jsxs("div",{className:"reviewCard__submissionTitle",children:[a==="ru"?" ":"Submission",se?n.jsxs("span",{className:"reviewCard__submissionDate",children:["(",se,")"]}):null]}),A.submission.message?n.jsx("div",{className:"reviewCard__submissionMsg",children:A.submission.message}):null,A.submission.files.length?n.jsx("ul",{className:"reviewCard__files",children:A.submission.files.map(Se=>n.jsx("li",{className:"reviewCard__file",children:Se.url.startsWith("idb:")?n.jsx("button",{type:"button",className:"reviewCard__fileLink",onClick:()=>{const Ce=Se.url.slice(4),ge=(Se.title??"").trim()||(a==="ru"?"":"Video");(async()=>{const L=await Er(Ce);L&&iI(ge,L)})()},children:Se.title?Se.title:a==="ru"?" ":"Download video"}):n.jsx("a",{className:"reviewCard__fileLink",href:Se.url,target:"_blank",rel:"noreferrer",children:Se.title?Se.title:Se.url})},Se.url))}):null]}):A.task.completionVideoUrl?n.jsxs("div",{className:"reviewCard__submission",children:[n.jsx("div",{className:"reviewCard__submissionTitle",children:a==="ru"?"":"Result"}),n.jsx("a",{className:"reviewCard__fileLink",href:A.task.completionVideoUrl,target:"_blank",rel:"noreferrer",children:a==="ru"?"   ":"Open work link"})]}):null]}):n.jsx("div",{className:"reviewCard__taskMissing",children:a==="ru"?"   (, ).":"Task not found (may have been deleted)."})]},A.id)}),n.jsx(gl,{page:q,pageCount:X,onChange:B})]})]})}):n.jsx("main",{className:"reviewsPage",children:n.jsxs("div",{className:"reviewsContainer",children:[n.jsx("h1",{className:"reviewsTitle",children:a==="ru"?"":"Reviews"}),n.jsx("p",{children:n.jsx(xe,{to:K.login,children:s("auth.signIn")})})]})})}const rI="ui-create-works.disputeMessages.v1";let ff={raw:null,list:[]};function oI(){const s=localStorage.getItem(rI);if(ff.raw===s)return ff.list;const a=(()=>{try{const l=JSON.parse(s??"[]");return Array.isArray(l)?l:[]}catch{return[]}})();return ff={raw:s,list:a},a}function cI(){return h.useSyncExternalStore(hs.subscribe,oI,()=>[])}const Cx=360*60*1e3,Dx="user_dev_arbiter";function mf(s,a){if(a==="ru"){if(s==="open")return"";if(s==="in_review")return" ";if(s==="need_more_info")return" ";if(s==="decided")return" ";if(s==="closed")return""}else{if(s==="open")return"Open";if(s==="in_review")return"In review";if(s==="need_more_info")return"Need info";if(s==="decided")return"Decided";if(s==="closed")return"Closed"}return s}function uI(s){return(Number.isFinite(s)?Math.round(s*100)/100:0).toLocaleString(void 0,{maximumFractionDigits:2})}function dI(s){if(!Number.isFinite(s))return"";const a=s<0?"-":"",l=Math.abs(s),o=Math.floor(l/6e4),u=Math.floor(o/60),f=o%60;return u<=0?`${a}${f}m`:`${a}${u}h ${f}m`}function fI(){const s=Ut(),{locale:a}=lt(),l=jl(),o=ya(),u=vs(),f=qs(),p=cI(),m=Qt(),[v,x]=h.useState(()=>Date.now());h.useEffect(()=>{const U=window.setInterval(()=>x(Date.now()),6e4);return()=>window.clearInterval(U)},[]);const y=s.user?.role==="arbiter"&&s.user.id===Dx,[b,N]=h.useState("all"),[j,C]=h.useState(""),[k,D]=h.useState(""),[F,q]=h.useState(""),[B,ae]=h.useState(""),[W,X]=h.useState(!1),[E,A]=h.useState("oldest"),O=h.useMemo(()=>[{value:"all",label:a==="ru"?"":"All"},{value:"open",label:mf("open",a)},{value:"in_review",label:mf("in_review",a)}],[a]),le=h.useMemo(()=>[{value:"oldest",label:a==="ru"?" ":"Oldest first"},{value:"highest_amount",label:a==="ru"?"  ":"Highest amount"}],[a]),se=h.useMemo(()=>new Map(o.map(U=>[U.id,U])),[o]),be=h.useMemo(()=>new Map(u.map(U=>[U.id,U])),[u]),Se=h.useMemo(()=>new Map(f.map(U=>[U.id,U])),[f]),Ce=h.useMemo(()=>{const U=new Map;for(const ce of p){const Q=ce?.disputeId;if(typeof Q!="string"||!Q)continue;const de=ce?.kind,w=ce?.authorUserId,V=ce?.createdAt;if(typeof V!="string")continue;const G=w===Dx||de==="system",ie=U.get(Q)??{lastAdminAt:null,unanswered:0};G?(!ie.lastAdminAt||V>ie.lastAdminAt)&&(ie.lastAdminAt=V,ie.unanswered=0):(!ie.lastAdminAt||V>ie.lastAdminAt)&&de!=="internal"&&(ie.unanswered+=1),U.set(Q,ie)}return U},[p]),ge=h.useMemo(()=>{const U=v-2592e6,ce=new Map;for(const Q of l){const de=se.get(Q.contractId);if(!de)continue;const w=Date.parse(Q.createdAt);!Number.isFinite(w)||w<U||(ce.set(de.clientId,(ce.get(de.clientId)??0)+1),ce.set(de.executorId,(ce.get(de.executorId)??0)+1))}return ce},[se,l,v]),L=h.useMemo(()=>{const U=j.trim()?Number(j):NaN,ce=k.trim()?Number(k):NaN,Q=F?Date.parse(F):NaN,de=B?Date.parse(B):NaN;return l.filter(G=>{if(b!=="all"){if(b==="open"){if(G.status!=="open")return!1}else if(b==="in_review"&&G.status!=="in_review"&&G.status!=="need_more_info")return!1}const ee=(se.get(G.contractId)??null)?.escrowAmount??0;if(Number.isFinite(U)&&ee<U||Number.isFinite(ce)&&ee>ce)return!1;const M=Date.parse(G.createdAt);if(Number.isFinite(Q)&&(!Number.isFinite(M)||M<Q)||Number.isFinite(de)&&(!Number.isFinite(M)||M>de+1440*60*1e3-1))return!1;if(W){const S=G.slaDueAt?Date.parse(G.slaDueAt):NaN;if(!Number.isFinite(S))return!1;const ue=S-v;if(ue<=0||ue>=Cx)return!1}return!0}).slice().sort((G,ie)=>{if(E==="highest_amount"){const ee=se.get(G.contractId)?.escrowAmount??0,M=se.get(ie.contractId)?.escrowAmount??0;if(M!==ee)return M-ee}return G.createdAt.localeCompare(ie.createdAt)})},[se,F,B,l,k,j,W,v,E,b]);return s.user?y?n.jsx("main",{className:"disputesInboxPage",children:n.jsxs("div",{className:"disputesInboxContainer",children:[n.jsx("div",{className:"disputesInboxHeader",children:n.jsxs("div",{children:[n.jsx("h1",{className:"disputesInboxTitle",children:a==="ru"?" ":"Disputes inbox"}),n.jsx("div",{className:"disputesInboxSubtitle",children:a==="ru"?`: ${L.length} / ${l.length}`:`Showing: ${L.length} / ${l.length}`})]})}),n.jsxs("div",{className:"disputesInboxFilters",children:[n.jsx("div",{className:"disputesInboxField",children:n.jsx(Ea,{value:b,onChange:N,options:O,label:n.jsx("span",{className:"disputesInboxField__label",children:a==="ru"?"":"Status"})})}),n.jsxs("label",{className:"disputesInboxField",children:[n.jsx("span",{className:"disputesInboxField__label",children:a==="ru"?" ":"Amount min"}),n.jsx("input",{className:"disputesInboxInput",value:j,onChange:U=>C(U.target.value),inputMode:"decimal",placeholder:"0"})]}),n.jsxs("label",{className:"disputesInboxField",children:[n.jsx("span",{className:"disputesInboxField__label",children:a==="ru"?" ":"Amount max"}),n.jsx("input",{className:"disputesInboxInput",value:k,onChange:U=>D(U.target.value),inputMode:"decimal",placeholder:""})]}),n.jsxs("label",{className:"disputesInboxField",children:[n.jsx("span",{className:"disputesInboxField__label",children:a==="ru"?" ":"Opened from"}),n.jsx("input",{className:"disputesInboxInput",type:"date",value:F,onChange:U=>q(U.target.value)})]}),n.jsxs("label",{className:"disputesInboxField",children:[n.jsx("span",{className:"disputesInboxField__label",children:a==="ru"?" ":"Opened to"}),n.jsx("input",{className:"disputesInboxInput",type:"date",value:B,onChange:U=>ae(U.target.value)})]}),n.jsxs("label",{className:"disputesInboxCheck",children:[n.jsx("input",{type:"checkbox",checked:W,onChange:U=>X(U.target.checked)}),n.jsx("span",{children:a==="ru"?"Nearing SLA (<6)":"Nearing SLA (<6h)"})]}),n.jsx("div",{className:"disputesInboxField",children:n.jsx(Ea,{value:E,onChange:A,options:le,label:n.jsx("span",{className:"disputesInboxField__label",children:a==="ru"?"":"Sort"})})}),n.jsx("button",{type:"button",className:"disputesInboxReset",onClick:()=>{N("all"),C(""),D(""),q(""),ae(""),X(!1),A("oldest")},children:a==="ru"?"":"Reset"})]}),n.jsxs("div",{className:"disputesInboxTableWrap",role:"table","aria-label":a==="ru"?"":"Disputes",children:[n.jsxs("div",{className:"disputesInboxRow disputesInboxRow--head",role:"row",children:[n.jsx("div",{className:"disputesInboxCell",role:"columnheader",children:a==="ru"?"":"Order"}),n.jsx("div",{className:"disputesInboxCell",role:"columnheader",children:a==="ru"?"":"Amount"}),n.jsx("div",{className:"disputesInboxCell",role:"columnheader",children:a==="ru"?"":"Parties"}),n.jsx("div",{className:"disputesInboxCell",role:"columnheader",children:a==="ru"?"":"Status"}),n.jsx("div",{className:"disputesInboxCell",role:"columnheader",children:a==="ru"?"":"Opened"}),n.jsx("div",{className:"disputesInboxCell",role:"columnheader",children:"SLA"}),n.jsx("div",{className:"disputesInboxCell",role:"columnheader",children:a==="ru"?" ":"Unanswered"}),n.jsx("div",{className:"disputesInboxCell",role:"columnheader",children:a==="ru"?"":"Repeat"})]}),L.length===0?n.jsx("div",{className:"disputesInboxEmpty",children:a==="ru"?"   .":"No disputes match filters."}):L.map(U=>{const ce=se.get(U.contractId)??null,Q=ce?be.get(ce.taskId)??null:null,de=ce?Se.get(ce.clientId)??null:null,w=ce?Se.get(ce.executorId)??null:null,V=ce?.escrowAmount??0,G=new Date(U.createdAt).toLocaleString(a==="ru"?"ru-RU":"en-US"),ie=U.slaDueAt?Date.parse(U.slaDueAt):NaN,ee=Number.isFinite(ie)?ie-v:NaN,M=Number.isFinite(ee)&&ee>0&&ee<Cx,S=Number.isFinite(ee)&&ee<=0,ue=Ce.get(U.id)?.unanswered??0,ye=de?ge.get(de.id)??0:0,Ne=w?ge.get(w.id)??0:0,Ee=Q?.id??ce?.taskId??U.contractId,Be=Q?ft(Q.title,a):Ee,T=U.status==="need_more_info"?"in_review":U.status;return n.jsxs("div",{className:"disputesInboxRow disputesInboxRow--body",role:"row",tabIndex:0,onClick:H=>{const ke=H.target;ke instanceof HTMLElement&&ke.closest('a,button,input,textarea,select,[role="button"]')||m(aa(U.id))},onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&(H.preventDefault(),m(aa(U.id)))},children:[n.jsx("div",{className:"disputesInboxCell",children:n.jsxs("div",{className:"disputesInboxOrder",children:[n.jsx("div",{className:"disputesInboxOrder__id",children:Ee}),n.jsx("div",{className:"disputesInboxOrder__title",title:Be,children:Be})]})}),n.jsx("div",{className:"disputesInboxCell",children:n.jsx("div",{className:"disputesInboxAmount",children:uI(V)})}),n.jsx("div",{className:"disputesInboxCell",children:n.jsxs("div",{className:"disputesInboxParties",children:[n.jsxs("div",{className:"disputesInboxParty",children:[n.jsx("span",{className:"disputesInboxParty__role",children:a==="ru"?"":"Customer"}),n.jsx("span",{className:"disputesInboxParty__name",title:de?.email,children:de?.fullName??ce?.clientId??""})]}),n.jsxs("div",{className:"disputesInboxParty",children:[n.jsx("span",{className:"disputesInboxParty__role",children:a==="ru"?".":"Exec."}),n.jsx("span",{className:"disputesInboxParty__name",title:w?.email,children:w?.fullName??ce?.executorId??""})]})]})}),n.jsx("div",{className:"disputesInboxCell",children:n.jsx("span",{className:`disputesInboxPill ${T==="open"?"isOpen":T==="in_review"?"isReview":"isNeedInfo"}`,children:mf(T,a)})}),n.jsx("div",{className:"disputesInboxCell",children:n.jsx("div",{className:"disputesInboxMeta",children:G})}),n.jsx("div",{className:"disputesInboxCell",children:n.jsx("div",{className:`disputesInboxSla ${S?"isOverdue":M?"isNear":""}`,children:Number.isFinite(ee)?dI(ee):""})}),n.jsx("div",{className:"disputesInboxCell",children:n.jsx("div",{className:`disputesInboxUnanswered ${ue?"isHot":""}`,children:ue||""})}),n.jsx("div",{className:"disputesInboxCell",children:n.jsx("div",{className:"disputesInboxRepeat",title:a==="ru"?"   30 ":"Disputes in last 30 days",children:ye>1||Ne>1?`${ye}/${Ne}`:""})}),n.jsx("div",{className:"disputesInboxCell disputesInboxCell--actions",children:n.jsx(xe,{className:"linkBtn",to:aa(U.id),onClick:H=>H.stopPropagation(),children:a==="ru"?"":"Open"})})]},U.id)})]})]})}):n.jsx("main",{className:"disputesInboxPage",children:n.jsxs("div",{className:"disputesInboxContainer",children:[n.jsx("h1",{className:"disputesInboxTitle",children:a==="ru"?" ":"Disputes inbox"}),n.jsx("div",{style:{opacity:.85},children:a==="ru"?"    dev mode.":"Available to the arbiter in dev mode only."}),n.jsx("div",{style:{marginTop:10},children:n.jsx(xe,{to:K.profile,children:a==="ru"?" ":"Go to profile"})})]})}):n.jsx("main",{className:"disputesInboxPage",children:n.jsxs("div",{className:"disputesInboxContainer",children:[n.jsx("h1",{className:"disputesInboxTitle",children:a==="ru"?" ":"Disputes inbox"}),n.jsx("p",{style:{opacity:.85},children:n.jsx(xe,{to:K.login,children:a==="ru"?"":"Sign in"})})]})})}const mI="ui-create-works.disputeMessages.v1";let kn={disputeId:null,raw:null,list:[]};function pI(s){if(!s)return(kn.disputeId!==null||kn.raw!==null||kn.list.length)&&(kn={disputeId:null,raw:null,list:[]}),kn.list;const a=localStorage.getItem(mI);if(kn.disputeId===s&&kn.raw===a)return kn.list;const l=hs.listForDispute(s).slice().sort((o,u)=>o.createdAt.localeCompare(u.createdAt));return kn={disputeId:s,raw:a,list:l},l}function Yy(s){return h.useSyncExternalStore(hs.subscribe,()=>pI(s??null),()=>[])}const hI="ui-create-works.auditLog.v1";let _n={disputeId:null,raw:null,list:[]};function vI(s){if(!s)return(_n.disputeId!==null||_n.raw!==null||_n.list.length)&&(_n={disputeId:null,raw:null,list:[]}),_n.list;const a=localStorage.getItem(hI);if(_n.disputeId===s&&_n.raw===a)return _n.list;const l=Ns.listForDispute(s).slice().sort((o,u)=>o.createdAt.localeCompare(u.createdAt));return _n={disputeId:s,raw:a,list:l},l}function gI(s){return h.useSyncExternalStore(Ns.subscribe,()=>vI(s??null),()=>[])}const Rx="user_dev_arbiter";function uc(s,a){if(a==="ru"){if(s==="release_to_executor")return" ";if(s==="refund_to_customer")return" ";if(s==="partial_refund")return" "}else{if(s==="release_to_executor")return"Release to executor";if(s==="refund_to_customer")return"Refund to customer";if(s==="partial_refund")return"Partial refund"}return s}function xI(s,a){return a!=="ru"?s:{"disputeId is required":"  ID .","actorUserId is required":"  ID  .","expectedVersion is required":" .      .","Comment is required":" .","Checklist is incomplete":"  .","Dispute not found":"  .","Decision is already locked":"  .  .","Dispute must be in_review to decide":"  ,       .","Stale data (version mismatch)":"  ( ).      .","Dispute is assigned to another arbiter":"      .","Contract not found":"  .","Escrow is not frozen (cannot release)":"Escrow      .","Escrow is not frozen (cannot refund)":"Escrow      .","executorAmount is invalid":"   .","customerAmount is invalid":"   .","Escrow is not frozen (cannot split)":"Escrow      .","Partial amounts must sum to escrow amount":"       escrow.","Failed to lock decision (possibly stale)":"    (,  ).      ."}[s]??s}function Mx(s,a){if(a==="ru"){if(s==="open")return"";if(s==="in_review")return" ";if(s==="need_more_info")return" ";if(s==="decided")return" ";if(s==="closed")return""}else{if(s==="open")return"Open";if(s==="in_review")return"In review";if(s==="need_more_info")return"Need more info";if(s==="decided")return"Decided";if(s==="closed")return"Closed"}return s}function yI(s){const a=s<0?"-":"",l=Math.abs(s),o=Math.floor(l/6e4),u=Math.floor(o/60),f=o%60;return u<=0?`${a}${f}m`:`${a}${u}h ${f}m`}function bI(s,a){const l=s.trim()||"file",o=URL.createObjectURL(a),u=document.createElement("a");u.href=o,u.download=l,u.rel="noreferrer",u.click(),window.setTimeout(()=>URL.revokeObjectURL(o),0)}function kI(){const{disputeId:s}=si(),a=Ut(),{locale:l}=lt(),o=Qt(),u=h.useRef(null),f=h.useRef(!1);jl();const p=ya(),m=vs(),v=qs(),x=Ic(),y=s?Ot.getById(s):null,b=h.useMemo(()=>y?p.find(fe=>fe.id===y.contractId)??null:null,[p,y]),N=h.useMemo(()=>b?m.find(fe=>fe.id===b.taskId)??null:null,[b,m]),j=h.useMemo(()=>b?{customerId:b.clientId,executorId:b.executorId,arbiterId:Rx}:{customerId:null,executorId:null,arbiterId:Rx},[b]),C=a.user?.role==="arbiter"&&a.user.id===j.arbiterId,k=!!(a.user&&y&&b&&C),D=j.customerId?v.find(fe=>fe.id===j.customerId)??null:null,F=j.executorId?v.find(fe=>fe.id===j.executorId)??null:null,q=gI(y?.id??null),B=Yy(y?.id??null);h.useEffect(()=>{f.current=!1},[y?.id]),h.useEffect(()=>{if(f.current||B.length===0)return;const fe=u.current;if(!fe)return;const Re=window.requestAnimationFrame(()=>{fe.scrollTop=fe.scrollHeight,f.current=!0});return()=>window.cancelAnimationFrame(Re)},[B.length]);const[ae,W]=h.useState(()=>Date.now());h.useEffect(()=>{const fe=window.setInterval(()=>W(Date.now()),6e4);return()=>window.clearInterval(fe)},[]),h.useEffect(()=>{!a.user||!y||Fe.markReadForDispute(a.user.id,y.id)},[a.user,y]);const[X,E]=h.useState("release_to_executor"),[A,O]=h.useState(""),[le,se]=h.useState(""),[be,Se]=h.useState(""),[Ce,ge]=h.useState(!1),[L,U]=h.useState(!1),[ce,Q]=h.useState(!1),[de,w]=h.useState(!1),[V,G]=h.useState(null),[ie,ee]=h.useState(null),[M,S]=h.useState("");if(!a.user)return n.jsx("main",{className:"disputeWsPage",children:n.jsxs("div",{className:"disputeWsContainer",children:[n.jsx("h1",{className:"disputeWsTitle",children:l==="ru"?"":"Dispute"}),n.jsx("p",{style:{opacity:.85},children:n.jsx(xe,{to:K.login,children:l==="ru"?"":"Sign in"})})]})});if(!y||!b)return n.jsx("main",{className:"disputeWsPage",children:n.jsxs("div",{className:"disputeWsContainer",children:[n.jsx("h1",{className:"disputeWsTitle",children:l==="ru"?"  ":"Dispute not found"}),n.jsx("div",{style:{opacity:.85,marginTop:8},children:n.jsx(xe,{to:K.disputes,children:l==="ru"?" ":"Back to inbox"})})]})});if(!k)return n.jsx("main",{className:"disputeWsPage",children:n.jsxs("div",{className:"disputeWsContainer",children:[n.jsx("h1",{className:"disputeWsTitle",children:l==="ru"?" ":"Access denied"}),n.jsx("div",{style:{opacity:.85,marginTop:8},children:n.jsx(xe,{to:K.profile,children:l==="ru"?" ":"Go to profile"})})]})});const ue=N?ft(N.title,l):b.taskId,ye=y.slaDueAt?Date.parse(y.slaDueAt):NaN,Ne=Number.isFinite(ye)?ye-ae:NaN,Ee=b.escrowAmount??0,Be=Ys.listForTask(b.taskId).find(fe=>fe.executorId===b.executorId)?.amount??0,T=x.filter(fe=>fe.contractId===b.id).slice().sort((fe,Re)=>Re.createdAt.localeCompare(fe.createdAt)),H=y.status!=="closed"&&!y.lockedDecisionAt,ke=y.status!=="closed",we=y.assignedArbiterId===a.user.id,$=ke&&we,De=(fe,Re)=>{const st=[j.customerId,j.executorId].filter(Boolean);for(const mt of st)mt!==a.user.id&&Fe.addDisputeStatus({recipientUserId:mt,actorUserId:a.user.id,taskId:b.taskId,disputeId:y.id,status:fe,note:Re})},Ye=!be.trim()||!Ce||!L||!ce||!H,Ge=h.useMemo(()=>[{value:"release_to_executor",label:uc("release_to_executor",l)},{value:"refund_to_customer",label:uc("refund_to_customer",l)},{value:"partial_refund",label:uc("partial_refund",l)}],[l]);return n.jsxs("main",{className:"disputeWsPage",children:[n.jsxs("div",{className:"disputeWsContainer",children:[n.jsxs("header",{className:"disputeWsHeader",children:[n.jsxs("div",{className:"disputeWsHeader__left",children:[n.jsx("button",{type:"button",className:"disputeWsBack",onClick:()=>{window.history.length>1?o(-1):o(K.disputes)},children:""}),n.jsxs("div",{className:"disputeWsHeader__meta",children:[n.jsxs("div",{className:"disputeWsKicker",children:[l==="ru"?"":"Dispute","  ",Mx(y.status,l),"  SLA:"," ",Number.isFinite(Ne)?yI(Ne):""]}),n.jsx("h1",{className:"disputeWsTitle",title:ue,children:ue}),n.jsxs("div",{className:"disputeWsSub",children:[n.jsxs("span",{children:[l==="ru"?"":"Contract",": ",n.jsx("span",{className:"disputeWsMono",children:b.id})]}),n.jsx("span",{className:"disputeWsDot",children:""}),n.jsxs("span",{children:[l==="ru"?"":"Task",":"," ",n.jsx(xe,{to:Oe(b.taskId),children:b.taskId})]})]})]})]}),n.jsx("div",{className:"disputeWsHeader__right",children:n.jsx("span",{className:"disputeWsMeta",children:l==="ru"?" ":"Arbiter mode"})})]}),n.jsxs("div",{className:"disputeWsGrid",children:[n.jsxs("section",{className:"disputeWsCol",children:[n.jsxs("div",{className:"disputeWsPanel",children:[n.jsx("div",{className:"disputeWsPanel__title",children:l==="ru"?" ":"Order context"}),n.jsxs("div",{className:"disputeWsBlock",children:[n.jsx("div",{className:"disputeWsLabel",children:l==="ru"?"":"Customer"}),n.jsx("div",{className:"disputeWsValue",children:D?n.jsx(xe,{to:ds(D.id),children:D.fullName}):j.customerId})]}),n.jsxs("div",{className:"disputeWsBlock",children:[n.jsx("div",{className:"disputeWsLabel",children:l==="ru"?"":"Executor"}),n.jsx("div",{className:"disputeWsValue",children:F?n.jsx(xe,{to:ds(F.id),children:F.fullName}):j.executorId})]}),n.jsxs("div",{className:"disputeWsBlock",children:[n.jsx("div",{className:"disputeWsLabel",children:l==="ru"?" (escrow)":"Escrow amount"}),n.jsxs("div",{className:"disputeWsValue",children:[n.jsx("strong",{children:Ee}),n.jsxs("span",{className:"disputeWsMeta",style:{marginLeft:10},children:[l==="ru"?"":"Frozen",": ",Be||0]})]})]}),N?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"disputeWsDivider"}),n.jsxs("div",{className:"disputeWsBlock",children:[n.jsx("div",{className:"disputeWsLabel",children:l==="ru"?"":"Description"}),n.jsx("div",{className:"disputeWsValue",style:{whiteSpace:"pre-wrap"},children:ft(N.description,l)})]}),N.requirements?n.jsxs("div",{className:"disputeWsBlock",children:[n.jsx("div",{className:"disputeWsLabel",children:l==="ru"?"":"Requirements"}),n.jsx("div",{className:"disputeWsValue",style:{whiteSpace:"pre-wrap"},children:ft(N.requirements,l)})]}):null]}):null]}),n.jsxs("div",{className:"disputeWsPanel",children:[n.jsx("div",{className:"disputeWsPanel__title",children:l==="ru"?" ()":"Deliverables (versions)"}),T.length===0?n.jsx("div",{className:"disputeWsEmpty",children:l==="ru"?" .":"No submissions yet."}):n.jsx("div",{className:"disputeWsList",children:T.map(fe=>n.jsxs("div",{className:"disputeWsItem",children:[n.jsxs("div",{className:"disputeWsItem__top",children:[n.jsx("span",{className:"disputeWsMono",children:fe.id}),n.jsx("span",{className:"disputeWsMeta",children:new Date(fe.createdAt).toLocaleString(l==="ru"?"ru-RU":"en-US")}),fe.id===T[0]?.id?n.jsx("span",{className:"disputeWsPill",children:l==="ru"?"":"Latest"}):null]}),fe.message?n.jsx("div",{className:"disputeWsItem__msg",children:fe.message}):null,fe.files?.length?n.jsx("div",{className:"disputeWsFiles",children:fe.files.map((Re,st)=>n.jsx("div",{className:"disputeWsFile",children:Re.url.startsWith("idb:")?n.jsxs("button",{type:"button",className:"disputeWsFile__download",onClick:()=>{const mt=Re.url.slice(4),Es=(Re.title??"").trim()||(l==="ru"?"":"Video");(async()=>{const $t=await Er(mt);$t&&bI(Es,$t)})()},children:[l==="ru"?"":"Download",": ",Re.title??"file"]}):n.jsxs(n.Fragment,{children:[n.jsx("a",{href:Re.url,target:"_blank",rel:"noreferrer",children:Re.title??Re.url}),Re.mediaType==="video"?n.jsx(yl,{src:Re.url}):null]})},`${Re.url}-${st}`))}):null]},fe.id))})]}),n.jsxs("div",{className:"disputeWsPanel",children:[n.jsx("div",{className:"disputeWsPanel__title",children:l==="ru"?" (audit)":"Audit log"}),q.length===0?n.jsx("div",{className:"disputeWsEmpty",children:l==="ru"?" .":"No events yet."}):n.jsx("div",{className:"disputeWsList",children:q.map(fe=>n.jsxs("div",{className:"disputeWsAudit",children:[n.jsxs("div",{className:"disputeWsAudit__top",children:[n.jsx("span",{className:"disputeWsMono",children:fe.actionType}),n.jsx("span",{className:"disputeWsMeta",children:new Date(fe.createdAt).toLocaleString(l==="ru"?"ru-RU":"en-US")})]}),n.jsx("div",{className:"disputeWsAudit__summary",children:fe.summary})]},fe.id))})]})]}),n.jsx("section",{className:"disputeWsCol disputeWsCol--center",children:n.jsxs("div",{className:"disputeWsPanel disputeWsPanel--chat",children:[n.jsx("div",{className:"disputeWsPanel__title",children:l==="ru"?"":"Communication"}),n.jsxs("div",{className:"disputeWsChat",children:[we?null:n.jsx("div",{className:"disputeWsWarn",style:{marginTop:0},children:l==="ru"?"      ,      .":"Arbiter cannot send chat messages until the dispute is taken in work."}),n.jsx("div",{className:"disputeWsChatList",ref:u,"aria-label":l==="ru"?"":"Messages",children:B.map(fe=>{const Re=v.find(mt=>mt.id===fe.authorUserId)??null,st=new Date(fe.createdAt).toLocaleString(l==="ru"?"ru-RU":"en-US");return n.jsxs("div",{className:`disputeWsMsg ${fe.kind==="internal"?"isInternal":fe.kind==="system"?"isSystem":""}`,children:[n.jsxs("div",{className:"disputeWsMsg__meta",children:[n.jsx("span",{className:"disputeWsMsg__author",children:Re?.fullName??fe.authorUserId}),n.jsx("span",{className:"disputeWsMeta",children:st}),n.jsx("span",{className:"disputeWsPill",children:fe.kind})]}),n.jsx("div",{className:"disputeWsMsg__text",children:fe.text})]},fe.id)})}),n.jsxs("div",{className:"disputeWsChatComposer",children:[n.jsx("textarea",{className:"disputeWsTextarea",value:M,onChange:fe=>S(fe.target.value),placeholder:l==="ru"?"    ":"Message to customer and executor",rows:3,disabled:!$,onKeyDown:fe=>{if(!((fe.ctrlKey||fe.metaKey)&&fe.key==="Enter")||(fe.preventDefault(),!$))return;const st=M.trim();if(!st)return;const mt=hs.add({disputeId:y.id,authorUserId:a.user.id,kind:"public",text:st});for(const Es of[j.customerId,j.executorId].filter(Boolean))Es!==a.user.id&&Fe.addDisputeMessage({recipientUserId:Es,actorUserId:a.user.id,taskId:b.taskId,disputeId:y.id,message:mt.text});Ns.add({disputeId:y.id,actionType:"public_message",actorUserId:a.user.id,summary:l==="ru"?" ":"Arbiter message",payload:{messageId:mt.id}}),S("")}}),n.jsxs("div",{className:"disputeWsChatComposerRow",children:[n.jsx("button",{type:"button",className:"disputeWsBtn disputeWsBtn--primary",disabled:!$||!M.trim(),onClick:()=>{if(!$)return;const fe=M.trim();if(!fe)return;const Re=hs.add({disputeId:y.id,authorUserId:a.user.id,kind:"public",text:fe});for(const st of[j.customerId,j.executorId].filter(Boolean))st!==a.user.id&&Fe.addDisputeMessage({recipientUserId:st,actorUserId:a.user.id,taskId:b.taskId,disputeId:y.id,message:Re.text});Ns.add({disputeId:y.id,actionType:"public_message",actorUserId:a.user.id,summary:l==="ru"?" ":"Arbiter message",payload:{messageId:Re.id}}),S("")},children:l==="ru"?"":"Send"}),n.jsx("span",{className:"disputeWsMeta",children:l==="ru"?"Ctrl+Enter  ":"Ctrl+Enter  send"})]})]}),n.jsxs("div",{className:"disputeWsChatActions",children:[n.jsx("button",{type:"button",className:"linkBtn",disabled:!$,onClick:()=>{if(!$)return;const fe=hs.addSystem({disputeId:y.id,text:l==="ru"?"  .":"Please provide the exact timestamp of the mismatch."});for(const Re of[j.customerId,j.executorId].filter(Boolean))Fe.addDisputeMessage({recipientUserId:Re,actorUserId:a.user.id,taskId:b.taskId,disputeId:y.id,message:fe.text});Ns.add({disputeId:y.id,actionType:"system_message",actorUserId:a.user.id,summary:l==="ru"?":  ":"Request: mismatch timestamp",payload:{messageId:fe.id}})},children:l==="ru"?" ":"Request timestamp"}),n.jsx("button",{type:"button",className:"linkBtn",disabled:!$,onClick:()=>{if(!$)return;const fe=hs.addSystem({disputeId:y.id,text:l==="ru"?"  ( ).":"Please provide source files (if available)."});for(const Re of[j.customerId,j.executorId].filter(Boolean))Fe.addDisputeMessage({recipientUserId:Re,actorUserId:a.user.id,taskId:b.taskId,disputeId:y.id,message:fe.text});Ns.add({disputeId:y.id,actionType:"system_message",actorUserId:a.user.id,summary:l==="ru"?": ":"Request: source files",payload:{messageId:fe.id}})},children:l==="ru"?" ":"Request sources"}),n.jsx("button",{type:"button",className:"linkBtn",disabled:!$,onClick:()=>{if(!$)return;const fe=hs.addSystem({disputeId:y.id,text:l==="ru"?"  ,    .":"Please clarify which requirement item you refer to."});for(const Re of[j.customerId,j.executorId].filter(Boolean))Fe.addDisputeMessage({recipientUserId:Re,actorUserId:a.user.id,taskId:b.taskId,disputeId:y.id,message:fe.text});Ns.add({disputeId:y.id,actionType:"system_message",actorUserId:a.user.id,summary:l==="ru"?":   ":"Request: requirement item clarification",payload:{messageId:fe.id}})},children:l==="ru"?"  ":"Clarify requirement"})]})]})]})}),n.jsx("section",{className:"disputeWsCol disputeWsCol--right",children:n.jsxs("div",{className:"disputeWsPanel",children:[n.jsx("div",{className:"disputeWsPanel__title",children:l==="ru"?"":"Decision"}),n.jsxs("div",{className:"disputeWsBlock",children:[n.jsx("div",{className:"disputeWsLabel",children:l==="ru"?" ":"Dispute status"}),n.jsx("div",{className:"disputeWsValue",children:n.jsx("span",{className:"disputeWsPill",children:Mx(y.status,l)})})]}),n.jsxs("div",{className:"disputeWsBlock",children:[n.jsx("div",{className:"disputeWsLabel",children:l==="ru"?" ":"Assigned"}),n.jsx("div",{className:"disputeWsValue",children:y.assignedArbiterId??""})]}),n.jsxs("div",{className:"disputeWsActionsRow",children:[y.status==="need_more_info"?n.jsx("button",{type:"button",className:"disputeWsBtn",disabled:!H||!!y.assignedArbiterId&&!we,onClick:()=>{const fe=y.version??1,Re=Ot.takeInWork({disputeId:y.id,arbiterId:a.user.id,expectedVersion:fe});Re&&(hs.addSystem({disputeId:y.id,text:l==="ru"?"  .":"Arbiter resumed review."}),De("in_review"),Ns.add({disputeId:y.id,actionType:"resume_review",actorUserId:a.user.id,summary:l==="ru"?" ":"Resumed review",versionBefore:fe,versionAfter:Re.version}))},children:l==="ru"?" ":"Resume review"}):y.status==="open"?n.jsx("button",{type:"button",className:"disputeWsBtn",disabled:!H||!!y.assignedArbiterId&&!we,onClick:()=>{const fe=y.version??1,Re=Ot.takeInWork({disputeId:y.id,arbiterId:a.user.id,expectedVersion:fe});Re&&(hs.addSystem({disputeId:y.id,text:l==="ru"?"    .":"Arbiter took the dispute in work."}),De("in_review"),Ns.add({disputeId:y.id,actionType:"take_in_work",actorUserId:a.user.id,summary:l==="ru"?"  ":"Taken in work",versionBefore:fe,versionAfter:Re.version}))},children:l==="ru"?"  ":"Take in work"}):null,n.jsx("button",{type:"button",className:"disputeWsBtn",disabled:!H||!we,onClick:()=>{if(!we)return;const fe=y.version??1,Re=Ot.requestMoreInfo({disputeId:y.id,arbiterId:a.user.id,expectedVersion:fe});Re&&(hs.addSystem({disputeId:y.id,text:l==="ru"?"   .":"Arbiter requested more information."}),De("need_more_info"),Ns.add({disputeId:y.id,actionType:"request_more_info",actorUserId:a.user.id,summary:l==="ru"?" ":"Requested more info",versionBefore:fe,versionAfter:Re.version}))},children:l==="ru"?" ":"Request info"})]}),n.jsx("div",{className:"disputeWsDivider"}),n.jsx("div",{className:"disputeWsField",children:n.jsx(Ea,{value:X,onChange:E,options:Ge,disabled:!H,label:n.jsx("span",{className:"disputeWsLabel",children:l==="ru"?" ":"Decision type"})})}),X==="partial_refund"?n.jsxs("div",{className:"disputeWsGrid2",children:[n.jsxs("label",{className:"disputeWsField",children:[n.jsx("span",{className:"disputeWsLabel",children:l==="ru"?"":"Executor amount"}),n.jsx("input",{className:"disputeWsInput",value:A,onChange:fe=>O(fe.target.value),inputMode:"decimal",disabled:!H})]}),n.jsxs("label",{className:"disputeWsField",children:[n.jsx("span",{className:"disputeWsLabel",children:l==="ru"?"":"Customer amount"}),n.jsx("input",{className:"disputeWsInput",value:le,onChange:fe=>se(fe.target.value),inputMode:"decimal",disabled:!H})]})]}):null,n.jsxs("label",{className:"disputeWsField",children:[n.jsx("span",{className:"disputeWsLabel",children:l==="ru"?" ()":"Comment (required)"}),n.jsx("textarea",{className:"disputeWsTextarea",value:be,onChange:fe=>Se(fe.target.value),rows:4,disabled:!H})]}),n.jsxs("div",{className:"disputeWsChecklist",children:[n.jsxs("label",{className:"disputeWsCheck",children:[n.jsx("input",{type:"checkbox",checked:Ce,onChange:fe=>ge(fe.target.checked),disabled:!H}),l==="ru"?" ":"Requirements checked"]}),n.jsxs("label",{className:"disputeWsCheck",children:[n.jsx("input",{type:"checkbox",checked:L,onChange:fe=>U(fe.target.checked),disabled:!H}),l==="ru"?" ":"Video reviewed"]}),n.jsxs("label",{className:"disputeWsCheck",children:[n.jsx("input",{type:"checkbox",checked:ce,onChange:fe=>Q(fe.target.checked),disabled:!H}),l==="ru"?" ":"Chat reviewed"]})]}),n.jsxs("div",{className:"disputeWsActionsRow",children:[n.jsx("button",{type:"button",className:"disputeWsBtn disputeWsBtn--primary",disabled:Ye||!we,onClick:()=>{we&&(G(y.version??1),ee(null),w(!0))},children:l==="ru"?" ":"Confirm decision"}),n.jsx("button",{type:"button",className:"disputeWsBtn",disabled:!ke||!we,onClick:()=>{!we||!Ot.close(b.id)||(hs.addSystem({disputeId:y.id,text:l==="ru"?"  .":"Dispute closed by arbiter."}),De("closed"),Ns.add({disputeId:y.id,actionType:"dispute_closed",actorUserId:a.user.id,summary:l==="ru"?" ":"Dispute closed"}))},children:l==="ru"?" ":"Close dispute"})]}),H?null:n.jsx("div",{className:"disputeWsWarn",children:l==="ru"?"     .  .":"Decision is locked or dispute is closed. Actions are disabled."})]})})]})]}),de?n.jsx("div",{className:"disputeWsOverlay",role:"dialog","aria-modal":"true",onClick:()=>{w(!1),ee(null)},children:n.jsxs("div",{className:"disputeWsModal",onClick:fe=>fe.stopPropagation(),children:[n.jsxs("div",{className:"disputeWsModal__top",children:[n.jsx("div",{className:"disputeWsModal__title",children:l==="ru"?" ":"Confirm decision"}),n.jsx("button",{type:"button",className:"disputeWsModal__close",onClick:()=>{w(!1),ee(null)},"aria-label":l==="ru"?"":"Close",children:""})]}),n.jsxs("div",{className:"disputeWsModal__body",children:[n.jsx("div",{className:"disputeWsWarn",children:l==="ru"?"      (escrow  ).":"Financial decisions will be executed after confirmation (escrow will be distributed)."}),ie?n.jsx("div",{className:"disputeWsError",children:ie}):null,n.jsxs("div",{style:{marginTop:10,opacity:.9},children:[l==="ru"?":":"Type:"," ",n.jsx("strong",{children:uc(X,l)})]}),X==="partial_refund"?n.jsxs("div",{style:{marginTop:8,opacity:.9},children:[l==="ru"?":":"Amounts:"," ",n.jsxs("strong",{children:[l==="ru"?"":"executor",": ",A||"",","," ",l==="ru"?"":"customer",": ",le||""]})]}):null,n.jsxs("div",{style:{marginTop:8,opacity:.9},children:[l==="ru"?":":"Comment:"," ",n.jsx("div",{style:{whiteSpace:"pre-wrap"},children:be.trim()})]})]}),n.jsxs("div",{className:"disputeWsModal__actions",children:[n.jsx("button",{type:"button",className:"disputeWsBtn",onClick:()=>{w(!1),ee(null)},children:l==="ru"?"":"Cancel"}),n.jsx("button",{type:"button",className:"disputeWsBtn disputeWsBtn--primary",onClick:()=>{try{ee(null);const fe=V??y.version??1,Re=X==="partial_refund"?{executorAmount:Number(A),customerAmount:Number(le)}:void 0;kc.decideAndExecute({disputeId:y.id,actorUserId:a.user.id,expectedVersion:fe,decisionKind:X,comment:be.trim(),checklist:{requirementsChecked:Ce,videoReviewed:L,chatReviewed:ce},partial:Re,closeAfter:!1}),w(!1)}catch(fe){const Re=fe instanceof Error?fe.message:String(fe);ee(xI(Re,l))}},children:l==="ru"?"":"Confirm"})]})]})}):null]})}const Ux="user_dev_arbiter";function _I(s,a){if(a==="ru"){if(s==="open")return"";if(s==="in_review")return" ";if(s==="need_more_info")return" ";if(s==="decided")return" ";if(s==="closed")return""}else{if(s==="open")return"Open";if(s==="in_review")return"In review";if(s==="need_more_info")return"Need info";if(s==="decided")return"Decided";if(s==="closed")return"Closed"}return s}function NI(){const{disputeId:s}=si(),a=Ut(),{locale:l}=lt(),o=Qt();jl();const u=ya(),f=vs(),p=qs(),m=s?Ot.getById(s):null,v=h.useMemo(()=>m?u.find(E=>E.id===m.contractId)??null:null,[u,m]),x=h.useMemo(()=>v?f.find(E=>E.id===v.taskId)??null:null,[v,f]),y=h.useMemo(()=>v?{customerId:v.clientId,executorId:v.executorId,arbiterId:Ux}:{customerId:null,executorId:null,arbiterId:Ux},[v]),b=h.useMemo(()=>!a.user||!m||!v?!1:a.user.id===y.customerId||a.user.id===y.executorId||a.user.role==="arbiter"&&a.user.id===y.arbiterId,[a.user,v,m,y.arbiterId,y.customerId,y.executorId]);if(a.user?.role==="arbiter"&&a.user.id===y.arbiterId)return n.jsx(kI,{});const N=Yy(m?.id??null),j=h.useMemo(()=>a.user?a.user.role==="arbiter"&&a.user.id===y.arbiterId?N:N.filter(A=>A.kind!=="internal"):[],[a.user,N,y.arbiterId]),[C,k]=h.useState(""),[D,F]=h.useState(!1),q=h.useRef(null),B=x?ft(x.title,l):v?.taskId??m?.contractId??"",ae=y.customerId?p.find(E=>E.id===y.customerId)??null:null,W=y.executorId?p.find(E=>E.id===y.executorId)??null:null,X=p.find(E=>E.id===y.arbiterId)??null;return h.useEffect(()=>{!a.user||!m||Fe.markReadForDispute(a.user.id,m.id)},[a.user,m]),h.useEffect(()=>{q.current&&(q.current.scrollTop=q.current.scrollHeight)},[j.length]),a.user?!m||!v?n.jsx("main",{className:"disputeThreadPage",children:n.jsxs("div",{className:"disputeThreadContainer",children:[n.jsx("h1",{className:"disputeThreadTitle",children:l==="ru"?"  ":"Dispute not found"}),n.jsx("div",{style:{opacity:.85,marginTop:8},children:n.jsx(xe,{to:K.profile,children:l==="ru"?" ":"Go to profile"})})]})}):b?n.jsx("main",{className:"disputeThreadPage",children:n.jsxs("div",{className:"disputeThreadContainer",children:[n.jsxs("div",{className:"disputeThreadHeader",children:[n.jsx("button",{type:"button",className:"disputeThreadBack",onClick:()=>{window.history.length>1?o(-1):o(K.profile)},"aria-label":l==="ru"?"":"Back",title:l==="ru"?"":"Back",children:""}),n.jsxs("div",{className:"disputeThreadHeader__main",children:[n.jsxs("div",{className:"disputeThreadKicker",children:[l==="ru"?"":"Dispute","  ",_I(m.status,l)]}),n.jsx("h1",{className:"disputeThreadTitle",title:B,children:B}),n.jsxs("div",{className:"disputeThreadParticipants",children:[n.jsxs("span",{className:"disputeThreadParticipant",children:[l==="ru"?"":"Customer",": ",ae?.fullName??y.customerId]}),n.jsx("span",{className:"disputeThreadDot","aria-hidden":"true",children:""}),n.jsxs("span",{className:"disputeThreadParticipant",children:[l==="ru"?"":"Executor",": ",W?.fullName??y.executorId]}),n.jsx("span",{className:"disputeThreadDot","aria-hidden":"true",children:""}),n.jsxs("span",{className:"disputeThreadParticipant",children:[l==="ru"?"":"Arbiter",": ",X?.fullName??y.arbiterId]})]})]})]}),n.jsxs("div",{className:"disputeChat",children:[n.jsx("div",{className:"disputeChatList",ref:q,"aria-label":l==="ru"?"":"Messages",children:j.length===0?n.jsx("div",{className:"disputeChatEmpty",children:l==="ru"?"  .     .":"No messages yet. Describe the situation and share your arguments."}):j.map(E=>{const A=E.authorUserId===a.user.id,O=p.find(se=>se.id===E.authorUserId)??null,le=new Date(E.createdAt).toLocaleString(l==="ru"?"ru-RU":"en-US");return n.jsxs("div",{className:`disputeMsg${A?" disputeMsg--mine":""}`,children:[n.jsxs("div",{className:"disputeMsg__meta",children:[n.jsx("span",{className:"disputeMsg__author",children:O?.fullName??E.authorUserId}),n.jsx("span",{className:"disputeMsg__time",children:le})]}),n.jsxs("div",{className:"disputeMsg__bubble",children:[E.kind==="internal"?n.jsx("div",{style:{fontSize:12,opacity:.8,marginBottom:6},children:l==="ru"?" ":"Internal note"}):E.kind==="system"?n.jsx("div",{style:{fontSize:12,opacity:.8,marginBottom:6},children:"System"}):null,E.text]})]},E.id)})}),a.user.role==="arbiter"&&a.user.id===y.arbiterId?n.jsxs("div",{style:{padding:"0 12px 10px",display:"flex",gap:8,flexWrap:"wrap"},children:[n.jsx("button",{type:"button",className:"linkBtn",onClick:()=>{if(!m)return;const E=l==="ru"?"  .":"Please provide the exact timestamp of the mismatch.",A=hs.addSystem({disputeId:m.id,text:E});Ns.add({disputeId:m.id,actionType:"system_message",actorUserId:a.user.id,summary:l==="ru"?":  ":"Request: mismatch timestamp",payload:{messageId:A.id}})},children:l==="ru"?" ":"Request timestamp"}),n.jsx("button",{type:"button",className:"linkBtn",onClick:()=>{if(!m)return;const E=l==="ru"?"  ( ).":"Please provide source files (if available).",A=hs.addSystem({disputeId:m.id,text:E});Ns.add({disputeId:m.id,actionType:"system_message",actorUserId:a.user.id,summary:l==="ru"?": ":"Request: source files",payload:{messageId:A.id}})},children:l==="ru"?" ":"Request sources"}),n.jsx("button",{type:"button",className:"linkBtn",onClick:()=>{if(!m)return;const E=l==="ru"?"  ,    .":"Please clarify which requirement item you refer to.",A=hs.addSystem({disputeId:m.id,text:E});Ns.add({disputeId:m.id,actionType:"system_message",actorUserId:a.user.id,summary:l==="ru"?":   ":"Request: requirement item clarification",payload:{messageId:A.id}})},children:l==="ru"?"  ":"Clarify requirement"})]}):null,n.jsxs("form",{className:"disputeChatComposer",onSubmit:E=>{E.preventDefault();const A=C.trim();if(!A||!m)return;const le=a.user?.role==="arbiter"&&a.user.id===y.arbiterId&&D?"internal":"public",se=hs.add({disputeId:m.id,authorUserId:a.user.id,kind:le,text:A});k("");const be=v.taskId,Se=!!(m.assignedArbiterId&&m.assignedArbiterId===y.arbiterId),Ce=[y.customerId,y.executorId,...Se?[y.arbiterId]:[]].filter(Boolean);for(const ge of Ce)ge!==a.user.id&&(le==="internal"&&ge!==y.arbiterId||Fe.addDisputeMessage({recipientUserId:ge,actorUserId:a.user.id,taskId:be,disputeId:m.id,message:se.text}));Ns.add({disputeId:m.id,actionType:le==="internal"?"internal_comment":"public_message",actorUserId:a.user.id,summary:le==="internal"?l==="ru"?" ":"Internal comment":l==="ru"?"  ":"Dispute message",payload:{messageId:se.id}})},children:[a.user.role==="arbiter"&&a.user.id===y.arbiterId?n.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:8,opacity:.9},children:[n.jsx("input",{type:"checkbox",checked:D,onChange:E=>F(E.target.checked)}),l==="ru"?" (  )":"Internal (hidden from parties)"]}):null,n.jsx("textarea",{className:"disputeChatInput",value:C,onChange:E=>k(E.target.value),rows:3,placeholder:l==="ru"?" ":"Write a message"}),n.jsx("button",{className:"disputeChatSend",type:"submit",disabled:!C.trim(),children:l==="ru"?"":"Send"})]})]})]})}):n.jsx("main",{className:"disputeThreadPage",children:n.jsxs("div",{className:"disputeThreadContainer",children:[n.jsx("h1",{className:"disputeThreadTitle",children:l==="ru"?" ":"Access denied"}),n.jsx("div",{className:"disputeThreadHint",children:l==="ru"?"     .":"This dispute is available to its participants only."}),n.jsx("div",{style:{marginTop:10},children:n.jsx(xe,{to:K.profile,children:l==="ru"?" ":"Go to profile"})})]})}):n.jsx("main",{className:"disputeThreadPage",children:n.jsxs("div",{className:"disputeThreadContainer",children:[n.jsx("h1",{className:"disputeThreadTitle",children:l==="ru"?"":"Dispute"}),n.jsx("p",{style:{opacity:.85},children:n.jsx(xe,{to:K.login,children:l==="ru"?"":"Sign in"})})]})})}function jI(){const{locale:s}=lt(),a=Ut(),l=Qt();return h.useEffect(()=>{if(!a.isAuthenticated){l(K.login,{replace:!0});return}a.user?.role&&a.user.role!=="pending"&&l(K.tasks,{replace:!0})},[a.isAuthenticated,a.user?.role,l]),a.user?n.jsxs("div",{className:"authCard",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"authTitle",children:s==="ru"?" ":"Choose your role"}),n.jsx("p",{className:"authSubtitle",children:s==="ru"?" Telegram   ,    .  ,  .":"Telegram login does not include your app role. Choose a role to continue."})]}),n.jsxs("div",{className:"authRoleSwitch",role:"group","aria-label":s==="ru"?"":"Role",children:[n.jsx("button",{type:"button",className:"authRoleBtn",onClick:()=>{a.chooseRole("customer"),l(K.customerTasks,{replace:!0})},children:s==="ru"?"":"Customer"}),n.jsx("button",{type:"button",className:"authRoleBtn",onClick:()=>{a.chooseRole("executor"),l(K.tasks,{replace:!0})},children:s==="ru"?"":"Executor"})]})]}):null}function wI(){const s=Ut(),a=s.user?.role==="customer",l=s.user?.role==="executor",o=s.user?.role==="arbiter";return n.jsxs(nN,{children:[n.jsxs(wt,{element:n.jsx(_w,{}),children:[n.jsx(wt,{path:K.login,element:n.jsx(lj,{})}),n.jsx(wt,{path:K.forgotPassword,element:n.jsx(rj,{})}),n.jsx(wt,{path:K.chooseRole,element:n.jsx(jI,{})}),n.jsx(wt,{path:K.register,element:n.jsx(mj,{})}),n.jsx(wt,{path:K.verifyEmailSent,element:n.jsx(hj,{})}),n.jsx(wt,{path:K.verifyEmail,element:n.jsx(pj,{})})]}),n.jsxs(wt,{element:s.isAuthenticated&&s.user?.role==="pending"?n.jsx(fl,{to:K.chooseRole,replace:!0}):n.jsx(kw,{}),children:[n.jsx(wt,{path:K.profile,element:n.jsx(wS,{})}),n.jsx(wt,{path:K.profileEdit,element:n.jsx(AS,{})}),n.jsx(wt,{path:K.reviews,element:n.jsx(Ex,{})}),n.jsx(wt,{path:K.notifications,element:n.jsx(QS,{})}),n.jsx(wt,{path:K.violations,element:n.jsx(sI,{})}),n.jsx(wt,{path:K.disputes,element:o?n.jsx(fI,{}):n.jsx(fl,{to:K.profile,replace:!0})}),n.jsx(wt,{path:K.disputeThread,element:n.jsx(NI,{})}),n.jsx(wt,{path:K.userProfile,element:n.jsx(RS,{})}),n.jsx(wt,{path:K.userReviews,element:n.jsx(Ex,{})}),n.jsx(wt,{path:K.reportProfile,element:n.jsx(XS,{})}),n.jsx(wt,{path:K.tasks,element:a?n.jsx(fl,{to:K.customerTasks,replace:!0}):n.jsx(Rw,{})}),n.jsx(wt,{path:K.customerTasks,element:n.jsx(PS,{})}),n.jsx(wt,{path:K.customerArchive,element:n.jsx($S,{})}),n.jsx(wt,{path:K.customerReview,element:n.jsx(FS,{})}),n.jsx(wt,{path:K.customerRequests,element:n.jsx(WS,{})}),n.jsx(wt,{path:K.taskCreate,element:n.jsx(Vw,{})}),n.jsx(wt,{path:K.taskDetails,element:n.jsx(aS,{})}),n.jsx(wt,{path:K.taskEdit,element:n.jsx(cS,{})}),n.jsx(wt,{path:K.portfolio,element:n.jsx(HS,{})}),n.jsx(wt,{path:K.home,element:l?n.jsx(fl,{to:K.tasks,replace:!0}):n.jsx(Tx,{})}),n.jsx(wt,{path:"/home",element:l?n.jsx(fl,{to:K.tasks,replace:!0}):n.jsx(Tx,{})}),n.jsx(wt,{path:K.notFound,element:n.jsx(oj,{})})]})]})}function SI(){return n.jsx(wI,{})}const Bx={en:{"profile.edit":"Edit profile","profile.roleCustomer":"Client","profile.roleExecutor":"Contractor","profile.posted":"My posted briefs","profile.postedActive":"Active briefs","profile.postedCompleted":"Completed briefs","profile.takenBy":"taken by","profile.taken":"Taken briefs","profile.completed":"Completed briefs","profile.myTasks":"My tasks","profile.applications":"Applications","profile.applications.emptyNoTasks":"No active tasks yet. Post a task to start receiving applications.","profile.taskApplications.button":"Applications","profile.taskApplications.title":"Task responses","profile.taskApplications.subtitle":"{count} responses","profile.taskApplications.empty":"No responses yet","profile.taskApplications.assign":"Assign executor","profile.taskApplications.reject":"Reject","profile.viewTasks":"Manage tasks","customerTasks.title":"My tasks","customerTasks.search.placeholder":"Search tasks, categories, locations","customerTasks.search.hint":"   , ,   .","customerTasks.filterStatusLabel":"Status","customerTasks.status.all":"All","customerTasks.filterTasks":"Filters","customerTasks.sortLabel":"Sort","customerTasks.sort.new":"Newest first","customerTasks.sort.old":"Oldest first","customerTasks.archive.open":"Show archive","customerTasks.archive.close":"Hide archive","customerTasks.archive.title":"Archived tasks","customerTasks.archive.empty":"No archived tasks yet","customerTasks.archive.restore":"Restore","customerTasks.nav":"My tasks","customerTasks.titleHint":"View your briefs and responses in one place.","customerTasks.empty.noPublished":"You havent published any tasks yet.","profile.showAll":"Show all","profile.takeTask":"Take a brief","profile.noneYet":"Nothing here yet.","profile.stats.posted":"Posted briefs","profile.stats.active":"Active briefs","profile.stats.completed":"Completed briefs","profile.stats.uncompleted":"Uncompleted briefs","profile.stats.applications":"Applications","profile.stats.averageTime":"Avg time left","profile.balance.title":"Balance","profile.balance.subtitle":"Simulated top-ups keep your balance ready.","profile.balance.add":"Top up balance","profile.balance.placeholder":"Amount in USD","profile.balance.success":"Balance updated","profile.balance.reset":"Reset balance","profile.balance.resetSuccess":"Balance reset","profile.balance.error":"Please enter a positive amount","profile.balance.insufficient":"Insufficient balance to assign this executor.","profile.balance.withdraw":"Withdraw funds","profile.balance.withdrawSuccess":"Withdrawal completed","profile.balance.withdrawError":"Enter a positive amount to withdraw","profile.balance.executorHint":"See what you have earned and withdraw funds when ready.","profile.socials":"Social links","profile.socialsHelp.aria":"Help: social links","profile.socialsHelp.title":"Social links","profile.socialsHelp.text":["Add links to your public profiles so clients can quickly verify your presence.","","How to fill:","- paste a profile URL or @username","- make sure the link opens your profile","- after you add a link, attaching a short video is required","","In some cases, we may contact you via the social link you provided (for clarifications related to the platform).","","We do not publish anything automatically  these links are shown on your profile only."].join(`
`),"profile.socialsHelp.watchVideo":"Watch video","profile.socialsHelp.videoMissingHint":"Video is not uploaded yet","profile.socialsAttachVideo":"Attach video","profile.socialsAttachedVideo":"Attached video","profile.socialsVideoRequired":"Attach a video for each added link","profile.socialsSubmitForModeration":"Submit for moderation","profile.socialsSubmitRequiresPair":"Add at least one link and attach a video","profile.socialsModerationNothingError":"Add at least one social link and attach a video to submit for moderation.","profile.viewWorks":"View works","profile.worksTitle":"Works","profile.archivedTitle":"Archived briefs","profile.archivedHint":"Once 24h passed without engagement, these briefs move to the archive.","profile.repost":"Repost","profile.repostConfirm.title":"Repost task","profile.repostConfirm.text":"Are you sure you want to repost this task?","profile.addWorks":"Add my works","profile.workTitle":"Work title","profile.workDescription":"Work description","profile.workLink":"Video URL","profile.workSave":"Save work","profile.workEmpty":"No works yet. Upload a sample!","profile.workShowcase":"Works","profile.videoLink":"Open source video","profile.workTooLarge":"Video is too large. Pick a file under 2GB.","profile.workStorageFailed":"Could not store the file. Try a smaller video.","profile.workUpload":"Upload video file","profile.workUploading":"Preparing upload","profile.workUploadProgress":"Uploaded {loaded} / {total} MB","profile.workUploadProgressUnknown":"Uploaded {loaded} MB","profile.workRemove":"Remove file","profile.workUploadMany":"Upload files (multiple)","profile.workAddByLink":"Add work by link","profile.workQueue":"Works to add","profile.workQueueEmpty":"No works added yet.","profile.workSaveAll":"Save: {count}","profile.workSaving":"Uploading {current}/{total}","profile.workNoDescription":"No description","profile.workNeedMedia":"Add a file or a valid link","profile.workInvalidUrl":"Link must start with https:// (or http://)","profile.workTooLargeOne":"File {name} is too large (max 2 GB).","profile.workAddLinkToQueue":"Add link to queue","profile.workRemoveFromQueue":"Remove","profile.workDelete":"Delete work","profile.workDeleteConfirm":"Delete this work? This action cannot be undone.","profile.serverUnavailable":"Video upload server is offline. Start the backend to enable uploads.","profile.workMigrationFailed":"Unable to migrate existing works to the server.","profile.report":"Report profile","profile.reportSent":"Complaint recorded for {personalId}","profile.reportStep1":"Step 1  Choose a category","profile.reportStep2":"Step 2  Specify a reason","profile.reportDetailPlaceholder":"Describe what happened...","profile.submitReport":"Submit report","report.select.category":"Category","report.select.reason":"Reason","report.category.quality":"Work quality","report.category.violations":"Policy violations","report.category.safety":"Safety","report.category.task":"Task","report.category.general":"General","report.reason.not_done":"Work not delivered","report.reason.partial":"Only partially delivered","report.reason.low_quality":"Low quality result","report.reason.not_matching":"Does not match the brief","report.reason.miss_deadline":"Missed deadline without notice","report.reason.fraud":"Fraud / scam","report.reason.fake_account":"Suspected fake account","report.reason.plagiarism":"Plagiarism / stolen work","report.reason.bypass":"Attempt to bypass escrow / guarantees","report.reason.offensive":"Insults / threats","report.reason.inappropriate":"Inappropriate content","report.reason.unclear":"Unclear / misleading description","report.reason.illegal":"Illegal / impossible requirements","report.reason.spam":"Spam","report.reason.suspicious_activity":"Suspicious activity","report.reason.platform_violation":"Platform rules violation","report.reason.other":"Other","video.unsupported":"This video format is not supported by your browser. Try uploading MP4 (H.264).","profile.socialsHint":"Paste a profile URL or username.","profile.socialsButton":"Add social links","profile.socialsModalTitle":"Social links","profile.avatar.upload":"Upload avatar","profile.avatar.change":"Change","profile.avatar.hint":"Click to upload","profile.personalIdLabel":"Personal ID","profile.executorIdLabel":"Executor ID","task.actions.take":"Take this brief","task.actions.apply":"Submit application","task.actions.assign":"Assign","task.actions.reject":"Reject","task.applications.title":"Applications","task.application.placeholder":"Tell the customer what you deliver...","task.actions.complete":"Mark as completed","task.actions.publishNow":"Publish now","task.actions.refuse":"Refuse","task.actions.refuseConfirm":"Refuse this brief? It will become available to others.","task.actions.signInToTake":"Sign in as a contractor to take this brief.","task.actions.onlyClientsCanPost":"Only clients can post tasks.","task.actions.signInToPost":"Sign in to post a video brief.","task.meta.postedBy":"Posted by","task.meta.postedByYou":"Posted by you","task.meta.takenByYou":"Taken by you","task.meta.assigned":"Assigned","task.completionLink":"Final video link","task.completionLink.required":"Please provide a video link before completing.","task.completionDeliverable":"Deliverable","task.completionUpload":"Upload final video","task.completionUpload.required":"Please upload a video file before completing.","task.completionUpload.invalid":"Please choose a video file.","task.actions.delete":"Delete","task.actions.deleteConfirm":"Delete this video brief? This action cannot be undone.","notifications.title":"Notifications","notifications.empty":"No notifications yet.","notifications.someone":"Someone","notifications.taskApplicationPrefix":"Someone applied to your brief","notifications.taskApplicationCancelledPrefix":"Your application was cancelled","notifications.taskTakenPrefix":"Your brief was taken","notifications.taskAssignedPrefix":"You were assigned to","notifications.taskCompletedPrefix":"Your brief was completed","notifications.taskUnclaimedPrefix":"No one claimed your brief yet","notifications.taskExecutorNoStartPrefix":"did not start work within 12 hours (assignment removed)","notifications.taskExecutorOverduePrefix":"missed the execution deadline (24 hours)","notifications.violationPrefix":"Violation","notifications.sanctionPrefix":"Sanction","notifications.violation.noStart12h":"Did not start work within 12 hours after assignment","notifications.violation.noSubmit24h":"Did not submit work within 24 hours after starting","notifications.sanction.warning":"Warning","notifications.sanction.ratingPenalty":"Rating penalty {delta}%","notifications.sanction.respondBlock":"Applications blocked for {hours} hours (until {until})","notifications.sanction.ban":"Account banned","notifications.taskAssignedElsePrefix":"Another executor was chosen for the brief","notifications.taskSubmittedPrefix":"A completed brief was submitted","notifications.taskApprovedPrefix":"Your completed brief was approved","notifications.taskRevisionPrefix":"Revision requested","notifications.taskPauseRequestedPrefix":"Pause requested","notifications.taskPauseAcceptedPrefix":"Pause accepted","notifications.taskPauseRejectedPrefix":"Pause rejected","notifications.executorViolationWarningPrefix":"Violation recorded","notifications.executorViolationRatingPenaltyPrefix":"Violation recorded","notifications.executorViolationRespondBlockPrefix":"Violation recorded","notifications.executorViolationBanPrefix":"Violation recorded","notifications.viewProfile":"View profile","notifications.viewTask":"View brief","notifications.clearAll":"Clear all","notifications.markAllRead":"Mark all as read","notifications.showAll":"Show all","notifications.showLess":"Show less","notifications.viewAll":"All notifications","notifications.filter.all":"All","notifications.filter.unread":"Unread","notifications.unreadCount":"Unread: {count}","nav.tasks":"Tasks","nav.postTask":"Create task","nav.myTasks":"My tasks","nav.profile":"Profile","nav.portfolio":"Portfolio","nav.home":"Home","nav.archive":"Archive","auth.signUp":"Sign up","auth.signIn":"Sign in","auth.signOut":"Sign out","auth.authorization":"Log in","auth.profile":"Profile","auth.email":"Email","auth.password":"Password","auth.noAccount":"No account?","auth.noAccountJoin":"No account? Join as","auth.joinAsCustomer":"client","auth.joinAsExecutor":"contractor","auth.or":"or","auth.rememberMe":"Remember me","auth.forgotPassword":"Forgot password?","auth.signInWithGoogle":"Sign in with Google","auth.forgotPasswordHint":"Enter the email you used during registration. We will show next steps.","auth.sendLink":"Continue","auth.forgotPasswordSent":"If an account exists for this email, you will see next steps here.","auth.backToLogin":"Back to sign in","auth.fillRequired":"Please fill in email and password.","auth.invalidCredentials":"Invalid email or password.","auth.emailNotVerified":"Please verify your email before signing in.","auth.emailTaken":"This email is already in use. Please sign in to your existing account.","auth.emailPending":"This email is already in the verification process. Please check your inbox or resend the email.","auth.genericError":"Something went wrong. Please try again.","auth.login.subtitle":"Welcome back. Sign in to continue.","auth.register.subtitle":"Create an account in under a minute.","auth.forgot.subtitle":"Enter your email and we will show next steps.","account.switch":"Switch account","account.add":"Add account","dev.mode":"Dev mode","dev.deleteAny":"Delete any brief","dev.on":"ON","dev.off":"OFF","home.welcome":"Welcome. Clients post video ideas and contractors create videos for different social platforms.","home.goToSignIn":"Go to sign in","home.browseTasks":"Browse tasks","home.search.title":"Search briefs","home.search.placeholder":"Try: TikTok, UGC, coffee, 3 tips","home.search.empty":"No matches.","register.title":"Sign up","register.roleLabel":"Role","register.role.client":"Client","register.role.contractor":"Contractor","register.fullName":"Full name","register.phone":"Phone","register.email":"Email","register.password":"Password","register.passwordConfirm":"Confirm password","register.company":"Company","common.optional":"(optional)","register.submit":"Create account","register.haveAccount":"Already have an account?","register.signInLink":"Sign in","register.alertPlaceholder":"Sign up: placeholder. Data has been logged to the console.","verifyEmail.sent.title":"Verify your email","verifyEmail.sent.subtitle":"We sent a verification email. Open the link from the email to confirm your address.","verifyEmail.sent.resend":"Resend email","verifyEmail.sent.toLogin":"Go to login","verifyEmail.verify.title":"Email verification","verifyEmail.verify.subtitle":"We are verifying your email address.","verifyEmail.verify.loading":"Verifying","login.title":"Sign in","login.placeholder":"Sign-in page placeholder.","common.backHome":"Back to home","validation.fullNameRequired":"Full name is required","validation.phoneRequired":"Phone number is required","validation.emailRequired":"Email is required","validation.emailInvalid":"Enter a valid email","validation.phoneInvalid":"Enter a valid phone number","validation.passwordRequired":"Password is required","validation.passwordMinLength":"Password must be at least 8 characters","validation.passwordConfirmRequired":"Please confirm your password","validation.passwordsDoNotMatch":"Passwords do not match","tasks.title":"Tasks","tasks.subtitle":"Browse video ideas from clients. Open details for full requirements and deliverables.","tasks.sortLabel":"Sort","tasks.customerLanding.title":"Create your next video brief","tasks.customerLanding.subtitle":"Customers manage their briefs through the   link in the header and profile. Publishing is still one click away.","tasks.customerLanding.create":"Create a task","tasks.customerLanding.manage":"Open  ","tasks.search.title":"Filter briefs","tasks.empty":"No tasks yet.","tasks.postFirst":"Post the first video brief","tasks.back":"Back to tasks","portfolio.subtitle":"Browse the contractors showcase.","portfolio.carouselTitle":"Work carousel","portfolio.carouselPrev":"Previous work","portfolio.carouselNext":"Next work","portfolio.noWorks":"No works uploaded yet.","portfolio.completedTasksTitle":"Completed assignments","portfolio.completedTasksNone":"No completed assignments yet.","portfolio.executorCompletedHint":"Completed briefs by this contractor.","portfolio.customerCompletedHint":"Completed assignments from this customer.","portfolio.showDetails":"Show details","portfolio.hideDetails":"Hide details","portfolio.completionLinkLabel":"Completion link","portfolio.noCompletionLink":"No link provided","portfolio.viewTask":"View task","portfolio.notFoundTitle":"Portfolio not found","portfolio.notFoundHint":"This creator has not shared any work yet.","portfolio.mediaTypeLabel":"Media type","portfolio.mediaTypeVideo":"Video","portfolio.mediaTypePhoto":"Photo","portfolio.empty":"No works published yet.","portfolio.videoLink":"Open source video","portfolio.externalWorksTitle":"Works from other platforms","tasks.due":"Due","tasks.filters":"Filters","tasks.filters.anyCategory":"Any platform","tasks.filters.anyFormat":"Any format","tasks.published":"Published","tasks.created":"Created","tasks.timeLeft":"Time left","tasks.expired":"Expired","tasks.viewDetails":"View details","tasks.sort.cheapest":"Cheapest","tasks.sort.expensive":"Most expensive","tasks.search.placeholder":"Search by keywords","tasks.search.empty":"No matches.","tasks.myActive.title":"Your active tasks","tasks.market.title":"Client tasks","tasks.banned.title":"Account blocked","tasks.banned.text":"Your account is blocked. Tasks are not available.","task.status.open":"open","task.status.draft":"draft","task.status.waiting":"waiting","task.status.inProgress":"in progress","task.status.review":"in review","task.status.dispute":"dispute","task.status.closed":"completed","task.status.archived":"archived","executor.status.approved":"approved","executor.status.inWork":"in work","executor.status.paused":"paused","executor.status.removed":"removed","executor.status.overdue":"overdue","executor.status.cancelledByCustomer":"cancelled by customer","executor.status.disputeOpened":"dispute opened","executor.status.pendingStart":"pending start","executor.status.pauseRequested":"pause requested","customerReview.title":"In review","customerReview.subtitle":"Completed briefs submitted by executors for your approval.","customerReview.empty":"No briefs awaiting review.","customerReview.approve":"Approve","customerReview.revision":"Request revision","customerReview.submitted":"Submitted","customerReview.backToMyTasks":"Back to my tasks","customerReview.onlyCustomer":"This page is available to clients only.","customerRequests.title":"Requests","customerRequests.subtitle":"Pause requests from executors.","customerRequests.empty":"No requests yet.","customerRequests.backToMyTasks":"Back to my tasks","customerRequests.onlyCustomer":"This page is available to clients only.","customerRequests.accept":"Accept pause","customerRequests.reject":"Reject","task.create.title":"Post a video brief","task.create.titleField":"Video title","task.create.shortDescription":"Brief","task.create.fullDescription":"Full requirements","task.create.category":"Platform","task.create.location":"Format","task.create.budgetAmount":"Budget amount","task.create.currency":"Currency","task.create.dueDate":"Due date","task.create.publish":"Publish","task.create.maxExecutors":"Executors needed","task.create.maxExecutors.hint":"Maximum number of contractors this brief should recruit.","task.create.maxExecutors.placeholder":"Choose desired number of executors","task.create.expiresIn":"Listing duration","common.cancel":"Cancel","common.yes":"Yes","common.no":"No","toast.applied":"You applied to the task.","toast.submitted":"Work sent to the client.","toast.pauseRequested":"Pause request sent.","toast.pauseAccepted":"Pause accepted.","toast.pauseRejected":"Pause rejected.","toast.executorAssigned":"Executor assigned.","toast.applicationRejected":"Application rejected.","toast.revisionRequested":"Revision requested.","toast.workApproved":"Work approved.","toast.taskPublished":"Task published.","toast.workStarted":"Work started.","task.create.placeholder.title":"e.g. 3 tips style video about our product","task.create.placeholder.short":"One sentence that will be shown in the list.","task.create.placeholder.full":"Goal, key points, tone, references, call-to-action, length, aspect ratio, deliverables, etc.","task.create.placeholder.category":"e.g. TikTok, Instagram Reels, YouTube Shorts","task.create.placeholder.location":"e.g. 9:16, talking head, UGC, motion graphics","task.create.placeholder.amount":"e.g. 300","task.create.placeholder.currency":"USD","validation.taskTitleRequired":"Title is required","validation.taskShortRequired":"Short description is required","validation.taskRequirementsRequired":"Requirements are required","validation.taskFullRequired":"Description is required","validation.maxExecutorsRequired":"Specify how many executors you need","validation.invalidDate":"Invalid date","validation.taskTitleLength":"Title must be 60 characters or less","validation.taskShortLength":"Description is too long","validation.taskRequirementsLength":"Requirements are too long","validation.taskFullLength":"Description must be 1000 characters or less","validation.budgetRequired":"Budget is required","validation.budgetInvalid":"Enter a number, decimals with a comma (e.g. 199,99)","validation.budgetTooLarge":"Budget is too large (max {max} {currency}).","validation.currencyRequired":"Currency is required","validation.expiresInRequired":"Listing duration is required","validation.expiresInRange":"Choose a valid listing duration","validation.maxExecutorsRange":"Choose 110 executors","task.details.notFound":"Task not found","task.details.backToTasks":"Back to tasks","customerTasks.archive.backToTasks":"To my tasks","task.details.back":"Back","task.details.description":"Description","task.details.postAnother":"Post another video brief","task.details.edit":"Edit task","tasks.budget":"Budget","tasks.payout":"Payout","task.edit.title":"Edit task","task.edit.section.en":"English","task.edit.section.ru":"Russian","task.edit.save":"Save","notFound.title":"Page not found.","footer.tagline":"A lightweight demo marketplace for video briefs.","profile.myViolations":"My violations","violations.title":"Violations","violations.empty":"No violations yet.","violations.subtitle":"Shows violations for the last 360 days.","violations.col.date":"Date","violations.col.task":"Task","violations.col.reason":"Reason","violations.col.sanction":"Sanction","violations.reason.noStart12h":"Did not start work within 12 hours after assignment","violations.reason.noSubmit24h":"Did not submit work within 24 hours after starting","violations.sanction.warning":"Warning","violations.sanction.ratingPenalty5":"Rating penalty: -5%","violations.sanction.block24h":"Applications blocked for 24 hours","violations.sanction.block72h":"Applications blocked for 72 hours","violations.sanction.ban":"Account banned","violations.help.buttonLabel":"What does this mean?","violations.help.title":"Violations and sanctions","violations.help.p1":"This page shows recorded violations for your account. Violations are triggered automatically by background checks. Points decay by 1 every 90 days without new violations (e.g. 4  after 90 days becomes 3). A new violation increases the points again (e.g. 3  4). If your account gets banned, it is permanent.","violations.help.violation.noStart12h":"Not starting work within 12 hours after being assigned to a task.","violations.help.violation.noSubmit24h":"Not submitting work within 24 hours after starting.","violations.help.sanctionsTitle":"Sanctions scale:","violations.help.sanctions.warning":"1st time  warning.","violations.help.sanctions.ratingPenalty":"2nd time  rating penalty: -5%.","violations.help.sanctions.block24":"3rd time  applications blocked for 24 hours.","violations.help.sanctions.block72":"4th time  applications blocked for 72 hours.","violations.help.sanctions.ban":"5th time  account ban (permanent)."},ru:{"profile.edit":" ","profile.roleCustomer":"","profile.roleExecutor":"","profile.posted":" ","profile.postedActive":"","profile.postedCompleted":"","profile.takenBy":"()","profile.taken":"","profile.completed":"","profile.myTasks":" ","profile.applications":"","profile.applications.emptyNoTasks":"  .  ,   .","profile.taskApplications.button":"","profile.taskApplications.title":"  ","profile.taskApplications.subtitle":": {count}","profile.taskApplications.empty":"   .","profile.taskApplications.assign":"","profile.taskApplications.reject":"","profile.viewTasks":" ","customerTasks.title":" ","customerTasks.search.placeholder":"  , , ","customerTasks.search.hint":"   , ,   .","customerTasks.filterStatusLabel":"","customerTasks.status.all":"","customerTasks.filterTasks":"","customerTasks.sortLabel":"","customerTasks.sort.new":" ","customerTasks.sort.old":" ","customerTasks.archive.open":" ","customerTasks.archive.close":" ","customerTasks.archive.title":" ","customerTasks.archive.empty":"  .","customerTasks.archive.restore":"  ","customerTasks.nav":" ","customerTasks.titleHint":"      .","customerTasks.empty.noPublished":"     .","profile.showAll":" ","profile.takeTask":" ","profile.noneYet":" .","profile.stats.posted":"","profile.stats.active":"","profile.stats.completed":"","profile.stats.uncompleted":"","profile.stats.applications":"","profile.stats.averageTime":"  ","profile.balance.title":"","profile.balance.subtitle":"      .","profile.balance.add":" ","profile.balance.placeholder":"  RUB","profile.balance.success":" ","profile.balance.reset":" ","profile.balance.resetSuccess":" ","profile.balance.error":"  ","profile.balance.insufficient":"     .","profile.balance.withdraw":" ","profile.balance.withdrawSuccess":" ","profile.balance.withdrawError":"    ","profile.balance.executorHint":"    ,  .","profile.socials":"","profile.socialsHelp.aria":":  ","profile.socialsHelp.title":" ","profile.socialsHelp.text":["     ,       .",""," :","-      @username","- ,     ","-       ","","            ,     .","","           ."].join(`
`),"profile.socialsHelp.watchVideo":" ","profile.socialsHelp.videoMissingHint":"   ","profile.socialsAttachVideo":" ","profile.socialsAttachedVideo":" ","profile.socialsVideoRequired":"     ","profile.socialsSubmitForModeration":"  ","profile.socialsSubmitRequiresPair":"         ","profile.socialsModerationNothingError":"   ,            .","profile.viewWorks":"  ","profile.worksTitle":"","profile.archivedTitle":"","profile.archivedHint":"      .","profile.repost":" ","profile.repostConfirm.title":" ","profile.repostConfirm.text":" ,     ?","profile.addWorks":"  ","profile.workTitle":" ","profile.workDescription":" ","profile.workLink":"  ","profile.workSave":" ","profile.workEmpty":"    .","profile.workShowcase":"","profile.videoLink":"  ","profile.workTooLarge":"  .    2.","profile.workStorageFailed":"   .   .","profile.workUpload":" ","profile.workUploading":" ","profile.workUploadProgress":" {loaded} / {total} ","profile.workUploadProgressUnknown":" {loaded} ","profile.workRemove":" ","profile.workUploadMany":"  ()","profile.workAddByLink":"  ","profile.workQueue":"  ","profile.workQueueEmpty":"     .","profile.workSaveAll":": {count}","profile.workSaving":" {current}/{total}","profile.workNoDescription":" ","profile.workNeedMedia":"    ","profile.workInvalidUrl":"    https:// ( http://)","profile.workTooLargeOne":" {name}   (. 2 ).","profile.workAddLinkToQueue":"   ","profile.workRemoveFromQueue":"","profile.workDelete":" ","profile.workDeleteConfirm":"  ?  .","profile.serverUnavailable":"  .  backend,   .","profile.workMigrationFailed":"      .","profile.report":"","profile.reportSent":"    ({personalId})","profile.reportStep1":" 1   ","profile.reportStep2":" 2   ","profile.reportDetailPlaceholder":" ...","profile.submitReport":" ","report.select.category":"","report.select.reason":"","report.category.quality":"   ","report.category.violations":" ","report.category.safety":"","report.category.task":"","report.category.general":" ","report.reason.not_done":"  ","report.reason.partial":"  ","report.reason.low_quality":"  ","report.reason.not_matching":"   ","report.reason.miss_deadline":"   ","report.reason.fraud":" / ","report.reason.fake_account":"   ","report.reason.plagiarism":"   ()","report.reason.bypass":"   ","report.reason.offensive":", ","report.reason.inappropriate":" ","report.reason.unclear":" /    ","report.reason.illegal":"   ","report.reason.spam":"","report.reason.suspicious_activity":" ","report.reason.platform_violation":"  ","report.reason.other":"","video.unsupported":"      .  MP4 (H.264).","profile.socialsHint":"     username.","profile.socialsButton":"  ","profile.socialsModalTitle":" ","profile.avatar.upload":" ","profile.avatar.change":"","profile.avatar.hint":",  ","profile.personalIdLabel":" ID","profile.executorIdLabel":"ID ","task.actions.take":" ","task.actions.apply":"","task.actions.assign":"","task.actions.reject":"","task.applications.title":"","task.application.placeholder":" ,    ...","task.actions.complete":" ","task.actions.publishNow":" ","task.actions.refuse":"","task.actions.refuseConfirm":"  ?      .","task.actions.signInToTake":"  ,    .","task.actions.onlyClientsCanPost":"    .","task.actions.signInToPost":",   -.","task.meta.postedBy":"","task.meta.postedByYou":" ","task.meta.takenByYou":" ","task.meta.assigned":"","task.completionLink":"  ","task.completionLink.required":"   ,   .","task.completionDeliverable":"","task.completionUpload":" ","task.completionUpload.required":" ,   .","task.completionUpload.invalid":" .","task.actions.delete":"","task.actions.deleteConfirm":"  -?  .","notifications.title":"","notifications.empty":"  .","notifications.someone":"-","notifications.taskApplicationPrefix":"  ","notifications.taskApplicationCancelledPrefix":"  ","notifications.taskTakenPrefix":" ","notifications.taskAssignedPrefix":"   ","notifications.taskCompletedPrefix":" ","notifications.taskUnclaimedPrefix":"    ","notifications.taskExecutorNoStartPrefix":"     12  ( )","notifications.taskExecutorOverduePrefix":"   (24 )","notifications.violationPrefix":"","notifications.sanctionPrefix":"","notifications.violation.noStart12h":"     12   ","notifications.violation.noSubmit24h":"     24   ","notifications.sanction.warning":"","notifications.sanction.ratingPenalty":"   {delta}%","notifications.sanction.respondBlock":"   {hours}  ( {until})","notifications.sanction.ban":" ","notifications.taskAssignedElsePrefix":"  ","notifications.taskSubmittedPrefix":" ","notifications.taskApprovedPrefix":" ","notifications.taskRevisionPrefix":" ","notifications.taskPauseRequestedPrefix":" ","notifications.taskPauseAcceptedPrefix":" ","notifications.taskPauseRejectedPrefix":" ","notifications.executorViolationWarningPrefix":" ","notifications.executorViolationRatingPenaltyPrefix":" ","notifications.executorViolationRespondBlockPrefix":" ","notifications.executorViolationBanPrefix":" ","notifications.viewProfile":"","notifications.viewTask":" ","notifications.clearAll":" ","notifications.markAllRead":"  ","notifications.showAll":" ","notifications.showLess":"","notifications.viewAll":" ","notifications.filter.all":"","notifications.filter.unread":"","notifications.unreadCount":": {count}","nav.tasks":"","nav.postTask":" ","nav.myTasks":" ","nav.profile":"","nav.portfolio":"","nav.home":"","nav.archive":"","auth.signUp":"","auth.signIn":"","auth.signOut":"","auth.authorization":"","auth.profile":"","auth.email":"Email","auth.password":"","auth.noAccount":" ?","auth.noAccountJoin":" ?  ","auth.joinAsCustomer":"","auth.joinAsExecutor":"","auth.or":"","auth.rememberMe":" ","auth.forgotPassword":" ?","auth.signInWithGoogle":"  Google","auth.forgotPasswordHint":" email,    .","auth.sendLink":"","auth.forgotPasswordSent":"    email ,    .","auth.backToLogin":"  ","auth.fillRequired":" email  .","auth.invalidCredentials":" email  .","auth.emailNotVerified":"         .","auth.emailTaken":" email  .    .","auth.emailPending":"   email  .       .","auth.genericError":"-   .   .","auth.login.subtitle":" . ,  .","auth.register.subtitle":"   .","auth.forgot.subtitle":" email      .","account.switch":" ","account.add":" ","dev.mode":"Dev mode","dev.deleteAny":"  ","dev.on":"","dev.off":"","home.welcome":" .     ,       .","home.goToSignIn":"  ","home.browseTasks":" ","home.search.title":" ","home.search.placeholder":": TikTok, UGC, , 3 ","home.search.empty":"  .","register.title":"","register.roleLabel":"","register.role.client":"","register.role.contractor":"","register.fullName":"","register.phone":"","register.email":"Email","register.password":"","register.passwordConfirm":" ","register.company":"","common.optional":"()","register.submit":" ","register.haveAccount":"  ?","register.signInLink":"","register.alertPlaceholder":": .    .","verifyEmail.sent.title":" ","verifyEmail.sent.subtitle":"      .  ,   .","verifyEmail.sent.resend":"   ","verifyEmail.sent.toLogin":"  ","verifyEmail.verify.title":" ","verifyEmail.verify.subtitle":"  .","verifyEmail.verify.loading":"","login.title":"","login.placeholder":"  .","common.backHome":" ","validation.fullNameRequired":" ","validation.phoneRequired":"  ","validation.emailRequired":" email","validation.emailInvalid":"  email","validation.phoneInvalid":"   ","validation.passwordRequired":" ","validation.passwordMinLength":"     8 ","validation.passwordConfirmRequired":" ","validation.passwordsDoNotMatch":"  ","tasks.title":"","tasks.subtitle":"     .  ,     .","tasks.customerLanding.title":"  -","tasks.customerLanding.subtitle":"          .      .","tasks.customerLanding.create":" ","tasks.customerLanding.manage":"  ","tasks.search.title":"","tasks.empty":"  -.","tasks.postFirst":"  -","tasks.back":"  ","portfolio.subtitle":" .","portfolio.carouselTitle":" ","portfolio.carouselPrev":" ","portfolio.carouselNext":" ","portfolio.noWorks":"  .","portfolio.completedTasksTitle":" ","portfolio.completedTasksNone":"   .","portfolio.executorCompletedHint":"  .","portfolio.customerCompletedHint":"   .","portfolio.showDetails":" ","portfolio.hideDetails":" ","portfolio.completionLinkLabel":" ","portfolio.noCompletionLink":"  ","portfolio.viewTask":" ","portfolio.notFoundTitle":"  ","portfolio.notFoundHint":"      .","portfolio.mediaTypeLabel":" ","portfolio.mediaTypeVideo":"","portfolio.mediaTypePhoto":"","portfolio.empty":"   .","portfolio.videoLink":"  ","portfolio.externalWorksTitle":"   ","tasks.due":"","tasks.filters":"","tasks.filters.anyCategory":" ","tasks.filters.anyFormat":" ","tasks.published":"","tasks.created":"","tasks.timeLeft":"","tasks.expired":" ","tasks.viewDetails":"","tasks.sort.cheapest":" ","tasks.sort.expensive":" ","tasks.sortLabel":"","tasks.search.placeholder":"   ","tasks.search.empty":"  .","tasks.myActive.title":"  ","tasks.market.title":" ","tasks.banned.title":" ","tasks.banned.text":"  .   .","task.status.open":"","task.status.draft":"","task.status.waiting":"","task.status.inProgress":" ","task.status.review":" ","task.status.dispute":"","task.status.closed":"","task.status.archived":" ","executor.status.approved":"","executor.status.inWork":" ","executor.status.paused":"","executor.status.removed":"","executor.status.overdue":"","executor.status.cancelledByCustomer":" ","executor.status.disputeOpened":" ","executor.status.pendingStart":" ","executor.status.pauseRequested":" ","customerReview.title":" ","customerReview.subtitle":",      .","customerReview.empty":"    .","customerReview.approve":"","customerReview.revision":" ","customerReview.submitted":"","customerReview.backToMyTasks":"  ","customerReview.onlyCustomer":"   .","customerRequests.title":"","customerRequests.subtitle":"    .","customerRequests.empty":"  .","customerRequests.backToMyTasks":"  ","customerRequests.onlyCustomer":"   .","customerRequests.accept":" ","customerRequests.reject":"","task.create.title":" ","task.create.titleField":"","task.create.shortDescription":"","task.create.fullDescription":" ","task.create.category":"","task.create.location":"","task.create.budgetAmount":"","task.create.currency":"","task.create.dueDate":"","task.create.publish":"","task.create.maxExecutors":" ","task.create.maxExecutors.hint":"      ?","task.create.maxExecutors.placeholder":"   ","task.create.expiresIn":" ","common.cancel":"","common.yes":"","common.no":"","toast.applied":"   .","toast.submitted":"  .","toast.pauseRequested":"  .","toast.pauseAccepted":" .","toast.pauseRejected":" .","toast.executorAssigned":" .","toast.applicationRejected":" .","toast.revisionRequested":" .","toast.workApproved":" .","toast.taskPublished":" .","toast.workStarted":" .","task.create.placeholder.title":": 3    ","task.create.placeholder.short":" ,     .","task.create.placeholder.full":",  , , , CTA, ,  ,    ..","task.create.placeholder.category":": TikTok, Reels, Shorts","task.create.placeholder.location":": 9:16, talking head, UGC, ","task.create.placeholder.amount":": 300","task.create.placeholder.currency":"RUB","validation.taskTitleRequired":" ","validation.taskShortRequired":"  ","validation.taskRequirementsRequired":" ","validation.taskFullRequired":" ","validation.maxExecutorsRequired":",   ","validation.invalidDate":" ","validation.taskTitleLength":":  60 ","validation.taskShortLength":"  ","validation.taskRequirementsLength":"  ","validation.taskFullLength":":  1000 ","validation.budgetRequired":" ","validation.budgetInvalid":" ,    ( 199,99)","validation.budgetTooLarge":"   (. {max} {currency}).","validation.currencyRequired":" ","validation.expiresInRequired":"  ","validation.expiresInRange":"   ","validation.maxExecutorsRange":" : 110","task.details.notFound":"  ","task.details.backToTasks":"  ","customerTasks.archive.backToTasks":"  ","task.details.back":"","task.details.description":"","task.details.postAnother":" ","task.details.edit":" ","tasks.budget":"","tasks.payout":"","task.edit.title":" ","task.edit.section.en":"English","task.edit.section.ru":"","task.edit.save":"","notFound.title":"  .","footer.tagline":"  .","profile.myViolations":" ","violations.title":"","violations.empty":"  .","violations.subtitle":"    360 .","violations.col.date":"","violations.col.task":"","violations.col.reason":"","violations.col.sanction":"","violations.reason.noStart12h":" ()     12   ","violations.reason.noSubmit24h":" ()    24   ","violations.sanction.warning":"","violations.sanction.ratingPenalty5":"  : -5%","violations.sanction.block24h":"   24 ","violations.sanction.block72h":"   72 ","violations.sanction.ban":" ","violations.help.buttonLabel":"  ?","violations.help.title":"  ","violations.help.p1":"     .     .     1  90     (:  4   90   3).      (: 3  4).   ,      .","violations.help.violation.noStart12h":"      12     .","violations.help.violation.noSubmit24h":"     24   .","violations.help.sanctionsTitle":" :","violations.help.sanctions.warning":"1-   .","violations.help.sanctions.ratingPenalty":"2-     : -5%.","violations.help.sanctions.block24":"3-      24 .","violations.help.sanctions.block72":"4-      72 .","violations.help.sanctions.ban":"5-     ()."}},Gy="ui-create-works.locale.v1";function II(){const s=localStorage.getItem(Gy);return s==="en"||s==="ru"?s:(navigator.language||"").toLowerCase().startsWith("ru")?"ru":"en"}function AI({children:s}){const[a,l]=h.useState(()=>II()),o=h.useCallback(p=>{l(p),localStorage.setItem(Gy,p)},[]),u=h.useCallback((p,m)=>{const v=Bx[a][p]??Bx.en[p]??p;return m?v.replace(/\{(\w+)\}/g,(x,y)=>{const b=m[y];return b==null?`{${y}}`:String(b)}):v},[a]),f=h.useMemo(()=>({locale:a,setLocale:o,t:u}),[a,o,u]);return n.jsx(ny.Provider,{value:f,children:s})}function Lx(s){return s instanceof Error?{message:s.message,stack:s.stack}:{message:String(s)}}function TI(){window.addEventListener("error",s=>{const a={message:s.message,filename:s.filename,lineno:s.lineno,colno:s.colno,...s.error?{error:Lx(s.error)}:null};Dr("GLOBAL_ERROR",a)}),window.addEventListener("unhandledrejection",s=>{Dr("UNHANDLED_REJECTION",{reason:Lx(s.reason)})})}class EI extends h.Component{state={hasError:!1};static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(a,l){Dr("REACT_ERROR_BOUNDARY",{error:a instanceof Error?{message:a.message,stack:a.stack}:{message:String(a)},info:typeof l=="object"?l:{info:String(l)}})}render(){return this.state.hasError?n.jsxs("div",{style:{padding:16,fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, sans-serif"},children:[n.jsx("h2",{style:{margin:"0 0 8px"},children:"-   "}),n.jsx("p",{style:{margin:0,opacity:.8},children:" .      ."})]}):this.props.children}}bj("dark");TI();i_.createRoot(document.getElementById("root")).render(n.jsx(h.StrictMode,{children:n.jsx(AI,{children:n.jsx(ij,{children:n.jsx(Zw,{children:n.jsx(TN,{children:n.jsx(EI,{children:n.jsx(SI,{})})})})})})}));
